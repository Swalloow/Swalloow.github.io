{"componentChunkName":"component---src-templates-posts-js","path":"/7","result":{"data":{"allContentfulPost":{"edges":[{"node":{"title":"Kafka Connect로 S3에 데이터를 저장해보자","id":"23b4638b-e66d-5c9f-8991-cf5a0965756b","slug":"kafka-connect","publishDate":"November 16, 2018","heroImage":{"title":"cover-dataengineering","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&q=50&fm=webp 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&q=50&fm=webp 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(min-width: 1600px) 1600px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&fl=progressive&q=50&fm=jpg 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&fl=progressive&q=50&fm=jpg 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg 1600w","sizes":"(min-width: 1600px) 1600px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgb/xAAcEAACAgMBAQAAAAAAAAAAAAAAAQIREiExYeH/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDK1DF0vgtxW9EylQu8nTotmo+gHfAEP//Z"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":4,"html":"<p>Kafka에는 정말 유용한 컴포넌트들이 존재합니다.\n오늘은 그 중 하나인 Kafka-Connect에 대해 알아보고,\nConfluent에서 제공하는 Kafka-Connect-S3를 활용하여\nS3로 데이터를 저장하는 방법에 대해 정리해보려고 합니다.</p>\n<br>\n<h2 id=\"kafka-connect\" style=\"position:relative;\"><a href=\"#kafka-connect\" aria-label=\"kafka connect permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka Connect</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 58.57142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAIAAAD2sJpCAAAACXBIWXMAABcSAAAXEgFnn9JSAAAAB3RJTUUH6AEUCgUXJ+suYwAABFxJREFUSMe9VVtvGkcU5ldHqlS1ah8sNS9toqhNVal1m9i52LVjx8TB3GIb1oGAAeM1sMawwLIsu+yFvc1lbx18BezY2A8djUbamTPn2+9855wJBV8Znt139aZn8T6Ufah6thDMNjzTBCcN2O6gDgfZlquqnmFcNwt97T4W87X0fJVaaDH7At/2oRL4/izAqCe01t8XFl8V3i6VFl9ZNH1f4Kx6HB5W3wxrKyb/xbN6QTATsCPL2s5uP56orKyK0ZhdY0gM7gHsGu0qXSzsvMptPa9kVh25NHuo+VaLzuXyyWQ5leo1GvcDJtJCCG1DJmIHvuMjBWPgAckzORcZnudNWvvnQvg+byjIMpVez7MsAkmmj/FswB4aecAG0fU0s04nEI+SPxXXH9Hhb1qJ74AhXYF63vHGBhuPsxTFxGNi/ksw+Vue67oITQMTWhhjcuT7xIPnuxC3NoizawHk+qkfmN05Nv3EKv8aeM6VKBiz4fBxJFJPxLt7lLab8l33SnIINx8/zi8tocmAhwaDwfHpKBaLDMMcFDKYfX+Tch1h99ty/EcuNYe5yNSpVan0KYpOxNlYnPuccS+AXcepxmLxp0+PIltCtToB3O12O52OLMuqqvI8L4scZtfHE3gIsQpQWzN53WpoqmTZim2PuyAGsg07mk7MNIjP7M+ODFE8ikQa1J4pSXCKsaKQPOiR1TAMSZIQ0EeMx0KtAbSZL3+/sPoikiyesBZ2FHtCsK5u/ZHMzC2F//kYTxxUKqLaN8F5Tdq2AwCbydiaNq0xoZvNZguFAon5KFNc2yEajzFuKPpSkfkrz6zQzeXDxqcTTjAmGPO6PZ+lf8tU/t5nYnWOFuTu0Bo3IIyBrt+R1b5jOa0P48Akbq1efztXXN75vLxNHbHty0hehoQVxO1cIV0sU/tFvidokwZEZktR7gJ2gdPZGt8hMIoNiYqiZUsWIJ8DC5L/8vxR8ZJVAZBMsn/c5xRloAw1SVV817ksNiaZxADcBYx13Fyb2tw4yLxMR3+JrT5JvHud/bSYTS6kY/M7H599WH4eXXtJxVZK1It0ZC36mspF3r77c2cv0qzRV8WWzfqedxcwkHArPLXJKMKJKnKGkuEbtMyzmtRQxbLEHUpcXRGamnQw4DhZqB1la7V9ReGhNUT2eQ7bqlqNRjmOo2m6UqmUSiWy1uv1SWAXOt04bqyOstrDN7ZSGVqBrgQ8e1XEDrKdC2PCbJKc3u8fbm4ihM6K27JGeSeKYmgqs2DhZ1R/4wopovaNwANg6qYWqIPTOtUQME0H3fJmQMPoM0y1Ws3n84Qoy7K1Wq3dboemJT75F9G/O1zitgcIo0CRAmAFqhS4zu2PFVGX9C9dJ8z7pE2hi6Y9rbE3rIPdR57K3OZsKAdCJ0AwmHmQtthsNglR/aKgryUXUt1B8W5PwA4c7NcPg4eO0EMuaXKgq6cCgv8XmJQKtAF4OOoDgYlO5XKZPKPkMX0w8H8J/zwhbeSBngAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"kafka-connect\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/2mWppdxvRf1FLV0JkREObB/d5344d95f7010f99e1bbaebe1f518179/kafka-connect.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/2mWppdxvRf1FLV0JkREObB/d5344d95f7010f99e1bbaebe1f518179/kafka-connect.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/2mWppdxvRf1FLV0JkREObB/d5344d95f7010f99e1bbaebe1f518179/kafka-connect.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/2mWppdxvRf1FLV0JkREObB/d5344d95f7010f99e1bbaebe1f518179/kafka-connect.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>우리는 서버로부터 생성되는 데이터를 실시간으로 Kafka에 보내기도 하고,\nKafka Topic에 쌓여있는 데이터를 실시간으로 RDBMS, Object Storage와 같은 시스템에 보내기도 합니다.\nKafka Connect는 위의 그림과 같이 다양한 시스템과 Kafka 사이의 연결을 도와주는 역할을 하는 컴포넌트입니다.\nSource System에서 Kafka로 들어가는 Connector를 Source Connect라 부르고,\nKafka에서 Target System으로 보내는 Connector를 Sink Connect라 부릅니다.</p>\n<p>Kafka Connect는 JSON, Avro, Protobuf 등의 다양한 직렬화 포멧을 지원하며\nKafka Schema Registry와 연동시켜 공통된 스키마 지정을 할 수도 있습니다.</p>\n<p>사실 Fluentd와 ELK Stack에서 사용하는 Logstash 등 서로 다른 시스템 간의 브릿지 역할을 하는 프레임워크들은 다양하게 존재합니다.\n하지만 Kafka Connect가 갖는 강점은 Kafka와 긴밀히 연동되어 있다는 점 입니다.</p>\n<p>Kafka Connect를 사용하지 않고 데이터를 실시간으로 전달하기 위해서는 Producer, Consumer API를 사용해야 합니다.\n이 과정에서 이미 처리되거나 실패한 데이터를 추적한다거나, 데이터 분산처리, 작업을 배포하는 등의 작업을 수행해야만 합니다.</p>\n<p>Kafka Connect는 앞의 모든 작업을 수행할 뿐만 아니라 connector task를 클러스터 전체에 자동으로 배포합니다.\n또한, Connect Worker 중에 하나가 실패하거나 Network partition이 발생하더라도 실행하던 작업을 나머지 Worker들에게 자동으로 재조정합니다.\nOffset을 자동으로 관리, 유지하기 때문에 재시작하더라도 중단 시점부터 다시 시작할 수 있고 (Exactly Once Delivery),\nHigh performance Kafka library로 작성되어 빠르며 불필요한 polling 작업을 수행하지 않습니다.\n무엇보다 코드 한 줄 없이 사용하기 편하다는 것도 큰 강점입니다.\n혹시 Kafka를 이미 중앙 집중형 로그 저장소로 사용하고 있다면 Kafka Connect를 고려해볼만 하다고 생각합니다.</p>\n<br>\n<h2 id=\"kafka-connect-s3\" style=\"position:relative;\"><a href=\"#kafka-connect-s3\" aria-label=\"kafka connect s3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka-Connect-S3</h2>\n<p>이 글에서는 Confluent로 Kafka를 설치하지 않은 경우를 예시로 들겠습니다.\n이미 confluent-hub를 설치하셨거나 Confluent로 Kafka를 설치하셨다면 공식문서를 따라가시면 됩니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 519px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 69.94219653179191%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAcCAMAAAAkyw3kAAAB+FBMVEX////82b/3mVb7zKv+9vD//v3+9Oz++PP+9e3++fT++fX+8Ob3nVz3oGH3omT+8un+9/H+9u/+9e7+9/L/+/j///765dfxhDb3p272mlfxhzr54tH27eby5dz17OX68+7ktJL6xqD/+vb//PrjtZTQcSz1hTT0zrP09PT7+/v+/fr56rb99uD++vb+9/D61Lj8/Pzw8PD9/f3DuqieonDQ3rr/+/n89/TnvZ77zazl5eXPz8/S0tLt7e2ftrROnaKf3uT5+fn3+/u96OTj9vT5+Pi7urrJyMjR0dHBwMHPzs7HxsbLysrMzMzBwMDk5OT++vf++PT+/v7q6uro6Ojt7O3p6Ojp6enq6erx8fH6+vrAwMD36eDeonb5tob+9O2AgIC3t7fX19fa2tryzLHc3Nzn5+fU1NTExMSOjo6UlJS9vb2ysrKwsLCPj4+enp7JycnkuZr82L91dXVvb2+oqKiSkpKRkZGlpaWioqK0tLT+/fztz7r83cfh4eFycnL++PLx4uHQe3L64d/alI3XbWKrPzO9YlnWi4Tr6+vGc2rSTT++RTmuPzTOdWz/+vf04tXZk2H4qXHb29vg4ODSf3bYUEHFUUWoPjTnurbakYrDUUbZjYXktbDnv6PQcS31hjb83Mb58/Ljsav98vH//Pny3c/96do5wjAOAAAACXBIWXMAABcRAAAXEQHKJvM/AAAAB3RJTUUH6AEUCgUXJ+suYwAAAaxJREFUGBmNwb1rE3EAx+HP9/xdcnepfSGxk9AhGaRQ9EIdLTg4OCgOgoIFka7d1VGroJu46SAoVHEU/A8Kvgw1RYsOEgfBRRFRk1xetOfvaLVJe4l5HvGXrF/0JVwl2llJSGrhKfqdi9QeacexlFELr77RUeHn6BesSSU+kWpfTfKabNov9JF+DD5DKRhgStIHBhszHXAlHUDvSDEtrWMFZvo1lidEjzK8AnyJhG/eQ176XCWkhycdWYGcROKrA7x88bzKTs8ct1YGYwyU4bu8JpvCCj3CyjH98+SUc5y+9lq1EcvP8QafLSEcPce2kG5Fk42Yl3Qfq+Ve0I94vPaYXQJNfKMkza0yq23R20nyd+lSME048ZTRClQOlaaUiJ1gBUK6jRkgOKMlrLWTWq+ukSqPx5aQXiHdZpxLDHTl6hKJhnOTQa4ZY26QMEFEurPA4YwsrEUTwy3pcp0dTgcLi+igpAbWdfkRJWluFSrsdkfWAlCUH3FP0nnSPZDmsZaZAB4+4n9mGGcogbOHoWRMkUZWTfy6E8QRXtzakOjgEsdOVk18NS7ejoLiH401aoQMzHNsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"aws-kafka-s3\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/21zWPaE3XlmJ7SEbgx7l2R/e9eccd7884089f1eed5aad9c66ac11c7/aws-kafka-s3.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/21zWPaE3XlmJ7SEbgx7l2R/e9eccd7884089f1eed5aad9c66ac11c7/aws-kafka-s3.png?w=130 130w,\nhttps://images.ctfassets.net/tushy4jlcik7/21zWPaE3XlmJ7SEbgx7l2R/e9eccd7884089f1eed5aad9c66ac11c7/aws-kafka-s3.png?w=260 260w,\nhttps://images.ctfassets.net/tushy4jlcik7/21zWPaE3XlmJ7SEbgx7l2R/e9eccd7884089f1eed5aad9c66ac11c7/aws-kafka-s3.png?w=519 519w\"\n        sizes=\"(max-width: 519px) 100vw, 519px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>데이터 인프라가 AWS 환경에 구축되어 있다면 S3를 Cold Storage로 많이 사용하게 됩니다.\n최대한 단순하게 그림을 그려보면 위의 그림과 같은 아키텍쳐가 나오게 됩니다.\n여기에서는 Kafka에서 S3로 실시간 데이터를 저장하기 위해 Kafka-Connect-S3를 사용하게 됩니다.</p>\n<p>먼저 confluent에서 kafka-connect-s3를 다운받아 plugins 경로에 추가합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">wget</span> https://api.hub.confluent.io/api/plugins/confluentinc/kafka-connect-s3/versions/4.1.1/archive\n$ <span class=\"token function\">unzip</span> archive\n$ <span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> plugins/kafka-connect-s3\n$ <span class=\"token function\">cp</span> confluentinc-kafka-connect-s3-4.1.1/lib/* plugins/kafka-connect-s3/</code></pre></div>\n<p>이제 kafka config 경로에 <code class=\"language-text\">connect.properties</code>라는 이름으로 설정 파일을 추가합니다.\n<code class=\"language-text\">bootstrap.servers</code>와 <code class=\"language-text\">plugin.path</code> 경로는 상황에 맞게 수정하시면 됩니다.\n추가로 kafka 클러스터를 private network로 연결하고 싶다면 9093 포트를 사용해주시면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Kafka broker IP addresses to connect to\nbootstrap.servers=localhost:9092\n\n# Path to directory containing the connector jar and dependencies\nplugin.path=/home/ec2-user/kafka/plugins\n\n# Converters to use to convert keys and values\nkey.converter=org.apache.kafka.connect.storage.StringConverter\nvalue.converter=org.apache.kafka.connect.storage.StringConverter\n\n# The internal converters Kafka Connect uses for storing offset and configuration data\ninternal.key.converter=org.apache.kafka.connect.json.JsonConverter\ninternal.value.converter=org.apache.kafka.connect.json.JsonConverter\ninternal.key.converter.schemas.enable=false\ninternal.value.converter.schemas.enable=false\noffset.storage.file.filename=/tmp/connect.offsets</code></pre></div>\n<br>\n<p>기존 클러스터에 Authentication credentials, encryption이 설정되어 있다면,\nconnect.properties에 관련 설정을 추가해주셔야 합니다.</p>\n<p>다음 S3에 데이터가 저장될 Bucket을 생성하고, AWS Credentials를 설정합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pip <span class=\"token function\">install</span> awscli\n$ aws configure</code></pre></div>\n<p>sink connector 관련 설정 파일을 <code class=\"language-text\">s3-sink.properties</code>라는 이름으로 config 경로에 추가합니다.\ntopics와 s3.bucket.name의 이름은 맞게 수정해주셔야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">name=s3-sink\nconnector.class=io.confluent.connect.s3.S3SinkConnector\ntasks.max=1\ntopics=my-topic-name\ns3.region=ap-northeast-2\ns3.bucket.name=my-bucket-name\ns3.compression.type=gzip\ns3.part.size=5242880\nflush.size=3\nstorage.class=io.confluent.connect.s3.storage.S3Storage\nformat.class=io.confluent.connect.s3.format.json.JsonFormat\nschema.generator.class=io.confluent.connect.storage.hive.schema.DefaultSchemaGenerator\npartitioner.class=io.confluent.connect.storage.partitioner.TimeBasedPartitioner\npartition.duration.ms=3600000\npath.format=YYYY-MM-dd\nlocale=KR\ntimezone=UTC\nschema.compatibility=NONE</code></pre></div>\n<br>\n<p>이제 Kafka 설치 경로로 이동하고 Kafka-Connect를 실행시킵니다.\n여기에서는 standalone mode로 실행시켰지만, 경우에 따라 cluster mode로 실행하거나\ndocker container로 실행시켜도 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./bin/connect-standalone.sh connect.properties s3-sink.properties</code></pre></div>\n<p>이제 지정한 S3 Bucket의 topic/my-topic-name/2018-11-16 경로에 가시면\n지정한 설정 값에 따라 파일이 저장되는 것을 확인하실 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 44.77825464949929%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAASCAMAAAAewWyUAAAAkFBMVEXg4ODMzMzu7u7x8fHw8PD29vb+/v749/j39/f19fX09PT29fbe3t7Kysrv7+/z8/Py8vL4+Pj7+/v////9/f38/Pzq7fHp7PHz9ffo7PHp7fHs7Ozt7e329/f5+fn6+vrr6+vq7vHn6OnY2NjU1NTb29va2trf39/c3Nzd3d3n5+fk5OTo6Ojl5eXi4uLm5ubGJdIYAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH6AEUCgUXJ+suYwAAAOdJREFUKM+NkItOwzAMRU3amLgwZ00cXt3awegYjMf//x3NaKsGTVuPIudaOkqcAFypLNeI19pQtwxRQXTT5SIWMwK3C87YIhLrnI3SS8WKc60Uc8mqKAcAnUMv7hII4e5e8OHxyVario6XrI3RsfSsj42A1LMQaGjJrDaK6SwOmueX7Su0O7go2lk00Lzt2/2ufd9WZ0/sRDMZOX5YXU56MzQOwofzXnrM4fD5ZWUkfP8MCdBPEOsTJFvRXwogccOekGFCyCvbp1QUnYqiqTwt1v9EQ/UghuiNw2eS4Liy42NkFgh+Jr8toi05p/o0ugAAABF0RVh0ZXhpZjpDb2xvclNwYWNlADEPmwJJAAAAE3RFWHRleGlmOkV4aWZPZmZzZXQAMTAyc0IppwAAABh0RVh0ZXhpZjpQaXhlbFhEaW1lbnNpb24ANjk562NVBQAAABh0RVh0ZXhpZjpQaXhlbFlEaW1lbnNpb24AMzEzWKsVjgAAABh0RVh0ZXhpZjpTb2Z0d2FyZQBQaG90b1NjYXBldNmbJAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"kafka-manager\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/7Bd9ckjAuOjcObPx6w5uOm/3249660013d289864e8f6469f3086303/kafka-manager.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/7Bd9ckjAuOjcObPx6w5uOm/3249660013d289864e8f6469f3086303/kafka-manager.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/7Bd9ckjAuOjcObPx6w5uOm/3249660013d289864e8f6469f3086303/kafka-manager.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/7Bd9ckjAuOjcObPx6w5uOm/3249660013d289864e8f6469f3086303/kafka-manager.png?w=699 699w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>이미 Yahoo의 kafka-manager를 사용하고 계신 분들은 consumers 메뉴로 가시면\ntopic 마다 lag도 모니터링할 수 있습니다.</p>\n<br>\n<h2 id=\"kafka-connect-s3-configuration\" style=\"position:relative;\"><a href=\"#kafka-connect-s3-configuration\" aria-label=\"kafka connect s3 configuration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka-Connect-S3 Configuration</h2>\n<p>데이터 인프라에 맞게 수정해야할 옵션은 아래와 같습니다.</p>\n<ul>\n<li><strong>s3.part.size</strong>: S3의 multi part upload 사이즈를 지정</li>\n<li><strong>flush.size</strong>: file commit 시 저장할 record의 수 (파일 사이즈와 연관)</li>\n<li><strong>partitioner.class</strong>: partition 기준을 지정 (TimeBasedPartitioner는 시간을 기준으로 파티셔닝)</li>\n</ul>\n<p>이외에도 Avro Format과 Schema Registry를 사용하신다면 <code class=\"language-text\">format.class</code>, <code class=\"language-text\">schema.generator.class</code>를 수정해야 합니다.\n더 자세한 내용은 <a href=\"https://docs.confluent.io/5.0.0/connect/kafka-connect-s3/configuration_options.html#s3-configuration-options\">공식문서</a>에서 확인하시면 됩니다.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p>사실 Kafka는 이미 대부분의 데이터 파이프라인에서 활용하고 있다는 것이 강점이라고 생각합니다.\nETL 과정이 다양하고 복잡할 수록 새로운 프레임워크가 추가되고 아키텍쳐가 복잡해지기 마련인데,\nKafka의 다양한 컴포넌트들을 잘 활용하면 아키텍쳐를 단순화시킬 수도 있습니다.</p>\n<ul>\n<li><a href=\"https://www.confluent.io/blog/kafka-connect-deep-dive-converters-serialization-explained\">https://www.confluent.io/blog/kafka-connect-deep-dive-converters-serialization-explained</a></li>\n<li><a href=\"https://docs.confluent.io/5.0.0/connect/kafka-connect-s3/index.html\">https://docs.confluent.io/5.0.0/connect/kafka-connect-s3/index.html</a></li>\n</ul>","excerpt":"Kafka에는 정말 유용한 컴포넌트들이 존재합니다.\n오늘은 그 중 하나인 Kafka-Connect에 대해 알아보고,\nConfluent…"}}}},{"node":{"title":"17-18년 블로그 회고 및 다짐","id":"50dcd8b5-0f2f-5e1a-94fd-0ed818d8a839","slug":"start","publishDate":"November 09, 2018","heroImage":{"title":"cover-personal","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=350&h=207&q=50&fm=webp 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=700&h=413&q=50&fm=webp 700w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1400&h=826&q=50&fm=webp 1400w","sizes":"(min-width: 1400px) 1400px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1400&h=826&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=350&h=207&fl=progressive&q=50&fm=jpg 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=700&h=413&fl=progressive&q=50&fm=jpg 700w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1400&h=826&fl=progressive&q=50&fm=jpg 1400w","sizes":"(min-width: 1400px) 1400px, 100vw"}},"layout":"constrained","width":1800,"height":1062,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBv/EABoQAAIDAQEAAAAAAAAAAAAAAAMRAAECEiH/xAAVAQEBAAAAAAAAAAAAAAAAAAABA//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oADAMBAAIRAxEAPwDlAjvdNSiD5p35M8m2PbxaVKSQuy296alalC1EiIF//9k="}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":1,"html":"<p>지킬 블로그로 이사한지도 벌써 2년이 다 되어 간다.\n항상 이 맘때쯤이면 글쓰는 횟수가 줄어들고 블로그를 또 이사하고 싶은 욕구가 생긴다.\n하지만 지금 운영하고 있는 블로그도 전혀 문제가 없기 때문에 올해까지는 참기로 결정했다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 49.07010014306152%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"blog ga\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/2uI1SfXnpQzjzBHQxYPf9d/ad9e92bc8550c1eee5b6e8c27716cae1/blog_ga.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/2uI1SfXnpQzjzBHQxYPf9d/ad9e92bc8550c1eee5b6e8c27716cae1/blog_ga.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/2uI1SfXnpQzjzBHQxYPf9d/ad9e92bc8550c1eee5b6e8c27716cae1/blog_ga.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/2uI1SfXnpQzjzBHQxYPf9d/ad9e92bc8550c1eee5b6e8c27716cae1/blog_ga.png?w=699 699w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>18년 들어서 글을 정말 안쓰기 시작했는데 이상하게도 방문자 수는 계속 증가했다.\n특히 최근 몇달 간 방문자 수가 6천 - 8천 사이에만 있는 걸 보니 다시 글을 써야겠다는 생각이 들었다.\n가장 많이 방문한 페이지 리스트를 보면 어려운 주제에 대한 글보다\n간단한 주제이면서 잊지 않기 위해 기록해 둔 글들이 더 인기가 많았다.</p>\n<p>다시 2주에 1번 정도 글을 써보려 한다.\n주로 백엔드, 데이터 엔지니어링에 대한 내용이겠지만, 가끔씩 금융 도메인에 대한 내용도 올릴 예정이다.</p>\n<br>","excerpt":"지킬 블로그로 이사한지도 벌써…"}}}},{"node":{"title":"Raft consensus algorithm","id":"4324a369-91a5-5afa-bd6c-f65af537b7d9","slug":"raft-consensus","publishDate":"September 01, 2018","heroImage":{"title":"cover-dataengineering","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&q=50&fm=webp 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&q=50&fm=webp 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(min-width: 1600px) 1600px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&fl=progressive&q=50&fm=jpg 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&fl=progressive&q=50&fm=jpg 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg 1600w","sizes":"(min-width: 1600px) 1600px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgb/xAAcEAACAgMBAQAAAAAAAAAAAAAAAQIREiExYeH/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDK1DF0vgtxW9EylQu8nTotmo+gHfAEP//Z"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":2,"html":"<p>Consensus란 분산 시스템에서 노드 간의 상태를 공유하는 알고리즘을 말합니다.\n가장 유명한 알고리즘으로 Paxos가 있고, Zookeeper에서 사용하는 Zab이 있습니다.\nRaft는 이해하기 어려운 기존의 알고리즘과 달리 쉽게 이해하고 구현하기 위해 설계되었습니다.\n(PS. 이 글은 블록체인에서의 Consensus 알고리즘을 말하는 것이 아닙니다)</p>\n<br>\n<h2 id=\"what-is-consensus-problem\" style=\"position:relative;\"><a href=\"#what-is-consensus-problem\" aria-label=\"what is consensus problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is consensus problem</h2>\n<p>하나의 클라이언트와 서버가 있고 클라이언트가 서버에게 데이터를 전달한다고 가정해보겠습니다.\n서버는 하나의 노드로 이루어져있기 때문에 합의가 이루어지는건 아주 쉬운 문제입니다.\n(여기에서 말하는 합의는 공유된 상태라고 이해하시면 됩니다)</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 56.470588235294116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"raft-con1\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/6BBYzQoA7P1pD2v5vifjDA/feea5cc2b82e09a626440e4ef5850866/con1.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/6BBYzQoA7P1pD2v5vifjDA/feea5cc2b82e09a626440e4ef5850866/con1.png?w=340 340w,\nhttps://images.ctfassets.net/tushy4jlcik7/6BBYzQoA7P1pD2v5vifjDA/feea5cc2b82e09a626440e4ef5850866/con1.png?w=680 680w,\nhttps://images.ctfassets.net/tushy4jlcik7/6BBYzQoA7P1pD2v5vifjDA/feea5cc2b82e09a626440e4ef5850866/con1.png?w=1360 1360w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>만일 위 그림처럼 여러 노드로 이루어진 분산 서버에서 합의를 이루어내야한다면 어떻게 해야할까요?\n이러한 문제를 <strong>distributed consensus problem</strong> 이라고 합니다.</p>\n<br>\n<h2 id=\"raft-algorithm\" style=\"position:relative;\"><a href=\"#raft-algorithm\" aria-label=\"raft algorithm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Raft Algorithm</h2>\n<p>Raft의 node는 <strong>Follower, Candidate, Leader</strong>라는 3가지 state를 가집니다.\n모든 노드는 처음에 Follower state를 가지고 시작합니다.\n만일 Follower가 Leader의 응답을 받지 못하면 Candidate 상태로 전환될 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 45.13274336283185%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAASCAMAAAAewWyUAAACIlBMVEX////4+Pje39/i4uP69/bu29P//v75+fq8vsPx8fH9rIzziF/9w6z19fWHlLBsepyAiZ37+/v6nnr4spf29vb9/f38/Pzf399zgqV5iq9zfpn39/fu7u7w4dz0x7bv6OWprLOJkqW9v8Pv7+/z8/PX5+L09PTO5N3o6Ojs7Oz+y7fbn4ne2tnw8PCj18fw5N/zspjVsaLj4+Py8vLt7e7p6enM0+WnsMTL2NW93tTb6OSlysK5w9q4vsrr6+vv2dH6jGHthFznvq/+/v72t57rg1v4jGLIxsbz8/Tm5uazt7+ImsWElr+ts8OXo7t/kLiMnsnCwsLx8fL/+ff9oX76lnDw4Nnv0MP1j2X9spXe3+KJmb+ImsK/wsqqsL6ImsSOnLzV5uDN49zl6+nD4Nfl5ebT1NXN6uDOz9Dr7ezI4trZ7ufV7ubp7uzk9O+43dHp7Ovd6eXo8u7Y6OP5+fnX5+Ha6OPv7ezhysHg3t3o6uy1ucHi4uLu7u+/ztC41Mvr7O2htrXZ4t/8tJnziF7zrpLR5d+VpMd6irCIkKK4xN+HmcORnLft7e3o7Ovg6ueZpcN7jLGKkJ39rI30iF/zqIe+39TKyst5ia9ndZWFjqWquNmBkrqJl7je6ebB39Xh4uN6iKhndJSDjKLv7u7f1tP+1MT/9vL6+vq4u8Gdo7O2trf29vfKzNKrs8bW2d2tsLiTm62ysrT3+Pj39vbl5eWJXjqHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUCgUXJ+suYwAAAYlJREFUKM9jYIABRiYGDMDIjCnGwMLKhiHGzsGJqZCLmwddiJePXwBdTJBXiFtYRBRFTExcQlJKGlWMV0ZGVk5eRkYaSUxERkZBUUlGmRFJTEUGBFRlkFWqqctAAVSlhqaWto6MjK6ujJ6yjIy+gaGRMYOJqZm5haWMsjIIWVnb2JqqMTDY2Ts4OsnIMDjrMgjKyLi4url7MHh6efv4wsX8/AMCg4BGBoeEhsEFwyMiQdZERcfEwsXi4hOMIT6WkUlMggomp0AclJomA1GYLiOjmaELDQYZmcwsqEKgLEwMojAbIcbgrCwDt0bGGFksJ5chL19GBh49aqBwkVZm5EWEBVCsoJCxqLhEpLSwDB5mouUVleAQq6qugYvV1tWDxRoam5zhgdvc0toGEmzv6ISLdXX39Mr09ctMmDgJETOTp0ydBlQ3fcbMWXCx2XPmasrMm79g4aLFcLElS5ctd15RIui8ctXqNVAx5bXr1ouWMK5w3rBx02aYwi26cD0agrAkYQoX21oCJABCrFltDlACBwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"raft-election\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/6KdskE02jZvwEPZbX0i9Uf/07a3547b540183a976b07860977c7cd2/election.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/6KdskE02jZvwEPZbX0i9Uf/07a3547b540183a976b07860977c7cd2/election.png?w=452 452w,\nhttps://images.ctfassets.net/tushy4jlcik7/6KdskE02jZvwEPZbX0i9Uf/07a3547b540183a976b07860977c7cd2/election.png?w=904 904w,\nhttps://images.ctfassets.net/tushy4jlcik7/6KdskE02jZvwEPZbX0i9Uf/07a3547b540183a976b07860977c7cd2/election.png?w=1808 1808w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>Candidate는 다른 노드들에게 투표를 요청하고 노드들은 투표 결과를 응답으로 전달합니다.\n노드 중 가장 많은 표를 얻은 노드는 Leader가 될 수 있습니다.\n이러한 프로세스를 <strong>Leader Election</strong> 이라고 부릅니다.</p>\n<br>\n<h2 id=\"leader-election\" style=\"position:relative;\"><a href=\"#leader-election\" aria-label=\"leader election permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Leader Election</h2>\n<p>Raft는 투표를 관리하기 위해 두 가지 timeout 설정을 가지고 있습니다.\n첫 번째는 <strong>Election timeout</strong> 입니다.\nElection timeout 이란, Follower에서 Candidate로 전환되기 위해 기다리는 시간을 의미합니다.\n일반적으로 Election timeout은 150ms에서 300ms 사이의 값으로 랜덤하게 설정됩니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 45.60085836909871%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAASCAMAAAAewWyUAAABU1BMVEX////m5ufi4uPu7u75+fnV1dbc3N3q6urm5ebn5+jz8/T6+vr08/Po6OjZ2Nnk5OTn5+fy8vL7/PzP3+x+qcvl7fTY5e+mw9vw9fmRtdNFgrSnxNtpmsKevtj5+/zO3uv5+/2zzOBuncTa5vDw9/Du9u6lwtuErM32+fve5OlWhKl4mbT+/v6kucqXrsH3+Pjp8PacvNfV4+5unsXX5O+tvcpDeqfv8PDj5eZDfq9OiLi5xtHt9u3x+PGWudVvnsX4+vzb5/D5+vucssPAzdiDoblvlLLs7e93o8jA1eb//v7q6uvw7/D19PXy8fDt7e319fb8/Pz9/f37+/v+/v319fXf39/j4+Pc3Nz09fXu7e3V1dXk5eXZ2NjT09Px8PD8/f7w8PDq6enw8PH39/bp6enn5ufp6Onj4+Tp6ej29vb7+vri4uLl5eXm5ub39/fx8fEBy5e1AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUCgUXJ+suYwAAANBJREFUKM9jYCAVMDIxowuxsLKxYyrk4OTiRhXh4eXjFxAUQlcoLCKKoVlMXALTREkpaQwxGSlZTIVy8goYYopKykT5T0WVYegBNXUNKEtTSxvC0NHV04eKGRgawRQaS5lAWaZSZuZghoWllTWYYWNrJ2UPU+jgCGM5ObtATXR1c4eKKXt4Qlle3j6+UKaff0AgmBEUpBMIFQsOCYayQsPCYQmHPyIyEsyIio6JgorFxsUnoHmKWyAxyTs5BchKTUvPyMwCiWUL5OTm5ReQEDQAk9obzcWlL8QAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"raft-timeout\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/1lnUXE8cPw3uUJ8ZFVMjDv/287c2b6fb8bf15530f103bb7a46a7309/timeout.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/1lnUXE8cPw3uUJ8ZFVMjDv/287c2b6fb8bf15530f103bb7a46a7309/timeout.png?w=466 466w,\nhttps://images.ctfassets.net/tushy4jlcik7/1lnUXE8cPw3uUJ8ZFVMjDv/287c2b6fb8bf15530f103bb7a46a7309/timeout.png?w=932 932w,\nhttps://images.ctfassets.net/tushy4jlcik7/1lnUXE8cPw3uUJ8ZFVMjDv/287c2b6fb8bf15530f103bb7a46a7309/timeout.png?w=1864 1864w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<ol>\n<li>Election timeout이 끝나면 Follower는 Candidate가 되고 Election term을 시작합니다.</li>\n<li>Candidate는 본인에게 투표를 하고 다른 노드들에게 투표 요청 메세지를 전달합니다.</li>\n<li>만일 메세지를 받는 노드가 해당 Election term에서 아직 투표를 하지 않았다면, 먼저 메세지를 전달해준 Candidate에게 투표합니다.</li>\n<li>투표를 마친 해당 노드는 Election timeout이 초기화 됩니다.</li>\n<li>가장 많은 표를 받은 노드가 Leader로 선정됩니다.</li>\n</ol>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 46.4968152866242%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAATCAMAAADVnb8xAAABU1BMVEX////7+/ri4+To6Ont7e329/f4+Pn5+vn29vbp6enZ2dre3t739/f9/f3T0tPU1NX8/Pz19fXp7fDr8PP19vb4+Pjc3d+To7Df4eJtncRPiLjA1eZlhJ5FgrRph6B0osdGgrTH2eiDl6Y9c5+Imqn5+/3o7/b+/v7k5OT/8fH/9vb/9fX/8vL/+fn/p6f/kJD/qKj/o6P/lZXn5+fe1NT/i4z4+vzl7fRDcZdAdaDN0NP/tragv9lXjru0zeGdnZ2AgIDR0dG4z+KYutbd3d0/daJDfa68wcX/i4v/6uqMstGXudWjo6PX19fB1eZ9qMvEyc21vMH3+vzK2+nw8PDo8Pb7/P319PTj4eLw8PHk4+T08/T9/fzi4eLo6Ojq6eni4uLx8fH+///y8vLk5OX39/bh4uL+/f3r6uv7+/vg4OD5+fnl5eXr7Ozz8vLr6+v09PUQ6ejaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUCgUXJ+suYwAAAOtJREFUGBnFwcdWwkAAQNGHBCUCCir22FEUO/aKvfcogr1gw/b/K89kgp5MNrryXv7MU+TVUPmKS1D49dKAFsQpVFbuRRGOVFRWRVFU19TiUlffgKrRaMKluaUVVVt7By6xTly64vyL7h6ERC8/+vpxGxhEGBrmW3JkFNsYtmCcgnFs+sTk1HQCYWZ2Dmk+tYC0aCwhLa+srq1vIGwaW0jbqR2kXWMP2/4BtsOjGFLYpOD4BCl9mjGRsvEzLOcXlybS1fXNLZa7ezOHEPI8ZH2PCJHkUw7L80vAzOCU11/Tb+9RHPIfmv+T3/sC5fod0nl6MhkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"raft-reelection\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/3yqR3Uoce93mduU0qTC0l0/9549b6a8dd7bf13c645868db4f3bbae3/reelection.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/3yqR3Uoce93mduU0qTC0l0/9549b6a8dd7bf13c645868db4f3bbae3/reelection.png?w=471 471w,\nhttps://images.ctfassets.net/tushy4jlcik7/3yqR3Uoce93mduU0qTC0l0/9549b6a8dd7bf13c645868db4f3bbae3/reelection.png?w=942 942w,\nhttps://images.ctfassets.net/tushy4jlcik7/3yqR3Uoce93mduU0qTC0l0/9549b6a8dd7bf13c645868db4f3bbae3/reelection.png?w=1884 1884w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<ol>\n<li>선정 이후 Leader는 Append Entries 메세지를 Follower들에게 전송합니다.</li>\n</ol>\n<p>(이 메세지는 <strong>Heartbeat timeout</strong> 에 설정된 간격마다 보내게 됩니다)\n2. Follower들은 Append Entries 메세지를 받으면 Election timeout이 초기화되고 메세지에 대한 응답을 Leader에게 보냅니다.\n3. 만일 Follower에게 Heartbeat가 도달하지 않으면 다시 Election term이 시작되고, Follower는 Candidate 상태로 전환됩니다.\n(위 그림은 노드A가 죽고 난 이후 노드B가 Leader로 선정되고 Heartbeat 메세지를 전달하는 예시입니다)</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 49.6054114994363%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAUCAMAAADImI+JAAABxVBMVEX////m5ebh4OHu7e38/Pzm5ubg4eHt7e36+vvf3t/i4uPs7Ozf39/h4eLr6urj4+Pk5OT4+Pjy8/Py8vLz8/Ps7Ovg4ODc3Nzn5+f7+/v7+vro5+f6+/vy8fLp6enw8PDn5+jo6Ojv7+/29fXx8PDo5+ju7+/19vb39/e/xszw8fH6+vrv7/C/xsvw8PHEz9hokbKOprrFz9hqjqxKhbaJo7il0qbx+PHg8OG227drj62HoriEpL1FgrRGeaKGpb5kjrCAnreGw4fq9OrT6dOdzp1mj7F+nbfV2992mriuvszW2+CtvszW4dscdTjy9PWo06jy+PLh8OK43LnY4t0adDby8/Xa7NqEwYTp9OnS6NKbzZvZ7NpyuXPm8uZ0uXXk8uX9/v709/rZ5vBGiZ2lxNba5vBGip2jw9WcvNdVjbvZ5fC4z+LY5e+VuNRYjruWudVWjbupxdzH2umqxt3G2eji6/N/qcu80uTj7PR/qcy70ePu9Pj+/v79/f3p5+jr6+z09PTq6+v39vba2drU1NTz9PXa2trx8fH29vb19fTe3d3d3d78/f319fXd3d3y8vH7/Pzl5ebx8vLl5eXl5OTu7u6DUbJjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUCgUXJ+suYwAAATNJREFUKM9jYKAUMDIxs4AZrGzsHFAxFk4ubgiDh5cPppBfQFAIxhCGCImIiolLSEoBGdxi4tKSMiAxWTl5BUUlZQYGYTkVCVU1dbBCDWE1TS1JbRBDR1cPxAABfQNDCMMIxgACYxNTM3MGBgtLKxNrmJiNrZ0kmGFva6cNE3SwdXRyZmBwcXWzdYeJeXh6QRjenj5wE339/AMCGRiCgkNCw/CHRThDRCQDQ1Q0QwzDYACxcVBGfAJcLDEJncHAkJySCmGkpWfABTOzsiGMnKxcmFiebT6EUWBbCFdYZFsMYZTYlsLEysorIIzKqmqEe2owGAwstSwwRl0tTLC+oRHCkGtqhom1tKq0gRntrR2dULGu7h6VXhCjr6d/wkSwkOCk9n6BycDEJzilvX9qxzRaBCsAGto4F9TOqwwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"raft-same1\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/1WStOivcFzgXTGyKIUnfVq/bafd938d4afdc5627df24dbc22821d6e/same1.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/1WStOivcFzgXTGyKIUnfVq/bafd938d4afdc5627df24dbc22821d6e/same1.png?w=444 444w,\nhttps://images.ctfassets.net/tushy4jlcik7/1WStOivcFzgXTGyKIUnfVq/bafd938d4afdc5627df24dbc22821d6e/same1.png?w=887 887w,\nhttps://images.ctfassets.net/tushy4jlcik7/1WStOivcFzgXTGyKIUnfVq/bafd938d4afdc5627df24dbc22821d6e/same1.png?w=1774 1774w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<ol>\n<li>만일 두 개의 노드가 동시에 Election term을 시작하고 메세지가 동시에 Follower에게 도달한다고 가정해보겠습니다.</li>\n<li>이러한 경우 노드A, 노드B는 2표씩 얻게 되고, 표가 동일하므로 해당 Election term에는 Leader가 선정되지 않습니다.</li>\n<li>Leader가 선정되지 않았으므로 Election timeout에 따라 새로운 Election term을 시작하게 됩니다.</li>\n</ol>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 50.112866817155755%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAUCAMAAADImI+JAAAB1FBMVEX////29fbz8/T7+/v5+vr29vbz9PT5+fj5+fn4+Pj6+vnf3d3X1tfr6+vr7Ozf39/W1tfs6+v8/PzV09PW1tbU1NTV1tbr6ur39/fm5ebt7e3n5+fl5eXx8fH4+Pfl5ebo6Ofr7O3u7e7n5ubn5+jg4ODk4+P09PTu7u7j4+Tz8/Px8/SJpLqmusr9/f3z9Palucnb4eePqb7X3uTd4+iPqb/V3OOoushIhLVckLvX292svMpfkrzU2Ntoj65hlb+IorhylbOHobjg5upUgaZska/29vfi5+tVgqdpj6719fWjt8eBo7+gtMSmucmdssP29/fv9+71+vXv9+/0+fT4+/j9/v33+vybvNfQ4Oz4+vzA1Obr8veyy+D6/P3k7fSxy+D5+/280uRFgrTA1ebo7/auyN6pxdx/qculw9vs8vdvnsWGrs79/v7u8/hwn8WErM39/f7h6/Pe6fK3zuJ/qczc6PHi4eHd3N3v7u3w8fLj4+Lc3d3u7u/y8vPe3d7h4eLv7+/+/f3e3t7y8vL//v7s7Ozd3d3i4uTs7e3f3t7g4OHj4uLt7Oz39vbw8PHV1NPz9PPw8PDU1NXq6uv6+vr6+fn6+fr6+/v19PX09fX39/hO+TawAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUCgUXJ+suYwAAAURJREFUKM9jYCAFMDIxs4AZrGzsHFAxTmZmGIMLrpCbh5cPzOAXEOSFCAkJi/CCNQuJiolDNUtISknLSMkyMMjJSylIKsqCxJSUVVTV1IFMDWlpVU0tWaiJ2jq6emCGvo6BEFTM0MgYwjAxNYNbbW5haQVmWFvY2ELF7OwdIAxHeye4QmcXVzcww93D0wsq5u3jC2H4+fjjDwpWGCMASTAwCMoIDsGvOzQMnUEvEB4RCWFERUTDxGJi4yCM+IREuMKk5OQYMCMlOTkVKpaWnA5hZCRnwhVmZefkghl5+QWFULGigmIIo6S0jHQ3lldUVoEZ1TW1dRAhvfqGRrAtTc0NLZCEwNDa1l7e0QlKIG1d3T29WiCxvv4JNbysE4FJa9Lk9ims0FiayjmNk2MqmDEdwmBg9mqZMVOIE8yYOktoNgnOAwBMsz1jWZo4tgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"raft-same2\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/HiBiIl1wDFXfJ0O8WukTX/a76fbf5bc7cad58f95edfd8bbfe7795d/same2.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/HiBiIl1wDFXfJ0O8WukTX/a76fbf5bc7cad58f95edfd8bbfe7795d/same2.png?w=443 443w,\nhttps://images.ctfassets.net/tushy4jlcik7/HiBiIl1wDFXfJ0O8WukTX/a76fbf5bc7cad58f95edfd8bbfe7795d/same2.png?w=886 886w,\nhttps://images.ctfassets.net/tushy4jlcik7/HiBiIl1wDFXfJ0O8WukTX/a76fbf5bc7cad58f95edfd8bbfe7795d/same2.png?w=1772 1772w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<br>\n<h2 id=\"log-replication\" style=\"position:relative;\"><a href=\"#log-replication\" aria-label=\"log replication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Log Replication</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 67.56756756756756%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"raft-message\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/4kpjxl8foPXqkam5PRhM6m/3bfa22572c60e24690d23bf5df93e67b/message.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/4kpjxl8foPXqkam5PRhM6m/3bfa22572c60e24690d23bf5df93e67b/message.png?w=296 296w,\nhttps://images.ctfassets.net/tushy4jlcik7/4kpjxl8foPXqkam5PRhM6m/3bfa22572c60e24690d23bf5df93e67b/message.png?w=592 592w,\nhttps://images.ctfassets.net/tushy4jlcik7/4kpjxl8foPXqkam5PRhM6m/3bfa22572c60e24690d23bf5df93e67b/message.png?w=1184 1184w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>Leader가 선정되고 난 이후, 시스템의 모든 변화는 Leader를 통해 이루어집니다.\n클라이언트는 Leader에게 데이터를 전달하고, Leader는 데이터의 복제하여 Follower에게 전달합니다.\n이 과정은 앞서 언급했던 <strong>Append Entries</strong> 메세지를 통해 이루어집니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 60.810810810810814%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"raft-res\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/7d55dhp9iGNA9yCdVHa47M/96613792d4891ade47f0535f52cf3c6d/res.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/7d55dhp9iGNA9yCdVHa47M/96613792d4891ade47f0535f52cf3c6d/res.png?w=333 333w,\nhttps://images.ctfassets.net/tushy4jlcik7/7d55dhp9iGNA9yCdVHa47M/96613792d4891ade47f0535f52cf3c6d/res.png?w=666 666w,\nhttps://images.ctfassets.net/tushy4jlcik7/7d55dhp9iGNA9yCdVHa47M/96613792d4891ade47f0535f52cf3c6d/res.png?w=1332 1332w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>Follower는 받은 데이터를 commit 하고 결과를 Leader에게 전달합니다.\nLeader는 Follow로부터 받은 결과를 Client에게 전달합니다.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p>정리하자면 분산 시스템은 fault-tolerence를 보장하기 위해 consensus algorithm을 사용하고 있고,\n분산 시스템을 다루는 프레임워크마다 Consensus 구현이 조금씩 다를 수 있습니다.\n그리고 원활한 Leader Election을 위해 클러스터 노드의 개수는 홀수로 구성하는 것이 좋습니다.</p>\n<p>Raft의 경우 Redis cluster에서 응용하여 사용하고 있고,\nElasticsearch cluster 또한 quorum-based consensus algorithm을 사용하고 있습니다.\n아래의 Raft 논문과 시각화 자료 링크를 보시면 더 쉽게 이해할 수 있습니다.</p>\n<ul>\n<li><a href=\"https://raft.github.io/raft.pdf\">https://raft.github.io/raft.pdf</a></li>\n<li><a href=\"http://thesecretlivesofdata.com/raft/\">http://thesecretlivesofdata.com/raft/</a></li>\n<li><a href=\"https://raft.github.io/\">https://raft.github.io/</a></li>\n</ul>\n<br>","excerpt":"Consensus란 분산 시스템에서 노드 간의 상태를 공유하는 알고리즘을 말합니다.\n가장 유명한 알고리즘으로 Paxos…"}}}},{"node":{"title":"AWS에 Hadoop MR 어플리케이션 환경 구축하기","id":"3d5aacf4-f336-5c17-a880-4efb995c9b99","slug":"aws-hadoop","publishDate":"June 13, 2018","heroImage":{"title":"cover-dataengineering","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&q=50&fm=webp 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&q=50&fm=webp 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(min-width: 1600px) 1600px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&fl=progressive&q=50&fm=jpg 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&fl=progressive&q=50&fm=jpg 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg 1600w","sizes":"(min-width: 1600px) 1600px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgb/xAAcEAACAgMBAQAAAAAAAAAAAAAAAQIREiExYeH/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDK1DF0vgtxW9EylQu8nTotmo+gHfAEP//Z"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":4,"html":"<p>이번 학기에 하둡 프로그래밍 강의를 들으면서 정말 실습 환경의 개선이 필요하다는 생각이 들었습니다...\n나약한 실습 환경속에서 과제와 기말 프로젝트를 제출해야하는 후배들을 위해 AWS를 추천합니다!</p>\n<br>\n<h2 id=\"ec2-amazon-linux2에-기본-환경-구축\" style=\"position:relative;\"><a href=\"#ec2-amazon-linux2%EC%97%90-%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95\" aria-label=\"ec2 amazon linux2에 기본 환경 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EC2 Amazon Linux2에 기본 환경 구축</h2>\n<p>AWS에는 EMR이라는 클러스터 서비스가 있지만, 스터디 목적이라면 비용을 생각해서 사용하지 않겠습니다.\nAmazon Linux AMI는 EC2에서 편하게 사용할 수 있도록 지원하고 관리하는 리눅스 이미지입니다.\n만일 학생용 크레딧이 있다면 <strong>t2.medium</strong> 인스턴스를 추천합니다.</p>\n<p>먼저, JAVA JDK와 Hadoop 파일을 받겠습니다. 실습 환경은 자바 7, 하둡 1.2 버전입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> yum update <span class=\"token parameter variable\">-y</span>\n$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> java-1.7.0-openjdk-devel\n$ <span class=\"token function\">wget</span> https://archive.apache.org/dist/hadoop/core/hadoop-1.2.1/hadoop-1.2.1.tar.gz\n$ <span class=\"token function\">tar</span> xvfz hadoop-1.2.1</code></pre></div>\n<p>그리고 자바 프로젝트를 위해 Maven도 설치해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">wget</span> http://mirror.navercorp.com/apache/maven/maven-3/3.5.3/binaries/apache-maven-3.5.3-bin.tar.gz\n$ <span class=\"token function\">tar</span> xvfs apache-maven-3.5.3-bin.tar.gz\n$ <span class=\"token function\">mv</span> apache-maven-3.5.3/ apache-maven\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/profile.d/maven.sh\n\n<span class=\"token comment\"># Apache Maven Environment Variables</span>\n<span class=\"token comment\"># MAVEN_HOME for Maven 1 - M2_HOME for Maven 2</span>\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">M2_HOME</span><span class=\"token operator\">=</span>/home/ec2-user/apache-maven\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token variable\">${M2_HOME}</span>/bin:<span class=\"token variable\">${<span class=\"token environment constant\">PATH</span>}</span>\n\n$ <span class=\"token function\">chmod</span> +x maven.sh\n$ <span class=\"token builtin class-name\">source</span> /etc/profile.d/maven.sh</code></pre></div>\n<p>정상적으로 설치가 되었다면 아래의 명령어에 대한 결과가 나옵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">java</span> <span class=\"token parameter variable\">--version</span>\n$ mvn <span class=\"token parameter variable\">--version</span></code></pre></div>\n<br>\n<h2 id=\"hadoop-환경-구축\" style=\"position:relative;\"><a href=\"#hadoop-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95\" aria-label=\"hadoop 환경 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop 환경 구축</h2>\n<p>실습환경은 <strong>Pseudo-Distibuted</strong> 모드로 진행합니다.\n먼저 Password less SSH Login을 설정해주어야 합니다.\n그리고 편의를 위해 hadoop-1.2.1 폴더에 Symbolic link를 생성하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ssh login setting</span>\n$ ssh-keygen <span class=\"token parameter variable\">-t</span> rsa <span class=\"token parameter variable\">-P</span> <span class=\"token string\">\"\"</span>\n$ <span class=\"token function\">cat</span> /home/ec2-user/.ssh/id_rsa.pub <span class=\"token operator\">>></span> /home/ec2-user/.ssh/authorized_keys\n\n<span class=\"token comment\"># symbolic link</span>\n$ <span class=\"token function\">ln</span> <span class=\"token parameter variable\">-s</span> hadoop-1.2.1 hadoop</code></pre></div>\n<p>이제 HDFS와 MR 실행을 위해 설정파일을 수정해줍니다.\n먼저 <code class=\"language-text\">hadoop-env.sh</code>을 열어 <code class=\"language-text\">JAVA_HOME</code> 환경변수를 지정해줍니다.\n가상분산모드에서는 masters, slaves 파일을 수정할 필요가 없습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> hadoop\n$ <span class=\"token function\">vi</span> conf/hadoop-env.sh\n\n<span class=\"token comment\"># set JAVA_HOME in this file, so that it is correctly defined on</span>\n<span class=\"token comment\"># remote nodes.</span>\n\n<span class=\"token comment\"># The java implementation to use. Required.</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">JAVA_HOME</span><span class=\"token operator\">=</span>/usr/lib/jvm/java-1.7.0\n\n<span class=\"token comment\"># Extra Java CLASSPATH elements.  Optional.</span>\n<span class=\"token comment\"># export HADOOP_CLASSPATH=</span></code></pre></div>\n<p>이제 <code class=\"language-text\">core-site.xml</code> 파일을 아래와 같이 수정해줍니다.\nHDFS 데이터 파일들은 홈 디렉토리의 hadoop-data 폴더에 저장하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> conf/core-site.xml\n\n<span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>fs.default.name<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>hdfs://localhost:900<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>hadoop.tmp.dir<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>/home/ec2-user/hadoop-data/<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">hdfs-site.xml</code> 파일도 수정해줍니다.\ndfs.replication 프로퍼티는 복제 개수를 의미합니다.\n일반적으로 복제 개수를 3으로 두는 것을 권장하지만,\n실습에서는 Fully-Distributed 모드가 아니기 때문에 1로 설정하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> conf/hdfs-site.xml\n\n<span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs.replication<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span><span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">mapred-site.xml</code> 파일도 수정해줍니다.\nmapred.job.tracker 프로퍼티는 job tracker가 동작하는 서버를 말합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> conf/mapred-site.xml\n\n<span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>mapred.job.tracker<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>localhost:900<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<br>\n<h2 id=\"hadoop-mr\" style=\"position:relative;\"><a href=\"#hadoop-mr\" aria-label=\"hadoop mr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop MR</h2>\n<p>이제 NameNode를 초기화하고 하둡과 관련된 모든 데몬을 실행합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./bin/hadoop namenode-format\n./bin/start-all.sh</code></pre></div>\n<p>jps를 통해 자바 프로세스가 제대로 실행되었는지 확인할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ jps\n3368 TaskTracker\n2991 DataNode\n3241 JobTracker\n3480 Jps\n2872 NameNode\n3139 SecondaryNameNode</code></pre></div>\n<p>HDFS 웹 인터페이스 주소는 <a href=\"http://localhost:50070\">http://localhost:50070</a> 이며,\nMapReduce 웹 인터페이스 주소는 <a href=\"http://localhost:50030\">http://localhost:50030</a> 입니다.\n들어가시면 아래와 같은 화면이 나타납니다.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=15OIYCbnc1cy93jJgqX1y8a5vfpCBkpqM\" alt=\"\"></p>\n<p>이제 기본으로 설치되어 있는 WordCount 예제를 실행시켜보겠습니다.\n먼저 WordCount 예제의 input 데이터를 HDFS에 업로드하고 jar 파일과 output 경로를 지정해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ./bin/hadoop fs <span class=\"token parameter variable\">-put</span> conf/hadoop-env.sh ./hadoop-env.sh\n$ ./bin/hadoop jar hadoop-examples-1.2.1.jar wordcount hadoop-env.sh output</code></pre></div>\n<p>HDFS에 write한 결과는 HDFS의 output 경로에서 확인하실 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ./bin/hadoop fs <span class=\"token parameter variable\">-ls</span> output\n$ ./bin/hadoop fs <span class=\"token parameter variable\">-cat</span> output/part-r-00000</code></pre></div>\n<br>\n<h2 id=\"intellij\" style=\"position:relative;\"><a href=\"#intellij\" aria-label=\"intellij permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IntelliJ</h2>\n<p>이번엔 예제가 아니라 Hadoop MR 어플리케이션 프로젝트를 새로 생성해보겠습니다.\nIntelliJ에서 JAVA, maven 프로젝트를 생성하시면 됩니다.</p>\n<p>그리고 pom.xml은 아래와 같이 수정해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.swalloow.hadoop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>hadoop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.0-SNAPSHOT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.hadoop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>hadoop-core<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.2.1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Mapper와 Reducer 클래스를 수정한 다음, <code class=\"language-text\">mvn packages</code> 명령어를 통해 jar 파일을 생성합니다.\n그리고 input 파일을 이전과 동일하게 HDFS에 추가하고 생성한 jar 파일을 통해 MR job을 실행시키시면 됩니다.</p>\n<p>아래 링크는 코인 거래 데이터를 입력받아 이동평균선(SMA) 추세를 계산해주는 간단한 예시 프로젝트입니다. 템플릿은 자유롭게 참고하셔도 됩니다!</p>\n<p><a href=\"https://github.com/Swalloow/hadoop-mr-project\">https://github.com/Swalloow/hadoop-mr-project</a></p>\n<br>","excerpt":"…"}}}},{"node":{"title":"포트폴리오의 기대수익률과 변동성 계산","id":"b956584d-c7d2-5847-9f26-f1c2ab749621","slug":"portfolio-basic","publishDate":"April 25, 2018","heroImage":{"title":"cover-financial","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/1ieaPNRfuBFAVc0uPczYpf/9cee7fabeef5832fd179237aa6e7bbf0/cover_financial.jpg?w=450&h=300&q=50&fm=webp 450w,\nhttps://images.ctfassets.net/tushy4jlcik7/1ieaPNRfuBFAVc0uPczYpf/9cee7fabeef5832fd179237aa6e7bbf0/cover_financial.jpg?w=900&h=600&q=50&fm=webp 900w,\nhttps://images.ctfassets.net/tushy4jlcik7/1ieaPNRfuBFAVc0uPczYpf/9cee7fabeef5832fd179237aa6e7bbf0/cover_financial.jpg?w=1800&h=1200&q=50&fm=webp 1800w","sizes":"(min-width: 1800px) 1800px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/1ieaPNRfuBFAVc0uPczYpf/9cee7fabeef5832fd179237aa6e7bbf0/cover_financial.jpg?w=1800&h=1200&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/1ieaPNRfuBFAVc0uPczYpf/9cee7fabeef5832fd179237aa6e7bbf0/cover_financial.jpg?w=450&h=300&fl=progressive&q=50&fm=jpg 450w,\nhttps://images.ctfassets.net/tushy4jlcik7/1ieaPNRfuBFAVc0uPczYpf/9cee7fabeef5832fd179237aa6e7bbf0/cover_financial.jpg?w=900&h=600&fl=progressive&q=50&fm=jpg 900w,\nhttps://images.ctfassets.net/tushy4jlcik7/1ieaPNRfuBFAVc0uPczYpf/9cee7fabeef5832fd179237aa6e7bbf0/cover_financial.jpg?w=1800&h=1200&fl=progressive&q=50&fm=jpg 1800w","sizes":"(min-width: 1800px) 1800px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,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"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/1ieaPNRfuBFAVc0uPczYpf/9cee7fabeef5832fd179237aa6e7bbf0/cover_financial.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":5,"html":"<p>흔히 투자자들 사이에 내려오는 격언 중에 **\"계란을 한 바구니에 담지 말라\"**라는 말이 있습니다.\n하나의 자산에 올인하는 것보다 다양한 자산에 분산 투자하여 리스크를 최소화하라는 말입니다.</p>\n<p>그렇다면 내가 가진 돈을 어디에 얼마나 배분해야 위험을 낮추고 수익을 최대화 시킬 수 있을까요?\n이러한 문제를 <strong>자산 배분(Asset Allocation)</strong> 문제라고 합니다.\n앞으로 자산 배분 전략 중 위험 대비 수익을 장기적으로 최대화하는 방법에 대해 정리해보려 합니다.</p>\n<br>\n<h2 id=\"단일-자산의-수익률과-변동성-계산\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%9D%BC-%EC%9E%90%EC%82%B0%EC%9D%98-%EC%88%98%EC%9D%B5%EB%A5%A0%EA%B3%BC-%EB%B3%80%EB%8F%99%EC%84%B1-%EA%B3%84%EC%82%B0\" aria-label=\"단일 자산의 수익률과 변동성 계산 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>단일 자산의 수익률과 변동성 계산</h2>\n<p>먼저 단일 자산에 대한 수익률과 위험을 정의해야 합니다.\n아래의 그래프는 17/09/10 부터 18/03/30 기간의 넷마블, 카카오 종가 그래프입니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 64.16584402764066%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"stock ex\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/2rhCMXcWvxdu2wfccm0BKd/00a2a34ac22dbf5d38b5ed8cf6cede4d/stock_ex.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/2rhCMXcWvxdu2wfccm0BKd/00a2a34ac22dbf5d38b5ed8cf6cede4d/stock_ex.png?w=253 253w,\nhttps://images.ctfassets.net/tushy4jlcik7/2rhCMXcWvxdu2wfccm0BKd/00a2a34ac22dbf5d38b5ed8cf6cede4d/stock_ex.png?w=507 507w,\nhttps://images.ctfassets.net/tushy4jlcik7/2rhCMXcWvxdu2wfccm0BKd/00a2a34ac22dbf5d38b5ed8cf6cede4d/stock_ex.png?w=1013 1013w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>넷마블의 기간 수익률은 2%, 카카오는 1%로 비슷하지만 변동성은 눈으로만 봐도 넷마블이 높아보입니다.\n포트폴리오 이론에서 <strong>위험하다는 것은 변동성이 큰 주식을 의미하며, 같은 수익률을 준다면 변동성이 더 낮은 주식을 선호</strong>합니다.</p>\n<br>\n<h2 id=\"평균-수익률-계산\" style=\"position:relative;\"><a href=\"#%ED%8F%89%EA%B7%A0-%EC%88%98%EC%9D%B5%EB%A5%A0-%EA%B3%84%EC%82%B0\" aria-label=\"평균 수익률 계산 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>평균 수익률 계산</h2>\n<p>매수, 매도한 시점을 기준으로 계산하는 기간 수익률은 다들 쉽게 계산합니다.\n그렇다면 월 평균 수익률은 어떻게 계산할 수 있을까요? (수수료는 없다고 가정)</p>\n<p>아마 대부분 매월 발생하는 수익률의 평균을 떠올릴 것 입니다.\n하지만 잘 생각해보면 이 방법은 실제 평균 수익률과 큰 차이가 존재합니다.</p>\n<p>예를 들어 1억의 시드를 가지고 1월에 50% 수익, 2월에 30% 손실이 발생했다고 가정해보겠습니다.\n최종 금액은 1억 500만원이 되며 위의 방법을 이용한 평균 수익률은 (50 + -30) / 2 = 10%가 됩니다.\n하지만 이를 실제로 나누어 계산해보면 실제 수익률과 큰 차이가 존재합니다.</p>\n<p>1월에 10% 수익을 얻었다면 1억 1000만원, 2월에는 1억 2100만원이 됩니다.\n무려 12100 - 10500 = 1600만원이나 차이가 존재합니다.\n이를 제대로 계산하기 위해서는 산술평균이 아닌 <strong>기하평균</strong>을 사용해야합니다.</p>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">E(R) = \\frac{1}{N}\\sum_{i=1}^{N}R_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.326231em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.981231em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></p>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mroot><mrow><msub><mi>R</mi><mn>1</mn></msub><mo>×</mo><msub><mi>R</mi><mn>2</mn></msub><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo>×</mo><msub><mi>R</mi><mi>i</mi></msub></mrow><mi>N</mi></mroot></mrow><annotation encoding=\"application/x-tex\">E(R) = \\sqrt[N]{R_1 \\times R_2... \\times R_i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.04em;vertical-align:-0.18833500000000003em;\"></span><span class=\"mord sqrt\"><span class=\"root\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.739663em;\"><span style=\"top:-2.897998em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size6 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span></span></span></span><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.851665em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.811665em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width=\"400em\" height=\"1.08em\" viewBox=\"0 0 400000 1080\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z\"></path></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.18833500000000003em;\"><span></span></span></span></span></span></span></span></span></span></p>\n<p>첫 번째 수식이 산술평균이고 두 번째 수식이 기하평균입니다. 여기에서 n은 기간이 됩니다.\n앞의 예시에 기하평균을 이용해서 평균 수익률을 계산해보면 대략 2.49%가 나옵니다.\n이를 이용하여 다시 계산해보면 1월에 1억 249만원, 2월에 1억 504만원이 나옵니다.\n오차는 10504 - 10500 = 4만원으로 훨씬 정확하게 나오는 것을 볼 수 있습니다.</p>\n<br>\n<h2 id=\"변동성-계산\" style=\"position:relative;\"><a href=\"#%EB%B3%80%EB%8F%99%EC%84%B1-%EA%B3%84%EC%82%B0\" aria-label=\"변동성 계산 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>변동성 계산</h2>\n<br>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup><mo>=</mo><mi>V</mi><mi>a</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><mo stretchy=\"false\">(</mo><msub><mi>R</mi><mi>i</mi></msub><mo>−</mo><mover accent=\"true\"><mi>R</mi><mo>ˉ</mo></mover><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\sigma^2 = Var(R) = \\frac{1}{N-1}\\sum_{i=1}^{N}(R_i-\\bar{R})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3845619999999998em;vertical-align:-0.403331em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.403331em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.981231em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.07011em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8201099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p>변동성(=위험)은 기댓값으로 부터 얼마나 떨어져있는지를 나타내는 <strong>분산</strong>과 동일한 의미를 가집니다.\n간단하게 보면 아래의 카카오 종가 그래프에서 평균선과 차이를 모두 더한 값이라고 볼 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 64.29277942631059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"stock var\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/45ro5Gh0oIpDDohLxGWuoK/df2b4245aaacb577448e29412d1c17e8/stock_var.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/45ro5Gh0oIpDDohLxGWuoK/df2b4245aaacb577448e29412d1c17e8/stock_var.png?w=253 253w,\nhttps://images.ctfassets.net/tushy4jlcik7/45ro5Gh0oIpDDohLxGWuoK/df2b4245aaacb577448e29412d1c17e8/stock_var.png?w=506 506w,\nhttps://images.ctfassets.net/tushy4jlcik7/45ro5Gh0oIpDDohLxGWuoK/df2b4245aaacb577448e29412d1c17e8/stock_var.png?w=1011 1011w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<br>\n<h2 id=\"포트폴리오의-기대수익률과-변동성-계산\" style=\"position:relative;\"><a href=\"#%ED%8F%AC%ED%8A%B8%ED%8F%B4%EB%A6%AC%EC%98%A4%EC%9D%98-%EA%B8%B0%EB%8C%80%EC%88%98%EC%9D%B5%EB%A5%A0%EA%B3%BC-%EB%B3%80%EB%8F%99%EC%84%B1-%EA%B3%84%EC%82%B0\" aria-label=\"포트폴리오의 기대수익률과 변동성 계산 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>포트폴리오의 기대수익률과 변동성 계산</h2>\n<p>처음 설명한 자산 배분 문제는 결국 아래와 같은 과정을 거치게 됩니다.</p>\n<ol>\n<li>투자할 자산군을 결정</li>\n<li>결정한 자산 별 수익률, 변동성 및 상관관계를 계산</li>\n<li>변동성 대비 수익률이 가장 높은 포트폴리오를 구성</li>\n</ol>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi><mo>=</mo><mi>p</mi><mi>o</mi><mi>r</mi><mi>t</mi><mi>f</mi><mi>o</mi><mi>l</mi><mi>i</mi><mi>o</mi><mo>=</mo><mo stretchy=\"false\">[</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>w</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo separator=\"true\">,</mo><msub><mi>w</mi><mi>N</mi></msub><msup><mo stretchy=\"false\">]</mo><mi>T</mi></msup><mo separator=\"true\">,</mo><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><msub><mi>w</mi><mi>i</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">w = portfolio = [w_1, w_2, ... , w_N]^T, where \\sum_{i=1}^{N}w_i = 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2809409999999999em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">]</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathdefault\">h</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.981231em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span></span></p>\n<p>포트폴리오의 경우 앞서 설명한 단일 자산과는 달리 여러 자산으로 구성됩니다.\n따라서, 포트폴리오의 기대수익률과 변동성을 계산하려면 주어진 예산에서의 자산 별 투자 비중이 정해져야 합니다.</p>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>μ</mi><mi>p</mi></msub><mo>=</mo><mi>p</mi><mi>o</mi><mi>r</mi><mi>t</mi><mi>f</mi><mi>o</mi><mi>l</mi><mi>i</mi><mi>o</mi><mo>×</mo><mi>e</mi><mi>x</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mo stretchy=\"false\">[</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>w</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo separator=\"true\">,</mo><msub><mi>w</mi><mi>N</mi></msub><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">[</mo><msub><mi>R</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>R</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo separator=\"true\">,</mo><msub><mi>R</mi><mi>N</mi></msub><msup><mo stretchy=\"false\">]</mo><mi>T</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mu_p = portfolio \\times expectation = [w_1, w_2, ... , w_N][R_1, R_2, ... , R_N]^T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">x</span><span class=\"mord mathdefault\">p</span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">c</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">i</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0913309999999998em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">]</span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">]</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8413309999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p><strong>포트폴리오의 기대수익률</strong>은 개별 자산의 기대수익률과 포트폴리오의 비중을 곱해서 합산하는 방법으로 계산합니다.</p>\n<br>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>o</mi><mi>v</mi><mo stretchy=\"false\">(</mo><msup><mi>R</mi><mn>1</mn></msup><mo separator=\"true\">,</mo><msup><mi>R</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo><mo>=</mo><mi>E</mi><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">(</mo><msup><mi>R</mi><mn>1</mn></msup><mo>−</mo><mover accent=\"true\"><msup><mi>R</mi><mn>1</mn></msup><mo>ˉ</mo></mover><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><msup><mi>R</mi><mn>2</mn></msup><mo>−</mo><mover accent=\"true\"><msup><mi>R</mi><mn>2</mn></msup><mo>ˉ</mo></mover><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi>N</mi><mo>−</mo><mn>1</mn></mrow></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><mo stretchy=\"false\">(</mo><msup><mi>R</mi><mn>1</mn></msup><mo>−</mo><mover accent=\"true\"><msup><mi>R</mi><mn>1</mn></msup><mo>ˉ</mo></mover><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><msup><mi>R</mi><mn>2</mn></msup><mo>−</mo><mover accent=\"true\"><msup><mi>R</mi><mn>2</mn></msup><mo>ˉ</mo></mover><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Cov(R^1, R^2) = E[(R^1-\\bar{R^1})(R^2-\\bar{R^2})] = \\frac{1}{N-1}\\sum_{i=1}^{N}(R^1-\\bar{R^1})(R^2-\\bar{R^2})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">E</span><span class=\"mopen\">[</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.126888em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8768879999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.309108em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.126888em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8768879999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.309108em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3845619999999998em;vertical-align:-0.403331em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.403331em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.981231em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.126888em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8768879999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.309108em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.126888em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8768879999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.740108em;\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.309108em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p><strong>포트폴리오의 변동성</strong>은 **공분산(Covarience)**을 이용해서 계산할 수 있습니다.\n공분산은 확률변수가 2개 이상일 때 각 확률변수들이 얼마나 퍼져있는지를 나타내는 값을 알려주는 지표입니다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ρ</mi><mo>=</mo><mfrac><mrow><mi>C</mi><mi>o</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>S</mi><mi>t</mi><mi>d</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mi>S</mi><mi>t</mi><mi>d</mi><mo stretchy=\"false\">(</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mo>−</mo><mn>1</mn><mo>≤</mo><mi>ρ</mi><mo>≤</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\rho = \\cfrac{Cov(X,Y)}{Std(X)Std(Y)}, (-1\\leq\\rho\\leq1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">ρ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.526em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.5899999999999999em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span><span class=\"mord mathdefault\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">d</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.74em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathdefault\">o</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8304100000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">ρ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span></div>\n<br>\n<p>**상관관계(Correlation Coefficient)**는 확률변수의 절대적 크기에 영향을 받지 않도록 0과 1사이로 단위화시킨 값이라고 보시면 됩니다.\n100만원 대의 주식 2개와 10만원 대의 주식 2개의 각 공분산을 계산해보면 100만원 대 주식의 공분산에서 더 큰 값이 나오게 됩니다.\n이러한 크기차이에 영향을 받지 않도록 분산의 크기만큼 나눈 것 입니다.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>σ</mi><mn>11</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>σ</mi><mn>12</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>σ</mi><mrow><mn>1</mn><mi>n</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mi><mi mathvariant=\"normal\">⋮</mi><mpadded height=\"+0em\" voffset=\"0em\"><mspace mathbackground=\"black\" width=\"0em\" height=\"1.5em\"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mi><mi mathvariant=\"normal\">⋮</mi><mpadded height=\"+0em\" voffset=\"0em\"><mspace mathbackground=\"black\" width=\"0em\" height=\"1.5em\"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">⋱</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mi><mi mathvariant=\"normal\">⋮</mi><mpadded height=\"+0em\" voffset=\"0em\"><mspace mathbackground=\"black\" width=\"0em\" height=\"1.5em\"></mspace></mpadded></mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>σ</mi><mrow><mi>n</mi><mn>1</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>σ</mi><mrow><mi>n</mi><mn>2</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>σ</mi><msup><mi>n</mi><mn>2</mn></msup></msub></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>w</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>w</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mi><mi mathvariant=\"normal\">⋮</mi><mpadded height=\"+0em\" voffset=\"0em\"><mspace mathbackground=\"black\" width=\"0em\" height=\"1.5em\"></mspace></mpadded></mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>w</mi><mi>N</mi></msub></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow></mrow><annotation encoding=\"application/x-tex\"> \\begin{bmatrix}\n  \\sigma_{11} &#x26; \\sigma_{12} &#x26; \\cdots &#x26; \\sigma_{1n} \\\\\n  \\vdots  &#x26; \\vdots  &#x26; \\ddots &#x26; \\vdots  \\\\\n  \\sigma_{n1} &#x26; \\sigma_{n2} &#x26; \\cdots &#x26; \\sigma_{n^2} \n \\end{bmatrix}\n \\begin{bmatrix}\n  w_{1} \\\\\n  w_{2} \\\\\n  \\vdots \\\\\n  w_{N} \\\\\n\\end{bmatrix}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:5.459999999999999em;vertical-align:-2.4799999999999995em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.352005em;\"><span style=\"top:-1.9499950000000004em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎣</span></span></span><span style=\"top:-3.0999950000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-3.1109850000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-4.352005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎡</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.850025em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3800000000000003em;\"><span style=\"top:-5.2275em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.3674999999999997em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\">⋮</span><span class=\"mord rule\" style=\"border-right-width:0em;border-top-width:1.5em;bottom:0em;\"></span></span></span></span><span style=\"top:-2.1674999999999995em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8800000000000006em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3800000000000003em;\"><span style=\"top:-5.2275em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.3674999999999997em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\">⋮</span><span class=\"mord rule\" style=\"border-right-width:0em;border-top-width:1.5em;bottom:0em;\"></span></span></span></span><span style=\"top:-2.1674999999999995em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8800000000000006em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3800000000000003em;\"><span style=\"top:-5.04em;\"><span class=\"pstrut\" style=\"height:3.5em;\"></span><span class=\"mord\"><span class=\"minner\">⋯</span></span></span><span style=\"top:-3.1799999999999997em;\"><span class=\"pstrut\" style=\"height:3.5em;\"></span><span class=\"mord\"><span class=\"minner\">⋱</span></span></span><span style=\"top:-1.9799999999999995em;\"><span class=\"pstrut\" style=\"height:3.5em;\"></span><span class=\"mord\"><span class=\"minner\">⋯</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8800000000000006em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.3800000000000003em;\"><span style=\"top:-5.2275em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mathdefault mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.3674999999999997em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\">⋮</span><span class=\"mord rule\" style=\"border-right-width:0em;border-top-width:1.5em;bottom:0em;\"></span></span></span></span><span style=\"top:-2.1674999999999995em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.52238em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463142857142857em;\"><span style=\"top:-2.786em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.17762em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8800000000000006em;\"><span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.352005em;\"><span style=\"top:-1.9499950000000004em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎦</span></span></span><span style=\"top:-3.0999950000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-3.1109850000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-4.352005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎤</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.850025em;\"><span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.953995em;\"><span style=\"top:-1.3499850000000007em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎣</span></span></span><span style=\"top:-2.4999850000000006em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-3.0959850000000007em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-3.6919850000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-3.712975em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-4.953995em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎡</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.4500349999999997em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.9799999999999995em;\"><span style=\"top:-5.8275em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-4.6275em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.7674999999999996em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\">⋮</span><span class=\"mord rule\" style=\"border-right-width:0em;border-top-width:1.5em;bottom:0em;\"></span></span></span></span><span style=\"top:-1.5675000000000006em;\"><span class=\"pstrut\" style=\"height:3.6875em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.4799999999999995em;\"><span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.953995em;\"><span style=\"top:-1.3499850000000007em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎦</span></span></span><span style=\"top:-2.4999850000000006em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-3.0959850000000007em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-3.6919850000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-3.712975em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-4.953995em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎤</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.4500349999999997em;\"><span></span></span></span></span></span></span></span></span></span></span></span></div>\n<br>\n<p>결국 포트폴리오의 변동성은 포트폴리오의 비중, 투자 자산들 간의 공분산 행렬, 다시 포트폴리오 비중을 곱해 계산할 수 있습니다.\n아래는 파이썬의 <code class=\"language-text\">numpy, pandas, matplotlib</code>을 이용해서 계산하는 노트북 링크입니다.\n다음에는 포트폴리오 이론의 시초이자 최적의 <strong>mean-varience를 계산하는 markowitz</strong> 모델에 대해 정리해보겠습니다.</p>\n<p><a href=\"http://nbviewer.jupyter.org/github/Swalloow/pytrading/blob/master/notebook/portfolio-optimization.ipynb\">http://nbviewer.jupyter.org/github/Swalloow/pytrading/blob/master/notebook/portfolio-optimization.ipynb</a></p>\n<br>","excerpt":"…"}}}},{"node":{"title":"Structuring Your TensorFlow Models","id":"976a40c0-463b-5a5b-918a-bb7adeb7a48e","slug":"structuring-tf","publishDate":"April 20, 2018","heroImage":{"title":"cover-datascience","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=450&h=300&q=50&fm=webp 450w,\nhttps://images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=900&h=600&q=50&fm=webp 900w,\nhttps://images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=1800&h=1200&q=50&fm=webp 1800w","sizes":"(min-width: 1800px) 1800px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=1800&h=1200&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=450&h=300&fl=progressive&q=50&fm=jpg 450w,\nhttps://images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=900&h=600&fl=progressive&q=50&fm=jpg 900w,\nhttps://images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=1800&h=1200&fl=progressive&q=50&fm=jpg 1800w","sizes":"(min-width: 1800px) 1800px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQBAwUG/8QAHxAAAgEEAgMAAAAAAAAAAAAAAQIAAwQRIQVCExSR/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oADAMBAAIRAxEAPwCthE7ioFIBOznEy05C8uWI8wpjHVZCF3uFSpUd99m18kpIXSYyTqES96ouiFMJnScb/9k="}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":4,"html":"<p>이 글은 저자의 허락을 받아 번역한 글 입니다. <a href=\"https://danijar.com/structuring-your-tensorflow-models/\">원문 링크</a></p>\n<p>TensorFlow에서 모델을 정의하다보면 어느새 많은 양의 코드가 생성된 경험이 있을 것 입니다. 어떻게 하면 가독성과 재사용성이 높은 코드로 구성할 수 있을까요? 여기에서 실제 동작하는 예시 코드를 확인하실 수 있습니다. <a href=\"https://gist.github.com/danijar/8663d3bbfd586bffecf6a0094cd116f2\">Gist Link</a></p>\n<br>\n<h2 id=\"defining-the-compute-graph\" style=\"position:relative;\"><a href=\"#defining-the-compute-graph\" aria-label=\"defining the compute graph permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Defining the Compute Graph</h2>\n<p>모델 당 하나의 클래스부터 시작하는 것이 좋습니다. 그 클래스의 인터페이스는 무엇인가요? 일반적으로 모델은 input data와 target placeholder를 연결하며 training, evaluation 그리고 inference 관련 함수를 제공합니다.</p>\n<script src=\"https://gist.github.com/Swalloow/c90dea8bce9ceee147851656f48fac9f.js\"></script>\n<p>위의 코드가 기본적으로 TensorFlow codebase에서 모델이 정의되는 방식입니다. 그러나 여기에도 몇 가지 문제가 있습니다. 가장 중요한 문제는 전체 그래프가 단일 함수 생성자로 정의된다는 점 입니다. 이렇게 되면 가독성이 떨어지며 재사용이 어렵습니다.</p>\n<br>\n<h2 id=\"using-properties\" style=\"position:relative;\"><a href=\"#using-properties\" aria-label=\"using properties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using Properties</h2>\n<p>함수가 호출 될 때마다 그래프는 확장되기 때문에 함수로 분할하는 것만으로는 부족합니다. 따라서 함수를 처음 호출하는 시점에 operation들이 그래프에 추가되도록 해야합니다. 이러한 방식을 기본적으로 <strong>lazy-loading</strong>이라고 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Model</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        data_size <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>get_shape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        target_size <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span>get_shape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        weight <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>Variable<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>truncated_normal<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>data_size<span class=\"token punctuation\">,</span> target_size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        bias <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>Variable<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>constant<span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> shape<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>target_size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        incoming <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>matmul<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span> weight<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> bias\n        self<span class=\"token punctuation\">.</span>_prediction <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>softmax<span class=\"token punctuation\">(</span>incoming<span class=\"token punctuation\">)</span>\n        cross_entropy <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>tf<span class=\"token punctuation\">.</span>reduce_sum<span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>_prediction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>_optimize <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>train<span class=\"token punctuation\">.</span>RMSPropOptimizer<span class=\"token punctuation\">(</span><span class=\"token number\">0.03</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>minimize<span class=\"token punctuation\">(</span>cross_entropy<span class=\"token punctuation\">)</span>\n        mistakes <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>not_equal<span class=\"token punctuation\">(</span>\n            tf<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>_prediction<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>_error <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>reduce_mean<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>cast<span class=\"token punctuation\">(</span>mistakes<span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token decorator annotation punctuation\">@property</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">prediction</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_prediction\n\n    <span class=\"token decorator annotation punctuation\">@property</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">optimize</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_optimize\n\n    <span class=\"token decorator annotation punctuation\">@property</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">error</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_error</code></pre></div>\n<p>위의 방식이 첫 번째 예제보다 훨씬 좋습니다. 이제 코드는 독립적인 함수로 구성되어 있습니다. 그러나 아직 코드는 lazy-loading으로 인해 약간 복잡해보입니다. 이를 어떻게 개선 할 수 있는지 보도록 하겠습니다.</p>\n<br>\n<h2 id=\"lazy-property-decorator\" style=\"position:relative;\"><a href=\"#lazy-property-decorator\" aria-label=\"lazy property decorator permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lazy Property Decorator</h2>\n<p>파이썬은 아주 유연한 언어입니다. 이제 마지막 예제에서 중복 코드를 제거하는 방법을 보여드리겠습니다. 우리는 <code class=\"language-text\">@property</code>처럼 동작하지만 한번만 함수를 평가하는 decorator를 사용할 것입니다. decorator는 함수(접두사를 앞에 붙임)의 이름을 따서 멤버에 결과를 저장하고 나중에 호출되는 시점에 해당 값을 반환합니다. custom decorator를 아직 사용해본적이 없다면, <a href=\"http://blog.apcelent.com/python-decorator-tutorial-with-example.html\">이 가이드</a>를 참고하시면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Model</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data\n        self<span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> target\n        self<span class=\"token punctuation\">.</span>_prediction <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span>\n        self<span class=\"token punctuation\">.</span>_optimize <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span>\n        self<span class=\"token punctuation\">.</span>_error <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span>\n\n    <span class=\"token decorator annotation punctuation\">@property</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">prediction</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> self<span class=\"token punctuation\">.</span>_prediction<span class=\"token punctuation\">:</span>\n            data_size <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>get_shape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            target_size <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>get_shape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n            weight <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>Variable<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>truncated_normal<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>data_size<span class=\"token punctuation\">,</span> target_size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            bias <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>Variable<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>constant<span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> shape<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>target_size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            incoming <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>matmul<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">,</span> weight<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> bias\n            self<span class=\"token punctuation\">.</span>_prediction <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>softmax<span class=\"token punctuation\">(</span>incoming<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_prediction\n\n    <span class=\"token decorator annotation punctuation\">@property</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">optimize</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> self<span class=\"token punctuation\">.</span>_optimize<span class=\"token punctuation\">:</span>\n            cross_entropy <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>tf<span class=\"token punctuation\">.</span>reduce_sum<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>prediction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            optimizer <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>train<span class=\"token punctuation\">.</span>RMSPropOptimizer<span class=\"token punctuation\">(</span><span class=\"token number\">0.03</span><span class=\"token punctuation\">)</span>\n            self<span class=\"token punctuation\">.</span>_optimize <span class=\"token operator\">=</span> optimizer<span class=\"token punctuation\">.</span>minimize<span class=\"token punctuation\">(</span>cross_entropy<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_optimize\n\n    <span class=\"token decorator annotation punctuation\">@property</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">error</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> self<span class=\"token punctuation\">.</span>_error<span class=\"token punctuation\">:</span>\n            mistakes <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>not_equal<span class=\"token punctuation\">(</span>\n                tf<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>prediction<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            self<span class=\"token punctuation\">.</span>_error <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>reduce_mean<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>cast<span class=\"token punctuation\">(</span>mistakes<span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>_error</code></pre></div>\n<p>위의 decorator를 사용해서 예시 코드는 아래와 같이 간결해졌습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> functools\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">lazy_property</span><span class=\"token punctuation\">(</span>function<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    attribute <span class=\"token operator\">=</span> <span class=\"token string\">'_cache_'</span> <span class=\"token operator\">+</span> function<span class=\"token punctuation\">.</span>__name__\n\n    <span class=\"token decorator annotation punctuation\">@property</span>\n    <span class=\"token decorator annotation punctuation\">@functools<span class=\"token punctuation\">.</span>wraps</span><span class=\"token punctuation\">(</span>function<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">decorator</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> <span class=\"token builtin\">hasattr</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> attribute<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token builtin\">setattr</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> attribute<span class=\"token punctuation\">,</span> function<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">getattr</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> attribute<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> decorator</code></pre></div>\n<p>생성자에서 property를 언급했다는 부분이 중요합니다. 이렇게 구성한다면 <code class=\"language-text\">tf.initialize_variables()</code>를 실행할 때 전체 그래프가 정의됩니다.</p>\n<br>\n<h2 id=\"organizing-the-graph-with-scopes\" style=\"position:relative;\"><a href=\"#organizing-the-graph-with-scopes\" aria-label=\"organizing the graph with scopes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Organizing the Graph with Scopes</h2>\n<p>이제 코드에서 모델을 정의하는 부분은 깔끔해졌지만, 그래프의 연산 부분은 여전히 복잡합니다. 만일 <a href=\"https://www.tensorflow.org/programmers_guide/graph_viz\">그래프를 시각화</a>한다면, 서로 연결되어 있는 노드가 많이 나타날 것 입니다. 이를 해결하기 위한 방법은 <code class=\"language-text\">tf.name_scope('name')</code> 또는 <code class=\"language-text\">tf.variable_scope('name')</code>을 사용하여 각 함수의 내용을 래핑하는 것 입니다. 이렇게 하면 노드들은 그래프 상에서 그룹화되어 있을 것 입니다. 우리는 이전에 만들었던 decorator를 이용하여 이를 자동으로 적용시켜보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Model</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data\n        self<span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> target\n        self<span class=\"token punctuation\">.</span>prediction\n        self<span class=\"token punctuation\">.</span>optimize\n        self<span class=\"token punctuation\">.</span>error\n\n    <span class=\"token decorator annotation punctuation\">@lazy_property</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">prediction</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        data_size <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>get_shape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        target_size <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>get_shape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        weight <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>Variable<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>truncated_normal<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>data_size<span class=\"token punctuation\">,</span> target_size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        bias <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>Variable<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>constant<span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> shape<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>target_size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        incoming <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>matmul<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">,</span> weight<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> bias\n        <span class=\"token keyword\">return</span> tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>softmax<span class=\"token punctuation\">(</span>incoming<span class=\"token punctuation\">)</span>\n\n    <span class=\"token decorator annotation punctuation\">@lazy_property</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">optimize</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        cross_entropy <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>tf<span class=\"token punctuation\">.</span>reduce_sum<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>prediction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        optimizer <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>train<span class=\"token punctuation\">.</span>RMSPropOptimizer<span class=\"token punctuation\">(</span><span class=\"token number\">0.03</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> optimizer<span class=\"token punctuation\">.</span>minimize<span class=\"token punctuation\">(</span>cross_entropy<span class=\"token punctuation\">)</span>\n\n    <span class=\"token decorator annotation punctuation\">@lazy_property</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">error</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        mistakes <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>not_equal<span class=\"token punctuation\">(</span>\n            tf<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>prediction<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> tf<span class=\"token punctuation\">.</span>reduce_mean<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>cast<span class=\"token punctuation\">(</span>mistakes<span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>lazy caching 이외에도 TensorFlow의 기능을 포함시키므로 decorator에 새로운 이름을 지정했습니다. 그 외의 나머지 부분은 이전과 동일합니다.</p>\n<p>이제 <code class=\"language-text\">@define_scope</code> decorator를 통해 <code class=\"language-text\">tf.variable_scope()</code>에 인자를 전달할 수 있습니다. 예를 들어 해당 scope에 default initializer를 정의할 수 있습니다. 이 부분이 더 궁금하다면 <a href=\"https://gist.github.com/danijar/8663d3bbfd586bffecf6a0094cd116f2\">전체 예제 코드</a>를 확인해보시면 됩니다.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p><a href=\"https://danijar.com/structuring-your-tensorflow-models/\">https://danijar.com/structuring-your-tensorflow-models/</a></p>\n<br>","excerpt":"이 글은 저자의 허락을 받아 번역한 글 입니다. 원문 링크 TensorFlow…"}}}}]}},"pageContext":{"basePath":"","paginationPath":"","pageNumber":6,"humanPageNumber":7,"skip":37,"limit":6,"numberOfPages":16,"previousPagePath":"/6","nextPagePath":"/8"}},"staticQueryHashes":["1946181227","2744905544","3732430097"]}