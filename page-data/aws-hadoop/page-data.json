{"componentChunkName":"component---src-templates-post-js","path":"/aws-hadoop/","result":{"data":{"contentfulPost":{"title":"AWS에 Hadoop MR 어플리케이션 환경 구축하기","slug":"aws-hadoop","metaDescription":null,"publishDate":"June 13, 2018","publishDateISO":"2018-06-13","tags":[{"title":"DataEngineering","id":"25d7d0d6-3cf7-5e19-a5cb-9c3fa926046f","slug":"dataengineering"}],"heroImage":{"title":"cover-dataengineering","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&q=50&fm=webp 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&q=50&fm=webp 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(min-width: 1600px) 1600px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&fl=progressive&q=50&fm=jpg 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&fl=progressive&q=50&fm=jpg 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg 1600w","sizes":"(min-width: 1600px) 1600px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgb/xAAcEAACAgMBAQAAAAAAAAAAAAAAAQIREiExYeH/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDK1DF0vgtxW9EylQu8nTotmo+gHfAEP//Z"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":4,"html":"<p>이번 학기에 하둡 프로그래밍 강의를 들으면서 정말 실습 환경의 개선이 필요하다는 생각이 들었습니다...\n나약한 실습 환경속에서 과제와 기말 프로젝트를 제출해야하는 후배들을 위해 AWS를 추천합니다!</p>\n<br>\n<h2 id=\"ec2-amazon-linux2에-기본-환경-구축\" style=\"position:relative;\"><a href=\"#ec2-amazon-linux2%EC%97%90-%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95\" aria-label=\"ec2 amazon linux2에 기본 환경 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EC2 Amazon Linux2에 기본 환경 구축</h2>\n<p>AWS에는 EMR이라는 클러스터 서비스가 있지만, 스터디 목적이라면 비용을 생각해서 사용하지 않겠습니다.\nAmazon Linux AMI는 EC2에서 편하게 사용할 수 있도록 지원하고 관리하는 리눅스 이미지입니다.\n만일 학생용 크레딧이 있다면 <strong>t2.medium</strong> 인스턴스를 추천합니다.</p>\n<p>먼저, JAVA JDK와 Hadoop 파일을 받겠습니다. 실습 환경은 자바 7, 하둡 1.2 버전입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> yum update <span class=\"token parameter variable\">-y</span>\n$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> java-1.7.0-openjdk-devel\n$ <span class=\"token function\">wget</span> https://archive.apache.org/dist/hadoop/core/hadoop-1.2.1/hadoop-1.2.1.tar.gz\n$ <span class=\"token function\">tar</span> xvfz hadoop-1.2.1</code></pre></div>\n<p>그리고 자바 프로젝트를 위해 Maven도 설치해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">wget</span> http://mirror.navercorp.com/apache/maven/maven-3/3.5.3/binaries/apache-maven-3.5.3-bin.tar.gz\n$ <span class=\"token function\">tar</span> xvfs apache-maven-3.5.3-bin.tar.gz\n$ <span class=\"token function\">mv</span> apache-maven-3.5.3/ apache-maven\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/profile.d/maven.sh\n\n<span class=\"token comment\"># Apache Maven Environment Variables</span>\n<span class=\"token comment\"># MAVEN_HOME for Maven 1 - M2_HOME for Maven 2</span>\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">M2_HOME</span><span class=\"token operator\">=</span>/home/ec2-user/apache-maven\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token variable\">${M2_HOME}</span>/bin:<span class=\"token variable\">${<span class=\"token environment constant\">PATH</span>}</span>\n\n$ <span class=\"token function\">chmod</span> +x maven.sh\n$ <span class=\"token builtin class-name\">source</span> /etc/profile.d/maven.sh</code></pre></div>\n<p>정상적으로 설치가 되었다면 아래의 명령어에 대한 결과가 나옵니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">java</span> <span class=\"token parameter variable\">--version</span>\n$ mvn <span class=\"token parameter variable\">--version</span></code></pre></div>\n<br>\n<h2 id=\"hadoop-환경-구축\" style=\"position:relative;\"><a href=\"#hadoop-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95\" aria-label=\"hadoop 환경 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop 환경 구축</h2>\n<p>실습환경은 <strong>Pseudo-Distibuted</strong> 모드로 진행합니다.\n먼저 Password less SSH Login을 설정해주어야 합니다.\n그리고 편의를 위해 hadoop-1.2.1 폴더에 Symbolic link를 생성하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ssh login setting</span>\n$ ssh-keygen <span class=\"token parameter variable\">-t</span> rsa <span class=\"token parameter variable\">-P</span> <span class=\"token string\">\"\"</span>\n$ <span class=\"token function\">cat</span> /home/ec2-user/.ssh/id_rsa.pub <span class=\"token operator\">>></span> /home/ec2-user/.ssh/authorized_keys\n\n<span class=\"token comment\"># symbolic link</span>\n$ <span class=\"token function\">ln</span> <span class=\"token parameter variable\">-s</span> hadoop-1.2.1 hadoop</code></pre></div>\n<p>이제 HDFS와 MR 실행을 위해 설정파일을 수정해줍니다.\n먼저 <code class=\"language-text\">hadoop-env.sh</code>을 열어 <code class=\"language-text\">JAVA_HOME</code> 환경변수를 지정해줍니다.\n가상분산모드에서는 masters, slaves 파일을 수정할 필요가 없습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> hadoop\n$ <span class=\"token function\">vi</span> conf/hadoop-env.sh\n\n<span class=\"token comment\"># set JAVA_HOME in this file, so that it is correctly defined on</span>\n<span class=\"token comment\"># remote nodes.</span>\n\n<span class=\"token comment\"># The java implementation to use. Required.</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">JAVA_HOME</span><span class=\"token operator\">=</span>/usr/lib/jvm/java-1.7.0\n\n<span class=\"token comment\"># Extra Java CLASSPATH elements.  Optional.</span>\n<span class=\"token comment\"># export HADOOP_CLASSPATH=</span></code></pre></div>\n<p>이제 <code class=\"language-text\">core-site.xml</code> 파일을 아래와 같이 수정해줍니다.\nHDFS 데이터 파일들은 홈 디렉토리의 hadoop-data 폴더에 저장하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> conf/core-site.xml\n\n<span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>fs.default.name<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>hdfs://localhost:900<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>hadoop.tmp.dir<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>/home/ec2-user/hadoop-data/<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">hdfs-site.xml</code> 파일도 수정해줍니다.\ndfs.replication 프로퍼티는 복제 개수를 의미합니다.\n일반적으로 복제 개수를 3으로 두는 것을 권장하지만,\n실습에서는 Fully-Distributed 모드가 아니기 때문에 1로 설정하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> conf/hdfs-site.xml\n\n<span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs.replication<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span><span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">mapred-site.xml</code> 파일도 수정해줍니다.\nmapred.job.tracker 프로퍼티는 job tracker가 동작하는 서버를 말합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> conf/mapred-site.xml\n\n<span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>mapred.job.tracker<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>localhost:900<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<br>\n<h2 id=\"hadoop-mr\" style=\"position:relative;\"><a href=\"#hadoop-mr\" aria-label=\"hadoop mr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop MR</h2>\n<p>이제 NameNode를 초기화하고 하둡과 관련된 모든 데몬을 실행합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./bin/hadoop namenode-format\n./bin/start-all.sh</code></pre></div>\n<p>jps를 통해 자바 프로세스가 제대로 실행되었는지 확인할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ jps\n3368 TaskTracker\n2991 DataNode\n3241 JobTracker\n3480 Jps\n2872 NameNode\n3139 SecondaryNameNode</code></pre></div>\n<p>HDFS 웹 인터페이스 주소는 <a href=\"http://localhost:50070\">http://localhost:50070</a> 이며,\nMapReduce 웹 인터페이스 주소는 <a href=\"http://localhost:50030\">http://localhost:50030</a> 입니다.\n들어가시면 아래와 같은 화면이 나타납니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 55.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"webint\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/4wBkdSrwvt01XDkBr28SUk/f199d753b8ce9ee2140778f2115d65d4/webint.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/4wBkdSrwvt01XDkBr28SUk/f199d753b8ce9ee2140778f2115d65d4/webint.png?w=720 720w,\nhttps://images.ctfassets.net/tushy4jlcik7/4wBkdSrwvt01XDkBr28SUk/f199d753b8ce9ee2140778f2115d65d4/webint.png?w=1440 1440w,\nhttps://images.ctfassets.net/tushy4jlcik7/4wBkdSrwvt01XDkBr28SUk/f199d753b8ce9ee2140778f2115d65d4/webint.png?w=2880 2880w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>이제 기본으로 설치되어 있는 WordCount 예제를 실행시켜보겠습니다.\n먼저 WordCount 예제의 input 데이터를 HDFS에 업로드하고 jar 파일과 output 경로를 지정해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ./bin/hadoop fs <span class=\"token parameter variable\">-put</span> conf/hadoop-env.sh ./hadoop-env.sh\n$ ./bin/hadoop jar hadoop-examples-1.2.1.jar wordcount hadoop-env.sh output</code></pre></div>\n<p>HDFS에 write한 결과는 HDFS의 output 경로에서 확인하실 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ./bin/hadoop fs <span class=\"token parameter variable\">-ls</span> output\n$ ./bin/hadoop fs <span class=\"token parameter variable\">-cat</span> output/part-r-00000</code></pre></div>\n<br>\n<h2 id=\"intellij\" style=\"position:relative;\"><a href=\"#intellij\" aria-label=\"intellij permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IntelliJ</h2>\n<p>이번엔 예제가 아니라 Hadoop MR 어플리케이션 프로젝트를 새로 생성해보겠습니다.\nIntelliJ에서 JAVA, maven 프로젝트를 생성하시면 됩니다.</p>\n<p>그리고 pom.xml은 아래와 같이 수정해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.swalloow.hadoop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>hadoop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.0-SNAPSHOT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.hadoop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>hadoop-core<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.2.1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Mapper와 Reducer 클래스를 수정한 다음, <code class=\"language-text\">mvn packages</code> 명령어를 통해 jar 파일을 생성합니다.\n그리고 input 파일을 이전과 동일하게 HDFS에 추가하고 생성한 jar 파일을 통해 MR job을 실행시키시면 됩니다.</p>\n<p>아래 링크는 코인 거래 데이터를 입력받아 이동평균선(SMA) 추세를 계산해주는 간단한 예시 프로젝트입니다. 템플릿은 자유롭게 참고하셔도 됩니다!</p>\n<p><a href=\"https://github.com/Swalloow/hadoop-mr-project\">https://github.com/Swalloow/hadoop-mr-project</a></p>\n<br>","excerpt":"이번 학기에 하둡 프로그래밍 강의를 들으면서 정말 실습 환경의 개선이 필요하다는 생각이 들었습니다...\n나약한 실습 환경속에서 과제와 기말 프로젝트를 제출해야하는 후배들을 위해 AWS를 추천합니다! EC2 Amazon Linux2에 기본 환경 구축 AWS에는 EMR이라는 클러스터 서비스가 있지만, 스터디 목적이라면 비용을 생각해서 사용하지 않겠습니다.\nAmazon Linux AMI는 EC2에서 편하게 사용할 수 있도록 지원하고 관리하는 리눅스 이미지입니다.\n만일 학생용 크레딧이 있다면 t2.medium 인스턴스를 추천합니다. 먼저, JAVA JDK와 Hadoop…"}}}},"pageContext":{"slug":"aws-hadoop","basePath":"","prev":{"slug":"raft-consensus","publishDate":"2018-09-01"},"next":{"slug":"portfolio-basic","publishDate":"2018-04-25"}}},"staticQueryHashes":["1946181227","2744905544","3732430097"]}