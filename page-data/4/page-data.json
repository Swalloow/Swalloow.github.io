{"componentChunkName":"component---src-templates-posts-js","path":"/4","result":{"data":{"allContentfulPost":{"edges":[{"node":{"title":"K8S 클러스터 초기 설정을 위한 Helm Chart 만들기","id":"d5872346-83a6-5ccf-a333-059ff856bd08","slug":"umbrella-helm-chart","publishDate":"June 20, 2020","heroImage":{"title":"cover-devops","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&q=50&fm=webp 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&q=50&fm=webp 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&q=50&fm=webp 1080w","sizes":"(min-width: 1080px) 1080px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&fl=progressive&q=50&fm=jpg 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&fl=progressive&q=50&fm=jpg 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg 1080w","sizes":"(min-width: 1080px) 1080px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,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"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":4,"html":"<p>K8S 클러스터를 설정하고 운영하다보면 <strong>버전 업데이트, 컴포넌트 추가 설치 등 다양한 변경</strong>에 대응할 수 있어야 합니다. 또한 Develop, Production, Staging 등 <strong>목적에 따라 다양한 클러스터를 추가로 설정하고 배포</strong>해야 하는 경우도 생깁니다. 오늘은 이러한 어려움을 해결할 수 있는 <strong>Umbrella Helm Chart</strong>에 대해 정리해보려고 합니다. Helm을 처음 접하신다면 <a href=\"https://helm.sh/docs/\">공식문서</a>를 먼저 보는 방법을 추천드립니다.</p>\n<br>\n<h2 id=\"umbrella-helm-chart\" style=\"position:relative;\"><a href=\"#umbrella-helm-chart\" aria-label=\"umbrella helm chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Umbrella Helm Chart</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 626px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 51.91693290734825%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAVCAAAAAARcfPCAAAACXBIWXMAABcRAAAXEQHKJvM/AAAAB3RJTUUH6AEUDTMkFGjIhQAAANhJREFUKM+Vks0SgiAQx3n/d+naoVuvUDkpjmYmSmZio07lKISAB5gRbS/w3/3NfgFghjVI2NP0A9OBtMMCesUpgG5jBytCyJ6xyG+Zz6/FLEj00sQKVnKYfBGck4DIDKhSkbcuP4mSADG9KaNH3CsJEPbOSeDgKXJ9OqEPy0nGfRn6mQDpkLvZQA9xHEO+kx0dLrCm43pC7tr0lEsBri2dqmEyFSl1SW5Cpn+sx4x0MmO9CK56wi8fdfuKME9oB0WqrnaP925cT7v0cYeervi4DzlMsgjO2Q+1uC9ro5s8oQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"umbrella-chart\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/1FRpO4B9PfO0EQO0Be0xTm/73785b39e2363f28430a213c4deb3c04/umbrella-chart.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/1FRpO4B9PfO0EQO0Be0xTm/73785b39e2363f28430a213c4deb3c04/umbrella-chart.png?w=157 157w,\nhttps://images.ctfassets.net/tushy4jlcik7/1FRpO4B9PfO0EQO0Be0xTm/73785b39e2363f28430a213c4deb3c04/umbrella-chart.png?w=313 313w,\nhttps://images.ctfassets.net/tushy4jlcik7/1FRpO4B9PfO0EQO0Be0xTm/73785b39e2363f28430a213c4deb3c04/umbrella-chart.png?w=626 626w\"\n        sizes=\"(max-width: 626px) 100vw, 626px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>Umbrella Helm Chart란 여러 개의 Helm Chart들이 모여있는 집합을 의미합니다. 어디에서부터 시작된 용어인지 모르겠으나 저는 <a href=\"https://kccncna19.sched.com/event/Uacr\">2019 Kubecon - Scaling to Thousands of Nodes (Airbnb)</a> 발표에서 처음 접하게 되었습니다. 사내에 K8S에 대한 요구사항이 빠르게 늘어나던 Airbnb는 멀티 클러스터 배포 전략을 통해 <a href=\"(https://kubernetes.io/docs/setup/best-practices/cluster-large/)\">Node Hard Limit</a> 이슈를 해결하게 되었고 클러스터마다 배포를 위해 Umbrella Chart를 만들어 활용했다고 합니다.</p>\n<br>\n<h2 id=\"helm-chart-만들기\" style=\"position:relative;\"><a href=\"#helm-chart-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"helm chart 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Helm Chart 만들기</h2>\n<p>말로하면 이해가 어려우니 클러스터를 새로 설정한다고 가정하고 예시를 통해 Helm Chart를 만들어보겠습니다. 예시의 클러스터에는 아래와 같은 의존성이 존재합니다. 예시는 Helm 2.16.7 버전을 사용했습니다.</p>\n<ul>\n<li><strong>cluster-autoscaler</strong>: EKS AutoScaling 설정</li>\n<li><strong>grafana</strong>: 모니터링 대시보드</li>\n<li><strong>prometheus</strong>: 시스템 지표 수집 및 저장</li>\n<li><strong>fluentbit</strong>: 어플리케이션 로그 수집</li>\n</ul>\n<br>\n<p>먼저 Helm Chart 생성을 위한 폴더 구조를 생성해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ helm create umbrella\n$ <span class=\"token builtin class-name\">cd</span> umbrella\n$ tree\n<span class=\"token builtin class-name\">.</span>\n├── Chart.yaml\n├── charts\n├── templates\n│   ├── NOTES.txt\n│   ├── _helpers.tpl\n│   ├── deployment.yaml\n│   ├── ingress.yaml\n│   ├── service.yaml\n│   └── tests\n│       └── test-connection.yaml\n├── requirements.yaml\n└── values.yaml</code></pre></div>\n<br>\n<p>기본 생성되는 폴더 구조에서 <code class=\"language-text\">requirements.yaml</code> 파일은 추가로 생성해주셔야 합니다.\n폴더 구조에서 알아두어야 할 경로는 아래와 같습니다.</p>\n<ul>\n<li><code class=\"language-text\">Chart.yaml</code>: 차트에 대한 메타 정보가 들어갑니다.</li>\n<li><code class=\"language-text\">charts/</code>: 의존성이 있는 차트 패키지들이 설치됩니다.</li>\n<li><code class=\"language-text\">templates/</code>: 차트에 필요한 template 파일들이 들어갑니다.</li>\n<li><code class=\"language-text\">templates/NOTES.txt</code>: 차트 생성 시 나타나는 설명이 들어갑니다.</li>\n<li><code class=\"language-text\">requirements.yaml</code>: 의존성 차트들이 들어갑니다.</li>\n<li><code class=\"language-text\">values.yaml</code>: 차트 설정에 필요한 default 값들이 들어갑니다.</li>\n</ul>\n<br>\n<h3 id=\"chart-metadata\" style=\"position:relative;\"><a href=\"#chart-metadata\" aria-label=\"chart metadata permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chart Metadata</h3>\n<p>먼저 <code class=\"language-text\">Chart.yaml</code> 파일을 간단히 수정해줍니다.\n이름과 버전, 설명 등의 정보를 본인에 맞게 작성해주시면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">appVersion</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1.0\"</span>\n<span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> A Helm chart for Cluster Setup\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> umbrella\n<span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> 0.1.0</code></pre></div>\n<br>\n<h3 id=\"chart-dependencies\" style=\"position:relative;\"><a href=\"#chart-dependencies\" aria-label=\"chart dependencies permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chart Dependencies</h3>\n<p>이제 앞서 언급한 의존성 중에 Helm Chart 형태로 배포할 컴포넌트를 <code class=\"language-text\">requirements.yaml</code> 파일에 정의하겠습니다. 각 차트는 이름, 저장소, 버전, 컨디션 값을 지정할 수 있습니다. <code class=\"language-text\">condition: prometheus.enabled</code>의 의미는 <code class=\"language-text\">values.yaml</code>에 <code class=\"language-text\">prometheus.enabled</code> 값이 true 일 경우에만 해당 차트를 설정하겠다는 뜻 입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">dependencies</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> prometheus\n    <span class=\"token key atrule\">repository</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//kubernetes<span class=\"token punctuation\">-</span>charts.storage.googleapis.com\n    <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> 9.7.3\n    <span class=\"token key atrule\">condition</span><span class=\"token punctuation\">:</span> prometheus.enabled\n\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> grafana\n    <span class=\"token key atrule\">repository</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//kubernetes<span class=\"token punctuation\">-</span>charts.storage.googleapis.com\n    <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> 4.2.2\n    <span class=\"token key atrule\">condition</span><span class=\"token punctuation\">:</span> grafana.enabled\n\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cluster<span class=\"token punctuation\">-</span>autoscaler\n    <span class=\"token key atrule\">repository</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//kubernetes<span class=\"token punctuation\">-</span>charts.storage.googleapis.com\n    <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> 6.3.0</code></pre></div>\n<br>\n<p>이제 <code class=\"language-text\">helm dep up</code> 명령어를 통해 의존성 차트를 갱신할 수 있습니다.\n이를 통해 <code class=\"language-text\">charts/</code> 하위에 차트 파일들이 설치됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ helm dep up\nHang tight while we grab the latest from your chart repositories...\nUpdate Complete.\nSaving 3 charts\nDownloading prometheus from repo https://kubernetes-charts.storage.googleapis.com\nDownloading grafana from repo https://kubernetes-charts.storage.googleapis.com\nDownloading cluster-autoscaler from repo https://kubernetes-charts.storage.googleapis.com\nDeleting outdated charts</code></pre></div>\n<br>\n<p>의존성 차트에 적용할 설정 값들은 <code class=\"language-text\">values.yaml</code>에 정의할 수 있습니다.\ngrafana를 예시로 들면 아래와 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># values.yaml</span>\n<span class=\"token key atrule\">grafana</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">adminPassword</span><span class=\"token punctuation\">:</span> mypassword\n  <span class=\"token key atrule\">persistence</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">storageClass</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"gp2\"</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> pvc\n    <span class=\"token key atrule\">size</span><span class=\"token punctuation\">:</span> 5Gi\n  <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ClusterIP</code></pre></div>\n<br>\n<h3 id=\"templates\" style=\"position:relative;\"><a href=\"#templates\" aria-label=\"templates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Templates</h3>\n<p>의존성 패키지가 공식 Helm Chart를 지원한다면 <code class=\"language-text\">dependencies</code> 부분에 정의할 수 있겠지만 yaml 파일만 제공하는 패키지도 많이 존재합니다. 이 경우, <code class=\"language-text\">templates/</code> 하위에 yaml 파일을 추가해주시면 됩니다. 외부 설정으로 내보내고 싶은 항목들은 <strong>template function</strong>을 활용해서 수정할 수 있습니다. 여기에서는 <code class=\"language-text\">fluentbit</code>만 예시로 추가하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token builtin class-name\">cd</span> templates\n$ <span class=\"token function\">curl</span> <span class=\"token parameter variable\">-O</span> https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/fluent-bit-service-account.yaml\n$ <span class=\"token function\">curl</span> <span class=\"token parameter variable\">-O</span> https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/fluent-bit-role.yaml\n$ <span class=\"token function\">curl</span> <span class=\"token parameter variable\">-O</span> https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/fluent-bit-role-binding.yaml\n$ <span class=\"token function\">curl</span> <span class=\"token parameter variable\">-O</span> https://raw.githubusercontent.com/fluent/fluent-bit-kubernetes-logging/master/output/elasticsearch/fluent-bit-configmap.yaml</code></pre></div>\n<br>\n<h3 id=\"deploy\" style=\"position:relative;\"><a href=\"#deploy\" aria-label=\"deploy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy</h3>\n<p>이제 예시 차트를 클러스터에 배포할 차례입니다. 배포 후 차트 내 컴포넌트 버전 업데이트가 발생하더라도 <code class=\"language-text\">helm upgrade</code> 명령어를 통해 쉽게 관리할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># install</span>\n$ helm <span class=\"token function\">install</span> <span class=\"token builtin class-name\">.</span> <span class=\"token parameter variable\">--name</span> umbrella <span class=\"token parameter variable\">--namespace</span> umbrella\n\n<span class=\"token comment\"># check status</span>\n$ helm status umbrella\n$ helm get umbrella\n\n<span class=\"token comment\"># upgrade</span>\n$ helm upgrade <span class=\"token parameter variable\">-f</span> values.yaml umbrella <span class=\"token builtin class-name\">.</span>\n\n<span class=\"token comment\"># delete</span>\nhelm del umbrella <span class=\"token parameter variable\">--purge</span></code></pre></div>\n<br>\n<p>만일 어플리케이션들이 모두 별도의 Helm Chart로 관리되고 있다면 Umbrella Chart에서 어플리케이션 차트까지 의존성으로 추가하는 방식으로 운영하는 방법도 있습니다. 요즘에는 Helm 이외에도 kustomize 등 다양한 도구들이 있으니 비교해보고 적절한 방식을 선택하시면 좋습니다.</p>\n<br>","excerpt":"K8S 클러스터를 설정하고 운영하다보면 버전 업데이트, 컴포넌트 추가 설치 등 다양한 변경에 대응할 수 있어야 합니다. 또한 Develop…"}}}},{"node":{"title":"Airflow on Kubernetes (1)","id":"6458380e-9bc8-5184-a818-51a7dd2dbaa6","slug":"airflow-on-kubernetes-1","publishDate":"June 05, 2020","heroImage":{"title":"cover-dataengineering","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&q=50&fm=webp 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&q=50&fm=webp 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(min-width: 1600px) 1600px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&fl=progressive&q=50&fm=jpg 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&fl=progressive&q=50&fm=jpg 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg 1600w","sizes":"(min-width: 1600px) 1600px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgb/xAAcEAACAgMBAQAAAAAAAAAAAAAAAQIREiExYeH/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDK1DF0vgtxW9EylQu8nTotmo+gHfAEP//Z"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":5,"html":"<p>최근 Airflow에는 Kubernetes 지원을 위해 다양한 컴포넌트들이 추가되고 있습니다. 이러한 변화의 흐름에 따라 Airflow를 Kubernetes 위에 배포하고 운영하는 방법에 대해 글을 작성해보고자 합니다. 이 글은 시리즈로 연재됩니다.</p>\n<ul>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-1\">Airflow on Kubernetes (1): CeleryExecutor</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-2\">Airflow on Kubernetes (2): KubernetesExecutor</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-3\">Airflow on Kubernetes (3): Airflow Logging, Monitoring</a></li>\n</ul>\n<br>\n<h2 id=\"airflow-on-kubernetes\" style=\"position:relative;\"><a href=\"#airflow-on-kubernetes\" aria-label=\"airflow on kubernetes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow on Kubernetes</h2>\n<p>Airflow를 Kubernetes 인프라 위에서 운영하는 방법은 크게 두 가지로 나눌 수 있습니다.\n이 글에서 소개할 방법은 <strong>CeleryExecutor의 각 모듈을 Kubernetes 위에 올리는 방식</strong>입니다. 기존에 운영하던 형태와 유사하기 때문에 쉽게 적용할 수 있으나 Celery에 대한 의존성이 강하다보니 완전히 Cloud Native한 형태는 아닙니다. 아키텍쳐는 가장 많이 사용하는 <a href=\"https://github.com/helm/charts/blob/master/stable/airflow\">stable/airflow</a> Helm Chart를 참고하였습니다. 이제 몇 가지 컴포넌트 설정과 함께 자세히 알아보겠습니다.</p>\n<br>\n<h2 id=\"config\" style=\"position:relative;\"><a href=\"#config\" aria-label=\"config permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Config</h2>\n<p>Airflow는 <code class=\"language-text\">airflow.cfg</code> 파일 또는 <code class=\"language-text\">AIRFLOW__[SECTOR]__[VARIABLES]</code> 환경 변수를 통해 각 컴포넌트의 설정을 관리할 수 있었습니다. Helm Chart에서는 <code class=\"language-text\">values.yaml</code>의 config 필드를 통해 설정을 관리할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># CORE</span>\n  <span class=\"token key atrule\">AIRFLOW__CORE__DEFAULT_TIMEZONE</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Asia/Seoul\"</span>\n  <span class=\"token key atrule\">AIRFLOW__CORE__PARALLELISM</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"32\"</span>\n  <span class=\"token key atrule\">AIRFLOW__CORE__DAG_CONCURRENCY</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"16\"</span>\n  <span class=\"token key atrule\">AIRFLOW__CORE__MAX_ACTIVE_RUNS_PER_DAG</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"16\"</span>\n\n  <span class=\"token comment\"># WEBSERVER</span>\n  <span class=\"token key atrule\">AIRFLOW__WEBSERVER__DEFAULT_UI_TIMEZONE</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Asia/Seoul\"</span>\n  <span class=\"token key atrule\">AIRFLOW__WEBSERVER__WORKER_REFRESH_INTERVAL</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"60\"</span>\n\n  <span class=\"token comment\"># CELERY</span>\n  <span class=\"token key atrule\">AIRFLOW__CELERY__WORKER_CONCURRENCY</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"16\"</span>\n\n  <span class=\"token comment\"># SCHEDULER</span>\n  <span class=\"token key atrule\">AIRFLOW__SCHEDULER__SCHEDULER_HEARTBEAT_SEC</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"30\"</span>\n  <span class=\"token key atrule\">AIRFLOW__SCHEDULER__SCHEDULER_HEALTH_CHECK_THRESHOLD</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"120\"</span>\n  <span class=\"token key atrule\">AIRFLOW__SCHEDULER__DAG_DIR_LIST_INTERVAL</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"30\"</span>\n  <span class=\"token key atrule\">AIRFLOW__SCHEDULER__RUN_DURATION</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"10800\"</span>\n  <span class=\"token key atrule\">AIRFLOW__SCHEDULER__MAX_THREADS</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2\"</span></code></pre></div>\n<br>\n<p>위에 정의한 설정 변수들은 Airflow의 성능과 관련되어 있기 때문에 각자 할당된 리소스에 맞게 설정해주셔야 합니다. 자세한 내용은 <a href=\"https://airflow.apache.org/docs/stable/faq.html#how-can-my-airflow-dag-run-faster\">공식문서 링크</a>를 참고하시기 바랍니다. 위와 같은 방식으로 DAG에서 활용하는 connection, variables도 정의할 수 있습니다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># config.yaml</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>webserver<span class=\"token punctuation\">-</span>config\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> airflow\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">webserver_config.py</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    APP_THEME = \"flatly.css\"</span>\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token comment\"># values.yaml</span>\n<span class=\"token key atrule\">extraConfigmapMounts</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>webserver<span class=\"token punctuation\">-</span>config\n    <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /opt/airflow/webserver_config.py\n    <span class=\"token key atrule\">configMap</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>webserver<span class=\"token punctuation\">-</span>config\n    <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">subPath</span><span class=\"token punctuation\">:</span> webserver_config.py</code></pre></div>\n<br>\n<p>위와 같이 <code class=\"language-text\">ConfigMap</code>이나 <code class=\"language-text\">Secret</code>을 따로 만들고 참조하도록 연결하는 방식도 가능합니다. 특히 Airflow 1.10의 RBAC을 사용한다면 <code class=\"language-text\">webserver_config.py</code>를 통해 <code class=\"language-text\">APP_THEME</code>를 변경해줄 수 있는데 이런 경우에 <strong>extraConfigmap</strong>을 통해 적용할 수 있습니다.</p>\n<br>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 54.861111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"airflow\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/7LvzyngOcQO4D6jIwRlQUb/52a76f0b579ccdb4dea892df1b236156/airflow.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/7LvzyngOcQO4D6jIwRlQUb/52a76f0b579ccdb4dea892df1b236156/airflow.png?w=720 720w,\nhttps://images.ctfassets.net/tushy4jlcik7/7LvzyngOcQO4D6jIwRlQUb/52a76f0b579ccdb4dea892df1b236156/airflow.png?w=1440 1440w,\nhttps://images.ctfassets.net/tushy4jlcik7/7LvzyngOcQO4D6jIwRlQUb/52a76f0b579ccdb4dea892df1b236156/airflow.png?w=2880 2880w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<br>\n<p>제가 주로 사용하는 테마는 <code class=\"language-text\">flatly.css</code>에 <code class=\"language-text\">NAVBAR #18bc9c</code> 컬러 조합입니다. 적용된 화면은 위와 같습니다. (+ 태그 기능도 1.10.10 버전에 추가되었습니다)</p>\n<br>\n<h2 id=\"celery-worker\" style=\"position:relative;\"><a href=\"#celery-worker\" aria-label=\"celery worker permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Celery Worker</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 39.050000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAMAAABTCc2fAAACN1BMVEX19fX29vb////8/f7w9Prt8vru8/ry9fr+/PT9+Oj9+On+/fvL2/LX5vra6PzV5PnW4vT6+vr+/v7+9uHw5MDYza3f1LPXzKzc0bD+8cv18+zx8vT6+/319/vT4vjBz+OmssSlssTU4/fW4/b5+/37+/v49/T9+e39+vD09PT99+b98tD++/PAzuK0v9C7x9i0wNC3w9TQ3e75+vz/8szHvZ/q3rv+8Mn29fXj7Pjb5/jZ5fjZ5vjd6Pjr8fr2+Pjt8O/08d/w6MNbVkmEfWn+8cn29fT7/Pr99+Xg1LO6sJXPxKXu4bzt7Orw7+vw8O7x8fHu7u7+/fr9+ev///7++/H479X379T58Nb68tn27ND58djn5+fb29vp6en99+L878rs4L306MTv47/98Mv7+fD5+/z39/fj4+Pi4uLy7uL38uH28uj77snr37zo3Lrp3brm27j+8cz39e3t7e3w8O/x8/Du8e3z9PPa2trU1NTr6+v058P++vD39/T9+u7++vHv8PDw8fPt7/Lz8/Tc3NzHx8fQ0NDf07Lb0K/6+Ovy8/HNwqTt4b7w8PD9+Of+8cr+/PX1+Pf+/vz+/v38/fvv9u3s9On6/Pn2+vTi17W2rZLOw6Xw477T49DF1sTI2sfG2MbO5MvU6NPV59L5+/f17NL17NH27dL48Nb2+vW7zbiToJKMmYujsaKbqZvJ3sbV6NTU59Px9+/3+vX4+Pjg4ODs7Ozn8eTV6NLQ5MzS5c7g7d18ZoviAAAACXBIWXMAABcRAAAXEQHKJvM/AAAAB3RJTUUH6AEUDTMlY2/4EwAAAVxJREFUGBltwbFLVHEAwPHvNx6Y172uu6EjjRYvsvbIxVFNg7CGhtZoabBACP8FG4KoMRyqQaGCCCu6liCIXHIRunBKOqSGHmoRNdjvHe93XdDnI1IQzP3mf7RPAv0hlBTdIqhkQDUj0poRFn5Cv4K2iBLqknNtECrmvtTfD6wfLxnQlfCBqM1hc6sw1LCDroRe7yjsfTlh8IszooAJ0y8IJn3EP1KDRdOPHFPcSkgvqE+qMnWXvxo13Xkw3DpwCu8A01q7aMfi5i6FgfZY83IKLGSz5jaOrCXwltObq0y2pcdQXbCelc2dWGEPfN4oH/1EemOMHusPl9P9zytsl/eVvn1fGW3oTQnm566NNyl46PpjO14RJczemgPmZ4DbEuiVdt/rifPqEl0JXCWYIehXDO7fg5Gy2pQooevsJaNzg42TT93ZHm4RCS6/YXRqV3nmVzio40AlA6oZ0R95mVFwFhLj3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"celery\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/2xWBy0Pj9CiXMubnr26Jgt/3b9f9baa289538f55f3cf20890aa2611/celery.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/2xWBy0Pj9CiXMubnr26Jgt/3b9f9baa289538f55f3cf20890aa2611/celery.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/2xWBy0Pj9CiXMubnr26Jgt/3b9f9baa289538f55f3cf20890aa2611/celery.png?w=1000 1000w,\nhttps://images.ctfassets.net/tushy4jlcik7/2xWBy0Pj9CiXMubnr26Jgt/3b9f9baa289538f55f3cf20890aa2611/celery.png?w=2000 2000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<br>\n<p>CeleryExecutor에서 worker는 실제 task를 수행을 담당하는 컴포넌트입니다. K8S에서는 celery worker가 StatefulSet으로 배포됩니다. 기존에는 worker가 <code class=\"language-text\">AutoScalingGroup</code> 등을 통해 인스턴스가 자동 확장되도록 구성했다면, K8S에서는 <code class=\"language-text\">HorizontalPodAutoscaler</code>를 통해 Pod 단위로 확장 가능하도록 구성할 수 있습니다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">workers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n\n  <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2Gi\"</span>\n\n  <span class=\"token key atrule\">autoscaling</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">maxReplicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">16</span>\n    <span class=\"token key atrule\">metrics</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Resource\n      <span class=\"token key atrule\">resource</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> memory\n        <span class=\"token key atrule\">target</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Utilization\n          <span class=\"token key atrule\">averageUtilization</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n<br>\n<h2 id=\"airflow-ingress\" style=\"position:relative;\"><a href=\"#airflow-ingress\" aria-label=\"airflow ingress permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow Ingress</h2>\n<p>보통 K8S 클러스터에 Ingress Controller를 설정하고 path를 통해 여러 서비스에 접속하는 경우가 많습니다. Airflow Chart 역시 Webserver와 Flower UI에 대한 ingress를 지원합니다. 저는 nginx-ingress controller를 사용해서 진행해보겠습니다. 아래 예시는 각자의 ingress-controller 설정에 맞게 바꾸시면 됩니다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ClusterIP\n    <span class=\"token key atrule\">externalPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8080</span>\n    <span class=\"token key atrule\">loadBalancerIP</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span>\n    <span class=\"token key atrule\">loadBalancerSourceRanges</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">...</span>\n\n<span class=\"token key atrule\">ingress</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">kubernetes.io/ingress.class</span><span class=\"token punctuation\">:</span> nginx\n      <span class=\"token key atrule\">ingress.kubernetes.io/rewrite-target</span><span class=\"token punctuation\">:</span> /\n      <span class=\"token key atrule\">nginx.ingress.kubernetes.io/ssl-redirect</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/airflow\"</span>\n    <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"myloadbalancer-domain.com\"</span></code></pre></div>\n<p>예를 들어 web path에 <code class=\"language-text\">/airflow</code> 라고 설정하셨다면, UI 접속 주소는 <code class=\"language-text\">myloadbalancer-domain.com/airflow</code>가 됩니다. flower도 위와 동일한 방식으로 설정하시면 됩니다.</p>\n<br>\n<h2 id=\"airflow-auth\" style=\"position:relative;\"><a href=\"#airflow-auth\" aria-label=\"airflow auth permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow Auth</h2>\n<p>Airflow 에서는 다양한 인증 방식을 지원하지만 여기에서는 가장 기본이 되는 Password Auth 방식으로 배포하겠습니다. 새로 추가된 RBAC 설정도 함께 추가해보겠습니다. 먼저 <code class=\"language-text\">extraPipPackages</code> 설정을 통해 의존성 패키지를 설치해주고 상단에 환경 변수도 추가해줍니다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">AIRFLOW__WEBSERVER__RBAC</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"True\"</span>\n  <span class=\"token key atrule\">AIRFLOW__WEBSERVER__AUTHENTICATE</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"True\"</span>\n  <span class=\"token key atrule\">AIRFLOW__WEBSERVER__AUTH_BACKEND</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"airflow.contrib.auth.backends.password_auth\"</span>\n\n<span class=\"token punctuation\">...</span>\n\n<span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">extraPipPackages</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"flask-bcrypt\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"flask-oauthlib>=0.9\"</span></code></pre></div>\n<br>\n<p>이제 로그인할 사용자를 추가해주어야 합니다. Scheduler Pod의 Bash에서 create_user 명령어를 통해 생성해주시면 됩니다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ kubectl exec \\\n  -it \\\n  --namespace airflow \\\n  --container airflow-scheduler \\\n  Deployment/airflow-scheduler \\\n  /bin/bash\n\n$ airflow create_user \\\n--username=admin \\\n--email=test@example.com \\\n--password=mypassword \\\n--role=Admin \\\n--firstname=test \\\n--lastname=park</code></pre></div>\n<br>\n<h2 id=\"airflow-iam-role\" style=\"position:relative;\"><a href=\"#airflow-iam-role\" aria-label=\"airflow iam role permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow IAM Role</h2>\n<p>AWS EKS와 같은 클라우드 서비스 위에 배포한다면 각 컴포넌트의 세부 권한을 지정해주어야 합니다. 만일 Pod에 IAM Role을 할당하지 않는다면 Airflow는 클러스터의 기본 IAM Role인 EKS worker 설정을 따르게 됩니다. 따라서 보안을 신경쓰셔야 한다면 설정하는 것이 바람직합니다. 특히 Airflow에서 다른 AWS Managed Service(EMR, Athena, Lambda)와 연계하는 DAG이 존재하신다면 필수적입니다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">serviceAccount</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">create</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"airflow\"</span>\n  <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">eks.amazonaws.com/role-arn</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>123456789999<span class=\"token punctuation\">:</span>role/airflow\n\n<span class=\"token punctuation\">...</span>\n\n<span class=\"token key atrule\">securityContext</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">fsGroup</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span></code></pre></div>\n<br>\n<p><code class=\"language-text\">values.yaml</code>에는 포함되어 있지 않지만 각 컴포넌트마다 <code class=\"language-text\">securityContext</code>를 지정해주셔야 IAM Role을 매핑할 수 있습니다. <code class=\"language-text\">IAM Role for Service Account</code>가 내부적으로 K8S TokenProjection을 사용하기 때문에 설정을 안하면 토큰을 읽을 수 없다는 오류가 발생합니다. IAM Role 설정에 대한 자세한 내용은 <a href=\"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/iam-roles-for-service-accounts-technical-overview.html\">EKS 공식 문서</a>를 참고하시기 바랍니다.</p>\n<br>\n<h2 id=\"dags\" style=\"position:relative;\"><a href=\"#dags\" aria-label=\"dags permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DAGs</h2>\n<p>Airflow는 Scheduler가 DAG 파일을 주기적으로 동기화하며 문법적 오류가 없는지 체크하는 역할을 수행합니다. 단일 노드에서는 로컬에 있는 DAG 파일을 읽으면 되지만 K8S에서는 worker pod가 여러 노드에 걸쳐있기 때문에 모두 같은 DAG 파일을 바라보도록 하는 동기화 설정이 필요합니다. Helm Chart에서는 이를 지원하기 위해 두 가지 옵션을 제공합니다.</p>\n<br>\n<p><strong>1. Git-Sync Sidecar</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># git-sync sidecar</span>\n<span class=\"token key atrule\">dags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">git</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> ssh<span class=\"token punctuation\">:</span>//git@repo.example.com/example.git\n    <span class=\"token key atrule\">repoHost</span><span class=\"token punctuation\">:</span> repo.example.com\n    <span class=\"token key atrule\">secret</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>git<span class=\"token punctuation\">-</span>keys\n    <span class=\"token key atrule\">privateKeyName</span><span class=\"token punctuation\">:</span> id_rsa\n\n    <span class=\"token key atrule\">gitSync</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">refreshTime</span><span class=\"token punctuation\">:</span> <span class=\"token number\">60</span></code></pre></div>\n<br>\n<p>첫 번째 방식은 <strong>git-sync 사이드카 컨테이너</strong>를 활용하는 방법입니다. 간단히 말하자면 주기적으로 외부 저장소를 당겨오는 방식으로 git 인증이 필요합니다. 사이드카 패턴이 생소하시다면 이전에 작성한 <a href=\"https://swalloow.github.io/container-patterns/#sidecar-pattern\">분산 컨테이너에서의 디자인 패턴</a> 글을 참고하시기 바랍니다.</p>\n<br>\n<p><strong>2. Shared Persistent Volume</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># EFS PV, PVC</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolume\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>dags\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> airflow\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>dags\n    <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> airflow\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">capacity</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 20Gi\n  <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ReadWriteMany\n  <span class=\"token key atrule\">nfs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span> 0.0.0.0 &lt;<span class=\"token punctuation\">-</span> EFS endpoint\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/airflow\"</span>\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolumeClaim\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>dags\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> airflow\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> airflow\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span>\n  <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ReadWriteMany\n  <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 10Gi\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>dags\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token comment\"># shared persistent volume</span>\n<span class=\"token key atrule\">dags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">persistence</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">existingClaim</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"airflow-dags\"</span>\n    <span class=\"token key atrule\">accessMode</span><span class=\"token punctuation\">:</span> ReadWriteMany\n    <span class=\"token key atrule\">size</span><span class=\"token punctuation\">:</span> 1Gi</code></pre></div>\n<br>\n<p>두 번째 방식은 <strong>EFS와 같은 공유 파일시스템을 활용한 방법</strong>입니다. EFS의 특정 경로에 DAG 파일을 저장하고 마운트를 통해 모든 Pod이 같은 경로를 바라보도록 설정하는 방식입니다. 저는 EFS PV와 PVC를 먼저 추가한다음 existingClaim을 통해 참조하도록 설정해주었습니다.</p>\n<br>\n<h2 id=\"deploy\" style=\"position:relative;\"><a href=\"#deploy\" aria-label=\"deploy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy</h2>\n<p>필요한 설정을 완료했다면 배포는 아래 Helm 명령어를 통해 할 수 있습니다. 가능하다면 데이터베이스는 external로 사용하는 방법을 추천드립니다. DB 암호는 secret을 통해 생성하고 참조하도록 설정해주시면 됩니다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">helm install stable/airflow \\\n--version 7.1.1 \\\n--namespace airflow \\\n--name airflow \\\n-f ./values.yaml</code></pre></div>\n<br>\n<p>배포 이후에 namespace를 보면 아래와 같은 Pod이 존재하는걸 확인할 수 있습니다.</p>\n<br>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 45.08196721311475%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAASCAMAAAAewWyUAAABgFBMVEWruMOqt8KqtsGptsGptcCotb+ms76lsbyksLujsLqjr7qntL+grLedqbOaprCZpa+ZpK6bprCeqrQnKSwoIiMoJyEdKCIcHiAcHyAmKSuotL+ms72grLaWoqsnIiNUKyhbSB4aTSMVFxiksbucqLKQm6SQmqSksbyLlp4cHh8sLi8lJyg2OTklKCgkJicrLS4oKiuLlZ6jr7mYpK2Ik5sbHh+ir7mXo62HkppBREQzNTY7PT45OzweICEgIiM1NzgyNDU0Njc5PDwwMjMtLzAuMDGXo6yHkZomKCkpKywsLy8WGBkpLCwhIyQjJSYzNTUqLC0xMzQsLi4uMDA0NjYwMjIyNDQoKioqLCw2ODk3OToyNTUvMTIvMTGYo62IkpsnKSoiJCWKlZ4fISIwMzObp7GPmaMjJigaHR4aHB4aHB2OmaKmsr2fq7WVoKqJlJ1/iZF4gYl0fYRye4Nye4Jze4OJk5yGkZmFj5iFkJiOmKKVoKmns76bp7CXoqyWoavzWb9OAAAACXBIWXMAABcRAAAXEQHKJvM/AAAAB3RJTUUH6AEUDTMlY2/4EwAAASxJREFUGBl9wUlOwmAYBuD37f93wBKxVRPAEdmy0ngBl57FFbdy6QHwAm41VePQmAjGgSAhWIbySQEXBsrzEARJLCMYCUjD4BiIxQQyFguVE2uOIY0YQxmqiKZaYQLpyF7X5xansETXFNEO2XaxnGRGihmrwIlYcWC1sYjtPPV5SPILy62LBFqTYYlv+KfARLOzB/L5gC0tFY0cd7LvJbPnDIamyQAJjzcVst9x7gCYTivXgoFEGfRdLzMK3d2S4xwjizkGvgHcAtb9q5f3fraLUXSFCHP0sMKXNQAf/n7zGg1MbSAsYcY2kf8MjOBCNcUC4HETf8JHHKEHNDAWrkI9CMsnTCCdiOj+Jc84g8UYywRdKZ7GLokUHInmeZ1GVK2LX7NTWXZNtevV6Bdm0m3Li6lEPAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"airflow-po\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/66f6m4fL2LaJ0YdPRPt2Je/0dd206a14f2bdc97fbac20bba3109c30/airflow-po.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/66f6m4fL2LaJ0YdPRPt2Je/0dd206a14f2bdc97fbac20bba3109c30/airflow-po.png?w=366 366w,\nhttps://images.ctfassets.net/tushy4jlcik7/66f6m4fL2LaJ0YdPRPt2Je/0dd206a14f2bdc97fbac20bba3109c30/airflow-po.png?w=732 732w,\nhttps://images.ctfassets.net/tushy4jlcik7/66f6m4fL2LaJ0YdPRPt2Je/0dd206a14f2bdc97fbac20bba3109c30/airflow-po.png?w=1464 1464w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<br>\n<p>이 글에서 언급한 설정은 FIXME 주석을 해두었으니 궁금하신분들은 <a href=\"https://github.com/Swalloow/airflow-helm\">https://github.com/Swalloow/airflow-helm</a> 저장소를 확인하시기 바랍니다.</p>","excerpt":"최근 Airflow에는 Kubernetes 지원을 위해 다양한 컴포넌트들이 추가되고 있습니다. 이러한 변화의 흐름에 따라 Airflow…"}}}},{"node":{"title":"Gatsby와 Contentful로 블로그 이전한 후기","id":"4ebcfc23-f315-530e-899e-c3fb7cf499bc","slug":"gatsby-contentful","publishDate":"April 25, 2020","heroImage":{"title":"cover-personal","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=350&h=207&q=50&fm=webp 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=700&h=413&q=50&fm=webp 700w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1400&h=826&q=50&fm=webp 1400w","sizes":"(min-width: 1400px) 1400px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1400&h=826&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=350&h=207&fl=progressive&q=50&fm=jpg 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=700&h=413&fl=progressive&q=50&fm=jpg 700w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1400&h=826&fl=progressive&q=50&fm=jpg 1400w","sizes":"(min-width: 1400px) 1400px, 100vw"}},"layout":"constrained","width":1800,"height":1062,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBv/EABoQAAIDAQEAAAAAAAAAAAAAAAMRAAECEiH/xAAVAQEBAAAAAAAAAAAAAAAAAAABA//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oADAMBAAIRAxEAPwDlAjvdNSiD5p35M8m2PbxaVKSQuy296alalC1EiIF//9k="}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":3,"html":"<p>3년 정도 이어왔던 Jekyll 블로그를 Gatsby와 Contentful로 옮긴 이유와\n이에 따라 생긴 변화들에 대해 정리해보려 합니다.</p>\n<br>\n<h2 id=\"왜-옮기게-되었을까\" style=\"position:relative;\"><a href=\"#%EC%99%9C-%EC%98%AE%EA%B8%B0%EA%B2%8C-%EB%90%98%EC%97%88%EC%9D%84%EA%B9%8C\" aria-label=\"왜 옮기게 되었을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>왜 옮기게 되었을까</h2>\n<p>블로그를 옮기고 싶었던 가장 큰 이유는 <strong>컨텐츠 관리</strong>가 불편하다는 점이었습니다.\n이전에 사용하던 테마는 로컬에서 posts 하위의 md 파일을 통해 컨텐츠를 작성하고 이를 빌드 후 github.io 저장소에 배포하는 형태였습니다. 만일 개인적으로 사용하고 있는 노트북과 데스크탑이 여러 개라면 모든 기기에 블로그 개발환경을 구축해야만 합니다. md 기반의 글들은 테마를 옮겨가려고 해도 기존에 사용하던 방식과 맞지 않다면 많은 부분을 수정해야하는 불편함이 있습니다.</p>\n<p>또한 요즘 잘 구축되어 있는 블로그 플랫폼(brunch, velog, medium)들을 보면 <strong>글 작성을 위한 에디터</strong>가 정말 편리하게 구성되어 있습니다. 저 또한 이러한 장점을 사용하고 싶었지만 기존에 작성해둔 글을 옮기기에 무리가 있고, 글에 대한 링크가 변경된다는 점 때문에 옮길 수는 없다고 판단했습니다.</p>\n<p>두번째 이유는 사용하고 있던 Jekyll <strong>테마 자체에 대한 불만</strong>이었습니다.\n특히 코드 스타일링 플러그인의 사용 방식과 UI가 마음에 들지 않아 gist 링크를 사용하곤 했는데 옮겨다니면서 편집하려다보니 시간이 더 오래 걸렸습니다. 루비와 템플릿 엔진 방식의 테마는 커스터마이징하기 불편했고 이를 위해 사용하지도 않을 언어를 공부하고 싶지도 않았습니다.\n이러한 이유로 Gatsby를 선택하게 되었고 다양한 플러그인과 쉬운 커스터마이징에 만족하고 있습니다.</p>\n<br>\n<h2 id=\"contentful\" style=\"position:relative;\"><a href=\"#contentful\" aria-label=\"contentful permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Contentful</h2>\n<p>제가 컨텐츠 관리를 더 편하게 하기 위해 선택한 플랫폼은 <strong>Contentful</strong> 입니다.\nHeadless CMS라 불리기도 하는 Contentful은 컨텐츠를 관리하기 위한 모든 역할을 수행할 수 있습니다. 실제로 사용해보면서 느낀 장점은 아래와 같습니다.</p>\n<ul>\n<li>컨텐츠와 이를 보여주는 부분이 분리되어있어 언제든지 테마 이동이 가능</li>\n<li>컨텐츠에 대해 자체적인 스키마 구성 가능 (저자, 태그 등)</li>\n<li>컨텐츠에 대한 상태관리</li>\n<li>글을 작성할 수 있는 에디터를 제공</li>\n<li>이미지 리사이징 및 프리뷰, 다양한 최적화기능</li>\n<li>대부분의 기능을 자동화할 수 있도록 API 제공</li>\n</ul>\n<p>이러한 장점들은 기존에 가지고 있던 불편함을 해소하기에 충분했고 글을 전부 마이그레이션하기에도 불편함이 없었습니다. 특히 slug 지정을 통해 기존 경로를 그대로 유지할 수 있었습니다.</p>\n<br>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"blog meta\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/qQyVRz66CUzwyrtkAtan1/ca2b0b6ef812d9e68fdac61c34805222/blog_meta.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/qQyVRz66CUzwyrtkAtan1/ca2b0b6ef812d9e68fdac61c34805222/blog_meta.png?w=720 720w,\nhttps://images.ctfassets.net/tushy4jlcik7/qQyVRz66CUzwyrtkAtan1/ca2b0b6ef812d9e68fdac61c34805222/blog_meta.png?w=1440 1440w,\nhttps://images.ctfassets.net/tushy4jlcik7/qQyVRz66CUzwyrtkAtan1/ca2b0b6ef812d9e68fdac61c34805222/blog_meta.png?w=2880 2880w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<br>\n<p><a href=\"https://swalloow.github.io/contents-url\">https://swalloow.github.io/contents-url</a> 경로를 예를 들면 하위에 오는 contents-url이 위 그림에서 slug 값에 해당합니다. 이런식으로 Post 마다 태그 등의 다양한 메타데이터를 설정할 수 있습니다. 모든 포스트는 <strong>Draft, Publish, Archive</strong> 단계의 상태를 가지게 됩니다. 아직 글을 작성 중이라면 Draft 상태로 남겨두고 완성 후 Pulish를 수행하는 식으로 활용할 수 있습니다. Publish 할때마다 자동으로 버전이 추가되기 때문에 이전으로 롤백하는 것도 쉽게 가능합니다.</p>\n<br>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 55.13888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"blog edit\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/7eJM9a1jiKnMxKsgqkbuZ8/2a99f5516f393d52fa83d8771daeda32/blog_edit.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/7eJM9a1jiKnMxKsgqkbuZ8/2a99f5516f393d52fa83d8771daeda32/blog_edit.png?w=720 720w,\nhttps://images.ctfassets.net/tushy4jlcik7/7eJM9a1jiKnMxKsgqkbuZ8/2a99f5516f393d52fa83d8771daeda32/blog_edit.png?w=1440 1440w,\nhttps://images.ctfassets.net/tushy4jlcik7/7eJM9a1jiKnMxKsgqkbuZ8/2a99f5516f393d52fa83d8771daeda32/blog_edit.png?w=2880 2880w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<br>\n<p>위 그림은 Contentful에서 제공하는 마크다운 에디터 입니다.\n마크다운 문법이 기억나지 않더라도 상단바를 통해 쉽게 글을 작성하고 편집할 수 있도록 구성되어 있습니다.</p>\n<br>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 54.79166666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"blog tag\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/44npJNDGIlkHyPRA1MyYMh/3fe43cfe81b6ae6cc1ee3e4bf55dde93/blog_tag.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/44npJNDGIlkHyPRA1MyYMh/3fe43cfe81b6ae6cc1ee3e4bf55dde93/blog_tag.png?w=720 720w,\nhttps://images.ctfassets.net/tushy4jlcik7/44npJNDGIlkHyPRA1MyYMh/3fe43cfe81b6ae6cc1ee3e4bf55dde93/blog_tag.png?w=1440 1440w,\nhttps://images.ctfassets.net/tushy4jlcik7/44npJNDGIlkHyPRA1MyYMh/3fe43cfe81b6ae6cc1ee3e4bf55dde93/blog_tag.png?w=2880 2880w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>위와 같이 내가 미리 설정해둔 태그를 포스트에 매핑시킬 수 있습니다. 태그마다 필요한 대표사진, 설명 등의 하위 필드도 사용자가 직접 정의할 수 있습니다.</p>\n<br>\n<br>\n<h2 id=\"github-action\" style=\"position:relative;\"><a href=\"#github-action\" aria-label=\"github action permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitHub Action</h2>\n<p>이번에 GitHub Action을 통해 글을 배포하도록 개선하면서 블로그 개발 환경이 구축되어 있지 않더라도 어디서든지 글을 작성하고 내보낼 수 있게 되었습니다. 변경된 배포 방식은 아래와 같습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 82.92919495635306%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAhCAMAAACcLxmXAAABGlBMVEX////y8/Xy9Pb29/nw8vTj5uvq7O/o6u77/Pzz9Pb29/j09PTa2trk5OTY2Nje3t7n5+f7+/vx8fH39/f6+vr8/Pz5+fn19vj4+fr19/SGyeid2PHz8/Tx8fLz8/Pv7/Dg4OLt7u/b3N3GyMr09fXp6er+8ML68t/7+fqjpamRlZlucninqa1ucnl7f4SKjZKVmJyFiI2eoKTBwsXr6+vV1dXj5efy8vLq6urs7Ozo6Ojm5ubu7u799fHvmqT2sLb19fb29/f6+/v4+Pjy8/P4+fn5+fr19fXw8PDp6env7+/Ozs7Pz8/X19fW1tbb29vi4uLj4+P3+Pn7+/z9/f329vbS0tLf39/09fft7/Hl5eXCwsLU1NTu8PNEZwhtAAAACXBIWXMAABibAAAYmwFJdYOUAAAAB3RJTUUH6AEUCgUVyeVPTwAAAQlJREFUOMtjYKAPYGRCAcw4FTKBCBZWNlZ2DjgXt0KcXBQZToTFXHgVMuHgYFHIzcPLxy/AT1ihoJCwiCi3GGGFRFotjvCMBOkKJaWkZWTl5BUU5ZWUVVTxWK2mrqGppa2jq6dvYGhkbGJiYmrGwGRuYmFpZW1jbS2GUGhrZy/s4Ojk7OLq7OYuCDXEw5PXQsjCy8JEGNUzlt4+vjz8ftyEfM3tb8HPF+DvGehMIAqFPbjdhYTk3N1FoQqDEAqDqRXXDCFiIWKhxCgU9gsLt2KgWlyzIDwTQZ2sEIkwkYWQG6PCPfl5TYjwjGm0H19MABEKuUMFucUIZoVYhBsZqeHrCNSyx40mBRwAKVQdFJqtL3sAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"actions\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/545mvsrmSF74lvC68TSgv6/7c91cbe09a323272b9051173b6f6152a/actions.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/545mvsrmSF74lvC68TSgv6/7c91cbe09a323272b9051173b6f6152a/actions.png?w=258 258w,\nhttps://images.ctfassets.net/tushy4jlcik7/545mvsrmSF74lvC68TSgv6/7c91cbe09a323272b9051173b6f6152a/actions.png?w=516 516w,\nhttps://images.ctfassets.net/tushy4jlcik7/545mvsrmSF74lvC68TSgv6/7c91cbe09a323272b9051173b6f6152a/actions.png?w=1031 1031w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>이제 Contentful Editor를 통해 글을 작성하고 UI 상의 Publish 버튼만 누르면 알아서 GitHub Pages에 올라가게 되었습니다. 이 외에도 Contentful Webhook을 통해 netlify로 배포한다거나 알림을 받는 등 다양한 기능을 연계할 수 있다는 것도 장점 중 하나 입니다.</p>\n<br>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 46.644295302013425%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"push\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/6yhwwSvFImkjilHNpvV3LD/d990012308c2bbde181cdf91bd678f1c/push.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/6yhwwSvFImkjilHNpvV3LD/d990012308c2bbde181cdf91bd678f1c/push.png?w=447 447w,\nhttps://images.ctfassets.net/tushy4jlcik7/6yhwwSvFImkjilHNpvV3LD/d990012308c2bbde181cdf91bd678f1c/push.png?w=894 894w,\nhttps://images.ctfassets.net/tushy4jlcik7/6yhwwSvFImkjilHNpvV3LD/d990012308c2bbde181cdf91bd678f1c/push.png?w=1788 1788w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>master 브랜치로 배포하는 step은 <code class=\"language-text\">JamesIves/github-pages-deploy-action@releases/v3</code>를 사용했습니다. 대상 폴더와 브랜치를 지정해주면 위 그림과 같은 형태로 push가 됩니다.</p>\n<br>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 54.48785638859557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"actions2\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/1BC7qHvtXEiOI21q5L3byt/a569d040f38123f55f77b0bb3dad2c16/actions2.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/1BC7qHvtXEiOI21q5L3byt/a569d040f38123f55f77b0bb3dad2c16/actions2.png?w=474 474w,\nhttps://images.ctfassets.net/tushy4jlcik7/1BC7qHvtXEiOI21q5L3byt/a569d040f38123f55f77b0bb3dad2c16/actions2.png?w=947 947w,\nhttps://images.ctfassets.net/tushy4jlcik7/1BC7qHvtXEiOI21q5L3byt/a569d040f38123f55f77b0bb3dad2c16/actions2.png?w=1894 1894w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>배포 결과는 위와 같이 Actions 메뉴에서 확인할 수 있습니다.</p>\n<br>\n<h2 id=\"gatsby\" style=\"position:relative;\"><a href=\"#gatsby\" aria-label=\"gatsby permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby</h2>\n<p>블로그 테마를 옮기면서 추가한 주요 플러그인들은 아래와 같습니다.</p>\n<ul>\n<li>gatsby-remark-katex: 수식 입력</li>\n<li>gatsby-source-contentful: contentful 연동</li>\n<li>gatsby-plugin-sitemap: sitemap 파일</li>\n<li>gatsby-plugin-robots-txt: robots 파일</li>\n<li>gatsby-plugin-feed: 피드 생성</li>\n</ul>\n<br>\n<p>블로그 댓글 기능도 기존 disqus에서 <strong>utterances</strong>로 변경하면서 댓글 확인도 편리해졌습니다. 이제 GitHub 모바일 앱이 있기 때문에 댓글이 달리면 휴대폰으로 확인하고 답글을 달 수 있게 되었습니다. 미세하게 utterances 렌더링 속도가 더 빠르기도 합니다.</p>\n<br>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 41.461700632466616%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAARCAMAAACYVR46AAABcVBMVEX////9/v30/fj9//76/vzi+e3H89rF89nY9+fs+/S58dLF89jT9uPJ9N3J9NvK9NvG89vL9N7R9d/O9d3F89rn+vC68dO88dPd+Ort+/TA8tbU9uTv7+/p6eno6Ojk5OTn5+fm5ubw8PDy8vLs7Ozu7u7l5uXm6ujt7e3x8fH89/f6+PP19PT29vbt8/D19fX9/f37+vr39vX08/Pz8/Pw8vH09PT+/v7++Pj++/X4+Pjy+vb+9fT++vP19PLv+vT8/Pz5+fn9/v7r6+vy9Pfv8/zu8vzw9Pzi4uL6+vrz9Pbt8vv+/v/h4eHj4+Pv8/vu8/zr8Pv4+f3v8/rs8fv3+f3e3t6Xsv/S2Oamvf/Fzujl9e3q6ur4+/nv9/L/9+r67+n//v7o9+/6/Pvr+/P7+/vu9vL7/fzn9u74/Prw9/Ps+/Pq9e/+//7p+fH39/f6/fvx+PTm9e3v9/P/+Oz78ez56uP5/Pru9vHt9vHn8uyANVZeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUCgUVyeVPTwAAAUJJREFUKM+Vz1k7w0AUBuCxU/u+ddKMpDSIFGNCrRFJQym1L2ltpaitdn69jKqmiQvO1Zf3+XKeMwDkpqgYuKak1G1l5RWVTqvyVNe4irV19Q1Oa2xqbnEVW9vaO5zW6enqdpAXMj4WwR67cby/tw8GhIJivzAwKA5xUtBmw96RUTwmELvJ43hCDE0S0Y5TwvSMOMvhue+Oosi5mf9JQdk5AKiMQggnkQVN0/Vw9m9oLHIEY2kpokX0yHIWV1D0Swm3uhaO6evUfCiqWEYwt6GFY5tb4F+zHQ0VfO/sysAwpALb27demb82n8BvdmAiyUrxxKFqImpHx+AEsthKp4mkn2XOrHSeAuCCV+j2y6u0ykB6xfUNuFXvqN1n0n4G0isyVvEB8XRP/PHJRAGTyM8v1kYWUnt9S/KsCon8/pH6842fbSNO6Q+WSfUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"render\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/73llfGluBAkCUpIR0Y7EBU/fa4fe33e540daab63110882e960a0073/render.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/73llfGluBAkCUpIR0Y7EBU/fa4fe33e540daab63110882e960a0073/render.png?w=712 712w,\nhttps://images.ctfassets.net/tushy4jlcik7/73llfGluBAkCUpIR0Y7EBU/fa4fe33e540daab63110882e960a0073/render.png?w=1423 1423w,\nhttps://images.ctfassets.net/tushy4jlcik7/73llfGluBAkCUpIR0Y7EBU/fa4fe33e540daab63110882e960a0073/render.png?w=2846 2846w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>아주 큰 차이는 아니지만 이미지 최적화로 인해 첫 페이지 지연 시간도 단축되었습니다.\n언제 다시 테마를 옮기게 될지 모르겠으나 여러 측면에서 개선되고 편리해졌으니 이제 글 작성에만 집중할 수 있게 되었습니다!</p>","excerpt":"3년 정도 이어왔던 Jekyll 블로그를 Gatsby와 Contentful…"}}}},{"node":{"title":"EKS 클러스터에 VPC CIDR 추가하기","id":"b5c13291-2b25-5fb4-a165-d637f65d757b","slug":"eks-cidr","publishDate":"March 14, 2020","heroImage":{"title":"cover-devops","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&q=50&fm=webp 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&q=50&fm=webp 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&q=50&fm=webp 1080w","sizes":"(min-width: 1080px) 1080px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&fl=progressive&q=50&fm=jpg 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&fl=progressive&q=50&fm=jpg 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg 1080w","sizes":"(min-width: 1080px) 1080px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,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"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":2,"html":"<p>앞서 정리했던 <a href=\"https://swalloow.github.io/eks-vpc-cni\">EKS의 VPC 네트워크 구성 이해하기</a> 글을 먼저 보시는걸 권장드립니다.</p>\n<p>내 요구사항보다 적은 범위의 대역으로 클러스터를 생성한다면 VPC CNI로 인한 IP 제한에 마주할 수 있습니다. 처음부터 넓은 범위의 대역으로 생성하면 좋겠지만 이미 클러스터를 생성한 이후에는 어떻게 하면 좋을까요? 이러한 경우에는 VPC에 새로운 CIDR을 할당하고 이를 클러스터에 추가할 수 있습니다.</p>\n<br>\n<h2 id=\"vpc-cidr\" style=\"position:relative;\"><a href=\"#vpc-cidr\" aria-label=\"vpc cidr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VPC CIDR</h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1i0LURjsrJbJWwqaVikpEDg3DQtmPhUp-\" alt=\"\"></p>\n<p>먼저 확장하고자 하는 VPC를 선택한 후 새로운 CIDR 범위를 추가해주어야 합니다. 저는 위의 그림과 같이 10.X.X.X와 100.X.X.X 범위를 추가해주었습니다. 이후 새로운 CIDR 범위를 사용하여 서브넷을 생성한 다음 라우팅 테이블을 연결해줍니다.\nEKS에서 서브넷을 검색 가능하도록 하기 위해 아래와 같은 태그를 추가해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">Key</span><span class=\"token operator\">=</span>kubernetes.io/cluster/yourClusterName,Value<span class=\"token operator\">=</span>shared</code></pre></div>\n<br>\n<h2 id=\"custom-eni-config\" style=\"position:relative;\"><a href=\"#custom-eni-config\" aria-label=\"custom eni config permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom ENI Config</h2>\n<p>이제 새로운 CIDR 범위를 사용하도록 CNI 플러그인 설정을 변경해주어야 합니다. 먼저 클러스터에서 사용 중인 CNI 플러그인 버전을 확인하고 만일 1.5.3 미만인 경우 최신 버전으로 업데이트 합니다. (2020년 3월 기준, 최신 버전은 1.6 입니다)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl describe daemonset aws-node <span class=\"token parameter variable\">--namespace</span> kube-system <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> Image <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> <span class=\"token parameter variable\">-d</span> <span class=\"token string\">\"/\"</span> <span class=\"token parameter variable\">-f</span> <span class=\"token number\">2</span>\n$ kubectl apply <span class=\"token parameter variable\">-f</span> https://raw.githubusercontent.com/aws/amazon-vpc-cni-k8s/master/config/v1.6/aws-k8s-cni.yaml</code></pre></div>\n<p>설치한 이후에 <code class=\"language-text\">kubectl get crd</code>를 통해 <strong>ENIConfig CRD</strong>가 제대로 설치되었는지 확인해줍니다. 만약 설치가 안되었다면 아래의 파일을 통해 CRD를 정의해주시면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apiextensions.k8s.io/v1beta1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> CustomResourceDefinition\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> eniconfigs.crd.k8s.amazonaws.com\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">scope</span><span class=\"token punctuation\">:</span> Cluster\n  <span class=\"token key atrule\">group</span><span class=\"token punctuation\">:</span> crd.k8s.amazonaws.com\n  <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> v1alpha1\n  <span class=\"token key atrule\">names</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">plural</span><span class=\"token punctuation\">:</span> eniconfigs\n    <span class=\"token key atrule\">singular</span><span class=\"token punctuation\">:</span> eniconfig\n    <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ENIConfig</code></pre></div>\n<p>이후에 aws-node daemonset에서 커스텀 네트워크 설정을 활성화하는 환경변수를 업데이트 해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl <span class=\"token builtin class-name\">set</span> <span class=\"token function\">env</span> daemonset aws-node <span class=\"token parameter variable\">-n</span> kube-system <span class=\"token assign-left variable\">AWS_VPC_K8S_CNI_CUSTOM_NETWORK_CFG</span><span class=\"token operator\">=</span>true</code></pre></div>\n<p>이제 앞서 생성한 서브넷에 대해 ENIConfig CRD를 생성해줍니다.\n아래는 ap-northeast-2a, 2c에 대한 2개의 서브넷에 대한 파일입니다.\n보안 그룹도 클러스터 설정에 맞게 정의해주시면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> crd.k8s.amazonaws.com/v1alpha1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ENIConfig\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> private<span class=\"token punctuation\">-</span>user<span class=\"token punctuation\">-</span>2a\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">subnet</span><span class=\"token punctuation\">:</span> subnet<span class=\"token punctuation\">-</span>0ddddaaaaddddccdd\n  <span class=\"token key atrule\">securityGroups</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> sg<span class=\"token punctuation\">-</span>05555598cc88ffd00\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> crd.k8s.amazonaws.com/v1alpha1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ENIConfig\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> private<span class=\"token punctuation\">-</span>user<span class=\"token punctuation\">-</span>2c\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">subnet</span><span class=\"token punctuation\">:</span> subnet<span class=\"token punctuation\">-</span>0ccccaaaaddddccee\n  <span class=\"token key atrule\">securityGroups</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> sg<span class=\"token punctuation\">-</span>05555598cc88ffd00</code></pre></div>\n<p>마지막으로 클러스터에 해당하는 노드 그룹의 어노테이션을 수정해주어야 합니다. <a href=\"https://github.com/terraform-aws-modules/terraform-aws-eks\">terraform-aws-eks</a> 모듈을 통해 클러스터를 생성하셨다면 <code class=\"language-text\">worker_groups</code> 하위에 <code class=\"language-text\">kubelet_extra_args</code> 변수 설정을 통해 오토스케일링 그룹 설정을 수정할 수 있습니다.</p>\n<p>추가되어야할 어노테이션 값은 아래와 같습니다.\nValue 값의 경우, 위에서 추가한 ENIConfig CRD의 name metadata를 넣어주시면 됩니다. 업데이트 이후에는 노드를 재시작해주어야 정상적으로 적용됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">k8s.amazonaws.com/eniConfig<span class=\"token operator\">=</span>private-user-2c</code></pre></div>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/cni-custom-network.html\">https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/cni-custom-network.html</a></li>\n<li><a href=\"https://aws.amazon.com/ko/premiumsupport/knowledge-center/eks-multiple-cidr-ranges/\">https://aws.amazon.com/ko/premiumsupport/knowledge-center/eks-multiple-cidr-ranges/</a></li>\n</ul>\n<br>","excerpt":"앞서 정리했던 EKS의 VPC…"}}}},{"node":{"title":"AWS Solutions Architect Associate 취득 후기","id":"21121979-84c7-5dc3-8d2a-2e5b7fde43e7","slug":"aws-cert","publishDate":"November 30, 2019","heroImage":{"title":"cover-personal","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=350&h=207&q=50&fm=webp 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=700&h=413&q=50&fm=webp 700w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1400&h=826&q=50&fm=webp 1400w","sizes":"(min-width: 1400px) 1400px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1400&h=826&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=350&h=207&fl=progressive&q=50&fm=jpg 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=700&h=413&fl=progressive&q=50&fm=jpg 700w,\nhttps://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1400&h=826&fl=progressive&q=50&fm=jpg 1400w","sizes":"(min-width: 1400px) 1400px, 100vw"}},"layout":"constrained","width":1800,"height":1062,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBv/EABoQAAIDAQEAAAAAAAAAAAAAAAMRAAECEiH/xAAVAQEBAAAAAAAAAAAAAAAAAAABA//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oADAMBAAIRAxEAPwDlAjvdNSiD5p35M8m2PbxaVKSQuy296alalC1EiIF//9k="}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/3ltdJp06NzCExAWz9OF8Ak/d8ca530c80e7c79a7bd7e4c396c0ae00/cover_personal.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":1,"html":"<p>그동안 관심은 있었지만 굳이 내 돈주고 시험볼 생각이 없었기에 미루고 있다가\n12월까지 취득하면 50달러를 준다는 이벤트에 눈이 돌아가 시험을 신청했다.\n시험 비용이 약 19만원이기 때문에 당연히 회사 지원금으로 봐야 한다.</p>\n<p>처음엔 그냥 시험봐도 상관없겠지라고 생각했지만 AWS에 생각보다 많은 기능과 서비스가 있어서\n준비안하고 보면 떨어질거라 생각한다. 이미 AWS에 익숙한 개발자 또는 인프라 엔지니어라면 Udemy에서\n<strong>AWS Solutions Architect Associate Practice Test</strong>를 통해 준비하면 충분하다.\n5~6회 정도의 실전 모의고사를 제공해주며 오답에 대한 풀이까지 친절하게 설명해준다.\n다만 영어로 말장난치는 문제들도 가끔 존재하는데 실제 시험에서 그런 문제는 안나온다고 보면 된다.</p>\n<p>시험을 보자마자 결과가 나오고 다음날 점수와 자격증 pdf 파일을 확인할 수 있다.\n기대안했던 것과 달리 준비하면서 새로 알게된 정보도 많아 관심있다면 보는 걸 추천한다.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1TEZtk4Z65bzOmmEdgxcejTMEkkKaxTY0\" alt=\"\"></p>","excerpt":"그동안 관심은 있었지만 굳이 내 돈주고 시험볼 생각이 없었기에 미루고 있다가\n12월까지 취득하면 5…"}}}},{"node":{"title":"EKS의 AutoScaling 이해하기","id":"083eb498-8c8a-5a49-817f-dc19254b7979","slug":"eks-autoscale","publishDate":"November 23, 2019","heroImage":{"title":"cover-devops","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&q=50&fm=webp 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&q=50&fm=webp 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&q=50&fm=webp 1080w","sizes":"(min-width: 1080px) 1080px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&fl=progressive&q=50&fm=jpg 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&fl=progressive&q=50&fm=jpg 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg 1080w","sizes":"(min-width: 1080px) 1080px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,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"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":2,"html":"<p>오늘은 Kubernetes의 Cluster AutoScaling에 대해 정리해보려 합니다.\n그 다음 EKS에서는 어떻게 적용할 수 있는지, 어떤 효과를 볼 수 있는지 알아보겠습니다.</p>\n<br>\n<h2 id=\"kubernetes-cluster-autoscaling\" style=\"position:relative;\"><a href=\"#kubernetes-cluster-autoscaling\" aria-label=\"kubernetes cluster autoscaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes Cluster AutoScaling</h2>\n<p>Kubernetes는 Cluster AutoScaler를 통해 동적으로 인프라를 확장할 수 있습니다.\nCluster AutoScaler는 Pod의 리소스 요청에 따라 클러스터의 노드를 추가하거나 제거합니다.\n만약 리소스 부족으로 인해 스케줄링 대기 상태의 Pod가 존재하는 경우 Cluster AutoScaler가 노드를 추가합니다.\n추가 시 설정한 Min, Max 값을 넘어가지 않도록 구성 할 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 56.85714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAMAAABODP0nAAACqVBMVEX////x8O/U09XFxMO/vr7T09O+wMDCw8PIyMnEwMPT0tPCv8LEwsDMy8vJyMnHycz/5Lz/1pb/2J3/x3D/qSD9qCD/ri/9/f36+vr+/f7+/v7+///8/Pz09PSjo6P3ox/WjhrLhxnsnR7/ri75+fnq6OnQzs2/vb/Rz8/S0dDX1tbKysjGx8jCwsPIyMi7ubrIyc319fXckRvTihrOiRrNhxn9rS/39/fX1dS7u73Ozc7FxsfMzM7SzMzFxMTJx8i/vr/DxMbc3Nzn7vxkk+5cje1Yie1Xie1plu/4+v729vb/qSH7+/v8/f+lwPWYt/SXtfKWtfPN3PpZi+17o/FjkO5Hfevp8P3//Pb/+/H/+/Ld6Ptai+17pfFsl+/c5vtNg+tVietRhutNguvj6fbi4uK3t7fc5/va5vtsneqFqs2SvuR9quCJsNN9quSYxOqWwuhrnOvU4vpSh+tfkutZjetZjOtTh+vw9P3d5/vb5vvR3/rJ2fnZ5fv5+/6VtPOIq/KGqfCUtPO+2O6ixuWTss3e7Pikx+abvNmdv9z4+Pi00euQuNt0lLDZ6feUveGBpcSHrMuRsvOEqfKQsfPx9f2SsvP6+/7f6PtbjO18o/FumO+0y/dcjO1+pfFrlu/e6Puzy/fX4vVileuCqtGLteF5p+SDq9R9qeCMueqRvehvoOtkl+uCqc+Mt+J5p+ODrNR7qOGOu+ptnuvc6Pvf6fxXi+tyo+lzo+pnmetqnOpwoepekeu2zPdYjOtpm+pxoupdkeve6fz9/f+nwvabufSmwfWowvbp6eng3+DZ2trl5ubc293k4+PZ2djb2t3a2tvi4uPa2dnj5OXa2Nru7+/19fbk5eXr6+rp6Orp6ejp6Ojj4+Tn5+jr7Ozv7u/n5+ft7e7l5OVyBfRwAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH6AEUCgUVyeVPTwAAAWBJREFUGBmNwT9rE3EAgOH3vfyuJqhpSS2toYiO4qQgEVz9A9KvIeIXcBFdsjk4uLq4KC5umg6Cs0WL4NxFtLF1MDgoFWLOu8tdej069Hk4KqnyoF/sk7oFAX9SE6hraEJEnSzr967brH7rMlye8/cJM1scFGjrvC5oR4fdT10WTX3pbcAVZ94Fzpgipeu3BgwXTwMfflxe2WFJQSckCYF5U2Rc+whcF7j24nUv2W2re2RaBDgpJiZEbu4AL5nauK0jCi0CtCwMt6h6yh32Bc4qJtGExjlqOiMKHQKP70vOPjXxecEEojECfXNPtjnMo3tkAtA0x+FecTQrq+QCpYenJKdJQq7hXS4NyAVKXfUtmRvqOpmY3iZTgVJzQCF+Q+Hm6PMuU1J61rDw57i5vZZrlAKlJVOThv9Cx786aTrXkplAqa3k7D84RiaOxsxIxXtL41i9QIVUXHxuxdWvVPwHfetKl8i7w8UAAAARdEVYdGV4aWY6Q29sb3JTcGFjZQAxD5sCSQAAABJ0RVh0ZXhpZjpFeGlmT2Zmc2V0ADkwWYzemwAAABh0RVh0ZXhpZjpQaXhlbFhEaW1lbnNpb24ANzAwQr883wAAABh0RVh0ZXhpZjpQaXhlbFlEaW1lbnNpb24AMzk4B6BGDgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"autoscaler\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>먼저 AutoScaler를 설정하면 대기 상태의 Pod을 주기적으로 확인합니다.\n클러스터 리소스가 부족하면서 사용자가 정의한 최대 노드 수에 도달하지 않은 경우 노드 프로비저닝을 요청합니다.\n노드가 추가되면 스케줄러에 의해 대기 상태의 Pod들이 새로운 노드로 할당됩니다.</p>\n<p>노드를 축소하는 프로세스는 사용자가 정의한 메트릭에 의해 시작됩니다.\n예를 들어 CPU Utilization이 50% 이하로 설정했다고 가정해보겠습니다.\nCluster AutoScaler는 삭제할 노드에서 실행 중인 Pod를 다른 노드로 안전하게 이동시킬 수 있는지 확인합니다.\n이때 Pod가 로컬 스토리지를 사용하고 있었다면 데이터 유실이 발생할 수 있으니 <strong>PV 사용</strong>을 권장합니다.\n이러한 확인 프로세스를 노드 또는 Pod 단위로 수행하고 Pod이 모두 이동하게 되면 노드를 제거합니다.</p>\n<br>\n<h2 id=\"eks-autoscaler\" style=\"position:relative;\"><a href=\"#eks-autoscaler\" aria-label=\"eks autoscaler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EKS AutoScaler</h2>\n<p>EKS의 AutoScaler는 AWS의 Auto Scaling Group을 활용하고 있습니다.\nASG는 주기적으로 현재 상태를 확인하고 <strong>Desired State</strong>로 변화하는 방식으로 동작합니다.\n사용자는 클러스터 노드 수를 제한하는 Min, Max 값을 지정할 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAWCAIAAAA97EnnAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH6AEUCgUVyeVPTwAABEJJREFUSMfFVltv3FQQ7v/jAd4QD/CEhETeQOIHAEEoqIKiCgkihFqo1CS0IQ2bcEsb5bJNdjfLXm2v7bXjPb4f32/ry9phdq0srcjLQlrmwZrzzez5/M1YM3vj4n+yG3MvyQsjzl82cZcg395jP2jZq7v7qqr+HS+KovJFsbVyYUkvhJig6dd2ybeecPea9JAX4nSSpHk4zi56j4u77xebnxTfLoF//cRIFJutdrVWH9C0aZrzcLD9pffRK95nr3vLrwbryy+kx4qisCzreV55xBifz4zutpleh+61ueFQlmVN066ZeDKZpGkKPXVdN4qi8XgchiE4juPYtj0H4RnHMYQgf9akg+LOexciAa7v+4ZhaDOD9wYfEMAPW0qaTa4mhqvxpQmCgJ+3fyJwNVQInODrpfibd6Obb8Al5QuVFl0a4D/vUH4QX0Gc57llWVmWlYJ0XQcHjvO7gKCUCwjg4AdBAJUAJI4iQ5ayeHqvKIo0TUO/IAQXQpFKxVRTDMPkCmIvdFVdcTxn99Exi4iB0KdHhKyJSRo36/2TWpMWegyi6HMqTse6oe38dMQikhmRDCJVrJi2EadxNkkX7nE0DuEFQdzaxja3tTJ6uHzGVJE8gtDpaXPv8A98681uq/InVQMEdGxsVPgHH59v34Q0IAb109qkY0HnJGM00jlBGyJ8LmJBs2XFFHmFAZ9XWd1WICobCL6kmeLA0bDmB15rUG9Tp9zheouuS6qYZinNk+AP6jtE63GfbSdZYli4zTQ65FP26VabOVN02XKsNEsgeWHFTjBWdMP1g4f3T4mh2BnKHV6TNCjg5Gi//2Sf6kGtz/U+J8VpphvW+ndVgkVdXu3yumrYhu0Cnmb5wsThOClLfW+z1d/6nl+/dUBOiSF0XGd+OyTV20u1Ru+ERLNSexu/ENTa7eHmKqTppl2WOskmQ9mXcCSoASv7nByMtFA2I8EIBorLah7CoWREgCM9VMzxs4rDGonqFOpVD+q0DMRJlvdYVKPETuOs2aHaDIIaANMpiZrUqHdy1KBlBVvmVPHk3yhOfNfU1Mj32u2BLXIOGroiZ2MtTxOW5gSGBcSTeV1gAfEss1ojPYmHHFfiPNPwbAvwYpItTJyOo7LUP9zdNjdWvAefuq09W5MhdLB/Wq888r96x6tXtG51Vmrnx/sVb+1Df+tzSHNNvSx1nsS5OixMKdeFXGWnPhYKWyksCY4FHhUGyjUenoWHL4nDACYXTAOtfWC29s3dVatfNdUpscp0rd6x+fsds/GrSjRKYqN7ZDb3yjTHxFPiogDRCyuG3yhIcE3D0jVDUyz4VFXFNnDkuViVp6CqWFjHihx6jo11SDB11cIaNAiOqogWZX1uScAshLEOM48gCPgvkF0aIP1+n6KoOQIzdTAYQBqM0nKy/qftVNpohGD3PYvAqEIIlY2cG6xLWBLXsxZfsv0FuQGy4iXOzQYAAAARdEVYdGV4aWY6Q29sb3JTcGFjZQAxD5sCSQAAABJ0RVh0ZXhpZjpFeGlmT2Zmc2V0ADkwWYzemwAAABh0RVh0ZXhpZjpQaXhlbFhEaW1lbnNpb24ANzAwQr883wAAABh0RVh0ZXhpZjpQaXhlbFlEaW1lbnNpb24AMzky53WvEAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"asg2\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>위와 같이 목적에 따라 여러 종류의 ASG를 설정하고 서로 다른 <strong>AutoScaling Policy</strong>를 적용할 수 있습니다.\n<strong>Spot Instance Group</strong>을 설정하면 저렴하지만 입찰 가격에 의해 언제든지 인스턴스가 내려갈 수 있습니다.\n하지만 EKS의 <strong>Spot Interrupt Handler (DeamonSet)</strong> 에 의해 정상적으로 실행 중인 Pod들을 재배치할 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 39.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAMAAABTCc2fAAABR1BMVEXk5OTd3d3s7Ozq6urr6+vt7e339/fu7u7n5+fo6OjY2NjX19fW1tbi4uLm5ubj4+Pl5eXl5OTh4eHg4ODf39/g3+Dk4+Tk5+vc3+LV2Nzh5Off4uXY297W2NvS1djT1tnY2t3b3uHZ3ODb3uLW2d3W2dza3eHY29/g4+bU19vV2NvU19rT1trY5PHm7PLc4ufb4Obp7vT3+v34+v34+/30+P3t8/nx9v3r8ffh5uzZ3+Ta3+Xg5evZ3uTu9Prf5Oro7vTo7fP29vb5+fn09PTz8/P8/Pz7+/v9/f3+/v7////n6Ovj5uvn6ezs7e7x8fHw8PDy8vL5+frb2tvc3uDX2t/b3eDn5ufo5+jc3Nzd3N3Z2dn6+vrQ0NDS0tLV1dXU1NTZ2Nn7/Pvt8+7w9fHv7+/9+vr35eXp6en19fX9+/v46Oj67u7EWH88AAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH6AEUCgUWUOwe9QAAAVJJREFUGBmNwTFrU1EcxuHfe865MTG5TRFri4vS3W9gEbWUkg5ODorGBvu1pIMuztVqoCLo5JcQHUqhlyLFIIn33PM3SVuQtkOeR2jMcAJFLpFp2BCSv6qSTMfzsmRZ5aGsRe8sHnNdKaaazB9CW4s6k7xiJqksYz5S/fecNGjE2NIvA3RHUyYhCZNJ5jQ1hIb+MBUWJCWvGAxJVN5kGjkZ/vNDSHaNKa2LmQTHbBwzColLmDgvpG93NYYYfIGNXS4oldUrH1qrkvqjR/3UifCxzgVNrUnwjPbznCfdF/wn725yIu9t5kyoM7wt7f9dLj7APcAzVu29LN5X2eMjqL9z6zvZSuZoh7DP19dL6jX8GBOae9sPtd4BsNsc7bTURJ1b0nc+VTJt/eRU2sOc2dMjuLJE9aa8HwKvtgQry8VCsf2AUxa6hzcKJgbbdNLGzR//AJffcyZLycj3AAAAEXRFWHRleGlmOkNvbG9yU3BhY2UAMQ+bAkkAAAASdEVYdGV4aWY6RXhpZk9mZnNldAA5MFmM3psAAAAYdEVYdGV4aWY6UGl4ZWxYRGltZW5zaW9uADcwMEK/PN8AAAAYdEVYdGV4aWY6UGl4ZWxZRGltZW5zaW9uADI3OJjhAbcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"asg3\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>그리고 위 그림과 같이 앞서 설정한 Cluster AutoScaler에 의해 새로운 Spot Instance가 추가됩니다.\n분석용 클러스터 같은 경우, 주말과 야간 시간에 사용량이 낮다는 사실을 이미 알고 있기 때문에\n<strong>CloudWatch Scheduled Policy</strong>를 통해 노드를 축소하면 비용을 절감할 수 있습니다.</p>\n<br>\n<h2 id=\"eks-autoscaler-설정\" style=\"position:relative;\"><a href=\"#eks-autoscaler-%EC%84%A4%EC%A0%95\" aria-label=\"eks autoscaler 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EKS AutoScaler 설정</h2>\n<p>먼저 EKS에 ASG 권한을 가지는 IAM Role을 만들어서 Worker Node 보안 그룹에 추가합니다.\n다음으로 ASG 그룹 태그를 설정하고 yaml 파일을 클러스터에 배포합니다.\n자세한 내용은 <a href=\"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/cluster-autoscaler.html\">공식 문서</a>를 통해 진행하실 수 있습니다.\n만약 Policy로 메모리 지표를 사용하고 싶다면 각 노드에 <strong>CloudWatch Agent</strong>를 배포해야 합니다.</p>\n<br>","excerpt":"오늘은 Kubernetes의 Cluster AutoScaling에 대해 정리해보려 합니다.\n그 다음 EKS…"}}}}]}},"pageContext":{"basePath":"","paginationPath":"","pageNumber":3,"humanPageNumber":4,"skip":19,"limit":6,"numberOfPages":16,"previousPagePath":"/3","nextPagePath":"/5"}},"staticQueryHashes":["1946181227","2744905544","3732430097"]}