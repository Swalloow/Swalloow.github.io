{"componentChunkName":"component---src-templates-tag-js","path":"/tag/dataengineering/4","result":{"data":{"contentfulTag":{"title":"DataEngineering","id":"6d3fb203-7cdf-53d7-be6f-12ba3e82d74d","slug":"dataengineering","post":[{"id":"1dfb7a05-4413-5c9f-8adb-d57b59ed0b1e","title":"Spark on Kubernetes: ì»¤ìŠ¤í…€ ìŠ¤ì¼€ì¤„ëŸ¬","slug":"spark-on-kubernetes-scheduler","publishDate":"June 08, 2023","publishDateISO":"2023-06-08","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"b20ebf01-afe9-56d6-840c-ab90a0fa08b2","childMarkdownRemark":{"id":"c17d3327-d125-5078-a762-aa617298a0a5","timeToRead":3,"html":"<p>Spark 3.4 ë²„ì „ë¶€í„° Customized K8S Scheduler ê¸°ëŠ¥ì´ GA ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ‘ğŸ»\nê·¸ë˜ì„œ ì˜¤ëŠ˜ì€ ì»¤ìŠ¤í…€ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì™œ í•„ìš”í•˜ê³  ì–´ë–»ê²Œ ì ìš©í•  ìˆ˜ ìˆëŠ”ì§€ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p>\n<p><br><br></p>\n<h2 id=\"spark-kubernetes-scheduling\" style=\"position:relative;\"><a href=\"#spark-kubernetes-scheduling\" aria-label=\"spark kubernetes scheduling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark Kubernetes Scheduling</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1Kwomj5BeazAYa72lEB4PQDcKUe46BizX\" alt=\"spark-k8s\"></p>\n<p>ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ spark-submitì„ ì‹¤í–‰í•˜ë©´ podê°€ ì‹¤í–‰ë˜ëŠ” ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>\n<ol>\n<li>spark-submit ëª…ë ¹ì–´ ì‹¤í–‰</li>\n<li>Kube APIë¥¼ í†µí•´ driver pod ìƒì„±</li>\n<li>driver pod â†’ API Serverì— executor ìƒì„± ìš”ì²­</li>\n<li>Kube APIë¥¼ í†µí•´ executor pod ìƒì„±</li>\n</ol>\n<p>ìœ„ì™€ ê°™ì´ driverê°€ executorë¥¼ ê´€ë¦¬í•¨ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ í™•ì¥í•  ìˆ˜ ìˆì§€ë§Œ\ndriverê°€ ìƒì„±ë˜ê¸° ì „ê¹Œì§€ ì „ì²´ executorì— í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì•Œ ìˆ˜ ì—†ë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤.\nì´ëŸ¬í•œ ì´ìœ ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ì— ë¦¬ì†ŒìŠ¤ê°€ ê³ ê°ˆëœ ìƒí™©ì—ì„œ ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<p><strong>í´ëŸ¬ìŠ¤í„° ë‚´ì— ë¦¬ì†ŒìŠ¤ê°€ ê³ ê°ˆëœ ê²½ìš°</strong><br>\n<img src=\"https://drive.google.com/uc?export=view&#x26;id=1pNKR_jMSjpHgJakbDiyJIETkKBoftIXe\" alt=\"allo1\"></p>\n<p>í´ëŸ¬ìŠ¤í„°ì˜ ë¦¬ì†ŒìŠ¤ í’€ì´ ìš”ì²­ ë°›ì€ ë¦¬ì†ŒìŠ¤ë³´ë‹¤ ë¶€ì¡±í•œ ìƒí™©ì´ë¼ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.\nìœ„ ê·¸ë¦¼ì—ì„œ ë…¹ìƒ‰ì€ ì‹¤ì œë¡œ ë…¸ë“œì— í• ë‹¹ë˜ì–´ running ì¤‘ì¸ pod, ë¹¨ê°„ìƒ‰ì€ ë¦¬ì†ŒìŠ¤ê°€ ë¶€ì¡±ìœ¼ë¡œ ì¸í•´ pending ìƒíƒœì˜ pod ì…ë‹ˆë‹¤.</p>\n<p>ê° ì•±ì€ ë¦¬ì†ŒìŠ¤ ê²½ìŸì— ì˜í•´ driverì™€ executor 1ê°œì”© ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì–´ 3ê°œì˜ ì•±ì´ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœì…ë‹ˆë‹¤. í•˜ì§€ë§Œ 3ê°œì˜ ì•±ì€ executor ë¦¬ì†ŒìŠ¤ë¥¼ í™•ë³´í•˜ì§€ ëª»í–ˆê¸° ë•Œë¬¸ì— ì‘ì—…ì„ ì™„ë£Œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. EKS í™˜ê²½ì´ë¼ë©´ ë…¸ë“œ ë¦¬ì†ŒìŠ¤ë¥¼ í™•ë³´í•˜ë”ë¼ë„ VPC IP ê³ ê°ˆ ë¬¸ì œë¡œ ì¸í•´ ì´ëŸ¬í•œ ìƒí™©ì„ ì¶©ë¶„íˆ ë§ˆì£¼ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1ErqVM9uKqc8WZO0-BNIRlBBA5DRsNeYS\" alt=\"allo2\"></p>\n<p>ìœ„ì™€ ê°™ì´ ë¦¬ì†ŒìŠ¤ ë‚´ì—ì„œ ê°€ëŠ¥í•œ ì•±ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰, ì¢…ë£Œë˜ê³  ë‚˜ë¨¸ì§€ëŠ” ëŒ€ê¸°í•˜ëŠ”ê²Œ ë” íš¨ìœ¨ì ì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” ê¸°ë³¸ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ë°°ì¹˜ ì‘ì—…ì— ìµœì í™”ëœ í˜•íƒœê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ <code class=\"language-text\">kube-batch</code>, <code class=\"language-text\">volcano</code>, <code class=\"language-text\">yunikorn</code> ë“±ì˜ ì»¤ìŠ¤í…€ ë°°ì¹˜ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<p><br><br></p>\n<h2 id=\"spark-app-aware-scheduling\" style=\"position:relative;\"><a href=\"#spark-app-aware-scheduling\" aria-label=\"spark app aware scheduling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark App-aware Scheduling</h2>\n<p>ê¸°ë³¸ ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” <code class=\"language-text\">filtering</code>, <code class=\"language-text\">scoring</code> ê³¼ì •ì„ ê±°ì³ podê°€ ì‹¤í–‰ë  ìµœì ì˜ ë…¸ë“œë¥¼ ì°¾ìŠµë‹ˆë‹¤. ì´ ë•Œ ìŠ¤ì¼€ì¤„ ë‹¨ìœ„ëŠ” pod ì…ë‹ˆë‹¤. ë°˜ë©´ ëŒ€ìš©ëŸ‰ ë°°ì¹˜ ì‘ì—…ì—ì„œëŠ” ë™ì‹œì— ìˆ˜ ë°±ê°œì˜ podê°€ ìƒì„±ë˜ê¸°ë„ í•©ë‹ˆë‹¤. ë˜í•œ ë™ì‹œì— ì—¬ëŸ¬ ì‘ì—…ì´ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ìš°ì„ ìˆœìœ„, ì¡°ì§ ë³„ ë¦¬ì†ŒìŠ¤ ì œí•œ ë“±ì„ ê³ ë ¤í•´ì„œ ì•ˆì •ì ìœ¼ë¡œ ì‘ì—…ì„ ë§ˆì¹˜ê¸° ìœ„í•œ ëŒ€ê¸°ì—´ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>\n<p>ì»¤ìŠ¤í…€ ë°°ì¹˜ ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œëŠ” ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ <strong>ì•± ë‹¨ìœ„ë¡œ ìŠ¤ì¼€ì¤„ì„ ê²°ì •í•˜ëŠ” App-aware ë°©ì‹ì„ ì‚¬ìš©</strong>í•©ë‹ˆë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ ëŒ€ìš©ëŸ‰ ë°°ì¹˜ ì‘ì—…ì„ ìœ„í•´ Job Ordering, Hierarchy Resource Queue, Node Sorting ë‹¨ê³„ì—ì„œ ë‹¤ì–‘í•œ ìŠ¤ì¼€ì¤„ë§ ì•Œê³ ë¦¬ì¦˜ì„ ì§€ì›í•©ë‹ˆë‹¤.</p>\n<p><strong>Bin Packing</strong><br>\n<img src=\"https://drive.google.com/uc?export=view&#x26;id=10yt7Xf1w4pWqLf8Z0cYJQbA5BzUSX_--\" alt=\"binpack\"></p>\n<p>Node Sorting ë‹¨ê³„ë¥¼ ì˜ˆì‹œë¡œ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.\nê¸°ë³¸ ìŠ¤ì¼€ì¤„ëŸ¬ì—ì„œ driver, executor podê°€ ì—¬ëŸ¬ ë…¸ë“œì— ê³ ë¥´ê²Œ ë¶„ì‚°í•˜ë©´ ì•±ì€ ë„¤íŠ¸ì›Œí¬ ì§€ì—°, ì…”í”Œ ì‹œ ì›ê²©ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•©ë‹ˆë‹¤.</p>\n<p>ì´ ë•Œ í…ŒíŠ¸ë¦¬ìŠ¤ì²˜ëŸ¼ <strong>Bin Packing ë°©ì‹ì„ ì ìš©í•œë‹¤ë©´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ìµœëŒ€í•œ ê°€ê¹ê²Œ í• ë‹¹</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ì´ë¥¼ ì ìš©í•˜ë©´ ë…¸ë“œ scale-inë„ ì›í™œí•˜ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><br><br></p>\n<h2 id=\"spark-gang-scheduling\" style=\"position:relative;\"><a href=\"#spark-gang-scheduling\" aria-label=\"spark gang scheduling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark Gang Scheduling</h2>\n<p>ì•ì„œ ë¦¬ì†ŒìŠ¤ê°€ ê³ ê°ˆëœ ìƒí™©ì˜ ê²½ìš°, Gang Schedulingì„ ì‚¬ìš©í•œë‹¤ë©´ ì•ˆì •ì ìœ¼ë¡œ ì‘ì—…ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë…¸ë“œê°€ 0ëŒ€ì¸ ìƒí™©ì—ì„œ ì•±ì´ ì œì¶œë˜ì—ˆë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1zT9Y-cjE65n-H-WgVDefQ02oI0ZVCjWH\" alt=\"gang1\"></p>\n<p>ìœ„ì˜ ê·¸ë¦¼ì€ ê¸°ë³¸ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì ìš©í–ˆì„ ë•Œ ëª¨ìŠµì…ë‹ˆë‹¤.<br>\ní•„ìš”í•œ ìµœì†Œ ë¦¬ì†ŒìŠ¤ê°€ ë¯¸ë¦¬ ì •í•´ì ¸ìˆìœ¼ë‚˜ ë…¸ë“œ ìƒì„±ê¹Œì§€ ëŒ€ê¸° ì‹œê°„ì´ ë°œìƒí•©ë‹ˆë‹¤.</p>\n<ul>\n<li>driver ë¦¬ì†ŒìŠ¤ ìš”ì²­ â†’ 1ëŒ€ ìƒì„±</li>\n<li>executor ë¦¬ì†ŒìŠ¤ ìš”ì²­ â†’ 2ëŒ€ ìƒì„±</li>\n</ul>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1kGf51ivLYDgS8ZsuAIYEdNAAN643ze2r\" alt=\"gang2\"></p>\n<p>ìœ„ì˜ ê·¸ë¦¼ì€ gang ìŠ¤ì¼€ì¤„ë§ì„ ì ìš©í–ˆì„ ë•Œ ëª¨ìŠµì…ë‹ˆë‹¤.<br>\ní•œë²ˆì— í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ í™•ë³´í•˜ì—¬ ëŒ€ê¸° ì‹œê°„ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.</p>\n<ul>\n<li>driver ë¦¬ì†ŒìŠ¤ ìš”ì²­ â†’ placeholder ë¦¬ì†ŒìŠ¤ ìš”ì²­ â†’ ë…¸ë“œ 3ëŒ€ ìƒì„±</li>\n<li>driver, executor pod ì¦‰ì‹œ í• ë‹¹</li>\n</ul>\n<p>ì—¬ê¸°ì—ì„œ placeholder podì€ ì•„ë¬´ ë™ì‘ë„ ì•ˆí•˜ì§€ë§Œ ë¯¸ë¦¬ ë¦¬ì†ŒìŠ¤ë¥¼ í™•ë³´í•˜ê¸° ìœ„í•´ ì¡´ì¬í•˜ëŠ” dummy pod ì…ë‹ˆë‹¤. ë§Œì•½ ë¦¬ì†ŒìŠ¤ë¥¼ í™•ë³´í•˜ì§€ ëª»í•˜ëŠ” ìƒí™©ì´ë¼ë©´ ì•±ì€ ëŒ€ê¸°í•©ë‹ˆë‹¤.\nGang Schedulingì€ FIFO íì™€ í•¨ê»˜ ì‹¤í–‰í•˜ì—¬ ë¦¬ì†ŒìŠ¤ ê²½ìŸìœ¼ë¡œ ì¸í•œ êµì°©ìƒíƒœì— ë¹ ì§€ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. </p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1NwRgb5nl-b4hecA_PYxuNC59M_5irQbq\" alt=\"kubemark\"></p>\n<p>ë˜í•œ ë™ì‹œ ì‹¤í–‰ Podê°€ ë§ì„ ìˆ˜ë¡ ìŠ¤ì¼€ì¤„ë§ ì„±ëŠ¥ í–¥ìƒì„ ê¸°ëŒ€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ ê·¸ë¦¼ì€ Yunikornì—ì„œ kubemarkë¥¼ í†µí•´ ë²¤ì¹˜ë§ˆí¬í•œ ê²°ê³¼ì…ë‹ˆë‹¤. íšŒì‚¬ í™˜ê²½ì—ì„œ spark ì‘ì—… ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í–ˆì„ ë•Œë„ ì„±ëŠ¥ í–¥ìƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<p>ë‹¤ìŒ ê¸€ì—ì„œëŠ” Spark 3.4 ë²„ì „ì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì§€ì›í•˜ëŠ” Volcano, Yunikornì— ëŒ€í•´ ì´ì–´ì„œ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://yunikorn.apache.org/docs/\">https://yunikorn.apache.org/docs/</a></li>\n<li><a href=\"https://blog.cloudera.com/spark-on-kubernetes-gang-scheduling-with-yunikorn/\">https://blog.cloudera.com/spark-on-kubernetes-gang-scheduling-with-yunikorn/</a></li>\n</ul>","excerpt":"Spark 3.4 ë²„ì „ë¶€í„° Customized K8S Scheduler ê¸°ëŠ¥ì´ GAâ€¦"}}},{"id":"ec4cd801-966b-58d1-b29f-642aa46efc80","title":"OS Xì—ì„œ Homebrewë¡œ Spark, Zeppelin ì„¤ì¹˜í•˜ê¸°","slug":"spark-zeppelin-install","publishDate":"March 13, 2017","publishDateISO":"2017-03-13","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"f45248c6-9caf-5a42-8dac-73586e202581","childMarkdownRemark":{"id":"1bb823f3-0f55-5944-a351-ca8c729d11bf","timeToRead":2,"html":"<blockquote>\n<p><strong>Apache Spark</strong> is a fast and general engine for large-scale data processing.\n<strong>Zeppelin</strong>, a web-based notebook that enables interactive data analytics.\nYou can make beautiful data-driven, interactive and collaborative documents with SQL, Scala and more.</p>\n</blockquote>\n<p>ê³µì‹ ë¬¸ì„œì— ë‚˜ì™€ìˆëŠ” ì†Œê°œ ê¸€ì²˜ëŸ¼ SparkëŠ” ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ë²”ìš© ì—”ì§„ì…ë‹ˆë‹¤.\nì–¼ë§ˆ ì „ê¹Œì§€ëŠ” <strong>ë²”ìš©ì  ëª©ì ì˜ ë¶„ì‚° ê³ ì„±ëŠ¥ í´ëŸ¬ìŠ¤í„°ë§ í”Œë«í¼</strong> ì´ë¼ê³  ì„¤ëª…í–ˆëŠ”ë° ìµœê·¼ì— ì‰½ê²Œ ë‹¤ê°€ê°€ê¸° ìœ„í•´ ë°”ê¾¼ë“¯ í•©ë‹ˆë‹¤.</p>\n<p>ê·¸ë¦¬ê³  Zeppelinì€ ë°ì´í„° ë¶„ì„ì„ ìœ„í•œ ì›¹ ê¸°ë°˜ì˜ ë…¸íŠ¸ë¶ì…ë‹ˆë‹¤.\nZeppelinì€ ì‘ë…„ ë§ë¶€í„° Apache-Top Level projectë¡œ ìŠ¹ê²©í•˜ë©´ì„œ ì¸ê¸°ê°€ ë†’ì•„ì§€ê³  ìˆìŠµë‹ˆë‹¤.\nZeppelinì´ Jupyter Notebookê³¼ ë‹¤ë¥¸ ì ì€ ë¹…ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•´ Spark ë“± ë‹¤ì–‘í•œ ì•„íŒŒì¹˜ í”„ë¡œì íŠ¸ë¥¼ ì§€ì›í•˜ê³ ,\nJavascript ê¸°ë°˜ì˜ ë°ì´í„° ì‹œê°í™”ê°€ ë‚´ì¥ë˜ì–´ ìˆì–´ í¸ë¦¬í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"spark-install\" style=\"position:relative;\"><a href=\"#spark-install\" aria-label=\"spark install permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark Install</h2>\n<p>SparkëŠ” Scalaë¡œ êµ¬í˜„ë˜ì–´ ìˆì§€ë§Œ SDKë¥¼ í†µí•´ Java, Python API ë˜í•œ ì§€ì›í•©ë‹ˆë‹¤.\nê·¸ë¦¬ê³  ë¹…ë°ì´í„° í”Œë«í¼ìœ¼ë¡œ Hadoop, AWS S3, Cassandra ë“± ë‹¤ì–‘í•œ ì €ì¥ì†Œë¥¼ ì§€ì›í•©ë‹ˆë‹¤.\në§Œì•½ Hadoopì´ í•„ìš”ì—†ë‹¤ë©´ í™ˆí˜ì´ì§€ì—ì„œ Hadoopì´ ì œì™¸ëœ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ì„¤ì¹˜í•˜ì‹œë©´ ë©ë‹ˆë‹¤.\nì—¬ê¸°ì—ì„œëŠ” ê°„ë‹¨í•˜ê²Œ OS Xì˜ Homebrewë¥¼ í†µí•´ ì„¤ì¹˜í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ brew <span class=\"token function\">install</span> scala\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">SCALA_HOME</span><span class=\"token operator\">=</span>/usr/local/bin/scala\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token environment constant\">$PATH</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$SCALA_HOME</span>/bin</code></pre></div>\n<p>ë¨¼ì € ìŠ¤ì¹¼ë¼ë¥¼ ì„¤ì¹˜í•˜ê³  í™˜ê²½ë³€ìˆ˜ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ brew <span class=\"token function\">install</span> apache-spark\n$ spark-shell</code></pre></div>\n<p>ê·¸ë¦¬ê³  Sparkì„ ì„¤ì¹˜í•œ ë‹¤ìŒ, <code class=\"language-text\">spark-shell</code> ëª…ë ¹ì„ í†µí•´ ì‹¤í–‰ì‹œí‚¤ë©´ ë©ë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1KI67CFuDUyqcrvPeGllWEFLTLmntZOGa\" alt=\"spark-shell\"></p>\n<p><a href=\"http://172.30.105.117:4040\">http://172.30.105.117:4040</a> ì£¼ì†Œë¡œ ì ‘ì†í•˜ë©´ Spark UIë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=10zDH0jzAzOODI7aUs9JHWcO4omx9t69N\" alt=\"spark-ui\"></p>\n<br>\n<h2 id=\"zeppelin-install\" style=\"position:relative;\"><a href=\"#zeppelin-install\" aria-label=\"zeppelin install permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zeppelin Install</h2>\n<p>Zeppelinì€ GitHub ì €ì¥ì†Œë¥¼ cloneí•˜ì—¬ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ê³¼ í™ˆí˜ì´ì§€ì—ì„œ ë‹¤ìš´ë°›ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.\nì—¬ê¸°ì—ì„œëŠ” ìœ„ì™€ ë§ˆì°¬ê°€ì§€ë¡œ Homebrewë¥¼ í†µí•´ ì„¤ì¹˜í•´ë³´ë ¤ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ brew <span class=\"token function\">install</span> apache-zeppelin\n$ /usr/local/Cellar/apache-zeppelin/0.7.0/bin/zeppelin-daemon.sh start\n$ /usr/local/Cellar/apache-zeppelin/0.7.0/bin/zeppelin-daemon.sh stop</code></pre></div>\n<p>brew ëª…ë ¹ì–´ë¡œ apache-zeppelinì„ ì„¤ì¹˜í•˜ê³ \nìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ <a href=\"localhost:8080\">localhost:8080</a> í¬íŠ¸ì—ì„œ Zeppelinì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\nëª…ë ¹ì–´ê°€ ë„ˆë¬´ ê¸¸ë‹¤ë³´ë‹ˆ <code class=\"language-text\">~/.zshrc</code>ì— ë“±ë¡í•´ì„œ ì‚¬ìš©í•˜ë©´ ì¢€ í¸ë¦¬í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> ~/.zshrc\n$ <span class=\"token builtin class-name\">alias</span> zeppelin-start <span class=\"token operator\">=</span> <span class=\"token string\">\"/usr/.../bin/zeppelin-daemon.sh start\"</span>\n$ <span class=\"token builtin class-name\">alias</span> zeppelin-stop <span class=\"token operator\">=</span> <span class=\"token string\">\"/usr/.../bin/zeppelin-daemon.sh stop\"</span>\n$ <span class=\"token builtin class-name\">source</span> ~/.zshrc</code></pre></div>\n<p>ìœ„ì™€ ê°™ì´ aliasë¡œ ë“±ë¡í•´ì£¼ë©´ ì•ìœ¼ë¡œ <code class=\"language-text\">zeppelin-start</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\nìì„¸í•œ í™˜ê²½ì„¤ì •ì€ <a href=\"https://zeppelin.apache.org/\">Zeppelin í™ˆí˜ì´ì§€</a>ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>","excerpt":"Apache Spark is a fast and general engine for large-scale data processingâ€¦"}}},{"id":"3bda34bf-e581-57bf-aa58-9130c0a3b6b1","title":"GFS, HDFS ê·¸ë¦¬ê³  MapReduce","slug":"map-reduce","publishDate":"March 14, 2017","publishDateISO":"2017-03-14","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"0c11f5f7-0e00-5786-9808-316f3c842c0f","childMarkdownRemark":{"id":"bbf8d9aa-58a2-57f0-98b1-ee6fd7837dbc","timeToRead":2,"html":"<p>ë°ì´í„°ê°€ ê¸‰ì†íˆ ëŠ˜ì–´ë‚˜ë©´ì„œ ê¸°ì¡´ì˜ ë°©ë²•ìœ¼ë¡œ ì²˜ë¦¬ê°€ í˜ë“¤ì–´ì§€ì,\në¹…ë°ì´í„°ë¥¼ ìœ„í•œ ëŒ€ìš©ëŸ‰ ë¶„ì‚° íŒŒì¼ ì‹œìŠ¤í…œì´ ë‚˜íƒ€ë‚˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.\nì—¬ê¸°ì—ì„œëŠ” GFS, HDFS ê·¸ë¦¬ê³  Map Reduce ê°œë…ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"gfs-google-file-system\" style=\"position:relative;\"><a href=\"#gfs-google-file-system\" aria-label=\"gfs google file system permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GFS (Google File System)</h2>\n<p>Google File Systemì€ 2003ë…„ ë…¼ë¬¸ì„ í†µí•´ ì†Œê°œë˜ì—ˆìŠµë‹ˆë‹¤.\nì´ì „ì— êµ¬ê¸€ì—ì„œ ì‚¬ìš©í•˜ë˜ íŒŒì¼ ì‹œìŠ¤í…œì€ Big File ì´ì—ˆëŠ”ë°,\nêµ¬ê¸€ì˜ ë°ì´í„°ê°€ ê¸‰ê²©íˆ ëŠ˜ì–´ë‚¨ì— ë”°ë¼ í•µì‹¬ ë°ì´í„° ìŠ¤í† ë¦¬ì§€ì™€ êµ¬ê¸€ ê²€ìƒ‰ ì—”ì§„ì„ ìœ„í•´\nìµœì í™” ëœ íŒŒì¼ ì‹œìŠ¤í…œì´ í•„ìš”í•˜ê²Œ ëœ ê²ƒ ì…ë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1aCIU84Hvh8t3KP5PlI3LPaphKveOFHTF\" alt=\"Google File System\"></p>\n<p>GFSëŠ” í¬ê²Œ í•˜ë‚˜ì˜ master nodeì™€ ì—¬ëŸ¬ ê°œì˜ slave nodeë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\nê¸°ëŠ¥ìœ¼ë¡œ ë³´ë©´ Master, Chunk Server, Clientë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><strong>Master</strong>: GFS ì „ì²´ë¥¼ ê´€ë¦¬í•˜ê³  í†µì œí•˜ëŠ” ì¤‘ì•™ ì„œë²„ì˜ ì—­í• </li>\n<li><strong>Chunk Server</strong>: ë¬¼ë¦¬ì ì¸ ì„œë²„, ì‹¤ì œ ì…ì¶œë ¥ì„ ì²˜ë¦¬</li>\n<li><strong>Client</strong>: íŒŒì¼ ì…ì¶œë ¥ì„ ìš”ì²­í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜</li>\n</ul>\n<p>ìˆ˜í–‰ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\në¨¼ì € Clientê°€ Masterì—ê²Œ íŒŒì¼ì˜ ì½ê¸°, ì“°ê¸°ë¥¼ ìš”ì²­í•˜ê²Œ ë˜ë©´,\nMasterëŠ” Clientì™€ ê°€ê¹Œìš´ Chunk Serverì˜ ì •ë³´ë¥¼ Clientì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤.\nClientëŠ” ì „ë‹¬ë°›ì€ Chunk Serverì™€ ì§ì ‘ í†µì‹ í•˜ë©° IO ì‘ì—…ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>GFSì˜ ì—„ì²­ë‚œ ê°•ì ì€ <strong>Failuer Tolerance</strong> ì…ë‹ˆë‹¤.\në‹¤ì‹œ ë§í•´ì„œ, ë¬¼ë¦¬ì ìœ¼ë¡œ ì„œë²„ ì¤‘ í•˜ë‚˜ê°€ ê³ ì¥ì´ ë‚˜ë„ ì •ì§€í•˜ì§€ ì•Šê³  ì˜ ëŒì•„ê°€ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´, Chunk Server ì¤‘ í•˜ë‚˜ê°€ ê³ ì¥ì´ ë‚˜ë©´ MasterëŠ” ê³ ì¥ë‚˜ì§€ ì•Šì€ Chunk Serverì˜ ì •ë³´ë¥¼ ì „ë‹¬í•˜ê³ \nMaster Serverê°€ ê³ ì¥ì´ ë‚˜ë©´ ë‹¤ë¥¸ ì„œë²„ê°€ Masterë¥¼ ëŒ€ì²´í•˜ê²Œ ë©ë‹ˆë‹¤.\nì´ëŸ¬í•œ ì´ìœ ë¡œ Chunk ServerëŠ” ê°€ê²©ì´ ì €ë ´í•œ ë²”ìš© ì»´í“¨í„°ë“¤ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆê³ , í´ëŸ¬ìŠ¤í„° í™˜ê²½ì—ì„œ ì˜ ë™ì‘í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"mapreduce\" style=\"position:relative;\"><a href=\"#mapreduce\" aria-label=\"mapreduce permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MapReduce</h2>\n<p>Map ReduceëŠ” ë§ˆì°¬ê°€ì§€ë¡œ 2004ë…„ êµ¬ê¸€ì˜ ë…¼ë¬¸(ì €ì: êµ¬ê¸€ì˜ ì „ì„¤ ì œí”„ ë”˜)ì„ í†µí•´ ì†Œê°œë˜ì—ˆìŠµë‹ˆë‹¤.\në…¼ë¬¸ì˜ ì œëª©ì€ <strong>MapReduce: Simplified Data Processing on Large Clusters</strong> ì…ë‹ˆë‹¤.\nì¦‰, MapReduceëŠ” ë§ ê·¸ëŒ€ë¡œ ëŒ€ìš©ëŸ‰ ë¶„ì‚° í´ëŸ¬ìŠ¤í„°ì—ì„œ ë°ì´í„°ë¥¼ ê°„ë‹¨íˆ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.</p>\n<p>ê·¸ëŠ” ë…¼ë¬¸ì„ í†µí•´ 2ê°€ì§€ Functionì„ ì œì‹œí•˜ëŠ”ë° ë°”ë¡œ Mapê³¼ Reduce ì…ë‹ˆë‹¤.\në…¼ë¬¸ì—ì„œ ì œì‹œí•œ MapReduceì˜ ì˜ˆì‹œ ìˆ˜ë„ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span>String key<span class=\"token punctuation\">,</span> String value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token operator\">//</span> key<span class=\"token punctuation\">:</span> document name\n    <span class=\"token operator\">//</span> value<span class=\"token punctuation\">:</span> document contents\n    <span class=\"token keyword\">for</span> each word w <span class=\"token keyword\">in</span> value<span class=\"token punctuation\">:</span>\n        EmitIntermediate<span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token builtin\">reduce</span><span class=\"token punctuation\">(</span>String key<span class=\"token punctuation\">,</span> Iterator values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token operator\">//</span> key<span class=\"token punctuation\">:</span> a word\n    <span class=\"token operator\">//</span> values<span class=\"token punctuation\">:</span> a <span class=\"token builtin\">list</span> of counts\n    <span class=\"token builtin\">int</span> result <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> each v <span class=\"token keyword\">in</span> values<span class=\"token punctuation\">:</span>\n        result <span class=\"token operator\">+=</span> ParseInt<span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span>\n    Emit<span class=\"token punctuation\">(</span>AsString<span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ë¨¼ì € <strong>Map</strong> í•¨ìˆ˜ëŠ” ì–´ë–¤ key-valueë¥¼ inputìœ¼ë¡œ ë°›ì•„ì„œ ê° ë‹¨ì–´ì™€ ê´€ë ¨ ë°œìƒ íšŸìˆ˜ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.\nê·¸ë¦¬ê³  <strong>Reduce</strong> í•¨ìˆ˜ëŠ” íŠ¹ì • ë‹¨ì–´ì— ëŒ€í•´ ìƒì„±ëœ ëª¨ë“  ì¹´ìš´íŠ¸ë¥¼ í•©ì‚°í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">map(k1, v1) -&gt; list(k2, v2)\nreduce(k2, list(v2)) -&gt; list(v2)</code></pre></div>\n<p><strong>Map</strong> í•¨ìˆ˜ëŠ” key-valeë¥¼ ì½ì–´ì„œ í•„í„°ë§í•˜ê±°ë‚˜ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ë³€í™˜ì‹œì¼œì£¼ë©°,\n<strong>Reduce</strong> í•¨ìˆ˜ëŠ” Mapì„ í†µí•´ ì¶œë ¥ëœ ë¦¬ìŠ¤íŠ¸ì—\nìƒˆë¡œìš´ keyë¥¼ ê¸°ì¤€ìœ¼ë¡œ Grouppingí•˜ê³  ì´ë¥¼ Aggregationí•œ ê²°ê³¼ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1fN3kOYJYkzvqun5FG2aYAkvRXrpDsl5x\" alt=\"MapReduce\"></p>\n<p>MapReduceëŠ” ì—¬ëŸ¬ ëŒ€ì˜ ì»´í“¨í„°ì—ì„œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²½ìš°, ë³‘ë ¬ì²˜ë¦¬ë¥¼ í•˜ê¸° ë•Œë¬¸ì— í™•ì¥ì´ ì‰½ìŠµë‹ˆë‹¤.\nìŠ¤ì¼€ì¤„ëŸ¬ê°€ ë°ì´í„°ë¥¼ ë¶„ì‚° ë°°ì¹˜í•˜ë©´ workerì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ê° ì¤‘ê°„ ê²°ê³¼ëŠ” ë¡œì»¬ ë””ìŠ¤í¬ì— ì €ì¥ë˜ë©°,\në‚˜ì¤‘ì— Reduce ì—°ì‚°ì„ í• ë‹¹ë°›ìœ¼ë©´ ì¤‘ê°„ ê²°ê³¼ë¥¼ ì½ì–´ì™€ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ë§ˆì°¬ê°€ì§€ë¡œ íŒŒì¼ ì‹œìŠ¤í…œì— ì €ì¥í•©ë‹ˆë‹¤.\nìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì´ Master ë…¸ë“œì— ëª¨ë“  ë°ì´í„°ë¥¼ ë°›ì•„ì„œ ì²˜ë¦¬í•˜ë˜ ì˜›ë‚  ë°©ì‹ê³¼ í†µì‹  ì²˜ë¦¬ë©´ì—ì„œ í™•ì‹¤íˆ ì¤„ì–´ë“  ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>êµ¬ê¸€ì€ MapReduceë¥¼ URL ì ‘ê·¼ë¹ˆë„, Web-Link Graphë¥¼ ê³„ì‚°í•˜ëŠ”ë° ì‚¬ìš©í•˜ì˜€ê³ ,\nì´ë¥¼ í†µí•´ ì¸ë±ì‹±, ì •ë ¬ ë“±ì—ì„œ ì—„ì²­ë‚œ ì„±ëŠ¥í–¥ìƒì„ ë³´ì—¬ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"hdfs-hadoop-distributed-file-system\" style=\"position:relative;\"><a href=\"#hdfs-hadoop-distributed-file-system\" aria-label=\"hdfs hadoop distributed file system permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HDFS (Hadoop Distributed File System)</h2>\n<p>Hadoopì€ 2006ë…„ Doug Cuttingê³¼ Mike Cafarellaê°€ ê°œë°œí•œ ë¶„ì‚°ì²˜ë¦¬ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.\nì´ë“¤ì€ êµ¬ê¸€ì˜ GFSë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•´ <strong>HDFS</strong> ì™€ <strong>MapReduce</strong> ë¥¼ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<p>GFSê°€ C++ë¡œ êµ¬í˜„ë˜ì—ˆë‹¤ë©´, Hadoopì€ ìë°”ë¡œ ê°œë°œëœ ë°ë‹¤ê°€ ì•„íŒŒì¹˜ ì¬ë‹¨ì˜ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ë„˜ì–´ê°€ë©´ì„œ ì¸ê¸°ê°€ ë§ì•„ì¡ŒìŠµë‹ˆë‹¤.\nGFSë¥¼ êµ¬í˜„í•œ ê²°ê³¼ë¬¼ì´ê¸° ë•Œë¬¸ì— í¬ê²Œ ë‹¬ë¼ì§„ ê²ƒì€ ì—†ìœ¼ë‚˜\n<strong>YARN, Hadoop Ecosystem</strong> ë“± ë‹¤ë¥¸ ì¥ì ìœ¼ë¡œ ì¸í•´ ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"http://xpgc.vicp.net/course/svt/TechDoc/storagepaper/gfs-sosp2003.pdf\">ë…¼ë¬¸: The Google File System</a></li>\n<li><a href=\"https://static.googleusercontent.com/media/research.google.com/ko//archive/mapreduce-osdi04.pdf\">ë…¼ë¬¸: MapReduce - Simplified Data Processing on Large Clusters</a></li>\n</ul>\n<br>","excerpt":"â€¦"}}},{"id":"795cadce-4a40-5a62-a2c3-15bbc6f787ac","title":"ë¹…ë°ì´í„° ì²˜ë¦¬ì— Scalaê°€ í•„ìš”í•œ ì´ìœ ","slug":"scala-for-bigdata","publishDate":"March 17, 2017","publishDateISO":"2017-03-17","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"a22dd3d7-109c-5d37-b360-e3581ff3a188","childMarkdownRemark":{"id":"ee0e0316-13da-5df2-a061-9f89f32f9e5d","timeToRead":4,"html":"<p>StackOverFlowë‚˜ Quoraë¥¼ ë³´ë©´ <strong>Scala has taken over the Big Data world.</strong> ë¼ëŠ” ê¸€ì„ ë§ì´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nê²Œë‹¤ê°€ Sparkì˜ ì—”ì§„ì€ Scalaë¡œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ í¬ìŠ¤íŒ…ì—ì„œëŠ” ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ”ë°ì— ìŠ¤ì¹¼ë¼ê°€ ê°€ì§€ëŠ” ê°•ì ì´ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ê³ ì í•©ë‹ˆë‹¤.</p>\n<br>\n<h1 id=\"scalaê°€-ê°€ì§€ëŠ”-ê°•ì \" style=\"position:relative;\"><a href=\"#scala%EA%B0%80-%EA%B0%80%EC%A7%80%EB%8A%94-%EA%B0%95%EC%A0%90\" aria-label=\"scalaê°€ ê°€ì§€ëŠ” ê°•ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scalaê°€ ê°€ì§€ëŠ” ê°•ì </h1>\n<h2 id=\"static-typing-type-inference\" style=\"position:relative;\"><a href=\"#static-typing-type-inference\" aria-label=\"static typing type inference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Static Typing, Type Inference</h2>\n<p>ìŠ¤ì¹¼ë¼ì˜ <code class=\"language-text\">val</code> ë³€ìˆ˜ëŠ” í•œë²ˆ ì§€ì •ëœ ê°’ì„ ë°”ê¾¸ì§€ ì•ŠìŠµë‹ˆë‹¤.\nì´ëŸ¬í•œ ë³€ìˆ˜ë¥¼ <code class=\"language-text\">Immutable variable</code> ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"scala\"><pre class=\"language-scala\"><code class=\"language-scala\"><span class=\"token keyword\">val</span> msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello Scala\"</span>\n<span class=\"token builtin\">String</span> <span class=\"token operator\">=</span> Hello Scala\n\n<span class=\"token keyword\">val</span> msg <span class=\"token operator\">=</span> <span class=\"token string\">\"Reassign to val\"</span>\nerror<span class=\"token operator\">:</span> reassignment to <span class=\"token keyword\">val</span></code></pre></div>\n<p>ìœ„ì˜ ì˜ˆì œë¥¼ ë³´ë©´, msg ë³€ìˆ˜ì— ë¬¸ìì—´ì„ í• ë‹¹í–ˆì§€ë§Œ ì–´ë””ì—ë„ String ì´ë¼ëŠ” ë‹¨ì–´ëŠ” ì—†ìŠµë‹ˆë‹¤.\nìŠ¤ì¹¼ë¼ëŠ” ì•Œì•„ì„œ íƒ€ì…ì„ ì¶”ë¡ í•˜ì—¬ ì§€ì •í•´ì£¼ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\në”°ë¼ì„œ, <code class=\"language-text\">val</code> ë³€ìˆ˜ì— ì¬í• ë‹¹ì„ ì‹œë„í•˜ë©´ <code class=\"language-text\">reassignment to val</code> ì´ë¼ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ì´ì²˜ëŸ¼ ìŠ¤ì¹¼ë¼ëŠ” input íƒ€ì…ì„ ë³´ê³  í•¨ìˆ˜ë‚˜ ì¶œë ¥ ê°’ì˜ íƒ€ì…ì„ ì¶”ë¡ í•´ì£¼ë©° ì´ë¥¼ í†µí•´ ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ë‹¤ì–‘í•˜ê³  ë§ì€ ë°ì´í„°ê°€ ì‚¬ìš©ë˜ëŠ” ê²½ìš° ì •ì ë³€ìˆ˜ê°€ ë¬¸ì œë¥¼ ë‹¨ìˆœí™” í•´ì£¼ëŠ” íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"scalable-language\" style=\"position:relative;\"><a href=\"#scalable-language\" aria-label=\"scalable language permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scalable Language</h2>\n<p>ê¸°ì¡´ì˜ Hadoop ê¸°ë°˜ì˜ ë°ì´í„° ì¸í”„ë¼ëŠ” ìë°” ì–¸ì–´ë¥¼ í†µí•´ MapReduce ì—°ì‚° ê·¸ë¦¬ê³  ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•´ì•¼í–ˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ ìë°”ëŠ” ì½”ë“œê°€ ë„ˆë¬´ ê¸¸ì–´ ìƒì‚°ì„± ê·¸ë¦¬ê³  ê°€ë…ì„±ì´ ë§¤ìš° ë–¨ì–´ì§‘ë‹ˆë‹¤.</p>\n<p>ìŠ¤ì¹¼ë¼ëŠ” ëª¨ë“  ê²ƒë“¤ì´ ì¼ê´€ì„±ìˆê²Œ ê·¸ë¦¬ê³  ê°„ê²°í•˜ê²Œ êµ¬í˜„ë˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.\nì´ë¥¼ í†µí•´ ì–»ì„ ìˆ˜ ìˆëŠ” ì¥ì ì€ <strong>\"ì ì€ ì–‘ì˜ ì½”ë“œë¡œ ë°©ëŒ€í•œ ê·œëª¨ì˜ ì‹œìŠ¤í…œì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤\"</strong> ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>\n<p>ì—°ì‚°ìë¥¼ ì˜ˆë¡œ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.\nìë°”ì—ì„œëŠ” '==' ì™€ ê°™ì€ ë¹„êµì—°ì‚°ìë¥¼ ì œê³µí•©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ ë¹„êµì—°ì‚°ìëŠ” ì£¼ì†Œê°’ì„ ë¹„êµí•˜ê¸° ë•Œë¬¸ì—\nStringê³¼ ê°™ì€ ê°ì²´ë¥¼ ë¹„êµí•  ë•ŒëŠ” <code class=\"language-text\">equal()</code> ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ ë¹„êµí•´ì•¼ í–ˆìŠµë‹ˆë‹¤.\nì´ ë˜í•œ ìŠ¤ì¹¼ë¼ì˜ Scalableê³¼ ê±°ë¦¬ê°€ ë©‰ë‹ˆë‹¤.\nìŠ¤ì¹¼ë¼ì—ì„œëŠ” ëª¨ë“  ê²ƒì´ Objectì´ê¸° ë•Œë¬¸ì— <code class=\"language-text\">==</code> ë¡œ ëª¨ë“  ë¹„êµê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"object-oriented-functional-language\" style=\"position:relative;\"><a href=\"#object-oriented-functional-language\" aria-label=\"object oriented functional language permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object Oriented, Functional Language</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">y1 = 2x + 5\ny2 = 4(y1) = 4(2x + 5)</code></pre></div>\n<p>í•¨ìˆ˜í˜• ì–¸ì–´ë¥¼ ì´í•´í•˜ê¸° ì „ì— ì–´ë ¸ì„ ë•Œ ë°°ì› ë˜ í•¨ìˆ˜ì‹ì„ ë– ì˜¬ë ¤ë³´ê² ìŠµë‹ˆë‹¤.\nìœ„ì˜ ì‹ì—ì„œ xëŠ” input, yëŠ” outputì´ ë©ë‹ˆë‹¤.\nìš°ë¦¬ëŠ” ì–´ë–¤ í•¨ìˆ˜ì— inputì„ ë„£ìœ¼ë©´ outputì´ ë‚˜ì˜¨ë‹¤ê³  ì´í•´í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nê·¸ë¦¬ê³  ì•„ë˜ì˜ ì‹ì²˜ëŸ¼ í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë„£ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤ (í•©ì„±í•¨ìˆ˜).\ní•¨ìˆ˜í˜• ì–¸ì–´ë„ ì´ì™€ ë¹„ìŠ·í•©ë‹ˆë‹¤.</p>\n<p>ìŠ¤ì¹¼ë¼ëŠ” ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ê³¼ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì„ ëª¨ë‘ ì™„ë²½í•˜ê²Œ ì§€ì›í•˜ëŠ” ì–¸ì–´ì…ë‹ˆë‹¤.\nìŠ¤ì¹¼ë¼ì—ì„œëŠ” ëª¨ë“  ê²ƒì´ ê°ì²´ì´ë©° í•¨ìˆ˜ê°€ <code class=\"language-text\">first object</code> ì…ë‹ˆë‹¤.\ní•¨ìˆ˜ë¥¼ ë§ˆì¹˜ í•˜ë‚˜ì˜ ê°’ìœ¼ë¡œ ì·¨ê¸‰í•˜ë©° ì´ë¥¼ ë³€ìˆ˜ ë˜ëŠ” íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ëª¨ë“  ê²ƒì„ í•¨ìˆ˜ë¡œ í•´ê²°í•˜ë©´ ì˜ë„í•˜ì§€ ì•Šì€ ë™ì‘(Side Effect)ì´ ë°œìƒí•  ì¼ì´ ì—†ê³ ,\ní•œë²ˆ ê²€ì¦ëœ í•¨ìˆ˜ëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë²„ê·¸ê°€ ì¤„ì–´ë“œëŠ” íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.\në˜í•œ, Immutable ë³€ìˆ˜ëŠ” ë¬¸ì œë¥¼ ë‹¨ìˆœí™”ì‹œì¼œì£¼ê¸° ë•Œë¬¸ì— ë°ì´í„° ê³µìœ , ë³‘ë ¬ì²˜ë¦¬ì— ê°•í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"javaì™€-scalaë¥¼-ë¹„êµí•´ë³´ì\" style=\"position:relative;\"><a href=\"#java%EC%99%80-scala%EB%A5%BC-%EB%B9%84%EA%B5%90%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"javaì™€ scalaë¥¼ ë¹„êµí•´ë³´ì permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Javaì™€ Scalaë¥¼ ë¹„êµí•´ë³´ì</h2>\n<p>ScalaëŠ” Interactiveí•œ Shellì„ ì œê³µí•©ë‹ˆë‹¤.\nì´ë ‡ê²Œ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆëŠ” Shellì„ í†µí•´ ë°ì´í„°ì˜ íƒìƒ‰ì  ë¶„ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\nIntelliJ IDEAì—ì„œë„ <code class=\"language-text\">Worksheet</code>ì´ë¼ëŠ” ê¸°ëŠ¥ì„ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nìŠ¤ì¹¼ë¼ ê°œë°œí™˜ê²½ì€ <strong>Scala 2.12.1</strong> ì´ë©°, IDEëŠ” <strong>IntelliJ IDEA</strong> ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1fYTuol5znYBGSYXj40YyZgqzhGeyOlMU\" alt=\"IntelliJ\"></p>\n<p>ê°„ë‹¨í•œ WordCount ì˜ˆì œë¥¼ í†µí•´ ì½”ë“œë¥¼ ë¹„êµí•´ë³´ê³˜ìŠµë‹ˆë‹¤.</p>\n<h2 id=\"java-hadoop-word-count\" style=\"position:relative;\"><a href=\"#java-hadoop-word-count\" aria-label=\"java hadoop word count permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JAVA Hadoop Word Count</h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//package org.myorg;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">IOException</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util</span><span class=\"token punctuation\">.</span>*<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>fs</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Path</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>conf</span><span class=\"token punctuation\">.</span>*<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>io</span><span class=\"token punctuation\">.</span>*<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>mapred</span><span class=\"token punctuation\">.</span>*<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>hadoop<span class=\"token punctuation\">.</span>util</span><span class=\"token punctuation\">.</span>*<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WordCount</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Map</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">MapReduceBase</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Mapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LongWritable</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IntWritable</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">IntWritable</span> one <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntWritable</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Text</span> word <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LongWritable</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Text</span> value<span class=\"token punctuation\">,</span> <span class=\"token class-name\">OutputCollector</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IntWritable</span><span class=\"token punctuation\">></span></span> output<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Reporter</span> reporter<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token class-name\">String</span> line <span class=\"token operator\">=</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">StringTokenizer</span> tokenizer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringTokenizer</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>tokenizer<span class=\"token punctuation\">.</span><span class=\"token function\">hasMoreTokens</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\tword<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>tokenizer<span class=\"token punctuation\">.</span><span class=\"token function\">nextToken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\toutput<span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">,</span> one<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Reduce</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">MapReduceBase</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Reducer</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IntWritable</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IntWritable</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Text</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Iterator</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IntWritable</span><span class=\"token punctuation\">></span></span> values<span class=\"token punctuation\">,</span> <span class=\"token class-name\">OutputCollector</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IntWritable</span><span class=\"token punctuation\">></span></span> output<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Reporter</span> reporter<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">int</span> sum <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\tsum <span class=\"token operator\">+=</span> values<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\toutput<span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntWritable</span><span class=\"token punctuation\">(</span>sum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">JobConf</span> conf <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JobConf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">WordCount</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tconf<span class=\"token punctuation\">.</span><span class=\"token function\">setJobName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"wordcount\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\tconf<span class=\"token punctuation\">.</span><span class=\"token function\">setOutputKeyClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Text</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tconf<span class=\"token punctuation\">.</span><span class=\"token function\">setOutputValueClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">IntWritable</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\tconf<span class=\"token punctuation\">.</span><span class=\"token function\">setMapperClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">//conf.setCombinerClass(Reduce.class);</span>\n\t\tconf<span class=\"token punctuation\">.</span><span class=\"token function\">setReducerClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Reduce</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\tconf<span class=\"token punctuation\">.</span><span class=\"token function\">setInputFormat</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TextInputFormat</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tconf<span class=\"token punctuation\">.</span><span class=\"token function\">setOutputFormat</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TextOutputFormat</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token class-name\">FileInputFormat</span><span class=\"token punctuation\">.</span><span class=\"token function\">setInputPaths</span><span class=\"token punctuation\">(</span>conf<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Path</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">FileOutputFormat</span><span class=\"token punctuation\">.</span><span class=\"token function\">setOutputPath</span><span class=\"token punctuation\">(</span>conf<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Path</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token class-name\">JobClient</span><span class=\"token punctuation\">.</span><span class=\"token function\">runJob</span><span class=\"token punctuation\">(</span>conf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h2 id=\"scala-spark-word-count\" style=\"position:relative;\"><a href=\"#scala-spark-word-count\" aria-label=\"scala spark word count permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scala Spark Word Count</h2>\n<div class=\"gatsby-highlight\" data-language=\"scala\"><pre class=\"language-scala\"><code class=\"language-scala\"><span class=\"token keyword\">val</span> file <span class=\"token operator\">=</span> spark<span class=\"token punctuation\">.</span>textFile<span class=\"token punctuation\">(</span><span class=\"token string\">\"hdfs://...\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">val</span> counts <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span>flatMap<span class=\"token punctuation\">(</span>line <span class=\"token keyword\">=></span> line<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">(</span>word <span class=\"token keyword\">=></span> <span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span>reduceByKey<span class=\"token punctuation\">(</span>_ <span class=\"token operator\">+</span> _<span class=\"token punctuation\">)</span>\ncounts<span class=\"token punctuation\">.</span>saveAsTextFile<span class=\"token punctuation\">(</span><span class=\"token string\">\"hdfs://...\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n<h2 id=\"ì •ë¦¬í•˜ìë©´\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC%ED%95%98%EC%9E%90%EB%A9%B4\" aria-label=\"ì •ë¦¬í•˜ìë©´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë¦¬í•˜ìë©´,</h2>\n<ul>\n<li>íŒŒì´ì¬ê³¼ ê°™ì´ ì•„ì£¼ ê°„ê²°í•œ ë¬¸ë²•</li>\n<li>ê°ì²´ì§€í–¥ê³¼ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ëª¨ë‘ ê°€ëŠ¥</li>\n<li>ìë°”ì™€ í˜¸í™˜ë˜ë©° JVM ìœ„ì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ì¢‹ì€ ì„±ëŠ¥</li>\n<li>ì •ì  íƒ€ì…ì„ ì§€í–¥</li>\n<li>REPL Shellì„ í™œìš©í•˜ì—¬ Scripting</li>\n</ul>\n<br>","excerpt":"StackOverFlowë‚˜ Quoraë¥¼ ë³´ë©´ Scala has taken over the Big Data worldâ€¦"}}},{"id":"879c5edc-af79-5354-a513-399c005b86ee","title":"Jupyterì—ì„œ Scalaë¡œ Spark ì‚¬ìš©í•˜ëŠ” ë°©ë²•","slug":"jupyter-spark","publishDate":"March 22, 2017","publishDateISO":"2017-03-22","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"f064af50-3130-58c7-bd5e-49ce84d97e59","childMarkdownRemark":{"id":"fb7d0e8a-5f23-5f32-a248-cecdc727f5dd","timeToRead":2,"html":"<p>ì´ ê¸€ì€ í‰ì†Œì— <strong>Jupyter Notebook</strong> ì— ìµìˆ™í•´ì ¸ìˆëŠ” ë¶„ë“¤ê»˜ ìœ ìš©í•  ë“¯ í•©ë‹ˆë‹¤.\nZeppelin Notebookì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì€ <a href=\"http://swalloow.github.io/spark-zeppelin-install\">ì´ì „ í¬ìŠ¤íŒ…</a>ì„ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"apache-toree\" style=\"position:relative;\"><a href=\"#apache-toree\" aria-label=\"apache toree permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Apache Toree</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1nb4mPTfs6Et0o66ggAnLisNgqQb5o8on\" alt=\"Jupyter-Toree\"></p>\n<p><strong>Apache Toree</strong> ëŠ” Jupyter ì»¤ë„ì„ í†µí•´ Sparkì— ì ‘ì†í•˜ë„ë¡ í•´ì£¼ëŠ” ì•„íŒŒì¹˜ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.\nê¸°ì¡´ì˜ IPython Notebookì€ íŒŒì´ì¬ì— ì œí•œë˜ì–´ ìˆì—ˆì§€ë§Œ\nJupyter Kernelì„ í†µí•´ ë‹¤ë¥¸ ì–¸ì–´ê¹Œì§€ í™•ì¥ ê°€ëŠ¥í•˜ë„ë¡ ë°”ë€Œì—ˆìŠµë‹ˆë‹¤ (ì™¼ìª½ ê·¸ë¦¼ ì°¸ì¡°).</p>\n<p>ì—¬ê¸°ì—ì„œ ë” ë‚˜ì•„ê°€ Apache ToreeëŠ” <strong>Toree Kernel</strong> ì„ í†µí•´ ë°”ë¡œ Spark Driverì— ì—°ê²°í•¨ìœ¼ë¡œì¨,\nJupyterì—ì„œ Scala ì–¸ì–´ë¡œ Spark Driver/Contextë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.</p>\n<p>Toreeê°€ Zeppelinê³¼ ë‹¤ë¥¸ ì ì€ <strong>Jupyter protocol</strong> ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì  ì…ë‹ˆë‹¤.\nì´ë¯¸ ìˆ˜ë§ì€ ìƒíƒœê³„ê°€ êµ¬ì¶•ë˜ì–´ ìˆëŠ” Jupyterì—ì„œ Sparkê°€ ì˜ ëŒì•„ê°„ë‹¤ë©´ êµ³ì´ Zeppelinì„ ì“¸ í•„ìš”ê°€ ìˆì„ê¹Œìš” (<em>ì‹œê°í™”ê°€ ì–´ë§ˆì–´ë§ˆí•œ ê°•ì ì´ê¸´ í•©ë‹ˆë‹¤</em>).</p>\n<p>GitHub : <a href=\"https://github.com/apache/incubator-toree\">https://github.com/apache/incubator-toree</a></p>\n<br>\n<h2 id=\"jupyter-notebookì—-toree-ì„¤ì¹˜í•˜ê¸°\" style=\"position:relative;\"><a href=\"#jupyter-notebook%EC%97%90-toree-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"jupyter notebookì— toree ì„¤ì¹˜í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jupyter Notebookì— Toree ì„¤ì¹˜í•˜ê¸°</h2>\n<p>Jupyter ë…¸íŠ¸ë¶ ì»¤ë„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì€ <a href=\"http://swalloow.github.io/jupyter-notebook-kernel\">Jupyter Notebook ë‹¤ì¤‘ì»¤ë„ ì„¤ì •í•˜ê¸°</a>ë¥¼,\nScalaì™€ Sparkì„ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì€ <a href=\"http://swalloow.github.io/spark-zeppelin-install\">OS Xì—ì„œ Homebrewë¡œ Spark, Zeppelin ì„¤ì¹˜í•˜ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>\n<p>ToreeëŠ” ì•„ì§ pre ë²„ì „ë§Œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— <code class=\"language-text\">--pre</code> ì˜µì…˜ì„ ë¶™ì—¬ì£¼ì‹œê±°ë‚˜ íŒŒì´ì¬ íŒ¨í‚¤ì§€ë¥¼ í†µí•´ ì„¤ì¹˜í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.\nì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ jupyter kernelì— toree kernelì„ ì„¤ì¹˜í•´ì£¼ëŠ” ê³¼ì •ì´ í•„ìš”í•œë° ëª…ë ¹ì–´ë¥¼ í†µí•´ ì´ ê³¼ì •ì„ ìë™ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pip <span class=\"token function\">install</span> https://dist.apache.org/repos/dist/dev/incubator/toree/0.2.0/snapshots/dev1/toree-pip/toree-0.2.0.dev1.tar.gz\n$ jupyter toree <span class=\"token function\">install</span></code></pre></div>\n<p>í˜¹ì‹œ <code class=\"language-text\">FileNotFoundError: [Errno 2] No such file or directory: &#39;/usr/local/spark/python/lib&#39;</code>\nì´ëŸ° ì˜¤ë¥˜ê°€ ë‚œë‹¤ë©´, Spark ê²½ë¡œ í™˜ê²½ë³€ìˆ˜ë¥¼ ì½ì§€ ëª»í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. <strong>Homebrew</strong> ë¥¼ í†µí•´ ì„¤ì¹˜í•˜ì…¨ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ í™˜ê²½ë³€ìˆ˜ë¥¼ ë“±ë¡í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">SPARK_HOME</span><span class=\"token operator\">=</span>/usr/local/Cellar/apache-spark/2.1.0/libexec</code></pre></div>\n<br>\n<h2 id=\"ì˜-ë™ì‘í•˜ëŠ”ì§€-í…ŒìŠ¤íŠ¸ë¥¼-í•´ë³´ì\" style=\"position:relative;\"><a href=\"#%EC%9E%98-%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94%EC%A7%80-%ED%85%8C%EC%8A%A4%ED%8A%B8%EB%A5%BC-%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"ì˜ ë™ì‘í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì˜ ë™ì‘í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1F_XWydLAi3HZ4YYoqAKT6l6xMpnpbZBnt\" alt=\"Toree-Kernel\"></p>\n<p>ì˜ ì„¤ì¹˜ë˜ì—ˆë‹¤ë©´ <code class=\"language-text\">new</code> í–ˆì„ ë•Œ <code class=\"language-text\">Apache-Toree Scala</code>ê°€ ë³´ì´ì‹¤ ê²ë‹ˆë‹¤.\nì˜ ë™ì‘í•˜ëŠ”ì§€ ê°„ë‹¨í•œ WordCounter ì˜ˆì œë¥¼ ì‹¤í–‰ì‹œì¼œ ë³´ì‹œë©´ ì˜ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1HPeNYLZAGN9agBUGdykMLlsFkPi9MFrn\" alt=\"Toree-Tuto\"></p>\n<br>\n<h2 id=\"dockerë¥¼-í†µí•´-jupyter-ì„¤ì •í•˜ëŠ”-ë°©ë²•\" style=\"position:relative;\"><a href=\"#docker%EB%A5%BC-%ED%86%B5%ED%95%B4-jupyter-%EC%84%A4%EC%A0%95%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"dockerë¥¼ í†µí•´ jupyter ì„¤ì •í•˜ëŠ” ë°©ë²• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dockerë¥¼ í†µí•´ Jupyter ì„¤ì •í•˜ëŠ” ë°©ë²•</h2>\n<p>ë‚˜ëŠ” ì´ ëª¨ë“  ê²ƒì´ ê·€ì°®ë‹¤! ë¼ë©´ Dockerë¥¼ í†µí•´ ë…¸íŠ¸ë¶ì„ ì‹¤í–‰ì‹œí‚¤ë©´ ë©ë‹ˆë‹¤.\nì œê°€ Dockerë¥¼ í†µí•´ Notebookì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ë”± í•œ ê°€ì§€ ì…ë‹ˆë‹¤.\nSparkë§Œ ì“°ê³  ì‹¶ì—ˆëŠ”ë° ê¸°íƒ€ ë“±ë“±ì´ ë§ì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì„œ ì»¨í…Œì´ë„ˆ ë©”ëª¨ë¦¬ê°€ ë¬´ë ¤ <strong>4ê¸°ê°€</strong> ë‚˜ ë©ë‹ˆë‹¤...\nê·¸ë˜ë„ ì“°ê² ë‹¤ ì‹¶ìœ¼ì‹  ë¶„ë“¤ì€ ì•„ë˜ ë§í¬ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<p><a href=\"https://hub.docker.com/r/jupyter/all-spark-notebook/\">https://hub.docker.com/r/jupyter/all-spark-notebook/</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ docker pull jupyter/all-spark-notebook\n$ docker run -it --rm -p <span class=\"token number\">8888</span>:8888 jupyter/all-spark-notebook</code></pre></div>\n<p>ì´ë ‡ê²Œ ì‹¤í–‰í•˜ê³  8888ë²ˆ í¬íŠ¸ë¡œ ì ‘ì†í•˜ë©´ ë…¸íŠ¸ë¶ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>","excerpt":"ì´ ê¸€ì€ í‰ì†Œì— Jupyter Notebook ì— ìµìˆ™í•´ì ¸ìˆëŠ” ë¶„ë“¤ê»˜ ìœ ìš©í•  ë“¯ í•©ë‹ˆë‹¤.\nZeppelin Notebookâ€¦"}}},{"id":"17cb7e89-7826-5409-9b13-766bb5f1bc0c","title":"Spark 2.2.0 ë¦´ë¦¬ì¦ˆ ì—…ë°ì´íŠ¸ ì •ë¦¬","slug":"spark22","publishDate":"July 14, 2017","publishDateISO":"2017-07-14","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"fc24bdaa-b9ce-57d9-9c46-64c73c8f6553","childMarkdownRemark":{"id":"6296bebe-9af9-58d6-95b9-2a9c9c039b50","timeToRead":2,"html":"<p>7ì›” 11ì¼ ì•½ 2ê°œì›” ë§Œì— Spark 2.2.0ì´ ë¦´ë¦¬ì¦ˆ ë˜ì—ˆìŠµë‹ˆë‹¤.\nì–´ë–¤ ë³€ê²½ ì‚¬í•­ë“¤ì´ ìˆì—ˆëŠ”ì§€ ë¦´ë¦¬ì¦ˆ ë…¸íŠ¸ë¥¼ í†µí•´ ê°„ëµí•˜ê²Œ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"pypi-ë¥¼-í†µí•œ-pyspark-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#pypi-%EB%A5%BC-%ED%86%B5%ED%95%9C-pyspark-%EC%84%A4%EC%B9%98\" aria-label=\"pypi ë¥¼ í†µí•œ pyspark ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pypi ë¥¼ í†µí•œ PySpark ì„¤ì¹˜</h2>\n<p>ë“œë””ì–´ PySparkì´ <code class=\"language-text\">pip</code>ì„ ì§€ì›í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\n<code class=\"language-text\">pip install pyspark</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‰½ê²Œ ì„¤ì¹˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.\nì„¤ì¹˜ëœ ë²„ì „ì€ Spark 2.2.0 ë²„ì „ ì…ë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1xfwJvcmFWVDUs9dnga1Lq7hBPUU5_yev\"></p>\n<p><code class=\"language-text\">numpy, pandas</code> íŒŒì´ì¬ íŒ¨í‚¤ì§€ì— dependencyê°€ ìˆìœ¼ë©°,\nìì„¸í•œ ì‚¬í•­ì€ <a href=\"https://pypi.python.org/pypi/pyspark\">pypi íŒ¨í‚¤ì§€ ë§í¬</a>ë¥¼ í†µí•´ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì´ë²ˆ ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ standalone clusterì—ì„œ ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ì‚¬ìš©í•´ ë³¼ ìˆ˜ ìˆì„ ë“¯ í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"structured-streaming\" style=\"position:relative;\"><a href=\"#structured-streaming\" aria-label=\"structured streaming permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Structured Streaming</h2>\n<p>ì´ë²ˆ ë²„ì „ë¶€í„° Structured Streamingì´ ìƒˆë¡œ ì¶”ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.\nStructured Streamingì€ ìŠ¤íŠ¸ë¦¬ë° ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë” ë¹ ë¥´ê³  ì‰½ê²Œ ê°œë°œí•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤.</p>\n<p>Spark Streamingì´ ë‚´ë¶€ì ìœ¼ë¡œ RDD APIë¥¼ ì§€ì›í•˜ëŠ” ë°˜ë©´, Structured Streamingì€ DataFrame, Dataset APIë¥¼ ì§€ì›í•©ë‹ˆë‹¤.\nì–¸ì–´ëŠ” Scala, Java, Python ëª¨ë‘ ì§€ì›í•˜ë©°, <code class=\"language-text\">readStream</code> ì´ë¼ëŠ” ë©”ì„œë“œë¥¼ í†µí•´ ë‹¤ì–‘í•œ ì €ì¥ì†Œë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\níŠ¹íˆ ì´ë²ˆ ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ Apache Kafka ìŠ¤íŠ¸ë¦¬ë° ì§€ì›ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Subscribe to 1 topic</span>\ndf <span class=\"token operator\">=</span> spark \\\n  <span class=\"token punctuation\">.</span>readStream \\\n  <span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"kafka\"</span><span class=\"token punctuation\">)</span> \\\n  <span class=\"token punctuation\">.</span>option<span class=\"token punctuation\">(</span><span class=\"token string\">\"kafka.bootstrap.servers\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"host1:port1,host2:port2\"</span><span class=\"token punctuation\">)</span> \\\n  <span class=\"token punctuation\">.</span>option<span class=\"token punctuation\">(</span><span class=\"token string\">\"subscribe\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"topic1\"</span><span class=\"token punctuation\">)</span> \\\n  <span class=\"token punctuation\">.</span>load<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>selectExpr<span class=\"token punctuation\">(</span><span class=\"token string\">\"CAST(key AS STRING)\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"CAST(value AS STRING)\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Structured Streamingì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ <a href=\"http://spark.apache.org/docs/2.2.0/structured-streaming-programming-guide.html\">http://spark.apache.org/docs/2.2.0/structured-streaming-programming-guide.html</a> ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"mllib\" style=\"position:relative;\"><a href=\"#mllib\" aria-label=\"mllib permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MLlib</h2>\n<p>ì˜ˆìƒí–ˆë˜ ëŒ€ë¡œ MLlibì—ë„ ë§ì€ ë³€í™”ê°€ ìƒê²¼ìŠµë‹ˆë‹¤.\nRDD-based MLlibì´ ì•„ë‹ˆë¼ DataFrame-based MLlibì„ í™•ì¸í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<ul>\n<li>ê¸°ì¡´ì— scala APIë§Œ ì§€ì›í•˜ë˜ ëª¨ë¸ë“¤ì— <code class=\"language-text\">python, R API</code>ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n<li>ì§€ì›ì´ ì¶”ê°€ëœ ëª¨ë¸ì€ <strong>Gradient Boosted Trees, Bisecting K-Means, LSH, Distributed PCA, SVD</strong> ì…ë‹ˆë‹¤.</li>\n<li>DataFreame-based MLlibì— ìƒˆë¡œìš´ ëª¨ë¸ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n<li>ì¶”ê°€ëœ ëª¨ë¸ì€ <strong>LinearSVC (Linear SVM Classifier), ChiSquare test, Correlation,\nImputer feature transformer, Tweedie distribution, FPGrowth frequent pattern mining, AssociationRules</strong> ì…ë‹ˆë‹¤.</li>\n</ul>\n<br>\n<h2 id=\"sparkr\" style=\"position:relative;\"><a href=\"#sparkr\" aria-label=\"sparkr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SparkR</h2>\n<p>ì´ë²ˆ ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ SparkRì—ì„œ Spark SQL APIê°€ í™•ëŒ€ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>R APIì— Structured Streaming, Catalogê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n<li>to<em>json, from</em>json ë©”ì„œë“œê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n<li>Coalesce, DataFrame checkpointing, Multi-column approxQuantile ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<br>\n<h2 id=\"graphx\" style=\"position:relative;\"><a href=\"#graphx\" aria-label=\"graphx permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GraphX</h2>\n<p>GraphXëŠ” ë²„ê·¸ ìˆ˜ì •, ìµœì í™” ì—…ë°ì´íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.\nì´ë²ˆ Structured Steamingì´ ë©”ì¸ì— ì¶”ê°€ëœ ê²ƒìœ¼ë¡œ ë³´ì•„,\nì¶”í›„ì— DataFrame, DataSet API ê¸°ë°˜ì˜ GraphFrameì´ ì¶”ê°€ë  ìˆ˜ë„ ìˆë‹¤ê³  ì˜ˆìƒí•©ë‹ˆë‹¤.</p>\n<ul>\n<li>PageRank, vertexRDD/EdgeRDD checkpoint ë²„ê·¸ë¥¼ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.</li>\n<li>PageRank, Pregel APIê°€ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<br>\n<h2 id=\"core-and-sparksql-deprecations\" style=\"position:relative;\"><a href=\"#core-and-sparksql-deprecations\" aria-label=\"core and sparksql deprecations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Core and SparkSQL, Deprecations</h2>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ Core, SparkSQL ê·¸ë¦¬ê³  Deprecation ì—…ë°ì´íŠ¸ ì…ë‹ˆë‹¤.\nì „ì²´ ì—…ë°ì´íŠ¸ ë° ê¸°íƒ€ ìì„¸í•œ ë‚´ìš©ì€ ë§¨ ì•„ë˜ì˜ ë§í¬ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<ul>\n<li>Python 2.6, Java 7, Hadoop 2.5 ì§€ì›ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n<li><code class=\"language-text\">ALTER TABLE table_name ADD COLUMNS</code> êµ¬ë¬¸ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n<li>Cost-Based Optimizer ì„±ëŠ¥ì´ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n<li>CSV, JSON í¬ë©§ì˜ File listing/IO ì„±ëŠ¥ì´ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"http://spark.apache.org/releases/spark-release-2-2-0.html\">http://spark.apache.org/releases/spark-release-2-2-0.html</a></li>\n</ul>\n<br>","excerpt":"7ì›” 11ì¼ ì•½ 2ê°œì›” ë§Œì— Spark 2.2.â€¦"}}},{"id":"346030b5-8193-5161-9bea-951b3f0146ac","title":"Spark groupByKey vs reduceByKey","slug":"spark-reduceByKey-groupByKey","publishDate":"August 22, 2017","publishDateISO":"2017-08-22","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"037fcf8d-17a3-5fd2-8b52-271bc7f8836f","childMarkdownRemark":{"id":"5103dbd1-1b3c-5d75-8c16-3f900b1d0d8f","timeToRead":1,"html":"<p>Spark Application ì„±ëŠ¥ ê°œì„ ì„ ìœ„í•œ <code class=\"language-text\">groupByKey, reduceBykey</code>ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"groupbykey-vs-reducebykey\" style=\"position:relative;\"><a href=\"#groupbykey-vs-reducebykey\" aria-label=\"groupbykey vs reducebykey permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>groupByKey vs reduceBykey</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># reduceByKey</span>\nspark<span class=\"token punctuation\">.</span>textFile<span class=\"token punctuation\">(</span><span class=\"token string\">\"hdfs://...\"</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">.</span>flatMap<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> line<span class=\"token punctuation\">:</span> line<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> word<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">.</span>reduceByKey<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">:</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># groupByKey</span>\nspark<span class=\"token punctuation\">.</span>textFile<span class=\"token punctuation\">(</span><span class=\"token string\">\"hdfs://...\"</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">.</span>flatMap<span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> line<span class=\"token punctuation\">:</span> line<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> word<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">.</span>groupByKey<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> <span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> counts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> <span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>counts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ê°€ì¥ í”íˆ ì•Œê³  ìˆëŠ” word count ì˜ˆì œë¥¼ ì˜ˆë¡œ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.\nìœ„ì˜ ì˜ˆì‹œëŠ” reduceByKeyë¥¼ ì‚¬ìš©í–ˆìœ¼ë©°, ì•„ë˜ì˜ ì˜ˆì‹œëŠ” groupByKeyë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.\në‘˜ì˜ ê²°ê³¼ëŠ” ê°™ì§€ë§Œ ì„±ëŠ¥ì€ í™•ì¸íˆ ì°¨ì´ê°€ ë‚©ë‹ˆë‹¤.</p>\n<p>ë¨¼ì € ìœ„ì˜ ì½”ë“œì—ì„œ <code class=\"language-text\">flatMap, map</code> ê¹Œì§€ëŠ” ë™ì¼í•œ ë…¸ë“œì—ì„œ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ reducer ë¶€ë¶„ì—ì„œëŠ” ëª¨ë“  ë™ì¼í•œ ë‹¨ì–´ ìŒì„ ê°™ì€ ë…¸ë“œë¡œ ì´ë™ì‹œì¼œì•¼ í•˜ê¸° ë•Œë¬¸ì— <strong>Shuffle</strong> ì´ ë°œìƒí•©ë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1ogSb1p0MRbvEsrXKsvP-9ItWxkMMK6eb\"></p>\n<p>ìš°ì„  reduceByKeyì˜ ê²½ìš°, ë¨¼ì € ê° ë…¸ë“œì—ì„œ ì¤‘ê°„ ì§‘ê³„ë¥¼ ì§„í–‰í•˜ê³  ì´ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ë™ì¼í•œ í‚¤ ê°’ìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1PvGTtQ9wpGA0ZLveZ8zF1FZUj9VhVpkf\"></p>\n<p>ë°˜ë©´, groupByKeyëŠ” ê° ë…¸ë“œì— ìˆëŠ” ë°ì´í„°ì— ëŒ€í•´ ë°”ë¡œ Shuffle ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë˜ê³  ê²°ê³¼ë¥¼ ë‚´ë³´ëƒ…ë‹ˆë‹¤.\në”°ë¼ì„œ groupByKeyëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ë°ì´í„°ì˜ ì–‘ì´ ë§ì•„ì§ˆ ë¿ë§Œ ì•„ë‹ˆë¼, <strong>Out of disk</strong> ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<p>Shuffleì€ ê¸°ë³¸ì ìœ¼ë¡œ ë¹„ìš©ì´ í° ì—°ì‚°ì…ë‹ˆë‹¤.\ngroupByKeyëŠ” reduceByKeyë¡œ ëŒ€ì²´ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë§ì€ ë¬¸ì„œì—ì„œ ì´ë¥¼ ê¶Œì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://www.slideshare.net/databricks/strata-sj-everyday-im-shuffling-tips-for-writing-better-spark-programs\">https://www.slideshare.net/databricks/strata-sj-everyday-im-shuffling-tips-for-writing-better-spark-programs</a></li>\n</ul>\n<br>","excerpt":"Spark Application ì„±ëŠ¥ ê°œì„ ì„ ìœ„í•œ ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. groupByKey vs reduceBykeyâ€¦"}}},{"id":"ca419fc7-c4a8-5527-8671-c1e508769568","title":"Sparkì˜ Shuffling ì´í•´í•˜ê¸°","slug":"spark-shuffling","publishDate":"August 25, 2017","publishDateISO":"2017-08-25","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"2a8f6e13-331a-57ae-9646-63d4ef59b0a6","childMarkdownRemark":{"id":"232124a0-9bf3-5161-8345-9ff38e52cee0","timeToRead":2,"html":"<p>íš¨ìœ¨ì ì¸ Spark Applicationì„ ê°œë°œí•˜ê¸° ìœ„í•´ <strong>Shuffling</strong> ì€ ìƒë‹¹íˆ ì¤‘ìš”í•œ ê°œë…ì…ë‹ˆë‹¤.\nì´ì— ëŒ€í•´ ê°„ë‹¨íˆ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"spark-architecture-shuffle\" style=\"position:relative;\"><a href=\"#spark-architecture-shuffle\" aria-label=\"spark architecture shuffle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark Architecture: Shuffle</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1jH6eFX_nkb9vzPFlIiFOV9z-afkUOELQ\"></p>\n<p>Shuffleì„ ì„¤ëª…í•˜ê¸° ì „ì— í•œ ê°€ì§€ ì˜ˆì‹œë¥¼ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.\ní…Œì´ë¸”ì— ì „í™” í†µí™” ê¸°ë¡ ëª©ë¡ì´ ìˆê³  ë§¤ì¼ ë°œìƒí•œ í†µí™”ëŸ‰ì„ ê³„ì‚°í•œë‹¤ê³  ê°€ì • í•´ë³´ê² ìŠµë‹ˆë‹¤.\nâ€œë‚ ì§œâ€ë¥¼ í‚¤ë¡œ ì„¤ì •í•˜ê³  ê° ë ˆì½”ë“œì— ëŒ€í•´ ê°’ìœ¼ë¡œ â€œ1â€ì„ ì§€ì •í•œ ë‹¤ìŒ, ê° í‚¤ì˜ ê°’ì„ í•©ì‚°í•˜ì—¬ ê²°ê³¼ ê°’ì„ ê³„ì‚°í•  ìˆ˜ ìˆì„ ê²ƒ ì…ë‹ˆë‹¤.</p>\n<p>ë§Œì¼ ë°ì´í„°ê°€ ì—¬ëŸ¬ í´ëŸ¬ìŠ¤í„°ì— ì €ì¥ë˜ì–´ ìˆë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ ë™ì¼í•œ í‚¤ì˜ ê°’ì„ í•©ì‚°í•  ìˆ˜ ìˆì„ê¹Œìš”?\nì´ë¥¼ ìœ„í•œ ìœ ì¼í•œ ë°©ë²•ì€ ê°™ì€ í‚¤ì˜ ëª¨ë“  ê°’ì„ ë™ì¼í•œ ì‹œìŠ¤í…œì— ë‘ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì´ ê°’ë“¤ì„ í•©ì¹˜ë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"narrow-and-wide-transformation\" style=\"position:relative;\"><a href=\"#narrow-and-wide-transformation\" aria-label=\"narrow and wide transformation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Narrow and Wide Transformation</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1TrPHpsimWez75krgjIQHYr49Wr8WwEdA\"></p>\n<p>ëª‡ ê°€ì§€ ì‚¬ë¡€ë¥¼ í†µí•´ ë” ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\në§Œì¼ ë°ì´í„°ê°€ ì´ë¯¸ í‚¤ ê°’ìœ¼ë¡œ íŒŒí‹°ì…”ë‹ ë˜ì–´ ìˆê³  í‚¤ ê°’ì— ëŒ€í•´ ë³€í™”ë¥¼ ì£¼ê³  ì‹¶ë‹¤ë©´, ì¢Œì¸¡ì˜ ê·¸ë¦¼ì²˜ëŸ¼ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.\n<code class=\"language-text\">filter(), sample(), map(), flatMap()</code> ë“±ì˜ transformationì´ ì´ì— í•´ë‹¹í•˜ë©°, ì´ ê²½ìš° Shuffleì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤.\nì´ë¥¼ <strong>Narrow Transformation</strong> ì´ë¼ê³  í•©ë‹ˆë‹¤.</p>\n<p>ë°˜ë©´, ì„œë¡œ ë‹¤ë¥¸ íŒŒí‹°ì…˜ìœ¼ë¡œë¶€í„° íŠ¹ì •í•œ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì¶”ì¶œí•˜ê³  ì‹¶ì€ ê²½ìš°, ê·¸ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ Shuffleì´ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.\n<code class=\"language-text\">groupByKey(), reduceByKey()</code> ë“±ì´ ì´ì— í•´ë‹¹í•˜ë©°, ì´ë¥¼ <strong>Wide Transformation</strong> ì´ë¼ê³  í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"shuffled-hashjoin\" style=\"position:relative;\"><a href=\"#shuffled-hashjoin\" aria-label=\"shuffled hashjoin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shuffled HashJoin</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1BlOjTPvvIknPOyZvSZ0SUG6dDvPewvn-\"></p>\n<p>ë‘ ê°œì˜ í…Œì´ë¸”ì„ <code class=\"language-text\">Join</code> í•  ë•Œì—ë„ Shuffle ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nìœ„ì˜ ì˜ˆì‹œ ì²˜ëŸ¼ ë‘ í…Œì´ë¸”ì—ì„œ í‚¤ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ Join í•˜ê²Œ ë˜ë©´, ë™ì¼í•œ í‚¤ë¥¼ ê°€ì§„ ë°ì´í„°ê°€ ë™ì¼í•œ íŒŒí‹°ì…˜ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ ì´ ë•Œ, ì…”í”Œ ë˜ëŠ” ë°ì´í„°ì˜ ì–‘ì´ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në§Œì¼ Cì˜ ë°ì´í„°ì˜ í¬ê¸°ê°€ Aë³´ë‹¤ í›¨ì”¬ í¬ë‹¤ë©´, Cì— ëŒ€í•œ ì‘ì—…ìœ¼ë¡œ ì¸í•´ ì „ì²´ì˜ ìˆ˜í–‰ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ê²Œ ë  ê²ƒ ì…ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"broadcast-hashjoin\" style=\"position:relative;\"><a href=\"#broadcast-hashjoin\" aria-label=\"broadcast hashjoin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Broadcast HashJoin</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1v4QkFLzoEGFhahqnfaXiYlOFuE4XioUL\"></p>\n<p>ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ Sparkì—ì„œëŠ” <strong>Broadcast Join</strong> ì„ ì œê³µí•©ë‹ˆë‹¤.\nì´ ê²½ìš° RDD ì¤‘ í•˜ë‚˜ê°€ ëª¨ë“  íŒŒí‹°ì…˜ìœ¼ë¡œ ë¸Œë¡œë“œ ìºìŠ¤íŒ…ë˜ë©° ë³µì‚¬ë©ë‹ˆë‹¤.\në§Œì¼ RDD ì¤‘ í•˜ë‚˜ê°€ ë‹¤ë¥¸ ê²ƒì— ë¹„í•´ ìƒë‹¹íˆ ì‘ë‹¤ë©´ í° RDDê°€ ì „í˜€ ì…”í”Œ í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.\nì‘ì€ RDD ë§Œ ëª¨ë“  ì‘ì—…ì ì„œë²„ì— ë³µì‚¬í•´ì•¼ í•˜ë¯€ë¡œ Broadcast Joinì€ ì „ì²´ì ìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ì¤„ì—¬ì£¼ëŠ” íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.</p>\n<p>Spark 1.2ì—ì„œëŠ” <code class=\"language-text\">spark.sql.autoBroadcastJoinThreshold</code> ê°’ì„ ì„¤ì •í•´ì£¼ì–´ì•¼ í–ˆì§€ë§Œ,\n2.0 ì´í›„ ë²„ì „ì˜ ê²½ìš° Spark SQLì´ ì•Œì•„ì„œ ìµœì í™” ì˜ í•´ì¤ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"spark-shuffle-properties\" style=\"position:relative;\"><a href=\"#spark-shuffle-properties\" aria-label=\"spark shuffle properties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark Shuffle Properties</h2>\n<ul>\n<li><code class=\"language-text\">spark.shuffle.compress</code>: ì—”ì§„ì´ shuffle ì¶œë ¥ì„ ì••ì¶•í• ì§€ ì—¬ë¶€ë¥¼ ì§€ì •</li>\n<li><code class=\"language-text\">spark.shuffle.spill.compress</code>: ì¤‘ê°„ shuffle spill íŒŒì¼ì„ ì••ì¶•í• ì§€ ì—¬ë¶€ë¥¼ ì§€ì •</li>\n</ul>\n<p>Shuffleì—ëŠ” ìœ„ì˜ ë‘ ê°€ì§€ ì¤‘ìš”í•œ Spark Property ê°€ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë‘˜ ë‹¤ ê¸°ë³¸ì ìœ¼ë¡œ ê°’ì´ â€œtrueâ€ì´ë©°, <code class=\"language-text\">spark.io.compression.codec</code> ì••ì¶• ì½”ë±ì„ ê¸°ë³¸ìœ¼ë¡œí•©ë‹ˆë‹¤.\nê·¸ë¦¬ê³  ìœ„ì—ì„œ ì„¤ëª…í•œ ê²ƒì²˜ëŸ¼ Sparkì—ëŠ” ì—¬ëŸ¬ ê°€ì§€ ì…”í”Œ êµ¬í˜„ì´ ìˆìŠµë‹ˆë‹¤.\níŠ¹ì • êµ¬í˜„ì—ì„œ ì‚¬ìš©ë˜ëŠ” Shuffleì€ <code class=\"language-text\">spark.shuffle.manager</code> ê°’ì— ì˜í•´ ê²°ì •ë©ë‹ˆë‹¤.\nê°€ëŠ¥í•œ ì˜µì…˜ì€ <strong>hash, sort, tungsten-sort</strong> ì´ë©°, â€œsortâ€ ì˜µì…˜ì€ ê¸°ë³¸ì ìœ¼ë¡œ Spark 1.2.0ë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤.</p>\n<p>ì´ì™¸ì—ë„ Spark Shuffle ê´€ë ¨ëœ PropertyëŠ” ì•„ë˜ì˜ ê³µì‹ë¬¸ì„œì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n<a href=\"https://spark.apache.org/docs/latest/configuration.html#shuffle-behavior\">https://spark.apache.org/docs/latest/configuration.html#shuffle-behavior</a></p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://0x0fff.com/spark-architecture-shuffle\">https://0x0fff.com/spark-architecture-shuffle</a></li>\n<li><a href=\"https://www.slideshare.net/databricks/strata-sj-everyday-im-shuffling-tips-for-writing-better-spark-programs\">https://www.slideshare.net/databricks/strata-sj-everyday-im-shuffling-tips-for-writing-better-spark-programs</a></li>\n</ul>\n<br>","excerpt":"íš¨ìœ¨ì ì¸ Spark Applicationì„ ê°œë°œí•˜ê¸° ìœ„í•´ Shufflingâ€¦"}}},{"id":"1e8b83c6-ab58-5682-b4e9-2c995faf6103","title":"Spark on Kubernetes: ìŠ¤íŒŸ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš©ì„ ìœ„í•œ ê¸°ëŠ¥ë“¤","slug":"spark-on-kubernetes-spot-instance","publishDate":"July 23, 2022","publishDateISO":"2022-07-23","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"456f045e-0520-51cd-b056-4f330449b7a5","childMarkdownRemark":{"id":"dbcbd6f9-ba42-5df6-8d65-cab1263fa8e9","timeToRead":3,"html":"<p>ìŠ¤íŒŸ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ì‚¬ìš©í•˜ë©´ ì˜¨ë””ë§¨ë“œì— ë¹„í•´ 70~90%ì˜ ë¹„ìš©ì„ ì ˆê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ ìŠ¤íŒŸ ì¸ìŠ¤í„´ìŠ¤ëŠ” ê°€ê²© ì…ì°°, ê°€ìš©ì„± ë“± ì—¬ëŸ¬ ì´ìœ ë¡œ ì¤‘ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në”°ë¼ì„œ ìŠ¤íŒŸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ë…¸ë“œê°€ ì¤‘ë‹¨ë˜ëŠ” ìƒí™©ì— ëŒ€ë¹„í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\nì´ ê¸€ì—ì„œëŠ” Spark on Kubernetesë¥¼ ìŠ¤íŒŸ ì¸ìŠ¤í„´ìŠ¤ ìœ„ì—ì„œ ì•ˆì •ì ìœ¼ë¡œ ìš´ì˜í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì„¤ì •ë“¤ì„ ì •ë¦¬í•´ë³´ë ¤ í•©ë‹ˆë‹¤.</p>\n<p><br><br></p>\n<h2 id=\"driverëŠ”-on-demandì—-í• ë‹¹í•˜ê¸°\" style=\"position:relative;\"><a href=\"#driver%EB%8A%94-on-demand%EC%97%90-%ED%95%A0%EB%8B%B9%ED%95%98%EA%B8%B0\" aria-label=\"driverëŠ” on demandì— í• ë‹¹í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>driverëŠ” on-demandì— í• ë‹¹í•˜ê¸°</h2>\n<p>ì¤‘ë‹¨ëœ ë…¸ë“œì— ìˆë˜ <code class=\"language-text\">driver pod</code>ê°€ ì¢…ë£Œë˜ëŠ” ê²½ìš°, Spark ì‘ì—…ì€ ì‹¤íŒ¨í•˜ê²Œ ë©ë‹ˆë‹¤. <code class=\"language-text\">executor pod</code>ê°€ ì¢…ë£Œë˜ëŠ” ê²½ìš°, ìºì‹œëœ ë°ì´í„° ë˜ëŠ” ì…”í”Œ íŒŒì¼ì„ ìƒê²Œ ë˜ì§€ë§Œ ìƒˆë¡œìš´ executorë¥¼ í†µí•´ ì´ë¥¼ ë‹¤ì‹œ ê³„ì‚°í•˜ê¸° ë•Œë¬¸ì— ì „ì²´ ì‘ì—…ì´ ì‹¤íŒ¨í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.</p>\n<p>ìœ„ì™€ ê°™ì€ ì´ìœ ë¡œ <strong>driverëŠ” ì˜¨ë””ë§¨ë“œ ì¸ìŠ¤í„´ìŠ¤ì— í• ë‹¹</strong>í•˜ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.\në…¸ë“œ ê·¸ë£¹ì„ ë¶„ë¦¬í•˜ê³  <code class=\"language-text\">nodeSelector</code>ë¥¼ í™œìš©í•œë‹¤ë©´ driverëŠ” ì˜¨ë””ë§¨ë“œì—ì„œ, executorëŠ” ìŠ¤íŒŸì—ì„œ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><br><br></p>\n<h2 id=\"ì ì ˆí•œ-ì¸ìŠ¤í„´ìŠ¤-ìœ í˜•-ì„ íƒí•˜ê¸°\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%A0%88%ED%95%9C-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%9C%A0%ED%98%95-%EC%84%A0%ED%83%9D%ED%95%98%EA%B8%B0\" aria-label=\"ì ì ˆí•œ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜• ì„ íƒí•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì ì ˆí•œ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜• ì„ íƒí•˜ê¸°</h2>\n<p>ì¼ë¶€ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì€ í•´ë‹¹ ì‹œì ì˜ spot market ìƒí™©ì— ë”°ë¼ ì•ˆì •ì ìœ¼ë¡œ í™•ë³´í•˜ì§€ ëª»í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í™•ë³´ë¥¼ ëª»í•˜ê²Œ ë˜ë©´ executorëŠ” ê³„ì† pending ìƒíƒœì— ë¨¸ë¬´ë¥´ê²Œ ë˜ê³  ì „ì²´ ìˆ˜í–‰ì‹œê°„ë„ ì§€ì—°ë©ë‹ˆë‹¤.</p>\n<p>ì‚¬ìš©ëŸ‰ì— ë¹„í•´ í¬ê¸°ê°€ í° ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ì„ íƒí–ˆë‹¤ë©´, ì—¬ëŸ¬ <code class=\"language-text\">executor pod</code>ê°€ í•˜ë‚˜ì˜ ë…¸ë“œì— í• ë‹¹ë©ë‹ˆë‹¤. ì´ ë•Œ í•´ë‹¹ ë…¸ë“œê°€ ì¤‘ë‹¨ëœë‹¤ë©´ ì—¬ëŸ¬ executorê°€ ì¢…ë£Œë˜ë¯€ë¡œ ì¬ê³„ì‚°ì— ë” ë§ì€ ì‹œê°„ì´ ì†Œìš”ë©ë‹ˆë‹¤.</p>\n<p>ìœ„ì™€ ê°™ì€ ì´ìœ ë¡œ ì ì ˆí•œ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ì„ íƒí•˜ëŠ” ê²ƒì´ spot killì„ ì¤„ì´ëŠ”ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\nKarpenterë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ì§€ì •í•˜ì—¬ Podì˜ ë¦¬ì†ŒìŠ¤ ìš”ì²­ëŸ‰ì— ê°€ì¥ ì í•©í•œ ë…¸ë“œë¥¼ í”„ë¡œë¹„ì €ë‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ <code class=\"language-text\">Instance Fleet</code>ì˜ <code class=\"language-text\">Allocation Strategy</code>ì— ë”°ë¼ ê°€ì¥ ì•ˆì •ì ìœ¼ë¡œ í™•ë³´ ê°€ëŠ¥í•œ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><br><br></p>\n<h2 id=\"spark-31-graceful-executor-decommissioning\" style=\"position:relative;\"><a href=\"#spark-31-graceful-executor-decommissioning\" aria-label=\"spark 31 graceful executor decommissioning permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark 3.1: Graceful Executor Decommissioning</h2>\n<p><code class=\"language-text\">Graceful Executor Decommissioning</code>ì€ Spark 3.1 ë²„ì „ì— ì¶”ê°€ëœ ê¸°ëŠ¥ì…ë‹ˆë‹¤.\nì´ ê¸°ëŠ¥ì„ í†µí•´ <strong>ë…¸ë“œê°€ ì¤‘ë‹¨ë˜ë”ë¼ë„ ìµœì†Œí•œì˜ ì†ì‹¤ë¡œ Spark ì‘ì—…ì´ ì§€ì†ë˜ë„ë¡ ì„¤ì •</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € í´ëŸ¬ìŠ¤í„°ì— <code class=\"language-text\">Node Termination Handler</code>ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. <code class=\"language-text\">Node Termination Handler</code>ëŠ” í´ë¼ìš°ë“œì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì„¤ì¹˜í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ì œ ë…¸ë“œê°€ ì¤‘ë‹¨ë˜ì—ˆì„ ë•Œ ê³¼ì •ì„ ì•„ë˜ ê·¸ë¦¼ì„ í†µí•´ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1AWx29kv1p1V3MHI6gPqfvXwQWcLhkGGV\" alt=\"spark-decom\"></p>\n<ol>\n<li>ìŠ¤íŒŸ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¤‘ë‹¨ë˜ê¸° ì•½ 120ì´ˆ ì „ì— <code class=\"language-text\">Termination Handler</code>ì˜ notice ë°œìƒ</li>\n<li>driverê°€ í•´ë‹¹ executorë¥¼ blacklistì— ì¶”ê°€í•˜ê³  ì‹ ê·œ taskì˜ ìŠ¤ì¼€ì¤„ë§ì„ ì°¨ë‹¨</li>\n<li>ì¤‘ë‹¨ë˜ëŠ” ë…¸ë“œì— ìˆë˜ ìºì‹œëœ ë°ì´í„°, ì…”í”Œ íŒŒì¼ì„ ë‹¤ë¥¸ ë…¸ë“œë¡œ ë³µì œ</li>\n<li>ì‹¤íŒ¨ ì²˜ë¦¬ëœ taskë¥¼ ì´ì–´ì„œ ìˆ˜í–‰ (ë³µì œí•œ íŒŒì¼ì„ ê·¸ëŒ€ë¡œ í™œìš©)</li>\n</ol>\n<br>\n<p>ìœ„ì˜ ê³¼ì •ì„ í†µí•´ ë…¸ë“œê°€ ì¤‘ë‹¨ë˜ì—ˆì„ ë•Œ ì¬ê³„ì‚°ì„ ìµœì†Œí™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>\nì´ ê¸°ëŠ¥ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì¼ë¶€ ì œí•œ ì‚¬í•­ë„ ì¡´ì¬í•©ë‹ˆë‹¤.</p>\n<p>120ì´ˆì˜ ì‹œê°„ ì œí•œì´ ìˆê¸° ë•Œë¬¸ì— <strong>ì˜®ê²¨ì•¼í•  íŒŒì¼ì´ ì•„ì£¼ í° ê²½ìš°, ì¼ë¶€ íŒŒì¼ ì†ì‹¤ì´ ë°œìƒ</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ non-SSD ë³¼ë¥¨ì€ ë¶„ë‹¹ ìµœëŒ€ 15GB, SSD ë³¼ë¥¨ì€ 35~40GB ê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë™ì‹œì— ë§ì€ executorê°€ spot kill ë‹¹í•˜ëŠ” ê²½ìš°, ë™ì¼í•œ ì´ìœ ë¡œ íŒŒì¼ ì†ì‹¤ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">spark.decommission.enabled\nspark.storage.decommission.enabled\nspark.storage.decommission.rddBlocks.enabled\nspark.storage.decommission.shuffleBlocks.enabled</code></pre></div>\n<p><code class=\"language-text\">Graceful Executor Decommissioning</code>ì€ ìœ„ì˜ ì„¤ì •ì„ í†µí•´ í™œì„±í™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><br><br></p>\n<h2 id=\"spark-32-executor-pvc-reuse\" style=\"position:relative;\"><a href=\"#spark-32-executor-pvc-reuse\" aria-label=\"spark 32 executor pvc reuse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark 3.2: Executor PVC Reuse</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1X7Ud-SEi0jwoZjuWtaqCrXTsK-5X97Zd\" alt=\"spark-reuse\"></p>\n<p><code class=\"language-text\">Executor PVC Reuse</code>ëŠ” Spark 3.2 ë²„ì „ì— ì¶”ê°€ëœ ê¸°ëŠ¥ì…ë‹ˆë‹¤.\nì´ ê¸°ëŠ¥ì„ í†µí•´ spot kill ì´í›„ì—ë„ <strong>ë™ì¼í•œ PVC ì—°ê²°ì„ í†µí•´ ì…”í”Œ íŒŒì¼ì„ ì¬ì‚¬ìš©</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € í´ëŸ¬ìŠ¤í„°ì— <code class=\"language-text\">Dynamic PVC</code>ì— ëŒ€í•œ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>\n<p>í˜„ì¬ëŠ” NVMe ê¸°ë°˜ì˜ SSDì—ì„œ ì‚¬ìš©ì´ ì–´ë µë‹¤ëŠ” ì œí•œ ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.<br>\në˜í•œ PVCê°€ ì¦‰ì‹œ ì¬ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ ìƒí™©ì´ë¼ë©´ race conditionì´ ë°œìƒí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">spark.kubernetes.driver.reusePersistentVolumeClaim\nspark.kubernetes.driver.ownPersistentVolumeClaim\nspark.kubernetes.executor.volumes.persistentVolumeClaim.data.options.*\nspark.kubernetes.executor.volumes.persistentVolumeClaim.data.mount.*</code></pre></div>\n<p>Executor PVC ReuseëŠ” ìœ„ì˜ ì„¤ì •ì„ í†µí•´ í™œì„±í™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://databricks.com/it/dataaisummit/session/how-make-apache-spark-kubernetes-run-reliably-spot-instances/\">https://databricks.com/it/dataaisummit/session/how-make-apache-spark-kubernetes-run-reliably-spot-instances/</a></li>\n<li><a href=\"https://issues.apache.org/jira/browse/SPARK-20624\">https://issues.apache.org/jira/browse/SPARK-20624</a></li>\n<li><a href=\"https://issues.apache.org/jira/browse/SPARK-35593\">https://issues.apache.org/jira/browse/SPARK-35593</a></li>\n</ul>","excerpt":"ìŠ¤íŒŸ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì„ ì‚¬ìš©í•˜ë©´ ì˜¨ë””ë§¨ë“œì— ë¹„í•´ 70~9â€¦"}}},{"id":"026096e5-5d5d-5809-a3c9-1481f1909414","title":"Spark on Kubernetes: ì„±ëŠ¥ ìµœì í™” ë°©ë²•ë“¤","slug":"spark-on-kubernetes-perf","publishDate":"September 11, 2021","publishDateISO":"2021-09-11","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"66c09a28-a712-595b-b711-4741ad2681b1","childMarkdownRemark":{"id":"048a4410-1e86-5140-9739-04bd0e8c5793","timeToRead":3,"html":"<p>Spark 3.1 ë²„ì „ë¶€í„° Spark on Kubernetesê°€ GAë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.\nì´ ê¸€ì—ì„œëŠ” Spark on YARN ë§Œí¼ì˜ ì„±ëŠ¥ì„ ë‚´ê¸° ìœ„í•´ì„œ í•„ìš”í•œ ì„¤ì •ë“¤ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"êµì°¨-az-ì „ì†¡-ì§€ì—°-ê°œì„ \" style=\"position:relative;\"><a href=\"#%EA%B5%90%EC%B0%A8-az-%EC%A0%84%EC%86%A1-%EC%A7%80%EC%97%B0-%EA%B0%9C%EC%84%A0\" aria-label=\"êµì°¨ az ì „ì†¡ ì§€ì—° ê°œì„  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>êµì°¨ AZ ì „ì†¡ ì§€ì—° ê°œì„ </h2>\n<p>ëŒ€ë¶€ë¶„ ì‚¬ìš©ìë“¤ì€ ê°€ìš©ì„±ì„ ìš°ë ¤í•˜ì—¬ Multi-AZ ì‚¬ìš©ì„ ì„ í˜¸í•©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ driver, executor podê°€ ì—¬ëŸ¬ AZì— ë¶„ì‚°ë˜ì–´ ìˆëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ AZ ê°„ <strong>ì¶”ê°€ ë°ì´í„° ì „ì†¡ ë¹„ìš©</strong>ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ spark shuffleì€ disk IO, network IOì— ëŒ€í•œ ë¹„ìš©ì´ ë§ì´ ë“œëŠ” ì—°ì‚°ì´ë¯€ë¡œ latencyê°€ ë‚®ì€ ë‹¨ì¼ AZê°€ ì¢‹ì€ ì„±ëŠ¥ì„ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">--conf spark.kubernetes.node.selector.zone=&#39;&lt;availability zone&gt;&#39;</code></pre></div>\n<p>Spark on Kubernetesì—ì„œëŠ” Pod Template ë˜ëŠ” node selector ì„¤ì •ì„ í†µí•´ ë‹¨ì¼ AZ ë…¸ë“œ ê·¸ë£¹ì—ì„œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"í´ëŸ¬ìŠ¤í„°-ë…¸ë“œ-ê°€ìš©ì„±-ê³„ì‚°í•˜ê¸°\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EB%85%B8%EB%93%9C-%EA%B0%80%EC%9A%A9%EC%84%B1-%EA%B3%84%EC%82%B0%ED%95%98%EA%B8%B0\" aria-label=\"í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ê°€ìš©ì„± ê³„ì‚°í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ê°€ìš©ì„± ê³„ì‚°í•˜ê¸°</h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1GLAMXGewFey6ymOrL5ZZDo_oaAW1uE5C\" alt=\"k8s-resource\"></p>\n<p>ë…¸ë“œ ì „ì²´ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìµœëŒ€ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì–´ëŠ ì •ë„ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ í• ë‹¹í•  ìˆ˜ ìˆëŠ”ì§€ ê³„ì‚°í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ëª¨ë“  Kubernetes ë…¸ë“œëŠ” í´ëŸ¬ìŠ¤í„° ìš´ì˜ì„ ìœ„í•´ <strong>OS ì‹œìŠ¤í…œê³¼ Kubeletì—ì„œ ì¼ì •ëŸ‰ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì ìœ </strong>í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ Podì— í• ë‹¹ ê°€ëŠ¥í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ê³„ì‚°í•  ë•Œ ì´ ë¶€ë¶„ì€ ì œì™¸í•˜ê³  ê³„ì‚°í•´ì•¼ í•©ë‹ˆë‹¤. ë§Œì•½ ë…¸ë“œë§ˆë‹¤ ëœ¨ëŠ” daemonsetì´ë‚˜ agentì™€ ê°™ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë„ì› ë‹¤ë©´ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë„ ì œì™¸ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>í´ë¼ìš°ë“œ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•ì— ë”°ë¼ ë¹ ë¥´ê²Œ ë³´ê³  ì‹¶ì„ ë•Œ <a href=\"https://learnk8s.io/kubernetes-instance-calculator\">Kubernetes Instance Calculator</a>ë¥¼ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"ì…”í”Œ-ë‹¨ê³„ì—ì„œì˜-scratch-space-ê°œì„ \" style=\"position:relative;\"><a href=\"#%EC%85%94%ED%94%8C-%EB%8B%A8%EA%B3%84%EC%97%90%EC%84%9C%EC%9D%98-scratch-space-%EA%B0%9C%EC%84%A0\" aria-label=\"ì…”í”Œ ë‹¨ê³„ì—ì„œì˜ scratch space ê°œì„  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì…”í”Œ ë‹¨ê³„ì—ì„œì˜ scratch space ê°œì„ </h2>\n<p>Spark Shuffle ë°œìƒ ì‹œ ì¤‘ê°„ íŒŒì¼ë“¤ì´ ìƒê¸°ê²Œ ë˜ëŠ”ë°, ë³´í†µ driverë‚˜ executorì˜ ë¡œì»¬ ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ Kubernetesì˜ ê²½ìš°, ê¸°ë³¸ ê°’ìœ¼ë¡œ Pod ë‚´ë¶€ì˜ ë³¼ë¥¨(emptyDir)ì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<p>emptyDir ìœ í˜•ì˜ ë³¼ë¥¨ì€ Docker Storage Driverì˜ CoW(Copy-On-Write) ì˜¤ë²„í—¤ë“œë¡œ ì¸í•´ ì‘ì€ íŒŒì¼ ì“°ê¸°ë¥¼ ë°˜ë³µí•˜ëŠ” ê²½ìš° ì†ë„ê°€ ëŠë ¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ Spark on Kubernetes GA ë²„ì „ì—ì„œëŠ” 2ê°€ì§€ì˜ ì„¤ì •ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h3 id=\"1-spark-25262-support-tmpfs-for-local-dirs-in-k8s\" style=\"position:relative;\"><a href=\"#1-spark-25262-support-tmpfs-for-local-dirs-in-k8s\" aria-label=\"1 spark 25262 support tmpfs for local dirs in k8s permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. [SPARK-25262] Support tmpfs for local dirs in k8s</h3>\n<p>ë¨¼ì € tmpfsë¥¼ local dirë¡œ í™œìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.\ntmpfsëŠ” RAM ê¸°ë°˜ íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ ë…¸ë“œ ì¬ë¶€íŒ… ì‹œ ì§€ì›Œì§€ê³ , íŒŒì¼ì´ ì»¨í…Œì´ë„ˆ ë©”ëª¨ë¦¬ ì œí•œì— í¬í•¨ë©ë‹ˆë‹¤. ì„¤ì • ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨í•˜ì§€ë§Œ tmpfs ì‚¬ì´ì¦ˆê°€ ì»¤ì§ˆ ìˆ˜ë¡ Pod OOMì´ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ í¬ë‹¤ë³´ë‹ˆ ìš´ì˜í•  ë•ŒëŠ” ë²ˆê±°ë¡œìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;spark.kubernetes.local.dirs.tmpfs&quot;: &quot;true&quot;</code></pre></div>\n<br>\n<h3 id=\"2-spark-27499-support-mapping-sparklocaldir-to-hostpath-volume\" style=\"position:relative;\"><a href=\"#2-spark-27499-support-mapping-sparklocaldir-to-hostpath-volume\" aria-label=\"2 spark 27499 support mapping sparklocaldir to hostpath volume permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. [SPARK-27499] Support mapping spark.local.dir to hostPath volume</h3>\n<p>ë‹¤ìŒì€ hostì— ë§ˆìš´íŠ¸ëœ ë³¼ë¥¨ì„ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. hostPath ë³¼ë¥¨ì„ spark.local.dirì— í• ë‹¹í•´ì„œ ì…”í”Œ ê³¼ì •ì—ì„œì˜ ë””ìŠ¤í¬ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ ì¸ìŠ¤í„´ìŠ¤ì— SSD ë˜ëŠ” NVMeì™€ ê°™ì€ ë³¼ë¥¨ì„ ì¶”ê°€ë¡œ ë§ˆìš´íŠ¸í•˜ëŠ” ê²½ìš°ì— ë” ì¢‹ì€ íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">...</span>\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"spark-local-dir-1\"</span>\n      <span class=\"token key atrule\">hostPath</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/tmp/spark-local-dir\"</span>\n  <span class=\"token key atrule\">executor</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">instances</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n    <span class=\"token key atrule\">cores</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n    <span class=\"token punctuation\">...</span>.\n    <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"spark-local-dir-1\"</span></code></pre></div>\n<br>\n<h2 id=\"executor-pod-batch-ê´€ë ¨-ì„¤ì •\" style=\"position:relative;\"><a href=\"#executor-pod-batch-%EA%B4%80%EB%A0%A8-%EC%84%A4%EC%A0%95\" aria-label=\"executor pod batch ê´€ë ¨ ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Executor Pod Batch ê´€ë ¨ ì„¤ì •</h2>\n<p>ë³´í†µ ë¬´ê±°ìš´ ì‘ì—…ì€ executor ì—¬ëŸ¬ ê°œê°€ ë– ì„œ ì²˜ë¦¬í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.\nSpark on Kubernetesì—ëŠ” executor podì„ ìƒì„±í•  ë•Œ <strong>batch sizeì™€ delay</strong>ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.</p>\n<p>ì˜ˆë¥¼ ë“¤ì–´ executor 10ê°œë¥¼ ë„ìš¸ ë•Œ ê¸°ë³¸ ì„¤ì • ê°’ì´ <code class=\"language-text\">batch size = 5, delay = 1</code>ë¡œ ë˜ì–´ ìˆë‹¤ë©´, executor pod 5ê°œê°€ ë™ì‹œì— ëœ¨ê³  1ì´ˆ ì§€ì—° ì´í›„ì— 5ê°œê°€ ì¶”ê°€ë¡œ ìƒì„±ë©ë‹ˆë‹¤.\nì´ ì„¤ì • ê°’ì€ Kubernetes Schedulerì™€ driver podì˜ ë¶€í•˜ë¥¼ ê³ ë ¤í•´ì„œ ì„¤ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;spark.kubernetes.allocation.batch.size&quot;: &quot;5&quot;\n&quot;spark.kubernetes.allocation.batch.delay&quot;: &quot;1s&quot;</code></pre></div>\n<br>\n<p>ë°˜ë©´ ì•„ì§ 3.1 ë²„ì „ ê¸°ì¤€ìœ¼ë¡œ ì§€ì›í•˜ì§€ ì•ŠëŠ” ì„¤ì •ë“¤ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>External Shuffle ServiceëŠ” ì§€ì›í•˜ì§€ ì•ŠìŒ</li>\n<li>Job Queue ì—†ìŒ (Future Work)</li>\n</ul>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://aws.amazon.com/ko/blogs/containers/optimizing-spark-performance-on-kubernetes\">https://aws.amazon.com/ko/blogs/containers/optimizing-spark-performance-on-kubernetes</a></li>\n<li><a href=\"https://aws.github.io/aws-emr-containers-best-practices\">https://aws.github.io/aws-emr-containers-best-practices</a></li>\n<li><a href=\"https://spark.apache.org/docs/latest/running-on-kubernetes.html\">https://spark.apache.org/docs/latest/running-on-kubernetes.html</a></li>\n</ul>","excerpt":"Spark 3.1 ë²„ì „ë¶€í„° Spark on Kubernetesê°€ GAë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.\nì´ ê¸€ì—ì„œëŠ” Spark on YARNâ€¦"}}},{"id":"b10d61e7-5adc-53e4-b2da-9142ae8bffb5","title":"Airflow workerì— KEDA AutoScaler ì ìš©í•œ í›„ê¸°","slug":"airflow-worker-keda-autoscaler","publishDate":"June 24, 2022","publishDateISO":"2022-06-24","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"ea004cc8-b136-57cb-b9c0-22e9a7a65cf3","childMarkdownRemark":{"id":"2a2780a6-435b-5112-9cc3-94f01693acb8","timeToRead":4,"html":"<p>Airflowì—ì„œ ì‹¤í–‰ë˜ëŠ” ë°°ì¹˜ ì‘ì—…ë“¤ì€ íŠ¹ì • ì‹œê°„ ë˜ëŠ” ì•¼ê°„ì— ë§ì´ ìˆ˜í–‰ë˜ê³  ì´ì™¸ì˜ ì‹œê°„ì€ ìƒëŒ€ì ìœ¼ë¡œ ì—¬ìœ ë¡œìš´ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ìƒí™©ì—ì„œ ì˜¤í† ìŠ¤ì¼€ì¼ë§ì„ ì ìš©í•œë‹¤ë©´ íš¨ìœ¨ì ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ìµœì í™”í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë§Œì•½ ì¿ ë²„ë„¤í‹°ìŠ¤ ìœ„ì—ì„œ Celery Executorë¥¼ ì‚¬ìš©í•œë‹¤ë©´ workerì˜ ì˜¤í† ìŠ¤ì¼€ì¼ë§ì„ ìœ„í•´ KEDAë¥¼ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” Airflow workerì— KEDA AutoScalerë¥¼ ì ìš©í•˜ë©´ì„œ ê²ªì—ˆë˜ ì—¬ëŸ¬ ë¬¸ì œë“¤ê³¼ í•´ê²° ê³¼ì •ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ë ¤ í•©ë‹ˆë‹¤.</p>\n<p><br><br></p>\n<h2 id=\"keda-autoscaler\" style=\"position:relative;\"><a href=\"#keda-autoscaler\" aria-label=\"keda autoscaler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>KEDA AutoScaler</h2>\n<p>KEDAëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì´ë²¤íŠ¸ ê¸°ë°˜ ì˜¤í† ìŠ¤ì¼€ì¼ë§ì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ HPAì™€ í•¨ê»˜ ë™ì‘í•˜ë©° ë‹¤ì–‘í•œ built-in scalerë¥¼ í†µí•´ ìœ ì—°í•˜ê²Œ ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì¡°ê±´ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1ASRyxTdtpbFqt6qGdRhD98OBSbTa-i8k\" alt=\"keda\"></p>\n<p>ë§Œì•½ Airflowì— ì ìš©í•œë‹¤ë©´ ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì€ í˜•íƒœë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.\nì‚¬ìš©ìëŠ” KEDAì˜ <code class=\"language-text\">ScaledObject</code> CRDë¥¼ ìƒì„±í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬í•©ë‹ˆë‹¤.\nKEDAëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ API Serverì™€ í†µì‹ í•˜ë©° Operatorì™€ ê°™ì€ í˜•íƒœë¡œì¨ ì»¨íŠ¸ë¡¤ ë£¨í”„ì— ë”°ë¼ ë™ì‘í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> keda.sh/v1alpha1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ScaledObject\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>worker\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">scaleTargetRef</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>worker\n  <span class=\"token key atrule\">pollingInterval</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n  <span class=\"token key atrule\">cooldownPeriod</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span>\n  <span class=\"token key atrule\">minReplicaCount</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token key atrule\">maxReplicaCount</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n  <span class=\"token key atrule\">triggers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> postgresql\n      <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">connectionFromEnv</span><span class=\"token punctuation\">:</span> AIRFLOW_CONN_AIRFLOW_DB\n        <span class=\"token key atrule\">query</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span></code></pre></div>\n<p><code class=\"language-text\">ScaledObject</code>ëŠ” ìœ„ì™€ ê°™ì´ ë¬´ì—‡ì„ ê¸°ì¤€ìœ¼ë¡œ íŠ¸ë¦¬ê±°í• ì§€, ìŠ¤ì¼€ì¼ë§ ì •ì±… ë“±ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. KEDAëŠ” <code class=\"language-text\">minReplicaCount</code>ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ë™ì‘í•˜ëŠ”ë° <code class=\"language-text\">minReplicaCount</code>ê°€ 0ì¸ ê²½ìš°, KEDAê°€ trigger ì§€í‘œë¥¼ í†µí•´ ì§ì ‘ ì²˜ë¦¬í•˜ì§€ë§Œ 1 ì´ìƒì¸ ê²½ìš°ì—ëŠ” KEDAê°€ Metrics Serverì— ì „ë‹¬ë§Œí•˜ê³  HPAë¥¼ í†µí•´ ì²˜ë¦¬ë©ë‹ˆë‹¤. ê° ì˜µì…˜ì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì€ <a href=\"https://keda.sh/docs/2.7/concepts/scaling-deployments/\">ê³µì‹ ë¬¸ì„œ</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> ceil<span class=\"token punctuation\">(</span><span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>::<span class=\"token keyword\">decimal</span> <span class=\"token operator\">/</span> {{ celery<span class=\"token punctuation\">.</span>worker_concurrency }}<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> task_instance\n<span class=\"token keyword\">WHERE</span> state<span class=\"token operator\">=</span><span class=\"token string\">'running'</span> <span class=\"token operator\">OR</span> state<span class=\"token operator\">=</span><span class=\"token string\">'queued'</span></code></pre></div>\n<p>Airflowì—ì„œ ì‚¬ìš©í•˜ëŠ” <code class=\"language-text\">ScaledObject</code>ì˜ íŠ¸ë¦¬ê±° ì¿¼ë¦¬ëŠ” ìœ„ì™€ ê°™ì´<code class=\"language-text\">celery.worker_concurrency</code> ì„¤ì •ì„ ê¸°ì¤€ìœ¼ë¡œ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ concurrency ì„¤ì •ì´ 12ì´ë©° running ë˜ëŠ” queued ìƒíƒœì˜ task instanceê°€ 10ì—ì„œ 23ìœ¼ë¡œ ì¦ê°€í•œ ìƒí™©ì´ë¼ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤. desired stateê°€ 1ì—ì„œ 2ë¡œ ë³€ê²½ë˜ì—ˆê¸° ë•Œë¬¸ì— deploymentì˜ replica ìˆ˜ëŠ” 2ë¡œ í™•ì¥ ë©ë‹ˆë‹¤. ìŠ¤ì¼€ì¤„ì´ ëª¨ë‘ ì¢…ë£Œëœ ì´í›„ ë‹¤ì‹œ task instanceê°€ 10ìœ¼ë¡œ ì¤„ì–´ë“¤ë©´ replica ìˆ˜ëŠ” 1ë¡œ ì¶•ì†Œ ë©ë‹ˆë‹¤.</p>\n<p>Airflow ê³µì‹ ì°¨íŠ¸ì—ì„œëŠ” KEDA ê´€ë ¨ ì˜µì…˜ì„ ì§€ì›í•˜ê³  ìˆê¸° ë•Œë¬¸ì— <a href=\"https://airflow.apache.org/docs/helm-chart/stable/keda.html\">ê³µì‹ ë¬¸ì„œ</a>ë¥¼ í†µí•´ ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>\ní•˜ì§€ë§Œ ë¬¸ì œëŠ” ì ìš©í•œ ì´í›„ì— ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"ì ìš©-í›„ì—-ë°œìƒí•œ-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%9A%A9-%ED%9B%84%EC%97%90-%EB%B0%9C%EC%83%9D%ED%95%9C-%EB%AC%B8%EC%A0%9C\" aria-label=\"ì ìš© í›„ì— ë°œìƒí•œ ë¬¸ì œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì ìš© í›„ì— ë°œìƒí•œ ë¬¸ì œ</h2>\n<p>ì ìš© í›„ì— ì‹¤í–‰ ì¤‘ì¸ taskì˜ ë¡œê·¸ê°€ ê°‘ìê¸° ëŠê¸°ë©´ì„œ ê°•ì œë¡œ ì‹¤íŒ¨ ì²˜ë¦¬ë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.<br>\nì‹œê°„ì„ ë³´ë‹ˆ workerê°€ Scale-In ë˜ëŠ” ì‹œì ì— ë°œìƒí–ˆê³  í¬ê²Œ ë‘ ê°€ì§€ ë¬¸ì œë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h3 id=\"1-hpaì˜-replica-flapping-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#1-hpa%EC%9D%98-replica-flapping-%EB%AC%B8%EC%A0%9C\" aria-label=\"1 hpaì˜ replica flapping ë¬¸ì œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. HPAì˜ replica flapping ë¬¸ì œ</h3>\n<p>ë¨¼ì € ì˜ë„í•œ ê²ƒë³´ë‹¤ Scale-In/Outì´ ë„ˆë¬´ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\nìƒˆë¡œ ë…¸ë“œê°€ ëœ¨ëŠ”ë° ì‹œê°„ì´ ì†Œìš”ë˜ë¯€ë¡œ ë°°ì¹˜ê°€ ë§ì€ ì‹œê°„ ëŒ€ì—ë„ ì¦ì€ ìŠ¤ì¼€ì¼ ì¡°ì •ì´ ë°œìƒí•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œë¥¼ HPAì—ì„œëŠ” <strong>replica flapping</strong> ì´ë¼ê³  ë§í•©ë‹ˆë‹¤.\nHPAëŠ” ì´ë¥¼ ì œì–´í•˜ê¸° ìœ„í•´ <strong>ì•ˆì •í™” ìœˆë„ìš°ì™€ ìŠ¤ì¼€ì¼ë§ ì •ì±…</strong>ì„ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">behavior</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">scaleDown</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">stabilizationWindowSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">600</span></code></pre></div>\n<p>ìœ„ì™€ ê°™ì´ <code class=\"language-text\">stabilizationWindowSeconds</code> ì„¤ì •ì„ 600ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ì´ì „ 10ë¶„ ë™ì•ˆì˜ ëª¨ë“  ëª©í‘œ ìƒíƒœë¥¼ ê³ ë ¤í•´ì„œ ê°€ì¥ ë†’ì€ ê°’ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. í˜„ì¬ ì‹œì ì— scaleDown ì¡°ê±´ì„ ë§Œì¡±í•˜ë”ë¼ë„ ì¦‰ì‹œ ìˆ˜í–‰ë˜ëŠ”ê²Œ ì•„ë‹ˆë¼ 10ë¶„ì´ ì§€ë‚œ ì‹œì ì— scaleDownì´ ìˆ˜í–‰ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì¦ì€ ìŠ¤ì¼€ì¼ ì¡°ì •ì„ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">behavior</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">scaleDown</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">policies</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Pods\n      <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n      <span class=\"token key atrule\">periodSeconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">300</span></code></pre></div>\n<p><code class=\"language-text\">scaleDown.polices</code>ë¥¼ í†µí•´ Scale-In ë°œìƒ ì‹œ replica ë³€ê²½ í—ˆìš©ì— ëŒ€í•œ ì •ì±…ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ì˜ ì˜ˆì‹œëŠ” 5ë¶„ ë‚´ì— ìµœëŒ€ 1ê°œì˜ replicaë¥¼ scaleDown í•˜ë„ë¡ í—ˆìš©í•˜ëŠ” ì •ì±…ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê³„ë‹¨ì‹ìœ¼ë¡œ ì²œì²œíˆ podë¥¼ ì¶•ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>í˜„ì¬ Airflow ê³µì‹ ì°¨íŠ¸ì—ì„œëŠ” KEDAì˜ advanced ì˜µì…˜ì„ ì§€ì›í•˜ì§€ ì•Šì•„ <a href=\"https://github.com/apache/airflow/pull/24220\">PR</a>ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.<br>\nì°¨íŠ¸ 1.7 ë²„ì „ë¶€í„° ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h3 id=\"2-worker-warm-shutdown-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#2-worker-warm-shutdown-%EB%AC%B8%EC%A0%9C\" aria-label=\"2 worker warm shutdown ë¬¸ì œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Worker Warm Shutdown ë¬¸ì œ</h3>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=10C7umomf0yxDRGav3STo5-uX3i5JUmdA\" alt=\"celery\"></p>\n<p>celery workerì˜ warm shutdownì´ ì œëŒ€ë¡œ ì´ë£¨ì–´ì§€ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— taskì˜ ë¡œê·¸ê°€ ê°‘ìê¸° ëŠê¸°ë©´ì„œ ê°•ì œë¡œ ì‹¤íŒ¨ í–ˆìŠµë‹ˆë‹¤. Airflowì˜ CeleryExecutorëŠ” ìœ„ì™€ ê°™ì´ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•´ ìˆ˜í–‰ë©ë‹ˆë‹¤. ì´ ë•Œ ì‹¤ì œë¡œ taskë¥¼ ì‹¤í–‰í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” main í”„ë¡œì„¸ìŠ¤ê°€ ì•„ë‹ˆë¼ subprocess ì…ë‹ˆë‹¤. celeryì—ì„œëŠ” ì‹¤í–‰ ì¤‘ì¸ taskê°€ ì²˜ë¦¬ëœ ì´í›„ì— ì¢…ë£Œí•  ìˆ˜ ìˆë„ë¡ <strong>warm shutdown</strong>ì„ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤. workerì˜ main processê°€ <code class=\"language-text\">SIGTERM</code>ì„ ë°›ìœ¼ë©´ taskê°€ ì¢…ë£Œë ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê²Œ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># warm shutdown log\nworker: Warm shutdown (MainProcess)\n\n -------------- celery@fcd56490a11f v4.4.7 (cliffs)\n--- ***** -----\n-- ******* ---- Linux-5.4.0-1045-aws-x86_64-with-debian-10.8\n- *** --- * ---\n- ** ---------- [config]\n- ** ---------- .&gt; app:         airflow.executors.celery_executor:0x7f95\n- ** ---------- .&gt; transport:   redis://redis:6379/0\n- ** ---------- .&gt; results:     postgresql://airflow:**@postgres/airflow\n- *** --- * --- .&gt; concurrency: 16 (prefork)\n-- ******* ---- .&gt; task events: OFF (enable -E to monitor tasks in this worker)\n--- ***** -----\n -------------- [queues]\n                .&gt; default          exchange=default(direct) key=default\n\n[tasks]\n  . airflow.executors.celery_executor.execute_command</code></pre></div>\n<p><a href=\"https://swalloow.github.io/container-tini-dumb-init/\">ì´ì „ ê¸€</a>ì—ì„œ ì„¤ëª…í•œ ê²ƒì²˜ëŸ¼ Airflow ê³µì‹ ì°¨íŠ¸ì—ì„œ worker podì€ <code class=\"language-text\">DUMB_INIT_SETSID=0</code>ìœ¼ë¡œ ì´ë¯¸ ì„¤ì •ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì—ë§Œ SIGNALì´ ì „íŒŒë˜ê³  task processëŠ” ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ\n<strong>scaleDownì´ ë°œìƒí•œë‹¤ë©´, ì‹¤í–‰ ì¤‘ì´ë˜ worker podì´ ì¢…ë£Œë˜ê¸° ë•Œë¬¸ì— pod ë‚´ì— ìˆë˜ task processë„ í•¨ê»˜ ê°•ì œ ì¢…ë£Œë˜ë©´ì„œ taskê°€ ì‹¤íŒ¨</strong>í•˜ê²Œ ë©ë‹ˆë‹¤. ì¥ì‹œê°„ ìˆ˜í–‰ë˜ëŠ” task ì¼ìˆ˜ë¡ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ë§ˆì£¼ì¹  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1MO0UQlSLa2mJvYyNZBajcfzKN14dhufr\" alt=\"learnk8s\"></p>\n<p>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ taskì˜ execution_timeout ì‹œê°„ê¹Œì§€ podê°€ ì¢…ë£Œë˜ì§€ ì•Šë„ë¡ <code class=\"language-text\">terminationGracePeriodSeconds</code>ë¥¼ ì§€ì •í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ê° ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ í”„ë¡œì„¸ìŠ¤ 1ì— <code class=\"language-text\">SIGTERM</code>ì´ ì „ë‹¬ë˜ë”ë¼ë„ podì˜ graceful shutdown ì‹œê°„ ë™ì•ˆ ëŒ€ê¸°í•˜ë¯€ë¡œ task processëŠ” ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤. ì‹œê°„ì´ ëª¨ë‘ ì§€ë‚˜ë©´ <code class=\"language-text\">SIGKILL</code>ì„ í†µí•´ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ê³  podë„ ì‚­ì œë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"ì ìš©-í›„ê¸°\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%9A%A9-%ED%9B%84%EA%B8%B0\" aria-label=\"ì ìš© í›„ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì ìš© í›„ê¸°</h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=16q46FTUBbbJRrccrGFLihodJKODGDW1v\" alt=\"test\"></p>\n<p>ìœ„ì˜ ë¬¸ì œë“¤ì„ ëª¨ë‘ ìˆ˜ì •í•œ ì´í›„ë¶€í„° ì•ˆì •ì ìœ¼ë¡œ workerì˜ í™•ì¥, ì¶•ì†Œê°€ ì´ë£¨ì–´ì¡ŒìŠµë‹ˆë‹¤.<br>\nìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ê°œë°œ í™˜ê²½ì— ë™ì‹œì„± í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ DAGì„ ë¨¼ì € ë§Œë“¤ì–´ì„œ slot ì§€í‘œì— ë”°ë¼ replica countê°€ ì–´ë–»ê²Œ ë³€í™”í•˜ëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤ë©´ ì•ˆì •ì ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/#flapping\">https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/#flapping</a></li>\n<li><a href=\"https://learnk8s.io/graceful-shutdown\">https://learnk8s.io/graceful-shutdown</a></li>\n</ul>","excerpt":"Airflowâ€¦"}}},{"id":"bf47ab9d-ffa5-5ef8-b122-4a731c1ccf6d","title":"ì»¨í…Œì´ë„ˆ í™˜ê²½ì„ ìœ„í•œ ì´ˆê¸°í™” ì‹œìŠ¤í…œ (tini, dumb-init)","slug":"container-tini-dumb-init","publishDate":"May 27, 2022","publishDateISO":"2022-05-27","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"c81d0d2f-c1fe-507d-951c-fa83f8ce2010","childMarkdownRemark":{"id":"0cadd438-2c43-5bca-a5d1-3abec3fb9b65","timeToRead":5,"html":"<p>ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ë°˜ì˜ ë°ì´í„°í”Œë«í¼ì„ ìš´ì˜í•˜ë‹¤ë³´ë©´ ì´ë¯¸ì§€ì˜ <code class=\"language-text\">ENTRYPOINT</code>ì— <code class=\"language-text\">tini</code>, <code class=\"language-text\">dumb-init</code>ê³¼ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Airflowì—ì„œëŠ” dumb-initì„, SparkOperatorì—ì„œëŠ” tinië¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œ ì™œ ì´ëŸ¬í•œ ì´ˆê¸°í™” ì‹œìŠ¤í…œì´ í•„ìš”í•œì§€ ì•Œì•„ë³´ë ¤ í•©ë‹ˆë‹¤.</p>\n<p><br><br></p>\n<h2 id=\"pid-1ì˜-ì—­í• \" style=\"position:relative;\"><a href=\"#pid-1%EC%9D%98-%EC%97%AD%ED%95%A0\" aria-label=\"pid 1ì˜ ì—­í•  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PID 1ì˜ ì—­í• </h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1ki_LL8QtIXzXWjRjX91HXWbUaNfXqk5S\" alt=\"top\"></p>\n<p>ë¦¬ëˆ…ìŠ¤ì—ì„œ <strong>PID 1ì€ ë¶€íŒ… ì‹œ ì»¤ë„ì— ì˜í•´ ìµœì´ˆë¡œ ì‹¤í–‰ë˜ëŠ” init í”„ë¡œì„¸ìŠ¤</strong>ì…ë‹ˆë‹¤.\ninit í”„ë¡œì„¸ìŠ¤ëŠ” SSH ë°ëª¬, Docker ë°ëª¬, Apache/Nginx ì‹œì‘ ë“±ê³¼ ê°™ì€ ì‹œìŠ¤í…œë“¤ì˜ ì‹œì‘ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ê° í”„ë¡œì„¸ìŠ¤ëŠ” ì°¨ë¡€ë¡œ ì¶”ê°€ í•˜ìœ„ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. PID 1ì€ ê²°êµ­ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì˜ ìµœì¢… ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ ì—­í• ì„ í•˜ê²Œ ë©ë‹ˆë‹¤. í˜„ì¬ ë°°í¬íŒë“¤ì€ ë³µì¡í•œ init ëŒ€ì‹  systemdê°€ ì´ˆê¸°í™” ì‹œìŠ¤í…œì˜ ì—­í• ì„ ëŒ€ì‹ í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=16ONXGJUMijn6HUHt4h1tAepWSQw0vDup\" alt=\"zombie\"></p>\n<p>ì—¬ê¸°ê¹Œì§€ëŠ” ì¼ë°˜ì ì¸ ìƒí™©ì…ë‹ˆë‹¤. ë§Œì•½ ì˜ˆê¸°ì¹˜ ëª»í•œ ìƒí™©ìœ¼ë¡œ ì¸í•´ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? bash(PID 5) í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œëœë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤. 5ë²ˆì€ ì´ì œ <strong>ì¢€ë¹„ í”„ë¡œì„¸ìŠ¤</strong>ë¡œ ë³€í•©ë‹ˆë‹¤.</p>\n<p>ì™œ ì´ëŸ° ì¼ì´ ë°œìƒí• ê¹Œìš”? UnixëŠ” ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œ ìƒíƒœë¥¼ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ ìì‹ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œë¥¼ ëª…ì‹œì ìœ¼ë¡œ ëŒ€ê¸°í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì¢€ë¹„ í”„ë¡œì„¸ìŠ¤ëŠ” ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ ì‹œìŠ¤í…œ í˜¸ì¶œì˜ <code class=\"language-text\">waitpid()</code> ì‹œìŠ¤í…œ ëª…ë ¹ì„ ìˆ˜í–‰í•  ë•Œê¹Œì§€ ì¡´ì¬í•©ë‹ˆë‹¤. ì¢€ë¹„ë¥¼ ì œê±°í•˜ê¸° ìœ„í•´ ìì‹ í”„ë¡œì„¸ìŠ¤ì—ì„œ <code class=\"language-text\">waitpid()</code>ë¥¼ í˜¸ì¶œí•˜ëŠ” ì‘ì—…ì„ <strong>reaping</strong>ì´ë¼ê³  í•©ë‹ˆë‹¤.</p>\n<p>ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì´ëŸ¬í•œ ìƒí™©ì´ í° ë¬¸ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§ì€ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ì˜¬ë°”ë¥´ê²Œ ê°€ì ¸ì˜µë‹ˆë‹¤. sshdë¥¼ ì‚¬ìš©í•˜ëŠ” ìœ„ì˜ ì˜ˆì‹œì—ì„œ bashê°€ ì¢…ë£Œë˜ë©´ ìš´ì˜ ì²´ì œëŠ” <code class=\"language-text\">SIGCHLD</code> ì‹ í˜¸ë¥¼ sshdì— ë³´ë‚´ ê¹¨ìš°ê²Œ í•©ë‹ˆë‹¤. sshdëŠ” ì‹ í˜¸ë¥¼ í†µí•´ ì¸ì§€í•˜ê³  ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ê±°ë‘¡ë‹ˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ ì˜ë„ì ìœ¼ë¡œ ì¢…ë£Œë˜ê±°ë‚˜ ì‚¬ìš©ìê°€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œì‹œì¼°ë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ê·¸ ìì‹ í”„ë¡œì„¸ìŠ¤ë“¤ì€ ì–´ë–»ê²Œ ë ê¹Œìš”? ë” ì´ìƒ ìƒìœ„ í”„ë¡œì„¸ìŠ¤ê°€ ì—†ìœ¼ë¯€ë¡œ <strong>ê³ ì•„ ìƒíƒœ(orphaned)</strong>ê°€ ë©ë‹ˆë‹¤.</p>\n<p>init í”„ë¡œì„¸ìŠ¤ëŠ” ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë°”ë¡œ <strong>ê³ ì•„ ìƒíƒœê°€ ëœ ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ê±°ë‘ëŠ” ê²ƒ(adopt)</strong> ì…ë‹ˆë‹¤. init í”„ë¡œì„¸ìŠ¤ì— ì˜í•´ ìƒì„±ëœ ì ì´ ì—†ì§€ë§Œ í”„ë¡œì„¸ìŠ¤ì˜ ë¶€ëª¨ê°€ ë˜ì–´ ì¢€ë¹„ í”„ë¡œì„¸ìŠ¤ê°€ ë˜ì§€ ì•Šë„ë¡ ì •ë¦¬í•´ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1jHWw-uO9qO1QrnlLhr2KuiPIP14HHaQV\" alt=\"adopt\"></p>\n<p>ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” nginx í”„ë¡œì„¸ìŠ¤ë¥¼ ì˜ˆì‹œë¡œ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. ë¨¼ì € nginxëŠ” ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“­ë‹ˆë‹¤. ê·¸ë¦¬ê³  nginx í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë©ë‹ˆë‹¤. ê³ ì•„ê°€ ëœ nginx ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” init í”„ë¡œì„¸ìŠ¤ê°€ ê±°ë‘ì–´ë“¤ì…ë‹ˆë‹¤.</p>\n<p>ì´ëŸ¬í•œ init í”„ë¡œì„¸ìŠ¤ì˜ ì—­í•  ë•ë¶„ì— ìš°ë¦¬ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ë•Œ í¬ê²Œ ì‹ ê²½ì“°ì§€ ì•Šê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í¬í•¨í•œ ì»¨í…Œì´ë„ˆ í™˜ê²½ì˜ ê²½ìš°, ì¡°ê¸ˆ ë‹¤ë¦…ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"ì»¨í…Œì´ë„ˆ-ë‚´ë¶€ì—ì„œì˜-í”„ë¡œì„¸ìŠ¤-ë™ì‘\" style=\"position:relative;\"><a href=\"#%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EB%82%B4%EB%B6%80%EC%97%90%EC%84%9C%EC%9D%98-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EB%8F%99%EC%9E%91\" aria-label=\"ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œì˜ í”„ë¡œì„¸ìŠ¤ ë™ì‘ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œì˜ í”„ë¡œì„¸ìŠ¤ ë™ì‘</h2>\n<p>ë„ì»¤ëŠ” ì»¨í…Œì´ë„ˆ ENTRYPOINT(CMD)ë¡œ ëª…ì‹œëœ í”„ë¡œì„¸ìŠ¤ë¥¼ PID 1ë¡œì¨ ìƒˆë¡œìš´ PID ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ì •ì˜í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ìˆëŠ” PID 1 í”„ë¡œì„¸ìŠ¤ì—ë§Œ ì‹ í˜¸ë¥¼ ë³´ë‚´ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì´ìœ ë¡œ ì»¨í…Œì´ë„ˆëŠ” ê²½ëŸ‰í™” ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ë§Œ ì‹¤í–‰í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ë‘ ê°€ì§€ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<p><strong>1. sh í”„ë¡œì„¸ìŠ¤ê°€ PID 1ì¸ ê²½ìš°</strong><br>\nDockerfileì„ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ì»¨í…Œì´ë„ˆ ëª…ë ¹ì„ ì§€ì •í•˜ë©´ ì‹¤í–‰ì„ ìœ„í•´ ì‰˜ì— ì „ë‹¬ë©ë‹ˆë‹¤. ê·¸ ê²°ê³¼ ì•„ë˜ì™€ ê°™ì€ í”„ë¡œì„¸ìŠ¤ íŠ¸ë¦¬ê°€ ìƒì„±ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- docker run (on the host machine)\n  - /bin/sh (PID 1, inside container)\n    - python my_server.py (PID 2, inside container)</code></pre></div>\n<p>ì‰˜ì„ PID 1ë¡œ ì‚¬ìš©í•˜ë©´ ì‹¤ì œë¡œ 2ë²ˆ í”„ë¡œì„¸ìŠ¤ì— signalë¥¼ ë³´ë‚´ëŠ” ê²ƒì´ ê±°ì˜ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ì‰˜ë¡œ ë³´ë‚¸ ì‹ í˜¸ëŠ” í•˜ìœ„ í”„ë¡œì„¸ìŠ¤ë¡œ ì „ë‹¬ë˜ì§€ ì•Šìœ¼ë©° í”„ë¡œì„¸ìŠ¤ê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ì…¸ì´ ì¢…ë£Œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ê²½ìš° ì»¨í…Œì´ë„ˆë¥¼ ì¢…ë£Œí•˜ê¸° ìœ„í•´ SIGKILLì„ ë³´ë‚´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p><strong>2. ë‚´ í”„ë¡œì„¸ìŠ¤ê°€ PID 1ì¸ ê²½ìš°</strong><br>\nDockerfileì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•˜ë©´ í”„ë¡œì„¸ìŠ¤ê°€ ì¦‰ì‹œ ì‹œì‘ë˜ê³  ì»¨í…Œì´ë„ˆì˜ ì´ˆê¸°í™” ì‹œìŠ¤í…œìœ¼ë¡œì¨ ì‘ë™í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ í”„ë¡œì„¸ìŠ¤ íŠ¸ë¦¬ê°€ ìƒì„±ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- docker run (on the host machine)\n  - python my_server.py (PID 1, inside container)</code></pre></div>\n<p>ì´ëŸ¬í•œ êµ¬ì¡°ê°€ 1ë²ˆ ì˜ˆì‹œë³´ë‹¤ ë‚˜ì€ ë°©ë²•ì…ë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ëŠ” ì´ì œ ì‹¤ì œë¡œ ë³´ë‚´ëŠ” ì‹ í˜¸ë¥¼ ìˆ˜ì‹ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ PID 1ì´ë¯€ë¡œ ì˜ˆìƒëŒ€ë¡œ ì‘ë‹µí•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"pid-1ì˜-signal-propagation-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#pid-1%EC%9D%98-signal-propagation-%EB%AC%B8%EC%A0%9C\" aria-label=\"pid 1ì˜ signal propagation ë¬¸ì œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PID 1ì˜ Signal Propagation ë¬¸ì œ</h2>\n<p>ì»¨í…Œì´ë„ˆ í™˜ê²½ë„ ë§ˆì°¬ê°€ì§€ë¡œ PID 1ì€ ì´ˆê¸°í™” ì‹œìŠ¤í…œì˜ ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.\nì¼ë°˜ì ì¸ í”„ë¡œì„¸ìŠ¤ëŠ” <code class=\"language-text\">TERM</code>ì— ëŒ€í•œ ìì²´ handlerë¥¼ ë“±ë¡í•˜ì—¬ ì¢…ë£Œí•˜ê¸° ì „ cleanupì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡œì„¸ìŠ¤ê°€ signal handlerë¥¼ ë“±ë¡í•˜ì§€ ì•Šì€ ê²½ìš°, ì»¤ë„ì€ ì¼ë°˜ì ìœ¼ë¡œ <code class=\"language-text\">TERM</code> ì‹ í˜¸ì— ëŒ€í•œ ê¸°ë³¸ ë™ì‘ì¸ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>\n<p>ë°˜ë©´ PID 1ì€ <code class=\"language-text\">TERM</code> ì‹ í˜¸ì— ëŒ€í•´ ê¸°ë³¸ ë™ì‘ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ signal handlerë¥¼ ë“±ë¡í•˜ì§€ ì•Šì€ ê²½ìš°, <code class=\"language-text\">TERM</code>ì€ í”„ë¡œì„¸ìŠ¤ì— ì•„ë¬´ëŸ° ì˜í–¥ë„ ë¯¸ì¹˜ì§€ ëª»í•©ë‹ˆë‹¤.\në§Œì•½ ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ í•˜ìœ„ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ë¨¼ì € ì£½ì—ˆë‹¤ë©´, ì»¨í…Œì´ë„ˆ ìƒì— ì¢€ë¹„ í”„ë¡œì„¸ìŠ¤ê°€ ê³„ì† ìŒ“ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>docker runì´ <code class=\"language-text\">SIGTERM</code>ì„ ìˆ˜ì‹ í•˜ë©´ ì»¨í…Œì´ë„ˆ ìì²´ê°€ ì£½ì§€ ì•Šë”ë¼ë„ ì‹ í˜¸ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ì „ë‹¬í•œ ë‹¤ìŒ ì¢…ë£Œë©ë‹ˆë‹¤. docker stop ëª…ë ¹ì„ ì‚¬ìš©í•´ë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤. <code class=\"language-text\">TERM</code> signalì„ ë³´ë‚´ê³  10ì´ˆ ë™ì•ˆ ê¸°ë‹¤ë¦° ë‹¤ìŒ í”„ë¡œì„¸ìŠ¤ê°€ ì—¬ì „íˆ ì¤‘ì§€ë˜ì§€ ì•Šìœ¼ë©´ KILLì´ ì „ì†¡ë˜ì–´ ì •ë¦¬í•  ê¸°íšŒ ì—†ì´ ì¦‰ì‹œ ì¤‘ì§€ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"dumb-init\" style=\"position:relative;\"><a href=\"#dumb-init\" aria-label=\"dumb init permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dumb-init</h2>\n<p>dumb-initì€ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ì»¨í…Œì´ë„ˆë¥¼ ì¼ë°˜ í”„ë¡œì„¸ìŠ¤ì™€ ê°™ì€ í˜•íƒœë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤. systemdê³¼ ë‹¬ë¦¬ ì»¨í…Œì´ë„ˆì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ê²½ëŸ‰í™”ëœ í˜•íƒœë¡œ ê°œë°œëœ ì´ˆê¸°í™” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. dumb-initì„ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ í”„ë¡œì„¸ìŠ¤ íŠ¸ë¦¬ê°€ ìƒì„±ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- docker run (on the host machine)\n  - dumb-init (PID 1, inside container)\n    - python my_server.py (PID 2, inside container)</code></pre></div>\n<p>dumb-initì€ ëª¨ë“  signalì— ëŒ€í•´ signal handlerë¥¼ ë“±ë¡í•˜ê³  í•´ë‹¹ signalì„ í”„ë¡œì„¸ìŠ¤ ì„¸ì…˜ìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. íŒŒì´ì¬ í”„ë¡œì„¸ìŠ¤ëŠ” ë” ì´ìƒ PID 1ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— dumb-initì´ <code class=\"language-text\">TERM</code>ê³¼ ê°™ì€ ì‹ í˜¸ë¥¼ ì „ë‹¬í•  ë•Œ handlerë¥¼ ë“±ë¡í•˜ì§€ ì•Šì•„ë„ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. dumb-initì€ signal propagation ë¿ë§Œ ì•„ë‹ˆë¼ ê³ ì•„ ìƒíƒœê°€ ëœ ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ê±°ë‘ëŠ” ì—­í• (adopt)ë„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"docker\"><pre class=\"language-docker\"><code class=\"language-docker\"><span class=\"token keyword\">RUN</span> apt install dumb<span class=\"token punctuation\">-</span>init\n<span class=\"token keyword\">ENTRYPOINT</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"/usr/bin/dumb-init\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"--\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/my/script\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>ì‚¬ìš© ë°©ë²•ì€ ì •ë§ ê°„ë‹¨í•©ë‹ˆë‹¤. ì´ë¯¸ì§€ì— ë°”ì´ë„ˆë¦¬ë¥¼ ì„¤ì¹˜í•˜ê³  ëª…ë ¹ì–´ ì‹¤í–‰í•  ë•Œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"airflow-ì´ë¯¸ì§€ì—ì„œ-dumb-init-ì‚¬ìš©\" style=\"position:relative;\"><a href=\"#airflow-%EC%9D%B4%EB%AF%B8%EC%A7%80%EC%97%90%EC%84%9C-dumb-init-%EC%82%AC%EC%9A%A9\" aria-label=\"airflow ì´ë¯¸ì§€ì—ì„œ dumb init ì‚¬ìš© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow ì´ë¯¸ì§€ì—ì„œ dumb-init ì‚¬ìš©</h2>\n<p>Airflowë„ dumb-initë¥¼ ENTRYPOINTì—ì„œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. webserver, worker, scheduler podì—ì„œ <code class=\"language-text\">bash -c ENTRYPOINT</code>ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° bashëŠ” ìì‹ì—ê²Œ signalì„ ì „ë‹¬ ì•ˆí•˜ê¸° ë•Œë¬¸ì— dumb-init ì‚¬ìš©ì´ í•„ìš”í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œëŠ” í™˜ê²½ë³€ìˆ˜ë¥¼ í†µí•´ ë‹¤ë¥´ê²Œ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì„¤ì • ê°’ì˜ ì°¨ì´ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><code class=\"language-text\">DUMB_INIT_SETSID=1</code> : ë©”ì¸ í”„ë¡œì„¸ìŠ¤ ê·¸ë£¹ì˜ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì— SIGNAL ì „íŒŒ</li>\n<li><code class=\"language-text\">DUMB_INIT_SETSID=0</code> : ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì—ë§Œ SIGNAL ì „íŒŒ</li>\n</ul>\n<p>ê³µì‹ ì°¨íŠ¸ì—ì„œ worker podì€ 0ìœ¼ë¡œ ë‚˜ë¨¸ì§€ëŠ” 1ë¡œ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>\nì´ìœ ëŠ” Celery Workerì˜ warm shutdownì„ ì§€ì›í•˜ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. íŠ¹íˆ Airflow on Kubernetes êµ¬ì„±ì—ì„œ CeleryExecutorë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, taskì˜ ì •ìƒì ì¸ ì¢…ë£Œë¥¼ ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤. ì´ ë¶€ë¶„ì€ ë‹¤ìŒ í¬ìŠ¤íŠ¸ì— ì´ì–´ì„œ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem/\">https://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem/</a></li>\n<li><a href=\"https://engineeringblog.yelp.com/2016/01/dumb-init-an-init-for-docker.html\">https://engineeringblog.yelp.com/2016/01/dumb-init-an-init-for-docker.html</a></li>\n<li><a href=\"https://github.com/Yelp/dumb-init\">https://github.com/Yelp/dumb-init</a></li>\n<li><a href=\"https://airflow.apache.org/docs/docker-stack/entrypoint.html\">https://airflow.apache.org/docs/docker-stack/entrypoint.html</a></li>\n</ul>","excerpt":"ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ë°˜ì˜ ë°ì´í„°í”Œë«í¼ì„ ìš´ì˜í•˜ë‹¤ë³´ë©´ ì´ë¯¸ì§€ì˜ ì— , ê³¼ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ Airflowì—ì„œëŠ” dumbâ€¦"}}},{"id":"784b5b9c-9d53-5ffd-9cb1-e61df96893dd","title":"JupyterHub on Kubernetes","slug":"jupyterhub-on-kubernetes","publishDate":"October 23, 2021","publishDateISO":"2021-10-23","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"861d6065-30d6-5b6e-9d02-e2e7e4f7ddea","childMarkdownRemark":{"id":"ccc6a49d-08cc-55e8-90e0-5dece449d643","timeToRead":4,"html":"<p>ì¼ë°˜ì ìœ¼ë¡œ JupyterHubë¥¼ Kubernetes í™˜ê²½ì— ë°°í¬í•  ë•Œ Helm Chartë¥¼ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>\nì´ ê¸€ì—ì„œëŠ” <a href=\"https://github.com/jupyterhub/zero-to-jupyterhub-k8s\">zero-to-jupyterhub-k8s Helm Chart</a>ì— í¬í•¨ëœ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì— ëŒ€í•´ ì†Œê°œí•´ë³´ë ¤ í•©ë‹ˆë‹¤.</p>\n<p><strong>ëª©ì°¨</strong></p>\n<ul>\n<li><a href=\"https://swalloow.github.io/jupyterhub-on-kubernetes/#kubespawner\">kubespawner</a></li>\n<li><a href=\"https://swalloow.github.io/jupyterhub-on-kubernetes/#zero-to-jupyterhub-k8s-chart\">zero-to-jupyterhub-k8s chart</a></li>\n<li><a href=\"https://swalloow.github.io/jupyterhub-on-kubernetes/#proxy\">proxy</a></li>\n<li><a href=\"https://swalloow.github.io/jupyterhub-on-kubernetes/#singleuser-profile\">singleuser, profile</a></li>\n<li><a href=\"https://swalloow.github.io/jupyterhub-on-kubernetes/#idle-culler\">idle-culler</a></li>\n<li><a href=\"https://swalloow.github.io/jupyterhub-on-kubernetes/#user-scheduler\">user-scheduler</a></li>\n<li><a href=\"https://swalloow.github.io/jupyterhub-on-kubernetes/#image-pre-puller\">image-pre-puller</a></li>\n<li><a href=\"https://swalloow.github.io/jupyterhub-on-kubernetes/#monitoring\">monitoring</a></li>\n</ul>\n<p><br><br></p>\n<h2 id=\"kubespawner\" style=\"position:relative;\"><a href=\"#kubespawner\" aria-label=\"kubespawner permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>KubeSpawner</h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1OaKRO1t73IJoFz267WhZGspKHIvzztFB\" alt=\"jhub\"></p>\n<p>ë¨¼ì € JupyterHubì˜ ê¸°ë³¸ ì•„í‚¤í…ì³ì— ëŒ€í•´ ê°„ë‹¨íˆ ì§šê³  ë„˜ì–´ê°€ë³´ê² ìŠµë‹ˆë‹¤.\nJupyterHubì—ëŠ” ë…¸íŠ¸ë¶ ì„œë²„ë¥¼ ë‹¤ì–‘í•œ ë°©ë²•ì„ í†µí•´ í”„ë¡œë¹„ì €ë‹í•˜ê¸° ìœ„í•´ <strong>Spawner</strong>ë¼ëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. K8S í™˜ê²½ì´ë¼ë©´ KubeSpawnerë¥¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í”„ë¡œë¹„ì €ë‹ ë‹¨ê³„ì—ì„œ kube-scheduler ê¸°ë°˜ìœ¼ë¡œ ë‹¤ì–‘í•œ K8S ë¦¬ì†ŒìŠ¤ë¥¼ ë…¸íŠ¸ë¶ ì„œë²„ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ KubeSpawnerëŠ” <strong>ì‚¬ìš©ìì—ê²Œ ê²©ë¦¬ëœ í™˜ê²½ê³¼ ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µ</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>ë…¸íŠ¸ë¶ Pod ìƒì„± ì´ë²¤íŠ¸</strong><br>\në…¸íŠ¸ë¶ì´ ìƒì„±ë˜ëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>í• ë‹¹ ê°€ëŠ¥í•œ ë…¸ë“œ íƒìƒ‰ (NodeSelector, Affinity)</li>\n<li>ì—†ìœ¼ë©´ CAì— ì˜í•´ ë…¸ë“œ ì¶”ê°€, ë…¸ë“œê°€ Ready ìƒíƒœê°€ ë  ë•Œê¹Œì§€ ëŒ€ê¸°</li>\n<li>Podì„ ì¶”ê°€ëœ ë…¸ë“œì— í• ë‹¹</li>\n<li>ë…¸íŠ¸ë¶ ì´ë¯¸ì§€ pull</li>\n<li>ë…¸íŠ¸ë¶ ì»¨í…Œì´ë„ˆ ì‹¤í–‰</li>\n</ul>\n<br>\n<h2 id=\"zero-to-jupyterhub-k8s-chart\" style=\"position:relative;\"><a href=\"#zero-to-jupyterhub-k8s-chart\" aria-label=\"zero to jupyterhub k8s chart permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>zero-to-jupyterhub-k8s Chart</h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1j1PF9_mQPo3pic6ywAsG3wxOABVxshf-\" alt=\"jhub-chart-arc\"></p>\n<p><a href=\"https://github.com/jupyterhub/zero-to-jupyterhub-k8s\">zero-to-jupyterhub-k8s Helm Chart</a> ì˜ ì•„í‚¤í…ì³ëŠ” ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ìŠµë‹ˆë‹¤. ê¸°ì¡´ JupyterHubì™€ ë‹¬ë¦¬ hook-image-awaiter, jupyterhub-idle-culler ë“±ì˜ ì»´í¬ë„ŒíŠ¸ê°€ ì¶”ê°€ëœ ëª¨ìŠµì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ëŒ€ëµì ìœ¼ë¡œ ì–´ë–¤ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"proxy\" style=\"position:relative;\"><a href=\"#proxy\" aria-label=\"proxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proxy</h2>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">proxy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ClusterIP\n  <span class=\"token key atrule\">chp</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">networkPolicy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n<p>ë¨¼ì € CHP(configurable-http-proxy) ì„¤ì • ë¶€ë¶„ì…ë‹ˆë‹¤. JupyterHubì—ì„œ <strong>ProxyëŠ” ì¸ì¦, ì‚¬ìš©ì ë…¸íŠ¸ë¶ ë¼ìš°íŒ…, í—¬ìŠ¤ ì²´í¬ ë“± ë‹¤ì–‘í•œ ì—­í• ì„ ìˆ˜í–‰</strong>í•©ë‹ˆë‹¤. ì°¨íŠ¸ì—ì„œëŠ” ìœ ì—°í•œ Proxy ì„¤ì •ì„ ìœ„í•´ CHP, Traefik ë“± ë‹¤ì–‘í•œ ì˜µì…˜ì„ ì§€ì›í•©ë‹ˆë‹¤. ì•„í‚¤í…ì³ëŠ” aws-load-balancer-controllerë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ê°€ì •í•˜ì— êµ¬ì„±í•œ ì˜ˆì‹œì…ë‹ˆë‹¤. ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ì‚¬ìš©ìëŠ” ì¤‘ê°„ì˜ Proxy ì»´í¬ë„ŒíŠ¸ë¥¼ ê±°ì³ JupyterHubì— ì ‘ì†í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"singleuser-profile\" style=\"position:relative;\"><a href=\"#singleuser-profile\" aria-label=\"singleuser profile permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SingleUser, Profile</h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1C60z5F13WvN3HzsFkv2A09Ja8yMzIGtL\" alt=\"spawner-op\"></p>\n<p>singleUserëŠ” ì‚¬ìš©ìì˜ ë…¸íŠ¸ë¶ í™˜ê²½ì„ ì˜ë¯¸í•˜ë©° ì‚¬ìš©ìëŠ” ë¯¸ë¦¬ ì •ì˜ëœ í”„ë¡œí•„(ì´ë¯¸ì§€)ì„ ì„ íƒí•˜ì—¬ ì›í•˜ëŠ” ë…¸íŠ¸ë¶ í™˜ê²½ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ ì•„í‚¤í…ì³ì—ì„œëŠ” <strong>PV, PVCë¥¼ í†µí•´ ì‚¬ìš©ìì—ê²Œ ê°œì¸, ê³µìš© ë³¼ë¥¨ì„ í• ë‹¹</strong>í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">profileList</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">display_name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Python Notebook\"</span>\n    <span class=\"token key atrule\">description</span><span class=\"token punctuation\">:</span> <span class=\"token key atrule\">\"Spec</span><span class=\"token punctuation\">:</span> CPU 2<span class=\"token punctuation\">,</span> Memory 4G / Spark 3.1\"\n    <span class=\"token key atrule\">kubespawner_override</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> jupyter/python<span class=\"token punctuation\">-</span>notebook<span class=\"token punctuation\">:</span>hub<span class=\"token punctuation\">-</span>1.4.2\n      <span class=\"token key atrule\">cpu_limit</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n      <span class=\"token key atrule\">mem_limit</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"4G\"</span>\n      <span class=\"token key atrule\">cpu_guarantee</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n      <span class=\"token key atrule\">mem_guarantee</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2G\"</span>\n      <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">TZ</span><span class=\"token punctuation\">:</span> Asia/Seoul\n      <span class=\"token key atrule\">lifecycle_hooks</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">postStart</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">exec</span><span class=\"token punctuation\">:</span>\n            command<span class=\"token punctuation\">:</span></code></pre></div>\n<p>í”„ë¡œí•„ì—ëŠ” ë¦¬ì†ŒìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ lifecycle_hook, environment ë“± K8Sì˜ ë‹¤ì–‘í•œ ë¦¬ì†ŒìŠ¤ë¥¼ í•¨ê»˜ ì •ì˜í•˜ì—¬ ìœ ì—°í•˜ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë…¸íŠ¸ë¶ ê¸°ë³¸ ì´ë¯¸ì§€ëŠ” <a href=\"https://github.com/jupyter/docker-stacks\">jupyter/docker-stacks</a> ì €ì¥ì†Œë¡œë¶€í„° ìƒì„±í•œë‹¤ë©´ í¸í•˜ê²Œ íŒ¨í‚¤ì§€ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>resource guarantee</strong><br>\nresource guaranteeëŠ” ëª¨ë“  ì‚¬ìš©ìê°€ ìµœì†Œí•œ <code class=\"language-text\">_guarantee</code> ë§Œí¼ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° ìµœëŒ€ <code class=\"language-text\">_limit</code> ë§Œí¼ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µë°›ì„ ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ìì—ê²Œ 2Gì˜ RAMì´ ë³´ì¥ë˜ëŠ” ê²½ìš°, ì‚¬ìš©ìëŠ” 2G ì´ìƒì˜ RAMì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¸ì„œì—ì„œëŠ” guarantee ê°’ì„ limitì˜ ë°˜ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"idle-culler\" style=\"position:relative;\"><a href=\"#idle-culler\" aria-label=\"idle culler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Idle Culler</h2>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">cull</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">86400</span>\n  <span class=\"token key atrule\">every</span><span class=\"token punctuation\">:</span> <span class=\"token number\">600</span>\n  <span class=\"token key atrule\">concurrency</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span></code></pre></div>\n<p>idle-cullerëŠ” ì¼ì • ì£¼ê¸° ë™ì•ˆ ë¯¸ì‚¬ìš©ëœ ë…¸íŠ¸ë¶ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.\nì´ë¥¼ í†µí•´ ë…¸íŠ¸ë¶ ë¦¬ì†ŒìŠ¤ë¥¼ ìµœì í™”í•˜ì—¬ ìš´ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nidle-cullerë¥¼ í™œì„±í™”í•˜ë©´ JupyterHub Serviceì— ë“±ë¡ë˜ë©° ì´í›„ JupyterHub APIë¥¼ í†µí•´ ì‚¬ìš©ì í™œë™ì„ ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"user-scheduler\" style=\"position:relative;\"><a href=\"#user-scheduler\" aria-label=\"user scheduler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Scheduler</h2>\n<p>user schedulerëŠ” ë…¸íŠ¸ë¶ ë¦¬ì†ŒìŠ¤ë¥¼ ì ì ˆí•œ ë…¸ë“œì— í• ë‹¹í•˜ê¸° ìœ„í•´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.\nê¸°ë³¸ K8S ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ì—¬ëŸ¬ ë…¸ë“œì— ë¶„ì‚°í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ í• ë‹¹í•˜ì§€ë§Œ, user schedulerëŠ” ê°€ì¥ ë¦¬ì†ŒìŠ¤ë¥¼ ë§ì´ ì ìœ í•˜ê³  ìˆëŠ” ë…¸ë“œì— ë¦¬ì†ŒìŠ¤ë¥¼ í• ë‹¹í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ <strong>Cluster AutoScaler, idle-cullerì™€ ì—°ê³„í•˜ì—¬ ë…¸íŠ¸ë¶ ë¦¬ì†ŒìŠ¤ë¥¼ ìµœì í™”í•˜ì—¬ ìš´ì˜</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1XIgeSDAIxdXAvM0V2y1wQJvlwGoQOnwB\" alt=\"user-scheduler\"></p>\n<p>ì˜ˆë¥¼ ë“¤ì–´ ì¼ë°˜ì ì¸ ì„¤ì •ì´ë¼ë©´, podê°€ ë‹¤ì–‘í•œ ë…¸ë“œì— ë¶„ì‚°ë˜ì–´ í´ëŸ¬ìŠ¤í„° scale-in ì¡°ê±´ê¹Œì§€ ë„ë‹¬í•˜ê¸°ê°€ ì–´ë µìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ user-schedulerë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ë…¸ë“œì— í• ë‹¹ëœ podì˜ ìˆ˜ê°€ ì ì§„ì ìœ¼ë¡œ ì¤„ì–´ë“¤ê²Œ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"image-pre-puller\" style=\"position:relative;\"><a href=\"#image-pre-puller\" aria-label=\"image pre puller permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Image Pre Puller</h2>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">prePuller</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 10m\n      <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 8Mi\n  <span class=\"token key atrule\">hook</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">pullOnlyOnChanges</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<p>Image prePullerëŠ” ì‚¬ìš©ìê°€ ë…¸íŠ¸ë¶ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ë…¸ë“œì— ë¯¸ë¦¬ ì´ë¯¸ì§€ë¥¼ ì¤€ë¹„í•˜ì—¬ ë…¸íŠ¸ë¶ í™˜ê²½ ìƒì„± ì‹œê°„ì„ ë‹¨ì¶•ì‹œì¼œ ì¤ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ CAì— ì˜í•´ ë…¸ë“œê°€ ìƒˆë¡œ ì¶”ê°€ëœë‹¤ê±°ë‚˜ ìƒˆë¡œìš´ ì´ë¯¸ì§€ê°€ í”„ë¡œí•„ì— ë“±ë¡ëœ ê²½ìš°, ë¯¸ë¦¬ ë…¸ë“œì— í”„ë¡œí•„ ì´ë¯¸ì§€ë¥¼ pull í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"monitoring\" style=\"position:relative;\"><a href=\"#monitoring\" aria-label=\"monitoring permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monitoring</h2>\n<p>JupyterHubëŠ” <code class=\"language-text\">/metrics</code> endpointë¥¼ í†µí•´ prometheus ë©”íŠ¸ë¦­ì„ ì§€ì›í•©ë‹ˆë‹¤. ì£¼ìš” ì§€í‘œë¡œëŠ” í™œì„± ì‚¬ìš©ì ìˆ˜, ë…¸íŠ¸ë¶ ì„œë²„ ìƒì„±ê¹Œì§€ ì†Œìš”ë˜ëŠ” ì‹œê°„ ë“±ì´ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš© ê°€ëŠ¥í•œ ì „ì²´ ë©”íŠ¸ë¦­ì€ <a href=\"https://jupyterhub.readthedocs.io/en/stable/reference/metrics.html\">JupyterHub ë¬¸ì„œ</a>ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në˜í•œ  <a href=\"https://github.com/jupyterhub/grafana-dashboards\">jupyterhub/grafana-dashboards</a> ì €ì¥ì†Œë¥¼ í†µí•´ ë¯¸ë¦¬ ì •ì˜ëœ ìš´ì˜ ëŒ€ì‹œë³´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‰½ê²Œ ëª¨ë‹ˆí„°ë§ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://zero-to-jupyterhub.readthedocs.io/en/latest/index.html\">https://zero-to-jupyterhub.readthedocs.io/en/latest/index.html</a></li>\n<li><a href=\"https://jupyterhub.readthedocs.io/en/stable/index.html\">https://jupyterhub.readthedocs.io/en/stable/index.html</a></li>\n</ul>","excerpt":"ì¼ë°˜ì ìœ¼ë¡œ JupyterHubë¥¼ Kubernetes í™˜ê²½ì— ë°°í¬í•  ë•Œ Helm Chartë¥¼ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.\nì´ ê¸€ì—ì„œëŠ” zero-toâ€¦"}}},{"id":"8f863c41-ab16-5084-9ee1-f00bba67af7f","title":"JupyterHubì— Tensorboard ì—°ë™í•˜ê¸°","slug":"jupyterhub-tensorboard","publishDate":"October 23, 2021","publishDateISO":"2021-10-23","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"eba6ee8a-eb29-50ba-97f2-89eece6cf63a","childMarkdownRemark":{"id":"20b1d52e-ca00-582b-a661-02275bf14cb9","timeToRead":1,"html":"<p>ì´ ê¸€ì—ì„œëŠ” JupyterHub ì‚¬ìš©ì í™˜ê²½ì— tensorboardë¥¼ proxy í˜•íƒœë¡œ ì—°ë™í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤. ì—°ë™ ê³¼ì •ìœ¼ë¡œ jupyter-server-proxy ë¼ëŠ” extensionì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"ê¸°ì¡´-ì—°ë™-ë°©ì‹\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EC%A1%B4-%EC%97%B0%EB%8F%99-%EB%B0%A9%EC%8B%9D\" aria-label=\"ê¸°ì¡´ ì—°ë™ ë°©ì‹ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ê¸°ì¡´ ì—°ë™ ë°©ì‹</h2>\n<p>Jupyter Notebookì— Tensorboardë¥¼ ì—°ë™í•˜ëŠ” ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ ê³µì‹ë¬¸ì„œì— ë‚˜ì™€ìˆëŠ” <strong>%tensorboard</strong> ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">%load_ext tensorboard\n%tensorboard --logdir logs</code></pre></div>\n<p>ì´ ë°©ë²•ì€ ê°„ë‹¨í•˜ì§€ë§Œ ë…¸íŠ¸ë¶ ë‚´ì—ì„œ ì ‘ê·¼í•˜ê±°ë‚˜ IPì£¼ì†Œ:í¬íŠ¸ë²ˆí˜¸ë¥¼ í†µí•´ ì ‘ê·¼í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ë”°ë¼ì„œ JupyterHubì™€ ê°™ì´ ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ì“°ëŠ” í™˜ê²½ì´ë¼ë©´ ë‚˜ì˜ Tensorboard í”„ë¡œì„¸ìŠ¤ì— ì–´ë–¤ ì£¼ì†Œë¥¼ í†µí•´ ì ‘ê·¼í•´ì•¼ í•˜ëŠ”ì§€ ë§¤ë²ˆ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.\në˜í•œ JupyterHubëŠ” ì¸ì¦ ê³¼ì •ì„ ê±°ì¹˜ëŠ” ë°˜ë©´ í”„ë¡œì„¸ìŠ¤ë¡œ ì§ì ‘ ë„ìš°ëŠ” í…ì„œë³´ë“œëŠ” ì¸ì¦ ì—†ì´ ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"jupyter-server-proxy\" style=\"position:relative;\"><a href=\"#jupyter-server-proxy\" aria-label=\"jupyter server proxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>jupyter-server-proxy</h2>\n<p>jupyter-server-proxyëŠ” ì™¸ë¶€ ì›¹ ì„œë¹„ìŠ¤ì˜ í”„ë¡ì‹œë¥¼ ì§€ì›í•˜ëŠ” extension ì…ë‹ˆë‹¤.\njupyter-server-proxyë¥¼ í†µí•´ ì—°ë™í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>tensorboard í”„ë¡œì„¸ìŠ¤ëŠ” JupyterLab Launcherë¥¼ í†µí•´ ìƒì„±ë©ë‹ˆë‹¤</li>\n<li>í”„ë¡ì‹œë¥¼ í†µí•´ /hub/proxy/ í•˜ìœ„ì˜ ì£¼ì†Œë¡œ ì—°ê²°ë˜ë¯€ë¡œ ì¸ì¦ì´ ê·¸ëŒ€ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤</li>\n</ul>\n<br>\n<h2 id=\"jupyter-tensorboard-proxy-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#jupyter-tensorboard-proxy-%EC%84%A4%EC%B9%98\" aria-label=\"jupyter tensorboard proxy ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>jupyter-tensorboard-proxy ì„¤ì¹˜</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># pip install jupyter-tensorboard-proxy</span>\n\n<span class=\"token comment\"># log path</span>\nlog_dir <span class=\"token operator\">=</span> <span class=\"token string\">\"/home/jovyan/logs/\"</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y%m%d-%H%M\"</span><span class=\"token punctuation\">)</span>\ntensorboard_callback <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>keras<span class=\"token punctuation\">.</span>callbacks<span class=\"token punctuation\">.</span>TensorBoard<span class=\"token punctuation\">(</span>log_dir<span class=\"token operator\">=</span>log_dir<span class=\"token punctuation\">,</span> histogram_freq<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ì„¤ì¹˜ ë°©ë²•ì€ ì•„ì£¼ ê°„ë‹¨í•©ë‹ˆë‹¤. singleuser profile ì´ë¯¸ì§€ì— ìœ„ì˜ íŒ¨í‚¤ì§€ë§Œ ì„¤ì¹˜í•´ì£¼ë©´ ë©ë‹ˆë‹¤. ê¸°ë³¸ìœ¼ë¡œ ë°”ë¼ë³´ëŠ” ë¡œê·¸ ê²½ë¡œëŠ” $HOME/logs ì…ë‹ˆë‹¤. ë”°ë¼ì„œ tensorflow ì½”ë“œì—ì„œ ë¡œê·¸ ê²½ë¡œë¥¼ ì—°ê²°í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=161QSE21LbDPZzQzG6Szq3-IiER1dqbgT\" alt=\"extension\"></p>\n<br>\n<h2 id=\"ì •ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë¦¬</h2>\n<p>tensorboardê°€ ì•„ë‹ˆë”ë¼ë„ jupyter-server-proxyë¥¼ ì‚¬ìš©í•˜ë©´ Spark UI, R Studio Session ë“± ë‹¤ì–‘í•œ ì™¸ë¶€ ì›¹ ì„œë¹„ìŠ¤ë“¤ê³¼ ì—°ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"https://github.com/jupyterhub/jupyter-server-proxy\">https://github.com/jupyterhub/jupyter-server-proxy</a></li>\n<li><a href=\"https://github.com/kopwei/jupyter-tensorboard-proxy\">https://github.com/kopwei/jupyter-tensorboard-proxy</a></li>\n</ul>","excerpt":"ì´ ê¸€ì—ì„œëŠ” JupyterHub ì‚¬ìš©ì í™˜ê²½ì— tensorboardë¥¼ proxyâ€¦"}}},{"id":"f4493d83-09a7-5393-83bc-85f0047f4b7a","title":"Data Mesh ì•„í‚¤í…ì³ì˜ ë„¤ ê°€ì§€ ì›ì¹™","slug":"data-mesh-principle","publishDate":"September 25, 2021","publishDateISO":"2021-09-25","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"1f16465f-7355-5975-a52c-8fd36c5a3819","childMarkdownRemark":{"id":"fc0295d1-3d94-50ed-be82-a4cd9f724dc7","timeToRead":5,"html":"<p>ì´ ê¸€ì€ martinfowler.comì˜ <a href=\"https://martinfowler.com/articles/data-mesh-principles.html\">Data Mesh Principles and Logical Architecture</a> ì›ë¬¸ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. Data Mesh ì•„í‚¤í…ì³ì˜ ë„¤ ê°€ì§€ ì›ì¹™ì— ëŒ€í•œ ë‚´ìš©ì€ <a href=\"https://martinfowler.com/articles/data-monolith-to-mesh.html\">How to Move Beyond a Monolithic Data Lake to a Distributed Data Mesh</a>ì˜ í›„ì†ê¸€ ì…ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"the-great-divide-of-data\" style=\"position:relative;\"><a href=\"#the-great-divide-of-data\" aria-label=\"the great divide of data permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The great divide of data</h2>\n<p>ì˜¤ëŠ˜ ë‚ ì˜ ë°ì´í„° í™˜ê²½ì€ <strong>ìš´ì˜ ë°ì´í„° ì˜ì—­</strong>ê³¼ <strong>ë¶„ì„ ë°ì´í„° ì˜ì—­</strong>ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš´ì˜ ë°ì´í„°ëŠ” ì£¼ë¡œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— í•´ë‹¹í•˜ë©° íŠ¸ëœì­ì…˜ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤. ë¶„ì„ ë°ì´í„°ëŠ” íŠ¹ì • ì‹œê°„ ê²½ê³¼ì— ë”°ë¼ ì§‘ê³„ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°ì´ë©° ì£¼ë¡œ BI / ë¶„ì„ ë¦¬í¬íŠ¸ë‚˜ ML ëª¨ë¸ë§ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</p>\n<p><img src=\"https://martinfowler.com/articles/data-mesh-principles/data-planes.png\" alt=\"data-planes\"></p>\n<p>ë°ì´í„° ì•„í‚¤í…ì³ì™€ ì¡°ì§ êµ¬ì¡° ë˜í•œ ë‘ ê°€ì§€ ë°ì´í„° ì˜ì—­ì„ ë°˜ì˜í•©ë‹ˆë‹¤.\nìš´ì˜ í™˜ê²½ìœ¼ë¡œë¶€í„° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ETL í”„ë¡œì„¸ìŠ¤ë¥¼ ê±°ì³ ë¶„ì„ ë°ì´í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\nê·¸ë¦¬ê³  ë¶„ì„ ë°ì´í„°ë¥¼ ë˜ ë‹¤ì‹œ ìš´ì˜ í™˜ê²½ì— í™œìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.\nì´ëŸ¬í•œ ë°ì´í„° íë¦„ì€ ë¹ˆë²ˆí•œ ETL í”„ë¡œì„¸ìŠ¤ì˜ ì‹¤íŒ¨ì™€ ë³µì¡í•œ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ì´ì–´ì¡ŒìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://martinfowler.com/articles/data-mesh-principles/data-warehouse.png\" alt=\"dw\"></p>\n<p>ë¶„ì„ ë°ì´í„° ì˜ì—­ì€ <strong>ë°ì´í„° ë ˆì´í¬ì™€ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤</strong>ë¼ëŠ” ì•„í‚¤í…ì³ë¡œ ë‚˜ëˆ„ì–´ì§‘ë‹ˆë‹¤.\në°ì´í„° ë ˆì´í¬ëŠ” ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ í™˜ê²½ì„ ì§€ì›í•˜ë©° ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ëŠ” ë¶„ì„ ë¦¬í¬íŠ¸ ë° BI ë„êµ¬ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</p>\n<p><img src=\"https://martinfowler.com/articles/data-mesh-principles/data-lake.png\" alt=\"datalake\"></p>\n<p>Data Meshì—ì„œëŠ” ë¶„ì„ ë°ì´í„° ì˜ì—­ì— ì¤‘ì ì„ ë‘ê³  ë‘ ê°€ì§€ ë°ì´í„° ì˜ì—­ì„ ì—°ê²°í•˜ê³  í•©ë‹ˆë‹¤.\në‘ ê°€ì§€ ì˜ì—­ì˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ê¸°ìˆ  ìŠ¤íƒì„ ë‚˜ëˆ„ê³  ì¡°ì§ê³¼ íŒ€ì„ ë¶„ë¦¬í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.\në§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì³ë¡œ ì¸í•´ ìš´ì˜ ë°ì´í„°ë„ ê³¼ê±°ì— ë¹„í•´ ë§ì´ ì„±ìˆ™í•´ì¡Œìœ¼ë©° ë°ì´í„°ëŠ” ê° ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ APIë¥¼ í†µí•´ ì œì–´ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë¶„ì„ ë°ì´í„°ì— ëŒ€í•œ ê´€ë¦¬ ë° ì ‘ê·¼ ì œì–´ëŠ” ì—¬ì „íˆ ì–´ë ¤ìš´ ê³¼ì œë¡œ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤. Data MeshëŠ” ì´ ë¶€ë¶„ì„ ì¤‘ì ì ìœ¼ë¡œ í•´ê²°í•˜ê³  í•©ë‹ˆë‹¤.</p>\n<p>Data Meshì˜ ëª©í‘œëŠ” ë¶„ì„ ë°ì´í„°ì™€ íˆìŠ¤í† ë¦¬ë¡œë¶€í„° ê°€ì¹˜ë¥¼ ì–»ê¸° ìœ„í•œ ê¸°ë°˜ì„ ë§Œë“œëŠ” ê²ƒ ì…ë‹ˆë‹¤.\në°ì´í„° í™˜ê²½ì˜ ì§€ì†ì ì¸ ë³€í™”ì—ë„ ëŒ€ì‘í•˜ê³  ë°ì´í„°ì˜ í’ˆì§ˆê³¼ ë¬´ê²°ì„±ì„ ì œê³µí•˜ë©´ì„œ ë°ì´í„° ì‚¬ìš©ì— ëŒ€í•œ ë‹¤ì–‘í•œ ìš”êµ¬ì‚¬í•­ì„ ì§€ì›í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” ì´ë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•œ ë„¤ ê°€ì§€ ì›ì¹™ì„ ì œì•ˆí•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"domain-ownership\" style=\"position:relative;\"><a href=\"#domain-ownership\" aria-label=\"domain ownership permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Domain Ownership</h2>\n<p>Data MeshëŠ” ì§€ì†ì ì¸ ë³€í™”ì™€ í™•ì¥ì„±ì„ ì§€ì›í•˜ê¸° ìœ„í•´ ë°ì´í„°ë¥¼ ê°€ì¥ ì˜ ì´í•´í•˜ëŠ” ì‚¬ëŒë“¤ì—ê²Œ <strong>ì±…ì„ì„ ë¶„ì‚°í•˜ê³  íƒˆì¤‘ì•™í™”</strong>í•˜ëŠ”ë° ê¸°ë°˜ì„ ë‘ê³  ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ë¶„ì„ ë°ì´í„°, ë©”íƒ€ ë°ì´í„°ì— ëŒ€í•œ ì†Œìœ ê¶Œì„ ì–´ë–»ê²Œ ë‚˜ëˆ„ì–´ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•œ ì˜ë¬¸ì´ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ìš”ì¦˜ ì¡°ì§ êµ¬ì¡°ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ì„ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì§‘ë‹ˆë‹¤. ì´ëŸ¬í•œ êµ¬ì¡°ë¥¼ í†µí•´ ë„ë©”ì¸ ê²½ê³„ì— ë”°ë¼ ì§€ì†ì ì¸ ë°œì „ì„ í•  ìˆ˜ ìˆê²Œ ë§Œë“­ë‹ˆë‹¤. ë”°ë¼ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ì˜ ê²½ê³„(Bounded Context)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì´ ì ì ˆí•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ëŸ¬í•œ ê¸°ì¤€ì„ ê°€ì§€ê³  ë¶„ë¦¬í•˜ë ¤ë©´ ë¶„ì„ ë°ì´í„°ë¥¼ ë„ë©”ì¸ ë³„ë¡œ ë‚˜ëˆ„ëŠ” ì•„í‚¤í…ì³ë¥¼ ëª¨ë¸ë§í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ì•„í‚¤í…ì²˜ì—ì„œ ë„ë©”ì¸ì˜ ì¸í„°í˜ì´ìŠ¤ì—ëŠ” ìš´ì˜ ë°ì´í„° ë¿ë§Œ ì•„ë‹ˆë¼ ë„ë©”ì¸ì´ ì œê³µí•˜ëŠ” ë¶„ì„ ë°ì´í„°ë„ í¬í•¨ë©ë‹ˆë‹¤.</p>\n<p><img src=\"https://martinfowler.com/articles/data-mesh-principles/domain-notation.png\" alt=\"domain-not\"></p>\n<p>ê° ë„ë©”ì¸ì€ í•˜ë‚˜ ì´ìƒì˜ ìš´ì˜ APIì™€ í•˜ë‚˜ ì´ìƒì˜ ë¶„ì„ ë°ì´í„°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\në˜í•œ ê° ë„ë©”ì¸ì€ ë‹¤ë¥¸ ë„ë©”ì¸ì˜ ìš´ì˜ ë° ë¶„ì„ ë°ì´í„°ì™€ ì˜ì¡´ ê´€ê³„ë¥¼ ê°€ì§ˆ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://martinfowler.com/articles/data-mesh-principles/domains.png\" alt=\"domains\"></p>\n<p>ìœ„ì˜ ì˜ˆì‹œì™€ ê°™ì´ Podcasts ë„ë©”ì¸ì€ Users ë„ë©”ì¸ì˜ ë°ì´í„°ë¥¼ í†µí•´ Podcast ì²­ì·¨ìë“¤ì˜ ì •ë³´ë¥¼ ë°ì´í„°í™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"data-as-a-product\" style=\"position:relative;\"><a href=\"#data-as-a-product\" aria-label=\"data as a product permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data as a product</h2>\n<p>ê¸°ì¡´ ë°ì´í„° ë¶„ì„ ì•„í‚¤í…ì³ì—ì„œ ì–´ë–¤ ë°ì´í„°ê°€ ìˆëŠ”ì§€ íƒìƒ‰í•˜ê³  ì´í•´í•˜ê³  ë°ì´í„° í’ˆì§ˆì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ í° ê³¼ì œë¡œ ë‚¨ì•„ìˆì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ì§€ ì•Šìœ¼ë©´ Data Mesh ì•„í‚¤í…ì³ì—ì„œ ë” í° ë¬¸ì œë¡œ ë‹¤ê°€ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íƒˆì¤‘ì•™í™” ì›ì¹™ì— ë”°ë¼ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” ê³³ê³¼ íŒ€ì˜ ìˆ˜ê°€ ëŠ˜ì–´ë‚˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</p>\n<p><strong>Data as a product ì›ì¹™ì€ ë°ì´í„° ì‚¬ì¼ë¡œì™€ ë°ì´í„° í’ˆì§ˆ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•</strong>ì…ë‹ˆë‹¤.\në„ë©”ì¸ì—ì„œ ì œê³µí•˜ëŠ” ë¶„ì„ ë°ì´í„°ëŠ” productë¡œ ì·¨ê¸‰ë˜ì–´ì•¼ í•˜ë©° ë°ì´í„°ì˜ ì†Œë¹„ìëŠ” ê³ ê°ìœ¼ë¡œ ë°›ì•„ë“¤ì—¬ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>ì¡°ì§ì—ì„œëŠ” ë„ë©”ì¸ ë°ì´í„°ì— ëŒ€í•œ PO(Product Owner)ë¥¼ ì§€ì •í•´ì•¼ í•˜ë©° POëŠ” ë°ì´í„°ê°€ í”„ë¡œë•íŠ¸ë¡œì¨ ì „ë‹¬ë˜ê¸° ìœ„í•œ ì—¬ëŸ¬ ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. POëŠ” ë°ì´í„° ì‚¬ìš©ìê°€ ëˆ„êµ¬ì¸ì§€, ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ì •ì˜í•˜ê³  ë°ì´í„°ì— ëŒ€í•´ ê¹Šì´ ì´í•´í•˜ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ë°ì´í„° í’ˆì§ˆ, ë°ì´í„° ì‚¬ìš© ë§Œì¡±ë„ë¥¼ ì¸¡ì •í•˜ê³  ë°ì´í„°ì—ëŠ” ì´ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•œ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ê°€ ê°œë°œë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë°ì´í„° ì‚¬ìš©ìì™€ POëŠ” ê¾¸ì¤€íˆ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ í†µí•´ data productë¥¼ ë°œì „ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ê° ë„ë©”ì¸ì—ëŠ” ë„ë©”ì¸ì˜ data productë¥¼ êµ¬ì¶•í•˜ê³  ìš´ì˜ ë° ì œê³µí•˜ëŠ” ë°ì´í„° ê°œë°œì ì—­í• ë„ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ê° ë„ë©”ì¸ íŒ€ì€ í•˜ë‚˜ ì´ìƒì˜ data productë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://martinfowler.com/articles/data-mesh-principles/data-product-components.png\" alt=\"dataproduct\"></p>\n<p>data productëŠ” ìœ„ì™€ ê°™ì´ ì„¸ ê°€ì§€ êµ¬ì„± ìš”ì†Œë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.</p>\n<h3 id=\"1-code\" style=\"position:relative;\"><a href=\"#1-code\" aria-label=\"1 code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Code</h3>\n<ul>\n<li>ì—…ìŠ¤íŠ¸ë¦¼ ë°ì´í„°ì— ëŒ€í•œ ETL í”„ë¡œì„¸ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì½”ë“œ</li>\n<li>ë°ì´í„° ìŠ¤í‚¤ë§ˆ, ë°ì´í„° í’ˆì§ˆì— ëŒ€í•œ ì§€í‘œ, ë©”íƒ€ë°ì´í„° ì ìš©ì„ ìœ„í•œ API</li>\n<li>ì ‘ê·¼ ì œì–´ ì •ì±…, ë°ì´í„° ì •ì±…ì„ ì ìš©í•˜ê¸° ìœ„í•œ ì½”ë“œ (ë¹„ì‹ë³„í™” ë“±)</li>\n</ul>\n<br>\n<h3 id=\"2-data-and-metadata\" style=\"position:relative;\"><a href=\"#2-data-and-metadata\" aria-label=\"2 data and metadata permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Data and Metadata</h3>\n<ul>\n<li>ì´ë²¤íŠ¸, ë°°ì¹˜, ê´€ê³„í˜• í…Œì´ë¸”, ê·¸ë˜í”„ ë“± ë‹¤ì–‘í•˜ê²Œ ì†Œë¹„ë˜ëŠ” ë°ì´í„°</li>\n<li>ê° ë°ì´í„°ì— ëŒ€í•œ ë©”íƒ€ë°ì´í„° ì •ì˜</li>\n<li>ìƒì„± ë¡œì§ê³¼ ì ‘ê·¼ ì œì–´ ì •ì±…</li>\n</ul>\n<br>\n<h3 id=\"3-infrastructure\" style=\"position:relative;\"><a href=\"#3-infrastructure\" aria-label=\"3 infrastructure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Infrastructure</h3>\n<ul>\n<li>data product ì½”ë“œë¥¼ êµ¬ì¶•, ë°°í¬ ë° ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì¸í”„ë¼</li>\n<li>ë°ì´í„° ë° ë©”íƒ€ë°ì´í„°ì— ëŒ€í•œ ì €ì¥ ë° ì ‘ê·¼ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” í”Œë«í¼</li>\n</ul>\n<br>\n<p><img src=\"https://martinfowler.com/articles/data-mesh-principles/data-product-notation.png\" alt=\"notation\"></p>\n<p>ì´ë¥¼ ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ìœ„ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"self-serve-data-platform\" style=\"position:relative;\"><a href=\"#self-serve-data-platform\" aria-label=\"self serve data platform permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Self-serve data platform</h2>\n<p>ìœ„ì™€ ê°™ì´ data productë¥¼ êµ¬ì¶•, ë°°í¬, ì‹¤í–‰ ë° ëª¨ë‹ˆí„°ë§í•˜ë ¤ë©´ ì´ë¥¼ ìœ„í•´ ë§ì€ ì¸í”„ë¼ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì´ë¥¼ êµ¬ì„±í•˜ëŠ”ë° í•„ìš”í•œ ê¸°ìˆ ì€ ì „ë¬¸ì ì¸ ì˜ì—­ì´ë¼ ê° ë„ë©”ì¸ì—ì„œ ìš´ì˜í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤. ê° íŒ€ì´ data productë¥¼ ììœ¨ì ìœ¼ë¡œ ê°œë°œí•˜ê³  ìš´ì˜í•˜ê¸° ìœ„í•´ ì œí’ˆì˜ ìˆ˜ëª… ì£¼ê¸°ë¥¼ í”„ë¡œë¹„ì €ë‹í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì¶”ìƒí™”ëœ ì¸í”„ë¼ê°€ í•„ìš”í•©ë‹ˆë‹¤. <strong>Self-serve data platform ì›ì¹™ì€ ë„ë©”ì¸ ììœ¨ì„±ì„ ê°€ëŠ¥í•˜ë„ë¡ ì§€ì›í•˜ëŠ” í”Œë«í¼ì„ ë§í•©ë‹ˆë‹¤.</strong></p>\n<p>ì…€í”„ ì„œë¹„ìŠ¤ ë°ì´í„° í”Œë«í¼ì€ ë°ì´í„° ê°œë°œìì˜ ì›Œí¬í”Œë¡œìš°ë¥¼ ì§€ì›í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\në°ì´í„° ì œí’ˆì„ ìƒì„±í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë¹„ìš©ê³¼ ì§„ì…ì¥ë²½ì„ ë‚®ì¶”ê³  ìŠ¤í‚¤ë§ˆ, íŒŒì´í”„ë¼ì¸ ê°œë°œ, ë°ì´í„° ë¦¬ë‹ˆì§€, ì»´í“¨íŒ… í´ëŸ¬ìŠ¤í„° ë“±ì„ ì§€ì›í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p><img src=\"https://martinfowler.com/articles/data-mesh-principles/platform.png\" alt=\"platform\"></p>\n<br>\n<p>ì…€í”„ ì„œë¹„ìŠ¤ í”Œë«í¼ì—ëŠ” ìœ„ì™€ ê°™ì´ ì—¬ëŸ¬ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì˜ì—­ì´ ì¡´ì¬í•©ë‹ˆë‹¤.\nìœ„ ê·¸ë¦¼ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ì„¸ ê°€ì§€ ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ„ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<h3 id=\"1-data-infrastructure-provisioning-plane\" style=\"position:relative;\"><a href=\"#1-data-infrastructure-provisioning-plane\" aria-label=\"1 data infrastructure provisioning plane permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Data infrastructure provisioning plane</h3>\n<ul>\n<li>ê²½í—˜ì´ ë§ì€ ë°ì´í„° ê°œë°œìë§Œ ì§ì ‘ ì‚¬ìš©</li>\n<li>data productë¥¼ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ê¸°ë³¸ ì¸í”„ë¼ í”„ë¡œë¹„ì €ë‹ì„ ì§€ì›</li>\n<li>ë¶„ì‚° ìŠ¤í† ë¦¬ì§€, ìŠ¤í† ë¦¬ì§€ ê³„ì •ê³¼ ì ‘ê·¼ ì œì–´ ì‹œìŠ¤í…œ</li>\n<li>ë°ì´í„°ì— ëŒ€í•œ ë¶„ì‚° ì¿¼ë¦¬ ì—”ì§„ í”„ë¡œë¹„ì €ë‹</li>\n</ul>\n<h3 id=\"2-data-product-developer-experience-plane\" style=\"position:relative;\"><a href=\"#2-data-product-developer-experience-plane\" aria-label=\"2 data product developer experience plane permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Data product developer experience plane</h3>\n<ul>\n<li>ì¼ë°˜ì ì¸ ë°ì´í„° ê°œë°œìê°€ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ ì¸í„°í˜ì´ìŠ¤</li>\n<li>ì›Œí¬í”Œë¡œìš° ì •ì˜ë¥¼ ìœ„í•´ í•„ìš”í•œ ë³µì¡ì„±ì„ ì¶”ìƒí™”í•´ì„œ ì œê³µ</li>\n<li>data productì— ëŒ€í•œ ë¹Œë“œ, ë°°í¬, ëª¨ë‹ˆí„°ë§ ì§€ì›</li>\n<li>ë¯¸ë¦¬ ì •ì˜ëœ í‘œì¤€ ê·œì¹™ì„ í†µí•´ ìë™ìœ¼ë¡œ êµ¬í˜„</li>\n</ul>\n<h3 id=\"3-data-mesh-supervision-plane\" style=\"position:relative;\"><a href=\"#3-data-mesh-supervision-plane\" aria-label=\"3 data mesh supervision plane permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Data mesh supervision plane</h3>\n<ul>\n<li>Data Mesh ìˆ˜ì¤€ì—ì„œ í•œëˆˆì— ë³¼ ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤</li>\n<li>data productë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥</li>\n<li>ì—¬ëŸ¬ data productì— ê±¸ì³ í•„ìš”í•œ ê¸°ëŠ¥</li>\n</ul>\n<br>\n<h2 id=\"federated-computational-governance\" style=\"position:relative;\"><a href=\"#federated-computational-governance\" aria-label=\"federated computational governance permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Federated computational governance</h2>\n<p>ì§€ê¸ˆê¹Œì§€ ì •ì˜í•œ ë‚´ìš©ê³¼ ê°™ì´ Data Mesh ëª¨ë¸ì€ ë¶„ì‚° ì•„í‚¤í…ì³ í˜•íƒœë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\në…ë¦½ì ì¸ data productë¥¼ ê°€ì§€ë©° ê° íŒ€ì´ êµ¬ì¶•í•˜ê³  ë°°í¬í•©ë‹ˆë‹¤.\nê·¸ëŸ¬ë‚˜ ML ì˜ì—­ê³¼ ê°™ì€ ê³³ì—ì„œ ê°€ì¹˜ë¥¼ ì–»ìœ¼ë ¤ë©´ ê° data productê°€ ìƒí˜¸ì ìœ¼ë¡œ ìš´ìš©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ìƒí˜¸ ìš´ìš©ì„ ìœ„í•´ <strong>í”Œë«í¼ì— ì˜í•œ ì˜ì‚¬ ê²°ì •ì„ ìë™í™”í•˜ê¸° ìœ„í•œ ê±°ë²„ë„ŒìŠ¤ ëª¨ë¸</strong>ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ë¥¼ Federated computational governance ì›ì¹™ì´ë¼ê³  í•©ë‹ˆë‹¤.\në°ì´í„° POì™€ ë°ì´í„° í”Œë«í¼ POê°€ í•¨ê»˜ ì£¼ë„í•˜ëŠ” ì˜ì‚¬ ê²°ì • ëª¨ë¸ì€ ë„ë©”ì¸ ì˜ì‚¬ ê²°ì • ê¶Œí•œì„ ê°€ì§€ë©° ì—¬ëŸ¬ ê·œì¹™ì„ ë§Œë“¤ê³  ì¤€ìˆ˜í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê±°ë²„ë„ŒìŠ¤ë¥¼ í†µí•´ ì¤‘ì•™ ì§‘ì¤‘í™”ì™€ ë¶„ì‚°í™” ì‚¬ì´ì˜ ê· í˜•ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://martinfowler.com/articles/data-mesh-principles/governance.png\" alt=\"governance\"></p>\n<p>ê±°ë²„ë„ŒìŠ¤ ëª¨ë¸ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì°¸ì—¬í•´ì•¼ í•˜ëŠ” ì¡°ì§ê³¼ ì¸ì„¼í‹°ë¸Œ ëª¨ë¸ì„ ì •ì˜í•´ì•¼ í•©ë‹ˆë‹¤.\në°ì´í„° í”Œë«í¼ì€ ê±°ë²„ë„ŒìŠ¤ë¡œë¶€í„° ì •ì˜ëœ ì •ì±…ì„ ìë™ìœ¼ë¡œ ì ìš©í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ì„ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"principles-summary\" style=\"position:relative;\"><a href=\"#principles-summary\" aria-label=\"principles summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Principles Summary</h2>\n<p><strong>Domain Ownership</strong>ì„ í†µí•´ ë°ì´í„° ìƒì„±ê³¼ ì‚¬ìš©ì ìˆ˜ì˜ ì¦ê°€, ë°ì´í„° ì ‘ê·¼ ì •ì±…ì˜ ë‹¤ì–‘ì„±ê³¼ ë°ì´í„°ì˜ í™•ì¥ì— ëŒ€ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>Data as a product</strong>ë¥¼ í†µí•´ ë°ì´í„° ì‚¬ìš©ìê°€ ë°ì´í„°ë¥¼ ì‰½ê²Œ ê²€ìƒ‰ì´ ê°€ëŠ¥í•˜ê³  í’ˆì§ˆì´ ë³´ì¥ëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ë©° ë°ì´í„°ì— ëŒ€í•œ ì´í•´ë„ê°€ ì˜¬ë¼ê°€ê³  ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>Self-serve data platform</strong>ì„ í†µí•´ ê° ë„ë©”ì¸ íŒ€ì´ ììœ¨ì ìœ¼ë¡œ ì œí’ˆì„ ë§Œë“¤ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ë©° data productë¥¼ ì‰½ê²Œ êµ¬ì¶•, ì‹¤í–‰ ë° ìš´ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>Federated computational governance</strong>ë¥¼ í†µí•´ ë°ì´í„° ì‚¬ìš©ìê°€ ìƒí˜¸ ìš´ìš©ì„ ìœ„í•œ í‘œì¤€ì„ ë”°ë¥´ëŠ” ìƒíƒœê³„ë¡œ ìš´ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ í‘œì¤€ ì •ì±…ì€ í”Œë«í¼ì— ë°˜ì˜ë©ë‹ˆë‹¤.</p>\n<br>","excerpt":"ì´ ê¸€ì€ martinfowler.comì˜ Data Mesh Principles and Logical Architectureâ€¦"}}},{"id":"1287610b-f42e-5418-85fd-7b80bac6222f","title":"ì—¬ëŸ¬ ì¡°ì§ì´ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” Airflow ë§Œë“¤ê¸°","slug":"airflow-multi-tenent-1","publishDate":"August 15, 2021","publishDateISO":"2021-08-15","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"5a118100-3719-5895-9fd0-bf3c690e91e8","childMarkdownRemark":{"id":"070cdd72-3f88-5a52-b46d-48a515c1b70a","timeToRead":6,"html":"<p>ì‚¬ë‚´ ë°ì´í„°ê°€ ë‹¤ì–‘í•´ì§€ê³  ì‚¬ìš©ìê°€ ë§ì•„ì§€ë©´ ì ‘ê·¼ ì œì–´ì™€ ê¶Œí•œ ë“± ë‹¤ì–‘í•œ ê³ ë¯¼ì´ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤.\nì´ ê¸€ì—ì„œëŠ” ì—¬ëŸ¬ ì¡°ì§ì´ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” Airflowë¥¼ ë§Œë“¤ ë•Œ ì•Œì•„ë‘ë©´ ì¢‹ì€ ë‚´ìš©ë“¤ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"https://swalloow.github.io/airflow-multi-tenent-1/#airflow-rbac\">Airflow RBAC</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-multi-tenent-1/#dag-level-permissions\">DAG-Level Permissions</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-multi-tenent-1/#connection-variable-access-control\">Connection, Variable Permissions</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-multi-tenent-1/#cluster-policy\">Cluster Policy</a></li>\n</ul>\n<br>\n<h2 id=\"ì ‘ê·¼-ì œì–´ê°€-í•„ìš”í•œ-ê²½ìš°\" style=\"position:relative;\"><a href=\"#%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EA%B0%80-%ED%95%84%EC%9A%94%ED%95%9C-%EA%B2%BD%EC%9A%B0\" aria-label=\"ì ‘ê·¼ ì œì–´ê°€ í•„ìš”í•œ ê²½ìš° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì ‘ê·¼ ì œì–´ê°€ í•„ìš”í•œ ê²½ìš°</h2>\n<p>ë¨¼ì € ì ‘ê·¼ ì œì–´ëŠ” ëª¨ë“  ì¡°ì§ì— í•„ìš”í•œ ë‚´ìš©ì€ ì•„ë‹™ë‹ˆë‹¤. ë‹¤ë§Œ ì•„ë˜ì™€ ê°™ì€ ê²½ìš°ì—ëŠ” í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>ë‹¤ë¥¸ ì‚¬ëŒì´ ì‹¤í–‰, ì¤‘ì§€ ê¶Œí•œì„ ê°€ì ¸ì„œëŠ” ì•ˆë  ë§Œí¼ ì¤‘ìš”í•œ DAGì´ ì¡´ì¬í•˜ëŠ” ê²½ìš°</li>\n<li>ë¯¼ê°í•œ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” DAGì´ ì¡´ì¬í•˜ëŠ” ê²½ìš° (HR, ë§¤ì¶œ ë°ì´í„° ë“±)</li>\n<li>íŒ€ì—ì„œ ìš´ì˜í•˜ëŠ” DAG, Connection, Variableì„ ìš°ë¦¬ íŒ€ë§Œ ë³´ê³  ì‹¶ì€ ê²½ìš°</li>\n</ul>\n<p>íŠ¹íˆ Airflow Connections, Variableì—ëŠ” DB ë˜ëŠ” í´ëŸ¬ìŠ¤í„° ì ‘ì† ì •ë³´, APIí‚¤ ë“± ë¯¼ê°í•œ ì •ë³´ê°€ ë§ì´ ì €ì¥ë©ë‹ˆë‹¤. ë¬¼ë¡  ë§ˆìŠ¤í‚¹ ê¸°ëŠ¥ì„ í†µí•´ UIì—ì„œ ë³¼ ìˆ˜ ì—†ê²Œ ë§Œë“¤ ìˆ˜ ìˆì§€ë§Œ idëŠ” ë³¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì‰½ê²Œ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> airflow<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Variable\n<span class=\"token keyword\">from</span> airflow<span class=\"token punctuation\">.</span>hooks<span class=\"token punctuation\">.</span>base_hook <span class=\"token keyword\">import</span> BaseHook\n\nvariable <span class=\"token operator\">=</span> Variable<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"myvar\"</span><span class=\"token punctuation\">)</span>\nconnection <span class=\"token operator\">=</span> BaseHook<span class=\"token punctuation\">.</span>get_connection<span class=\"token punctuation\">(</span><span class=\"token string\">\"myconn\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n<p>ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ì¡°ì§ë§ˆë‹¤ Airflow í™˜ê²½ì„ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ ì´ ë°©ë²•ì€ ìš´ì˜ê³¼ ëª¨ë‹ˆí„°ë§ì´ í˜ë“¤ ìˆ˜ ìˆì–´ í”„ë¼ì´ë¹— í´ë¼ìš°ë“œë¥¼ ìš´ì˜í•´ì•¼í•˜ëŠ” ìƒí™©ì´ ì•„ë‹ˆë¼ë©´ ì¶”ì²œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‘ ë²ˆì§¸ ë°©ë²•ì€ <strong>Airflowì˜ RBAC ê¸°ëŠ¥</strong>ì„ í™œìš©í•˜ëŠ” ë°©ë²• ì…ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"airflow-rbac\" style=\"position:relative;\"><a href=\"#airflow-rbac\" aria-label=\"airflow rbac permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow RBAC</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1tfr6zzzwrDkMIsTMJFOsNVzDwCchvzjo\" alt=\"security-model\"></p>\n<p>Airflow RBACì€ 1.10 ë²„ì „ë¶€í„° ì¶”ê°€ë˜ì—ˆê³  2.0 ë²„ì „ë¶€í„° ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ ì œê³µë©ë‹ˆë‹¤.\nAirflowì˜ Security Modelì€ ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ë”°ë¥´ê³  ìˆìŠµë‹ˆë‹¤.\nì‚¬ìš©ìëŠ” User, Roleë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ UserëŠ” í•˜ë‚˜ ì´ìƒì˜ Roleì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì ‘ê·¼ ê¶Œí•œì€ <strong>Permission, ViewMenu</strong> ê·¸ë¦¬ê³  ì´ë¥¼ ì¡°í•©í•œ <strong>PermissionView</strong>ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\nRoleì€ ì—¬ëŸ¬ ê°œì˜ Permissionì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. PermissionViewì— ëŒ€í•œ ì˜ˆì‹œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1CsfVPlTQL_hqtY4a3_dXxz2kTAFjFqVo\" alt=\"permission-view\"></p>\n<p>Connections <strong>ViewMenu</strong> ì™€ can_edit <strong>Permission</strong> ì„ ì¡°í•©í•˜ë©´ <code class=\"language-text\">can edit on Connections</code>ë¼ëŠ” <strong>PermissionView</strong> ê°€ ìƒì„±ë©ë‹ˆë‹¤. ì´ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œ Connections UIì—ì„œ í¸ì§‘ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë°©ì‹ì„ Airflowì—ì„œëŠ” <strong>Resource-Based permissions</strong>ë¼ê³  ì •ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<p>Airflowì—ëŠ” ë‹¤ì–‘í•œ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ ê¶Œí•œì´ ì´ë¯¸ ì •ì˜ë˜ì–´ ìˆê³ , ê¸°ë³¸ì ìœ¼ë¡œ Adminì„ í¬í•¨í•œ 5ê°œì˜ Roleì„ ì œê³µí•©ë‹ˆë‹¤. ì¡°ì§ë§ˆë‹¤ ë‹¤ë¥¸ Roleì„ ê°€ì§€ê³  ì‹¶ì€ ê²½ìš°, BaseRoleì„ ì •ì˜í•˜ê³  Copy Roleì„ í†µí•´ ìƒˆë¡œ ë§Œë“¤ë©´ í¸í•˜ê²Œ ìš´ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ì˜ ê¶Œí•œ ì œì–´ë„ í•„ìš”í•˜ì§€ë§Œ ì´ ê¸°ëŠ¥ì—ì„œëŠ” DAGs ë¼ëŠ” ë‹¨ì¼ ë¦¬ì†ŒìŠ¤ë¡œ ë³´ê³  ìˆê¸° ë•Œë¬¸ì— DAG ë‹¨ìœ„ë¡œ ì ‘ê·¼ ì œì–´ë¥¼ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ 2.0+ ë²„ì „ë¶€í„° <strong>DAG-level Permission</strong>ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"dag-level-permissions\" style=\"position:relative;\"><a href=\"#dag-level-permissions\" aria-label=\"dag level permissions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DAG-level Permissions</h2>\n<p>DAG-level Permissionì„ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì ‘ê·¼ ì œì–´ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>A ì‚¬ìš©ìëŠ” A ì‚¬ìš©ìì˜ DAGë§Œ ë³¼ ìˆ˜ ìˆìŒ</li>\n<li>A ì‚¬ìš©ìëŠ” B ì‚¬ìš©ìì˜ DAGì„ ë³¼ ìˆ˜ ì—†ìŒ</li>\n<li>B ì‚¬ìš©ìê°€ A ì‚¬ìš©ìì—ê²Œ ê¶Œí•œì„ ë¶€ì—¬í•˜ë©´ ë³¼ ìˆ˜ ìˆìŒ</li>\n</ul>\n<p>DAG-level Permissionì€ ì•ì„œ ì–˜ê¸°í–ˆë˜ ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ ì ‘ê·¼ ì œì–´ì— <code class=\"language-text\">DAG:dag_id</code>ë¼ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ A ì‚¬ìš©ìì™€ B ì‚¬ìš©ìì—ê²Œ example DAGì— ëŒ€í•œ ì½ê¸° ê¶Œí•œì„ ë¶€ì—¬í•˜ê³  ì‹¶ì€ ê²½ìš°, <code class=\"language-text\">DAG:example.can_read</code>ë¼ëŠ” ê¶Œí•œì„ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">with</span> DAG<span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"example_dag\"</span><span class=\"token punctuation\">,</span>\n    default_args<span class=\"token operator\">=</span>default_args<span class=\"token punctuation\">,</span>\n    description<span class=\"token operator\">=</span><span class=\"token string\">\"example dags\"</span><span class=\"token punctuation\">,</span>\n    schedule_interval<span class=\"token operator\">=</span><span class=\"token string\">\"@once\"</span><span class=\"token punctuation\">,</span>\n    access_control<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"myrole\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"can_dag_read\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    start_date<span class=\"token operator\">=</span>days_ago<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> dag<span class=\"token punctuation\">:</span></code></pre></div>\n<p>ìœ„ì™€ ê°™ì´ DAGì„ ì •ì˜í•˜ëŠ” ë‹¨ê³„ì—ì„œë„ <code class=\"language-text\">access_control</code> íŒŒë¼ë©”í„°ë¥¼ í†µí•´ DAGì˜ ì ‘ê·¼ ê¶Œí•œì„ ì •ì˜í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì´í›„ BaseRoleì— DAGs ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ê¶Œí•œì„ ì œê±°í•˜ë©´ ì‚¬ìš©ìëŠ” ì˜¤ì§ í—ˆìš©ëœ DAGì— ëŒ€í•´ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>\n<p>DAG access_controlì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ Roleì— ê¶Œí•œì„ ì¶”ê°€í•˜ëŠ” ì¼ì€ ë³´í†µ ë²ˆê±°ë¡œìš´ ì¼ì´ ì•„ë‹™ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ Airflowì—ì„œëŠ” <code class=\"language-text\">airflow sync-perm</code> ì´ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ëª¨ë“  DAGì— ì •ì˜ëœ ê¶Œí•œì´ ì—°ê´€ëœ Roleì— ë°˜ì˜ë©ë‹ˆë‹¤. Permission Sync ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆë¥¼ webserverì— ë°°í¬í•˜ë©´ ì´ ê³¼ì •ì„ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê´€ë ¨ ë‚´ìš©ì€ <a href=\"https://swalloow.github.io/airflow-sidecar/#2-permission-sync-container\">ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆë¡œ Airflow ê¸°ëŠ¥ í™•ì¥í•˜ê¸°</a> ê¸€ì„ ì°¸ê³ í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"connection-variable-access-control\" style=\"position:relative;\"><a href=\"#connection-variable-access-control\" aria-label=\"connection variable access control permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Connection, Variable Access Control</h2>\n<p>ì•ì„œ DAG-level Permissionì„ ë³´ì…¨ë‹¤ë©´ ëŠë¼ì…¨ê² ì§€ë§Œ Connection, Variable ë˜í•œ ê° ë³€ìˆ˜ì— ëŒ€í•´ ì ‘ê·¼ ì œì–´ë¥¼ í•  ìˆ˜ ì—†ê³  ê´€ë ¨ ê¸°ëŠ¥ë„ ì—†ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ <strong>Alternative Secrets Backend</strong> ë¼ëŠ” ê¸°ëŠ¥ì„ í†µí•´ Custom Backend í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ë©´ ì ‘ê·¼ ì œì–´ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h3 id=\"alternative-secrets-backend\" style=\"position:relative;\"><a href=\"#alternative-secrets-backend\" aria-label=\"alternative secrets backend permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Alternative Secrets Backend</h3>\n<p>ì›ë˜ Connection, Variableì€ Meta DBì— ì €ì¥ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ AWS Parameter Store, Vault ë“± ì™¸ë¶€ ìì›ì„ ì €ì¥ì†Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. airflowì— êµ¬í˜„ëœ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@classmethod</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_connection_from_secrets</span><span class=\"token punctuation\">(</span>cls<span class=\"token punctuation\">,</span> conn_id<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token string\">'Connection'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Get connection by conn_id.\n    :param conn_id: connection id\n    :return: connection\n    \"\"\"</span>\n    <span class=\"token keyword\">for</span> secrets_backend <span class=\"token keyword\">in</span> ensure_secrets_loaded<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        conn <span class=\"token operator\">=</span> secrets_backend<span class=\"token punctuation\">.</span>get_connection<span class=\"token punctuation\">(</span>conn_id<span class=\"token operator\">=</span>conn_id<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> conn<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> conn\n    <span class=\"token keyword\">raise</span> AirflowNotFoundException<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"The conn_id `</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>conn_id<span class=\"token punctuation\">}</span></span><span class=\"token string\">` not defined\"</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n<p><code class=\"language-text\">BaseHook</code>ì—ì„œ í˜¸ì¶œí•˜ëŠ” <code class=\"language-text\">get_connection_from_secrets</code> ë©”ì„œë“œëŠ” ì—¬ëŸ¬ backendë¡œë¶€í„° conn_idì— ëŒ€í•œ ê°’ì„ ë°›ì•„ì˜¤ê³  ë¦¬í„´í•©ë‹ˆë‹¤. ì¦‰ ê¸°ì¡´ Meta DBë¥¼ ì‚¬ìš©í•˜ê³  ìˆë”ë¼ë„ ìœ ì§€í•˜ë©´ì„œ ìƒˆë¡œìš´ backendì™€ í˜¸í™˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<p>AWS Parameter StoreëŠ” Path ë‹¨ìœ„ë¡œ í‚¤ë¥¼ ë‹¤ë¥´ê²Œ ê°’ì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì´ ì ì„ í™œìš©í•´ì„œ id ìƒìœ„ ê²½ë¡œë¡œ roleì„ ì§€ì •í•œë‹¤ë©´ role ë‹¨ìœ„ë¡œ ì ‘ê·¼ ì œì–´ê°€ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.\nì ‘ê·¼ ì œì–´ë¥¼ ìœ„í•œ AWS Parameter Storeì— ì €ì¥ë˜ëŠ” ê·œì¹™ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\nAirflow í™˜ê²½, ì—­í•  ë³„ë¡œ êµ¬ë¶„í•´ì„œ ì €ì¥í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">secrets</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">backend</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"airflow...SystemsManagerParameterStoreBackend\"</span>\n    <span class=\"token key atrule\">backend_kwargs</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token key atrule\">\"connections_prefix\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/airflow/prod/connections\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token key atrule\">\"variables_prefix\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/airflow/prod/variables\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token key atrule\">\"profile_name\"</span><span class=\"token punctuation\">:</span> <span class=\"token null important\">null</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>/airflow/prod/connections/myrole/connection_id</li>\n<li>/airflow/prod/variables/myrole/variable_id</li>\n</ul>\n<p>ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” Connections, Variables UIëŠ” ì„¸ë¶€ ê²½ë¡œë¡œ ê°’ì„ ê°€ì ¸ì˜¤ëŠ”ê²Œ ì•„ë‹ˆê¸° ë•Œë¬¸ì— secrets backend ì„¤ì •ê³¼ í•¨ê»˜ Custom UI Pluginì´ í•„ìš”í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"access-control-ui-plugin\" style=\"position:relative;\"><a href=\"#access-control-ui-plugin\" aria-label=\"access control ui plugin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Access Control UI Plugin</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1QhjXiETQQLqnLo3iJbmcPMtfGcTXRSgV\" alt=\"acl-plugin\"></p>\n<p>í”ŒëŸ¬ê·¸ì¸ì˜ ì—­í• ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. myroleì´ë¼ëŠ” Airflow Roleì„ ê°€ì§„ ì‚¬ìš©ìê°€ Connections UI í˜ì´ì§€ì— ì ‘ê·¼í•˜ë©´ Custom Backendë¥¼ í†µí•´ Paramter Storeì˜ <code class=\"language-text\">/airflow/prod/connections/myrole</code> ê²½ë¡œ í•˜ìœ„ì˜ ê°’ë“¤ì„ ë°›ì•„ì˜¤ë„ë¡ ìš”ì²­í•´ì•¼ í•©ë‹ˆë‹¤. list ë¿ë§Œ ì•„ë‹ˆë¼ create, edit, deleteì— ëŒ€í•œ ê¸°ëŠ¥ë„ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>ì´ë¥¼ ìœ„í•´ UI í”ŒëŸ¬ê·¸ì¸ì—ì„œ í˜„ì¬ ì ‘ì†í•œ ì‚¬ìš©ìì˜ Role ì´ë¦„ì„ ë°›ì•„ì˜¬ ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì´ ë•Œ flaskì˜ global sessionì„ í™œìš©í•˜ë©´ ì‰½ê²Œ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> g\n\nrole_name <span class=\"token operator\">=</span> g<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>roles<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name</code></pre></div>\n<p>ì´ì œ UIì—ì„œ ì¶”ê°€, í¸ì§‘, ì‚­ì œ ì‹œ Secrets Backendë¥¼ í†µí•´ AWS Parameter Storeì— ë°˜ì˜ë©ë‹ˆë‹¤. ì˜¤ì§ ê¶Œí•œì„ ê°€ì§„ ì‚¬ìš©ìë§Œì´ DAG, Connection, Variableì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"cluster-policy\" style=\"position:relative;\"><a href=\"#cluster-policy\" aria-label=\"cluster policy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cluster Policy</h2>\n<p>DAG ì‘ì„±ì— ëŒ€í•œ ê°€ì´ë“œê°€ ìˆë”ë¼ë„ ëª¨ë‘ ë§Œì¡±í•˜ëŠ”ì§€ ì²´í¬í•˜ëŠ”ê±´ ìƒë‹¹íˆ ë²ˆê±°ë¡œìš´ ì¼ ì…ë‹ˆë‹¤.\nAirflow 2.0+ì—ì„œëŠ” Cluster Policyë¥¼ í†µí•´ í´ëŸ¬ìŠ¤í„° ì „ì²´ì—ì„œ DAG ë˜ëŠ” taskì— ëŒ€í•œ ì •ì±…ì„ ì •ì˜í•˜ê³  ê°•ì œí•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì •ì±…ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>ëª¨ë“  DAGì—ëŠ” ì ì–´ë„ í•˜ë‚˜ì˜ íƒœê·¸ë¥¼ ë‹¬ì•„ì•¼ í•œë‹¤</li>\n<li>íŠ¹ì • taskì˜ timeoutì€ 48ì‹œê°„ì„ ë„˜ì„ ìˆ˜ ì—†ë‹¤</li>\n</ul>\n<p><code class=\"language-text\">airflow_local_settings.py</code> íŒŒì¼ì„ ë§Œë“¤ê³  ì •ì˜í•˜ë©´ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\níƒœê·¸ë¥¼ ê°•ì œí•˜ëŠ” ì •ì±… ì˜ˆì‹œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">dag_policy</span><span class=\"token punctuation\">(</span>dag<span class=\"token punctuation\">:</span> DAG<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"Ensure that DAG has at least one tag\"\"\"</span>\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> dag<span class=\"token punctuation\">.</span>tags<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">raise</span> AirflowClusterPolicyViolation<span class=\"token punctuation\">(</span>\n            <span class=\"token string-interpolation\"><span class=\"token string\">f\"DAG </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>dag<span class=\"token punctuation\">.</span>dag_id<span class=\"token punctuation\">}</span></span><span class=\"token string\"> has no tags. At least one tag required. File path: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>dag<span class=\"token punctuation\">.</span>filepath<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span>\n        <span class=\"token punctuation\">)</span></code></pre></div>\n<p>ìœ„ ì •ì±…ì´ ì ìš©ëœ í´ëŸ¬ìŠ¤í„°ì— íƒœê·¸ê°€ ì—†ëŠ” DAGì„ ë°°í¬í•˜ëŠ” ê²½ìš°, <code class=\"language-text\">AirflowClusterPolicyViolation</code> ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— DAGì„ ë“±ë¡í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\nìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://airflow.apache.org/docs/apache-airflow/stable/concepts/cluster-policies.html\">ê³µì‹ë¬¸ì„œ</a>ë¥¼ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"ì •ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë¦¬</h2>\n<p>ìµœê·¼ Airflow Summitì—ì„œ Multi-Tenentì™€ ê´€ë ¨ëœ ì˜ìƒë“¤ì´ ë§ì´ ì˜¬ë¼ì™€ì„œ í•¨ê»˜ ì°¸ê³ í•˜ë©´ ë„ì›€ì´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"https://airflow.apache.org/docs/apache-airflow/stable/security/access-control.html\">https://airflow.apache.org/docs/apache-airflow/stable/security/access-control.html</a></li>\n<li><a href=\"https://eng.lyft.com/securing-apache-airflow-ui-with-dag-level-access-a7bc649a2821\">https://eng.lyft.com/securing-apache-airflow-ui-with-dag-level-access-a7bc649a2821</a></li>\n<li><a href=\"https://airflow.apache.org/docs/apache-airflow/stable/security/secrets/secrets-backend/index.html\">https://airflow.apache.org/docs/apache-airflow/stable/security/secrets/secrets-backend/index.html</a></li>\n</ul>","excerpt":"â€¦"}}},{"id":"8a8dd949-d905-5883-8781-94ee011c3522","title":"Airflow on Kubernetes (1)","slug":"airflow-on-kubernetes-1","publishDate":"June 05, 2020","publishDateISO":"2020-06-05","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"c12fefe6-aab9-599e-b87d-9d996a4e0bb5","childMarkdownRemark":{"id":"a96aecc2-d61d-5567-9728-1f9760a46ebc","timeToRead":5,"html":"<p>ìµœê·¼ Airflowì—ëŠ” Kubernetes ì§€ì›ì„ ìœ„í•´ ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì¶”ê°€ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€í™”ì˜ íë¦„ì— ë”°ë¼ Airflowë¥¼ Kubernetes ìœ„ì— ë°°í¬í•˜ê³  ìš´ì˜í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ê¸€ì„ ì‘ì„±í•´ë³´ê³ ì í•©ë‹ˆë‹¤. ì´ ê¸€ì€ ì‹œë¦¬ì¦ˆë¡œ ì—°ì¬ë©ë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-1\">Airflow on Kubernetes (1): CeleryExecutor</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-2\">Airflow on Kubernetes (2): KubernetesExecutor</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-3\">Airflow on Kubernetes (3): Airflow Logging, Monitoring</a></li>\n</ul>\n<br>\n<h2 id=\"airflow-on-kubernetes\" style=\"position:relative;\"><a href=\"#airflow-on-kubernetes\" aria-label=\"airflow on kubernetes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow on Kubernetes</h2>\n<p>Airflowë¥¼ Kubernetes ì¸í”„ë¼ ìœ„ì—ì„œ ìš´ì˜í•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì´ ê¸€ì—ì„œ ì†Œê°œí•  ë°©ë²•ì€ <strong>CeleryExecutorì˜ ê° ëª¨ë“ˆì„ Kubernetes ìœ„ì— ì˜¬ë¦¬ëŠ” ë°©ì‹</strong>ì…ë‹ˆë‹¤. ê¸°ì¡´ì— ìš´ì˜í•˜ë˜ í˜•íƒœì™€ ìœ ì‚¬í•˜ê¸° ë•Œë¬¸ì— ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆìœ¼ë‚˜ Celeryì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ê°•í•˜ë‹¤ë³´ë‹ˆ ì™„ì „íˆ Cloud Nativeí•œ í˜•íƒœëŠ” ì•„ë‹™ë‹ˆë‹¤. ì•„í‚¤í…ì³ëŠ” ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” <a href=\"https://github.com/helm/charts/blob/master/stable/airflow\">stable/airflow</a> Helm Chartë¥¼ ì°¸ê³ í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ì œ ëª‡ ê°€ì§€ ì»´í¬ë„ŒíŠ¸ ì„¤ì •ê³¼ í•¨ê»˜ ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"config\" style=\"position:relative;\"><a href=\"#config\" aria-label=\"config permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Config</h2>\n<p>AirflowëŠ” <code class=\"language-text\">airflow.cfg</code> íŒŒì¼ ë˜ëŠ” <code class=\"language-text\">AIRFLOW__[SECTOR]__[VARIABLES]</code> í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•´ ê° ì»´í¬ë„ŒíŠ¸ì˜ ì„¤ì •ì„ ê´€ë¦¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. Helm Chartì—ì„œëŠ” <code class=\"language-text\">values.yaml</code>ì˜ config í•„ë“œë¥¼ í†µí•´ ì„¤ì •ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># CORE</span>\n  <span class=\"token key atrule\">AIRFLOW__CORE__DEFAULT_TIMEZONE</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Asia/Seoul\"</span>\n  <span class=\"token key atrule\">AIRFLOW__CORE__PARALLELISM</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"32\"</span>\n  <span class=\"token key atrule\">AIRFLOW__CORE__DAG_CONCURRENCY</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"16\"</span>\n  <span class=\"token key atrule\">AIRFLOW__CORE__MAX_ACTIVE_RUNS_PER_DAG</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"16\"</span>\n\n  <span class=\"token comment\"># WEBSERVER</span>\n  <span class=\"token key atrule\">AIRFLOW__WEBSERVER__DEFAULT_UI_TIMEZONE</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Asia/Seoul\"</span>\n  <span class=\"token key atrule\">AIRFLOW__WEBSERVER__WORKER_REFRESH_INTERVAL</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"60\"</span>\n\n  <span class=\"token comment\"># CELERY</span>\n  <span class=\"token key atrule\">AIRFLOW__CELERY__WORKER_CONCURRENCY</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"16\"</span>\n\n  <span class=\"token comment\"># SCHEDULER</span>\n  <span class=\"token key atrule\">AIRFLOW__SCHEDULER__SCHEDULER_HEARTBEAT_SEC</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"30\"</span>\n  <span class=\"token key atrule\">AIRFLOW__SCHEDULER__SCHEDULER_HEALTH_CHECK_THRESHOLD</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"120\"</span>\n  <span class=\"token key atrule\">AIRFLOW__SCHEDULER__DAG_DIR_LIST_INTERVAL</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"30\"</span>\n  <span class=\"token key atrule\">AIRFLOW__SCHEDULER__RUN_DURATION</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"10800\"</span>\n  <span class=\"token key atrule\">AIRFLOW__SCHEDULER__MAX_THREADS</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2\"</span></code></pre></div>\n<br>\n<p>ìœ„ì— ì •ì˜í•œ ì„¤ì • ë³€ìˆ˜ë“¤ì€ Airflowì˜ ì„±ëŠ¥ê³¼ ê´€ë ¨ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ê°ì í• ë‹¹ëœ ë¦¬ì†ŒìŠ¤ì— ë§ê²Œ ì„¤ì •í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://airflow.apache.org/docs/stable/faq.html#how-can-my-airflow-dag-run-faster\">ê³µì‹ë¬¸ì„œ ë§í¬</a>ë¥¼ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ DAGì—ì„œ í™œìš©í•˜ëŠ” connection, variablesë„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># config.yaml</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>webserver<span class=\"token punctuation\">-</span>config\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> airflow\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">webserver_config.py</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    APP_THEME = \"flatly.css\"</span>\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token comment\"># values.yaml</span>\n<span class=\"token key atrule\">extraConfigmapMounts</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>webserver<span class=\"token punctuation\">-</span>config\n    <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /opt/airflow/webserver_config.py\n    <span class=\"token key atrule\">configMap</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>webserver<span class=\"token punctuation\">-</span>config\n    <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">subPath</span><span class=\"token punctuation\">:</span> webserver_config.py</code></pre></div>\n<br>\n<p>ìœ„ì™€ ê°™ì´ <code class=\"language-text\">ConfigMap</code>ì´ë‚˜ <code class=\"language-text\">Secret</code>ì„ ë”°ë¡œ ë§Œë“¤ê³  ì°¸ì¡°í•˜ë„ë¡ ì—°ê²°í•˜ëŠ” ë°©ì‹ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤. íŠ¹íˆ Airflow 1.10ì˜ RBACì„ ì‚¬ìš©í•œë‹¤ë©´ <code class=\"language-text\">webserver_config.py</code>ë¥¼ í†µí•´ <code class=\"language-text\">APP_THEME</code>ë¥¼ ë³€ê²½í•´ì¤„ ìˆ˜ ìˆëŠ”ë° ì´ëŸ° ê²½ìš°ì— <strong>extraConfigmap</strong>ì„ í†µí•´ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1RzSP5YX2EyH3xDnk0VM4wB57lsn55j1o\" alt=\"airflow-webserver\"></p>\n<br>\n<p>ì œê°€ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” í…Œë§ˆëŠ” <code class=\"language-text\">flatly.css</code>ì— <code class=\"language-text\">NAVBAR #18bc9c</code> ì»¬ëŸ¬ ì¡°í•©ì…ë‹ˆë‹¤. ì ìš©ëœ í™”ë©´ì€ ìœ„ì™€ ê°™ìŠµë‹ˆë‹¤. (+ íƒœê·¸ ê¸°ëŠ¥ë„ 1.10.10 ë²„ì „ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤)</p>\n<br>\n<h2 id=\"celery-worker\" style=\"position:relative;\"><a href=\"#celery-worker\" aria-label=\"celery worker permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Celery Worker</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1N81eEP8AT1ddwCDtHnDKblgwkZsc2FFB\" alt=\"celery\"></p>\n<br>\n<p>CeleryExecutorì—ì„œ workerëŠ” ì‹¤ì œ taskë¥¼ ìˆ˜í–‰ì„ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. K8Sì—ì„œëŠ” celery workerê°€ StatefulSetìœ¼ë¡œ ë°°í¬ë©ë‹ˆë‹¤. ê¸°ì¡´ì—ëŠ” workerê°€ <code class=\"language-text\">AutoScalingGroup</code> ë“±ì„ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìë™ í™•ì¥ë˜ë„ë¡ êµ¬ì„±í–ˆë‹¤ë©´, K8Sì—ì„œëŠ” <code class=\"language-text\">HorizontalPodAutoscaler</code>ë¥¼ í†µí•´ Pod ë‹¨ìœ„ë¡œ í™•ì¥ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">workers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n\n  <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2Gi\"</span>\n\n  <span class=\"token key atrule\">autoscaling</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">maxReplicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">16</span>\n    <span class=\"token key atrule\">metrics</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Resource\n      <span class=\"token key atrule\">resource</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> memory\n        <span class=\"token key atrule\">target</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> Utilization\n          <span class=\"token key atrule\">averageUtilization</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n<br>\n<h2 id=\"airflow-ingress\" style=\"position:relative;\"><a href=\"#airflow-ingress\" aria-label=\"airflow ingress permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow Ingress</h2>\n<p>ë³´í†µ K8S í´ëŸ¬ìŠ¤í„°ì— Ingress Controllerë¥¼ ì„¤ì •í•˜ê³  pathë¥¼ í†µí•´ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ì— ì ‘ì†í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. Airflow Chart ì—­ì‹œ Webserverì™€ Flower UIì— ëŒ€í•œ ingressë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ì €ëŠ” nginx-ingress controllerë¥¼ ì‚¬ìš©í•´ì„œ ì§„í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤. ì•„ë˜ ì˜ˆì‹œëŠ” ê°ìì˜ ingress-controller ì„¤ì •ì— ë§ê²Œ ë°”ê¾¸ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ClusterIP\n    <span class=\"token key atrule\">externalPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8080</span>\n    <span class=\"token key atrule\">loadBalancerIP</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span>\n    <span class=\"token key atrule\">loadBalancerSourceRanges</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">...</span>\n\n<span class=\"token key atrule\">ingress</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">kubernetes.io/ingress.class</span><span class=\"token punctuation\">:</span> nginx\n      <span class=\"token key atrule\">ingress.kubernetes.io/rewrite-target</span><span class=\"token punctuation\">:</span> /\n      <span class=\"token key atrule\">nginx.ingress.kubernetes.io/ssl-redirect</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/airflow\"</span>\n    <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"myloadbalancer-domain.com\"</span></code></pre></div>\n<p>ì˜ˆë¥¼ ë“¤ì–´ web pathì— <code class=\"language-text\">/airflow</code> ë¼ê³  ì„¤ì •í•˜ì…¨ë‹¤ë©´, UI ì ‘ì† ì£¼ì†ŒëŠ” <code class=\"language-text\">myloadbalancer-domain.com/airflow</code>ê°€ ë©ë‹ˆë‹¤. flowerë„ ìœ„ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì„¤ì •í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"airflow-auth\" style=\"position:relative;\"><a href=\"#airflow-auth\" aria-label=\"airflow auth permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow Auth</h2>\n<p>Airflow ì—ì„œëŠ” ë‹¤ì–‘í•œ ì¸ì¦ ë°©ì‹ì„ ì§€ì›í•˜ì§€ë§Œ ì—¬ê¸°ì—ì„œëŠ” ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” Password Auth ë°©ì‹ìœ¼ë¡œ ë°°í¬í•˜ê² ìŠµë‹ˆë‹¤. ìƒˆë¡œ ì¶”ê°€ëœ RBAC ì„¤ì •ë„ í•¨ê»˜ ì¶”ê°€í•´ë³´ê² ìŠµë‹ˆë‹¤. ë¨¼ì € <code class=\"language-text\">extraPipPackages</code> ì„¤ì •ì„ í†µí•´ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì£¼ê³  ìƒë‹¨ì— í™˜ê²½ ë³€ìˆ˜ë„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">config</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">AIRFLOW__WEBSERVER__RBAC</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"True\"</span>\n  <span class=\"token key atrule\">AIRFLOW__WEBSERVER__AUTHENTICATE</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"True\"</span>\n  <span class=\"token key atrule\">AIRFLOW__WEBSERVER__AUTH_BACKEND</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"airflow.contrib.auth.backends.password_auth\"</span>\n\n<span class=\"token punctuation\">...</span>\n\n<span class=\"token key atrule\">web</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">extraPipPackages</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"flask-bcrypt\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"flask-oauthlib>=0.9\"</span></code></pre></div>\n<br>\n<p>ì´ì œ ë¡œê·¸ì¸í•  ì‚¬ìš©ìë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. Scheduler Podì˜ Bashì—ì„œ create_user ëª…ë ¹ì–´ë¥¼ í†µí•´ ìƒì„±í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ kubectl exec \\\n  -it \\\n  --namespace airflow \\\n  --container airflow-scheduler \\\n  Deployment/airflow-scheduler \\\n  /bin/bash\n\n$ airflow create_user \\\n--username=admin \\\n--email=test@example.com \\\n--password=mypassword \\\n--role=Admin \\\n--firstname=test \\\n--lastname=park</code></pre></div>\n<br>\n<h2 id=\"airflow-iam-role\" style=\"position:relative;\"><a href=\"#airflow-iam-role\" aria-label=\"airflow iam role permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow IAM Role</h2>\n<p>AWS EKSì™€ ê°™ì€ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ìœ„ì— ë°°í¬í•œë‹¤ë©´ ê° ì»´í¬ë„ŒíŠ¸ì˜ ì„¸ë¶€ ê¶Œí•œì„ ì§€ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ë§Œì¼ Podì— IAM Roleì„ í• ë‹¹í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ AirflowëŠ” í´ëŸ¬ìŠ¤í„°ì˜ ê¸°ë³¸ IAM Roleì¸ EKS worker ì„¤ì •ì„ ë”°ë¥´ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ë³´ì•ˆì„ ì‹ ê²½ì“°ì…”ì•¼ í•œë‹¤ë©´ ì„¤ì •í•˜ëŠ” ê²ƒì´ ë°”ëŒì§í•©ë‹ˆë‹¤. íŠ¹íˆ Airflowì—ì„œ ë‹¤ë¥¸ AWS Managed Service(EMR, Athena, Lambda)ì™€ ì—°ê³„í•˜ëŠ” DAGì´ ì¡´ì¬í•˜ì‹ ë‹¤ë©´ í•„ìˆ˜ì ì…ë‹ˆë‹¤.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">serviceAccount</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">create</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"airflow\"</span>\n  <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">eks.amazonaws.com/role-arn</span><span class=\"token punctuation\">:</span> arn<span class=\"token punctuation\">:</span>aws<span class=\"token punctuation\">:</span>iam<span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span>123456789999<span class=\"token punctuation\">:</span>role/airflow\n\n<span class=\"token punctuation\">...</span>\n\n<span class=\"token key atrule\">securityContext</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">fsGroup</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1000</span></code></pre></div>\n<br>\n<p><code class=\"language-text\">values.yaml</code>ì—ëŠ” í¬í•¨ë˜ì–´ ìˆì§€ ì•Šì§€ë§Œ ê° ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ <code class=\"language-text\">securityContext</code>ë¥¼ ì§€ì •í•´ì£¼ì…”ì•¼ IAM Roleì„ ë§¤í•‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <code class=\"language-text\">IAM Role for Service Account</code>ê°€ ë‚´ë¶€ì ìœ¼ë¡œ K8S TokenProjectionì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì„¤ì •ì„ ì•ˆí•˜ë©´ í† í°ì„ ì½ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. IAM Role ì„¤ì •ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/iam-roles-for-service-accounts-technical-overview.html\">EKS ê³µì‹ ë¬¸ì„œ</a>ë¥¼ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"dags\" style=\"position:relative;\"><a href=\"#dags\" aria-label=\"dags permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DAGs</h2>\n<p>AirflowëŠ” Schedulerê°€ DAG íŒŒì¼ì„ ì£¼ê¸°ì ìœ¼ë¡œ ë™ê¸°í™”í•˜ë©° ë¬¸ë²•ì  ì˜¤ë¥˜ê°€ ì—†ëŠ”ì§€ ì²´í¬í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë‹¨ì¼ ë…¸ë“œì—ì„œëŠ” ë¡œì»¬ì— ìˆëŠ” DAG íŒŒì¼ì„ ì½ìœ¼ë©´ ë˜ì§€ë§Œ K8Sì—ì„œëŠ” worker podê°€ ì—¬ëŸ¬ ë…¸ë“œì— ê±¸ì³ìˆê¸° ë•Œë¬¸ì— ëª¨ë‘ ê°™ì€ DAG íŒŒì¼ì„ ë°”ë¼ë³´ë„ë¡ í•˜ëŠ” ë™ê¸°í™” ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. Helm Chartì—ì„œëŠ” ì´ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ ë‘ ê°€ì§€ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.</p>\n<br>\n<p><strong>1. Git-Sync Sidecar</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># git-sync sidecar</span>\n<span class=\"token key atrule\">dags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">git</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> ssh<span class=\"token punctuation\">:</span>//git@repo.example.com/example.git\n    <span class=\"token key atrule\">repoHost</span><span class=\"token punctuation\">:</span> repo.example.com\n    <span class=\"token key atrule\">secret</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>git<span class=\"token punctuation\">-</span>keys\n    <span class=\"token key atrule\">privateKeyName</span><span class=\"token punctuation\">:</span> id_rsa\n\n    <span class=\"token key atrule\">gitSync</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n      <span class=\"token key atrule\">refreshTime</span><span class=\"token punctuation\">:</span> <span class=\"token number\">60</span></code></pre></div>\n<br>\n<p>ì²« ë²ˆì§¸ ë°©ì‹ì€ <strong>git-sync ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆ</strong>ë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ê°„ë‹¨íˆ ë§í•˜ìë©´ ì£¼ê¸°ì ìœ¼ë¡œ ì™¸ë¶€ ì €ì¥ì†Œë¥¼ ë‹¹ê²¨ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ git ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤. ì‚¬ì´ë“œì¹´ íŒ¨í„´ì´ ìƒì†Œí•˜ì‹œë‹¤ë©´ ì´ì „ì— ì‘ì„±í•œ <a href=\"https://swalloow.github.io/container-patterns/#sidecar-pattern\">ë¶„ì‚° ì»¨í…Œì´ë„ˆì—ì„œì˜ ë””ìì¸ íŒ¨í„´</a> ê¸€ì„ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>\n<br>\n<p><strong>2. Shared Persistent Volume</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># EFS PV, PVC</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolume\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>dags\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> airflow\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>dags\n    <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> airflow\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">capacity</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 20Gi\n  <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ReadWriteMany\n  <span class=\"token key atrule\">nfs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span> 0.0.0.0 &lt;<span class=\"token punctuation\">-</span> EFS endpoint\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/airflow\"</span>\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolumeClaim\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>dags\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> airflow\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> airflow\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span>\n  <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ReadWriteMany\n  <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 10Gi\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>dags\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token comment\"># shared persistent volume</span>\n<span class=\"token key atrule\">dags</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">persistence</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">existingClaim</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"airflow-dags\"</span>\n    <span class=\"token key atrule\">accessMode</span><span class=\"token punctuation\">:</span> ReadWriteMany\n    <span class=\"token key atrule\">size</span><span class=\"token punctuation\">:</span> 1Gi</code></pre></div>\n<br>\n<p>ë‘ ë²ˆì§¸ ë°©ì‹ì€ <strong>EFSì™€ ê°™ì€ ê³µìœ  íŒŒì¼ì‹œìŠ¤í…œì„ í™œìš©í•œ ë°©ë²•</strong>ì…ë‹ˆë‹¤. EFSì˜ íŠ¹ì • ê²½ë¡œì— DAG íŒŒì¼ì„ ì €ì¥í•˜ê³  ë§ˆìš´íŠ¸ë¥¼ í†µí•´ ëª¨ë“  Podì´ ê°™ì€ ê²½ë¡œë¥¼ ë°”ë¼ë³´ë„ë¡ ì„¤ì •í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì €ëŠ” EFS PVì™€ PVCë¥¼ ë¨¼ì € ì¶”ê°€í•œë‹¤ìŒ existingClaimì„ í†µí•´ ì°¸ì¡°í•˜ë„ë¡ ì„¤ì •í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"deploy\" style=\"position:relative;\"><a href=\"#deploy\" aria-label=\"deploy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy</h2>\n<p>í•„ìš”í•œ ì„¤ì •ì„ ì™„ë£Œí–ˆë‹¤ë©´ ë°°í¬ëŠ” ì•„ë˜ Helm ëª…ë ¹ì–´ë¥¼ í†µí•´ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ëŠ¥í•˜ë‹¤ë©´ ë°ì´í„°ë² ì´ìŠ¤ëŠ” externalë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. DB ì•”í˜¸ëŠ” secretì„ í†µí•´ ìƒì„±í•˜ê³  ì°¸ì¡°í•˜ë„ë¡ ì„¤ì •í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">helm install stable/airflow \\\n--version 7.1.1 \\\n--namespace airflow \\\n--name airflow \\\n-f ./values.yaml</code></pre></div>\n<br>\n<p>ë°°í¬ ì´í›„ì— namespaceë¥¼ ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ Podì´ ì¡´ì¬í•˜ëŠ”ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1Ep52ZE0lhsbp2R3FOGlC3uFyq7CYPu1D\" alt=\"airflow-po\"></p>\n<br>\n<p>ì´ ê¸€ì—ì„œ ì–¸ê¸‰í•œ ì„¤ì •ì€ FIXME ì£¼ì„ì„ í•´ë‘ì—ˆìœ¼ë‹ˆ ê¶ê¸ˆí•˜ì‹ ë¶„ë“¤ì€ <a href=\"https://github.com/Swalloow/airflow-helm\">https://github.com/Swalloow/airflow-helm</a> ì €ì¥ì†Œë¥¼ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>","excerpt":"ìµœê·¼ Airflowì—ëŠ” Kubernetes ì§€ì›ì„ ìœ„í•´ ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì¶”ê°€ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€í™”ì˜ íë¦„ì— ë”°ë¼ Airflowâ€¦"}}},{"id":"c97edb01-df3d-53e4-bc7a-47e2e5d6feb2","title":"ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆë¡œ Airflow ê¸°ëŠ¥ í™•ì¥í•˜ê¸°","slug":"airflow-sidecar","publishDate":"August 01, 2021","publishDateISO":"2021-08-01","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"943e8b84-7c33-5c3d-9d5a-ac780a6c7746","childMarkdownRemark":{"id":"9370d60d-b64f-5b01-9e00-d82e32fe4218","timeToRead":4,"html":"<p>Airflow 2.1 ë²„ì „ë¶€í„° ê³µì‹ Helm Chartê°€ ì •ì‹ ë¦´ë¦¬ì¦ˆ ë˜ì—ˆìŠµë‹ˆë‹¤.\nì˜¤ëŠ˜ì€ ê³µì‹ ì°¨íŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ ì¤‘ <code class=\"language-text\">extraContainers</code> ì˜µì…˜ì„ í™œìš©í•˜ëŠ” ë°©ë²•ì„ 3ê°€ì§€ ì˜ˆì‹œë¥¼ í†µí•´ ì†Œê°œí•´ë³´ë ¤ í•©ë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"https://swalloow.github.io/airflow-sidecar/#1-s3-sync-container\">S3 Sync Container</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-sidecar/#2-permission-sync-container\">Permission Sync Container</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-sidecar/#3-kerberos-container\">Kerberos Container</a></li>\n</ul>\n<br>\n<h2 id=\"sidecar-container\" style=\"position:relative;\"><a href=\"#sidecar-container\" aria-label=\"sidecar container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sidecar Container</h2>\n<p>ë¶„ì‚° ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œ ì‚¬ì´ë“œì¹´ íŒ¨í„´ì´ë€ Pod ì•ˆì—ì„œ ë‘ ê°œ ì´ìƒì˜ ì»¨í…Œì´ë„ˆë¡œ êµ¬ì„±ë˜ì–´ ìˆëŠ” í˜•íƒœë¥¼ ë§í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆë“¤ì€ ì„œë¡œ ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” ë³¼ë¥¨ì„ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆë¥¼ í™œìš©í•˜ë©´ ë‹¤ìŒê³¼ ì¥ì ì„ ê°€ì ¸ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>ê¸°ì¡´ ë¡œì§ì˜ ë³€ê²½ ì—†ì´ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€</strong>:\nê°€ë” ì¼ë¶€ ê¸°ëŠ¥ ì¶”ê°€ë¥¼ ìœ„í•´ Airflow ì €ì¥ì†Œ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ê²½ìš°ê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ ì´ë ‡ê²Œ í•œë²ˆ ìˆ˜ì •í•˜ê³  ë‚˜ë©´ ì´í›„ì— ë²„ì „ ì—…ë°ì´íŠ¸í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ë²„ì „ ë¸Œëœì¹˜ì™€ ë³‘í•©í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìƒê¹ë‹ˆë‹¤. ë§Œì•½ ì›í•˜ëŠ” ê¸°ëŠ¥ì´ ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤ë©´ ê¸°ì¡´ ì €ì¥ì†Œì˜ ë³€ê²½ ì—†ì´ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>ì»¨í…Œì´ë„ˆ ì¬ì‚¬ìš©</strong>:\nì‚¬ë‚´ì—ì„œ ê°œë°œ í™˜ê²½ì— ë”°ë¼ ë˜ëŠ” ì ‘ê·¼ ê¶Œí•œì— ë”°ë¼ Airflow ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—¬ëŸ¬ ê°œ êµ¬ì„±í•˜ê³  ìš´ì˜í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆë¡œ êµ¬ì„±í•œ ê¸°ëŠ¥ì€ ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ìƒˆë¡œ ë°°í¬í•œ Airflow ì¸ìŠ¤í„´ìŠ¤ì— ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"airflow-extracontainers\" style=\"position:relative;\"><a href=\"#airflow-extracontainers\" aria-label=\"airflow extracontainers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow extraContainers</h2>\n<p>Airflow Helm Chartì—ì„œëŠ” <code class=\"language-text\">extraContainers</code> ì˜µì…˜ì„ í†µí•´ ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆë¥¼ scheduler, webserver, workerì— ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <del>ì œê°€ ê¸°ì—¬í•œ ì˜µì…˜ì…ë‹ˆë‹¤!</del> (<a href=\"https://github.com/apache/airflow/pull/13735\">https://github.com/apache/airflow/pull/13735</a>)</p>\n<p>ì´ì œ ëª‡ ê°€ì§€ ì˜ˆì‹œë¥¼ í†µí•´ ì–´ë–»ê²Œ í™œìš©í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"1-s3-sync-container\" style=\"position:relative;\"><a href=\"#1-s3-sync-container\" aria-label=\"1 s3 sync container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. S3 Sync Container</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1Hh0f6l9jDLHHEaH5OyGU7Nhe5nUnnJU1\"></p>\n<p>AWS MWAA ì²˜ëŸ¼ <strong>S3ë¥¼ DAG ì €ì¥ì†Œë¡œ í™œìš©í•˜ê³  ì‹¶ì€ ê²½ìš°</strong>ì— S3 Sync ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. S3 Sync ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆëŠ” S3 ë²„í‚·ì— ì˜¬ë¼ê°„ íŒŒì¼ì„ DAG ê²½ë¡œì— ì£¼ê¸°ì ìœ¼ë¡œ ë™ê¸°í™”í•˜ëŠ” ì»¨í…Œì´ë„ˆì…ë‹ˆë‹¤. ë§Œì•½ DAG Serialiaztion ì˜µì…˜ì´ í™œì„±í™”ë˜ì–´ ìˆë‹¤ë©´ schedulerì—ë§Œ ì •ì˜í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<p>ì˜ˆì‹œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">scheduler</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">extraContainers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> s3<span class=\"token punctuation\">-</span>sync\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> myrepository/s3<span class=\"token punctuation\">-</span>sync<span class=\"token punctuation\">:</span>latest\n      <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> Always\n      <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dags\n          <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /opt/airflow/dags\n      <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> AWS_BUCKET\n          <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>src\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KEY_PATH\n          <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> dags\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> DEST_PATH\n          <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> /opt/airflow/dags\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> INTERVAL\n          <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"10\"</span></code></pre></div>\n<br>\n<p>ìœ„ì™€ ê°™ì´ ì¸ìŠ¤í„´ìŠ¤ë§ˆë‹¤ ì„œë¡œ ë‹¤ë¥¸ ì„¤ì •ì´ í•„ìš”í•œ ê°’ë“¤ì€ í™˜ê²½ë³€ìˆ˜ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ ì´ë¯¸ì§€ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. S3 ì ‘ê·¼ ê¶Œí•œì€ ì§ì ‘ credentialì„ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ EKSì˜ IRSAë¥¼ í™œìš©í•´ì„œ Role ê¸°ë°˜ìœ¼ë¡œ ì œì–´í•˜ëŠ” í¸ì´ ì¢‹ìŠµë‹ˆë‹¤. Dockerfileì€ <a href=\"https://github.com/Swalloow/s3-sync\">s3sync</a> ì €ì¥ì†Œë¥¼ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"2-permission-sync-container\" style=\"position:relative;\"><a href=\"#2-permission-sync-container\" aria-label=\"2 permission sync container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Permission Sync Container</h2>\n<p>2.0 ë¶€í„° ì¶”ê°€ëœ <strong>DAG level Permissionì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°</strong>, airflow sync-perm ëª…ë ¹ì–´ë¥¼ í†µí•´ DAG ê¶Œí•œì„ ê°±ì‹ í•´ì£¼ì–´ì•¼ Roleì— ê¶Œí•œì œì–´ê°€ ì •ìƒì ìœ¼ë¡œ ë°˜ì˜ë©ë‹ˆë‹¤. Permission Sync ì»¨í…Œì´ë„ˆëŠ” webserverì—ì„œ ì£¼ê¸°ì ìœ¼ë¡œ <code class=\"language-text\">sync-perm</code> ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.</p>\n<p>ì˜ˆì‹œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">webserver</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">extraContainers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> sync<span class=\"token punctuation\">-</span>perm\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> apache/airflow<span class=\"token punctuation\">:</span>2.1.2<span class=\"token punctuation\">-</span>python3.7\n      <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> Always\n      <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"/bin/sh\"</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">args</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"-c\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"while true; do airflow sync-perm; sleep 60; done\"</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dags\n          <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/opt/airflow/dags\"</span>\n      <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> AIRFLOW__CORE__SQL_ALCHEMY_CONN\n          <span class=\"token key atrule\">valueFrom</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">secretKeyRef</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> connection\n              <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>dev<span class=\"token punctuation\">-</span>airflow<span class=\"token punctuation\">-</span>metadata</code></pre></div>\n<br>\n<p>ë³´ì‹œë©´ Airflow ì´ë¯¸ì§€ì™€ ì •ì˜ëœ connectionì„ ì¬í™œìš© í•©ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ ì»¨í…Œì´ë„ˆì™€ ë¶„ë¦¬ë˜ì–´ ìˆìœ¼ë‹ˆ ì‚¬ì´ë“œì¹´ì—ì„œ ë°œìƒí•˜ëŠ” ë¡œê·¸ë§Œ ë”°ë¡œ í™•ì¸í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"3-kerberos-container\" style=\"position:relative;\"><a href=\"#3-kerberos-container\" aria-label=\"3 kerberos container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Kerberos Container</h2>\n<p>í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ Kerberos ì¸ì¦ì´ í•„ìš”í•œ ê²½ìš°, Kerberos ì»¨í…Œì´ë„ˆë¥¼ í™œìš©í•˜ë©´ ì¸ì¦ í† í° ê°±ì‹ ì„ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href=\"https://airflow.apache.org/docs/apache-airflow/stable/production-deployment.html#kerberos-authenticated-workers\">Airflow ê³µì‹ ë¬¸ì„œ</a>ì˜ production-deployment ë¶€ë¶„ì„ ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<p>In the Kubernetes environment, this can be realized by the\nconcept of sideâ€car, where both Kerberos token refresher and\nworker are part of the same Pod. Only the Kerberos sideâ€car has\naccess to Keytab secret and both containers in the same Pod\nshare the volume, where temporary token is written by the sideâ€\ncare container and read by the worker container.</p>\n</blockquote>\n<p>ëŒ€ëµ K8S í™˜ê²½ì—ì„œ ì‚¬ì´ë“œì¹´ í˜•íƒœë¡œ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ë‚´ìš©ì…ë‹ˆë‹¤.\nì´ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ ê·¸ë ¤ë³´ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=14rfnQmDROdWpqN4TNQJr02_sIT9E_K0i\" alt=\"krb\"></p>\n<p>kerberos ì»¨í…Œì´ë„ˆëŠ” keytabì´ ì¡´ì¬í•˜ëŠ” ë³¼ë¥¨ì— ì ‘ê·¼í•˜ê³  kinit ëª…ë ¹ì–´ë¥¼ í†µí•´ ccacheë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤. airflow ì¸ìŠ¤í„´ìŠ¤ë“¤ì˜ workerëŠ” í•´ë‹¹ ë³¼ë¥¨ì˜ ê°±ì‹ ëœ í† í°ì„ í†µí•´ ì¸ì¦ì„ ë‹¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. prod, devì™€ ê°™ì´ ì—¬ëŸ¬ airflowë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ kerberosì˜ ì»¨í…Œì´ë„ˆì—ì„œ í•œë²ˆë§Œ ìºì‹œ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë©´ ë©ë‹ˆë‹¤. </p>\n<p>ì˜ˆì‹œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">worker</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">extraContainers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> worker<span class=\"token punctuation\">-</span>kerberos\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> myrepository/kerberos<span class=\"token punctuation\">:</span>latest\n      <span class=\"token key atrule\">imagePullPolicy</span><span class=\"token punctuation\">:</span> Always\n      <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> keytab\n          <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /etc/keytab\n      <span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> INTERVAL\n          <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3600\"</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> KRB5_CONFIG\n          <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> /etc/keytab/krb5.conf\n\n<span class=\"token punctuation\">...</span>\n\n<span class=\"token key atrule\">extraVolumes</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> keytab\n    <span class=\"token key atrule\">persistentVolumeClaim</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">claimName</span><span class=\"token punctuation\">:</span> airflow<span class=\"token punctuation\">-</span>keytab\n<span class=\"token key atrule\">extraVolumeMounts</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> keytab\n    <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/etc/keytab\"</span></code></pre></div>\n<br>\n<p>ìœ„ì™€ ê°™ì´ keytabì´ ì¡´ì¬í•˜ëŠ” ë³¼ë¥¨ì„ ë§ˆìš´íŠ¸í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"ì •ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë¦¬</h2>\n<p>ì´ì™¸ì—ë„ ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆë¥¼ ì˜ í™œìš©í•œë‹¤ë©´ ë‹¤ì–‘í•œ ê¸°ëŠ¥ìœ¼ë¡œ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n<code class=\"language-text\">extraInitContainers</code> ì˜µì…˜ë„ ìˆìœ¼ë‹ˆ í•¨ê»˜ í™œìš©í•´ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"https://airflow.apache.org/docs/helm-chart/stable/using-additional-containers.html\">https://airflow.apache.org/docs/helm-chart/stable/using-additional-containers.html</a></li>\n</ul>","excerpt":"Airflow 2.1 ë²„ì „ë¶€í„° ê³µì‹ Helm Chartâ€¦"}}},{"id":"5a25926b-645a-574b-ba52-5085574c8619","title":"AWS EMRì—ì„œ S3 ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­","slug":"aws-emr-s3-spark","publishDate":"September 09, 2017","publishDateISO":"2017-09-09","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"0b9a2387-1599-568e-a5c4-5841d21e528b","childMarkdownRemark":{"id":"2f4a55d7-9be9-53d7-a09a-4da4630a4cde","timeToRead":3,"html":"<p>AWS EMRì—ì„œ Sparkì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, S3ë¥¼ ì €ì¥ì†Œë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.\nì´ë•Œ ì£¼ì˜í•´ì•¼ í•  ì‚¬í•­ë“¤ì„ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><strong>ìµœê·¼ ìˆ˜ì •ì‚¬í•­</strong> : í•´ë‹¹ ì´ìŠˆëŠ” EMR ìµœì‹  ë²„ì „ì—ì„œ ëŒ€ë¶€ë¶„ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n<li>ìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://aws.amazon.com/ko/blogs/korea/improve-apache-spark-write-performance-on-apache-parquet-formats-with-the-emrfs-s3-optimized-committer/\">Parquet í˜•ì‹ì˜ EMRFS S3 ìµœì í™” ì»¤ë¯¸í„°ë¥¼ í†µí•œ Apache Spark ì“°ê¸° ì„±ëŠ¥ ê°œì„ í•˜ê¸°</a> ì—ì„œ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</li>\n</ul>\n<br>\n<h2 id=\"aws-emr-spark-ê·¸ë¦¬ê³ -s3\" style=\"position:relative;\"><a href=\"#aws-emr-spark-%EA%B7%B8%EB%A6%AC%EA%B3%A0-s3\" aria-label=\"aws emr spark ê·¸ë¦¬ê³  s3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS EMR, Spark ê·¸ë¦¬ê³  S3</h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1FWjProAZAa51cBO6nkLEq1kRhpeG8uhQ\"></p>\n<br>\n<p>Dailyë¡œ ëŒë ¤ì•¼ í•˜ëŠ” ETL ì‘ì—…ì˜ ê²½ìš° ìœ„ì™€ ê°™ì´ ê°„ë‹¨í•œ ì•„í‚¤í…ì³ë¡œ êµ¬ì„±í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.\nëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì €ì¥ì†Œë¡œ S3ë¥¼ ì ê·¹ í™œìš©í•˜ê²Œ ë©ë‹ˆë‹¤.\nìµœì´ˆ ì…ìˆ˜ë˜ëŠ” ë¡œê·¸ë¥¼ ì €ì¥í•˜ê¸°ë„ í•˜ê³ , Transformation ì‘ì—… ì´í›„ ì¤‘ê°„ ë˜ëŠ” ìµœì¢… ë°ì´í„°ë¡œ ì €ì¥í•˜ê¸°ë„ í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"ë¬¸ì œ-ìƒí™©\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\" aria-label=\"ë¬¸ì œ ìƒí™© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¬¸ì œ ìƒí™©</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">java.io.IOException: Connection reset by peer\nERROR ContextCleaner: Error cleaning broadcast 5</code></pre></div>\n<p>ìµœê·¼ Spark RDD ì½”ë“œë¥¼ DataFrameìœ¼ë¡œ ë¦¬íŒ©í† ë§ í•˜ë˜ ì¤‘ì— ìœ„ì™€ ê°™ì€ ì˜¤ë¥˜ë¥¼ ê²ªì—ˆìŠµë‹ˆë‹¤.\nì¼ë³„ ë¡œê·¸ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ì „ì²˜ë¦¬í•˜ê³  ë‹¤ì‹œ ì €ì¥í•˜ëŠ”ë° s3 write ë¶€ë¶„ì—ì„œ ê°‘ìê¸° Executorì˜ Connectionì´ ëŠê¸°ëŠ” ë¬¸ì œì˜€ìŠµë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1jKeOxJk_fjDCXfmkLr_GVxTiMAY5IKAQ\"></p>\n<br>\n<p>Ganglia ëª¨ë‹ˆí„°ë§ ê²°ê³¼ë¥¼ ë³´ë©´ ì¤‘ê°„ì— ì•½ 15ë¶„ì˜ ê³µë°±ì´ ìˆëŠ”ë°,\nì´ ë¶€ë¶„ì´ Connectionì´ ì¤‘ê°„ì— ëŠê¸°ê³  ë‹¤ì‹œ ëœ° ë•Œê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„ì…ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"s3n-s3a-s3\" style=\"position:relative;\"><a href=\"#s3n-s3a-s3\" aria-label=\"s3n s3a s3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>S3N, S3A, S3</h2>\n<p>ë¨¼ì € S3ëŠ” File Systemì´ ì•„ë‹Œ <strong>Object Storage</strong> ë¼ëŠ” ì ì„ ì•Œê³  ê³„ì…”ì•¼ í•©ë‹ˆë‹¤.\në”°ë¼ì„œ, S3ì— ë¶„ì‚°ì €ì¥í•˜ëŠ” ê²½ìš°, ìš°ë¦¬ëŠ” Hadoop í´ë¼ì´ì–¸íŠ¸ë¥¼ ê±°ì³ ì €ì¥í•˜ê²Œ ë©ë‹ˆë‹¤.\nHadoopì€ <code class=\"language-text\">S3N, S3A, S3</code> ì´ë ‡ê²Œ ì„¸ ê°€ì§€ ì‹œìŠ¤í…œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê° í´ë¼ì´ì–¸íŠ¸ëŠ” URI ìŠ¤í‚¤ë§ˆë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><strong>S3N (s3n://)</strong> : S3Nì€ S3ì— ì¼ë°˜ íŒŒì¼ì„ ì½ê³  ì“°ëŠ” ê¸°ë³¸ íŒŒì¼ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. S3Nì€ ì•ˆì •ì ì´ë©° ë„ë¦¬ ì‚¬ìš©ë˜ê³  ìˆì§€ë§Œ í˜„ì¬ëŠ” ì—…ë°ì´íŠ¸ê°€ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. S3Nì˜ ë‹¨ì ì€ íŒŒì¼ ì—‘ì„¸ìŠ¤ê°€ í•œë²ˆì— 5GBë¡œ ì œí•œë˜ì–´ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤.</li>\n<li><strong>S3A (s3a://)</strong> : S3AëŠ” S3Nì„ ê°œì„ í•œ ë‹¤ìŒ ë²„ì „ì˜ íŒŒì¼ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. S3AëŠ” Amazonì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ S3ì™€ ìƒí˜¸ ì‘ìš©í•©ë‹ˆë‹¤. S3AëŠ” 5GB ì´ìƒì˜ íŒŒì¼ ì•¡ì„¸ìŠ¤ë¥¼ ì§€ì›í•˜ë©° ì„±ëŠ¥ì´ ë§ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n<li><strong>S3 (s3://)</strong> : S3ëŠ” Hadoop 0.10 ë²„ì „ë¶€í„° ë‚˜ì˜¨ ë¸”ë¡ ê¸°ë°˜ì˜ S3 íŒŒì¼ ì‹œìŠ¤í…œ ì…ë‹ˆë‹¤. ë”°ë¼ì„œ íŒŒì¼ì´ HDFSì— ìˆëŠ” ê²ƒê³¼ ê°™ì´ ë¸”ë¡ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.</li>\n</ul>\n<p>EMRì€ EMRFS ë¼ëŠ” íŒŒì¼ ì‹œìŠ¤í…œì´ ë³„ë„ë¡œ ì¡´ì¬í•©ë‹ˆë‹¤.\nEMRì˜ S3 íŒŒì¼ ì‹œìŠ¤í…œê³¼ Hadoopì—ì„œì˜ S3 íŒŒì¼ ì‹œìŠ¤í…œì€ ì„œë¡œ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— í•­ìƒ ì£¼ì˜í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.\nEMRì˜ ê²½ìš° <strong>s3</strong> ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë°˜ë©´ì— s3aì˜ ê²½ìš° EMRFSì™€ í˜¸í™˜ë˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•©ë‹ˆë‹¤.\në¬¼ë¡  ì‹¤í–‰ ë  ë•Œë„ ìˆì§€ë§Œ ìœ„ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"parquet-ì €ì¥-ì„±ëŠ¥-ê°œì„ í•˜ê¸°\" style=\"position:relative;\"><a href=\"#parquet-%EC%A0%80%EC%9E%A5-%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%ED%95%98%EA%B8%B0\" aria-label=\"parquet ì €ì¥ ì„±ëŠ¥ ê°œì„ í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Parquet ì €ì¥ ì„±ëŠ¥ ê°œì„ í•˜ê¸°</h2>\n<p>ìœ„ì˜ ì˜¤ë¥˜ëŠ” URIë¥¼ s3ë¡œ ìˆ˜ì •í•´ì„œ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ S3ì— parquetë¡œ ì €ì¥í•˜ëŠ” ì†ë„ê°€ ë„ˆë¬´ ëŠë ¤ ì´ ë¶€ë¶„ì„ ê°œì„ í•´ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.</p>\n<p>ë¨¼ì € Sparkì—ëŠ” Parquet ë¹Œë“œ ì†ë„ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ <code class=\"language-text\">DirectParquetOutputCommitter</code>ë¼ëŠ” ê¸°ëŠ¥ì´ ìˆì—ˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ, S3ì— ì €ì¥í•  ë•Œ ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë°ì´í„° ìœ ì‹¤ì´ ë°œìƒí•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\n<a href=\"https://issues.apache.org/jira/browse/SPARK-10063\">SPARK-10063 JIRA í‹°ì¼“ ì°¸ê³ </a></p>\n<p>ì´ëŸ¬í•œ ì´ìœ ë¡œ Spark 2.0 ë²„ì „ë¶€í„° ì´ ì˜µì…˜ì€ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì„±ëŠ¥ ê°œì„ ì´ í•„ìš”í–ˆê¸° ë•Œë¬¸ì— Spark ì‚¬ìš©ìë“¤ì€ ëŒ€ì•ˆì„ ìš”êµ¬í–ˆìŠµë‹ˆë‹¤.\në³¸ë˜ì˜ FileCommiterê°€ ëŠë¦° ì´ìœ ëŠ” rename ì—°ì‚° ë•Œë¬¸ì´ì—ˆìŠµë‹ˆë‹¤.\nì‹¤ì œ íŒŒì¼ ì‹œìŠ¤í…œ(HDFS)ì—ì„œ rename ì—°ì‚°ì€ ëŒ€ìƒ íŒŒì¼ ì‹œìŠ¤í…œì˜ ì„ì‹œ ë””ë ‰í† ë¦¬ë¡œ ì¶œë ¥ í•œ ë‹¤ìŒ, ë””ë ‰í† ë¦¬ì˜ ì´ë¦„ì„ ì»¤ë°‹í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ O(1)ì´ ì†Œìš”ë©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ Object Storageì— ì €ì¥í•˜ëŠ” ê²½ìš°, ë°ì´í„° ì‚¬ì´ì¦ˆë§Œí¼ O(N)ì´ ì†Œìš”ë©ë‹ˆë‹¤.</p>\n<p>ì´ ë¬¸ì œëŠ” s3guardì™€ s3aì˜ ë„ì›€ìœ¼ë¡œ í•´ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.\ngetFileStatus()ì—ì„œì˜ S3 HTTP ì½œì„ ìƒëµí•˜ê³  dynamo metadata ì €ì¥ ë“±ì„ í†µí•´ í•´ê²°í–ˆë‹¤ëŠ”ë° ìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://issues.apache.org/jira/browse/MAPREDUCE-4815\">MAPREDUCE-4815 JIRA í‹°ì¼“</a>ì„ ë³´ì‹œëŠ”ê²Œ ë‚˜ì„ ë“¯ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">spark.hadoop.mapreduce.fileoutputcommitter.algorithm.version 2\nspark.speculation False</code></pre></div>\n<p>ì ìš©í•˜ëŠ” ë°©ë²•ì€ ìœ„ì˜ Spark property ì˜µì…˜ì„ ì¶”ê°€í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. Spark 2.1, Hadoop 2.7.2 ë²„ì „ ì´ìƒë¶€í„° ì‚¬ìš©ê°€ëŠ¥ í•©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ Spark ë¬¸ì„œì—ë„ ë‚˜ì™€ìˆë“¯ì´ ì•„ì§ failureì— ëŒ€í•œ ë³´ì¥ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.\në”°ë¼ì„œ ë¨¼ì € ë¡œì»¬ HDFSì— ì„ì‹œì €ì¥ í›„ distcp ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ S3ë¡œ ì €ì¥í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.\nHadoop 2.8 ë²„ì „ë¶€í„°ëŠ” s3guardê°€ ê¸°ë³¸ìœ¼ë¡œ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— ì•ˆì •í™” ë  ê²ƒ ì´ë¼ê³  í•©ë‹ˆë‹¤.</p>\n<p>ê²°ê³¼ëŠ” ë¡œê·¸ 1ì–µ ê±´ ê¸°ì¤€ <strong>ì•½ 10ë°°</strong> ì˜ ì„±ëŠ¥ ê°œì„ ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\në‘ì„œì—†ì´ ì •ë¦¬í•˜ë‹¤ë³´ë‹ˆ ì¢€ ê¸€ì´ ë³µì¡í•´ì¡Œë„¤ìš”. ê²°ë¡ ì€ 'ì˜µì…˜ì„ ì¶”ê°€í•˜ì' ì…ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://github.com/steveloughran/hadoop/blob/s3guard/HADOOP-13786-committer/hadoop-tools/hadoop-aws/src/site/markdown/tools/hadoop-aws/s3a_committer_architecture.md\">S3A Commiterê°€ ì•„í‚¤í…ì³ ë° êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì— ëŒ€í•˜ì—¬ ì •ë¦¬í•œ ê¸€</a></li>\n<li><a href=\"https://aws.amazon.com/ko/premiumsupport/knowledge-center/emr-file-system-s3/\">AWS ê³µì‹ ë¬¸ì„œì—ì„œ ì •ë¦¬í•œ ê¸€ : S3N, S3A, S3</a></li>\n</ul>\n<br>","excerpt":"AWS EMRì—ì„œ Sparkì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, Sâ€¦"}}},{"id":"d2deb481-7412-52bb-8ec1-07246c2aea6d","title":"Airflow on Kubernetes (3)","slug":"airflow-on-kubernetes-3","publishDate":"February 05, 2021","publishDateISO":"2021-02-05","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"785a541c-cdc7-5256-911b-4e9c1d0e2b40","childMarkdownRemark":{"id":"2d5e8de2-19ad-5003-bef6-aa09dbdc0f32","timeToRead":2,"html":"<p>ìµœê·¼ Airflowì—ëŠ” Kubernetes ì§€ì›ì„ ìœ„í•´ ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì¶”ê°€ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€í™”ì˜ íë¦„ì— ë”°ë¼ Airflowë¥¼ Kubernetes ìœ„ì— ë°°í¬í•˜ê³  ìš´ì˜í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ê¸€ì„ ì‘ì„±í•´ë³´ê³ ì í•©ë‹ˆë‹¤. ì´ ê¸€ì€ ì‹œë¦¬ì¦ˆë¡œ ì—°ì¬ë©ë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-1\">Airflow on Kubernetes (1): CeleryExecutor</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-2\">Airflow on Kubernetes (2): KubernetesExecutor</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-3\">Airflow on Kubernetes (3): Airflow Logging, Monitoring</a></li>\n</ul>\n<br>\n<h2 id=\"airflow-logging\" style=\"position:relative;\"><a href=\"#airflow-logging\" aria-label=\"airflow logging permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow Logging</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1qGMB1yIsT06y3y9knBQ2T2G2O3xQs-8b\" alt=\"airflow-log\"></p>\n<p>Airflowì˜ Task ë¡œê·¸ëŠ” PVë¥¼ í†µí•´ ì˜êµ¬ ë³¼ë¥¨ì— ì €ì¥í•˜ê±°ë‚˜ <strong>Remote Logging</strong> ì„¤ì •ì„ í†µí•´ ì™¸ë¶€ ì €ì¥ì†Œë¡œ ìˆ˜ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. S3, ES, GCS ë“± ë‹¤ì–‘í•œ ì €ì¥ì†Œë¥¼ ì§€ì›í•©ë‹ˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ S3ë¡œ ì„¤ì •í•˜ë©´ Task ë¡œê·¸ì˜ ìˆ˜ëª…ì£¼ê¸°ë¥¼ S3 Lifecycleì— ì˜í•´ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\nì°¸ê³ ë¡œ 2.0 ë²„ì „ë¶€í„° ë¡œê·¸ ê´€ë ¨ ì„¤ì •ì€ <code class=\"language-text\">core</code>ì—ì„œ <code class=\"language-text\">logging</code> ì„¹ì…˜ìœ¼ë¡œ ì´ë™í–ˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">logging:\n  remote_logging: &quot;True&quot;\n  remote_base_log_folder: &quot;s3://mybucketname/airflow&quot;\n  remote_log_conn_id: &quot;aws_default&quot;\n  logging_level: INFO</code></pre></div>\n<br>\n<h2 id=\"airflow-metrics\" style=\"position:relative;\"><a href=\"#airflow-metrics\" aria-label=\"airflow metrics permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow Metrics</h2>\n<p>AirflowëŠ” <a href=\"https://airflow.apache.org/docs/apache-airflow/stable/logging-monitoring/metrics.html\">StatsDë¥¼ í†µí•œ ë©”íŠ¸ë¦­ ì „ì†¡ ë°©ë²•</a>ì„ ê³µì‹ ì§€ì›í•©ë‹ˆë‹¤.\nK8S í™˜ê²½ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” Prometheusì„ í†µí•´ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ëŠ” ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ì´ 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.\nOfficial Helm Chartì˜ ê²½ìš° statsd-exportë¥¼ í†µí•´ ì „ì†¡í•˜ëŠ” ë°©ë²•ì„ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n<code class=\"language-text\">Values.statsd.enabled</code> ì˜µì…˜ì„ í†µí•´ ì‰½ê²Œ ì„¤ì •í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<p><strong>1. airflow-prometheus-exporter</strong>:\nairflow model ê°ì²´ë¥¼ í™œìš©í•˜ì—¬ prometheus metrics collectorë¥¼ êµ¬í˜„í•œ ëª¨ë“ˆì…ë‹ˆë‹¤.\nstable/airflow chartì—ì„œ ì˜µì…˜ì„ í†µí•´ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©° airflow plugin í˜•íƒœë¡œ êµ¬í˜„ë˜ì–´ ìˆì–´ UIì˜ /metrics ê²½ë¡œì—ì„œ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>2. airflow-statsd-exporter</strong>:\nstatsdëŠ” UDP, TCPë¥¼ í†µí•´ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘ì—ì„œ ì „ì†¡í•˜ëŠ” í”„ë¡ì‹œì…ë‹ˆë‹¤.\nairflowì—ì„œëŠ” ê³µì‹ì ìœ¼ë¡œ statsdë¥¼ í†µí•´ ë©”íŠ¸ë¦­ì„ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nofficial helm chartì—ì„œëŠ” statsdë¥¼ í†µí•´ ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•˜ê³  exporterë¥¼ í†µí•´ prometheusì— ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1T5teIwjMzfvxJGE37oFMOyGFtC9zqfJq\"></p>\n<p>ìˆ˜ì§‘í•˜ëŠ” ê³¼ì •ì€ ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ìŠµë‹ˆë‹¤. statsd-exporterëŠ” Deployment í˜•íƒœë¡œ ë°°í¬ë˜ë©° ìˆ˜ì§‘ ì–´ë…¸í…Œì´ì…˜ì´ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"monitoring\" style=\"position:relative;\"><a href=\"#monitoring\" aria-label=\"monitoring permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monitoring</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1V3YNecz4_GRBV_5fgOFSu13ScbImFmjU\"></p>\n<p>Prometheusì— ì €ì¥ëœ ë©”íŠ¸ë¦­ì€ Grafanaë¥¼ í†µí•´ ë°ì´í„° ì†ŒìŠ¤ë¡œ ì§€ì •í•˜ê³  ì›í•˜ëŠ” ì§€í‘œë¥¼ ì‹œê°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ì˜ ëŒ€ì‹œë³´ë“œì— í™œìš©í•œ ì§€í‘œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>Airflow Scheduler Health</li>\n<li>Number of Queued Tasks</li>\n<li>Number of Running Tasks</li>\n<li>Scheduling Delay by DAG</li>\n<li>DAG Import Time</li>\n<li>DAG Running Duration</li>\n</ul>\n<br>\n<p>ì‚¬ìš©ìê°€ ì‘ì„±í•œ DAGì€ Parserë¥¼ í†µí•´ ê°ì²´ë¡œ ë³€í™˜ë˜ê³  ë©”íƒ€ë°ì´í„° DBì— ì €ì¥ë˜ëŠ”ë° <code class=\"language-text\">DAG Import Time</code>ì€ ì´ ê³¼ì •ì„ ìˆ˜í–‰í•˜ëŠ”ë° ìˆì–´ ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ìœ„ì— ì–¸ê¸‰ëœ ì§€í‘œ ì™¸ì—ë„ ë‹¤ì–‘í•œ ì§€í‘œë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ìì„¸í•œ ë¦¬ìŠ¤íŠ¸ëŠ” <a href=\"https://airflow.apache.org/docs/apache-airflow/stable/logging-monitoring/metrics.html#counters\">Airflow Metrics ê³µì‹ ë¬¸ì„œ</a>ë¥¼ í†µí•´ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>","excerpt":"ìµœê·¼ Airflowì—ëŠ” Kubernetes ì§€ì›ì„ ìœ„í•´ ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì¶”ê°€ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€í™”ì˜ íë¦„ì— ë”°ë¼ Airflowâ€¦"}}},{"id":"5fc58fbf-a43f-5cc7-b43f-3f43770235d5","title":"Airflow on Kubernetes (2)","slug":"airflow-on-kubernetes-2","publishDate":"July 12, 2020","publishDateISO":"2020-07-12","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"166621a6-ce3b-537e-9ac0-f3c2b00413ff","childMarkdownRemark":{"id":"39523c20-8b80-5c48-889e-f9a249db1438","timeToRead":5,"html":"<p>ìµœê·¼ Airflowì—ëŠ” Kubernetes ì§€ì›ì„ ìœ„í•´ ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì¶”ê°€ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€í™”ì˜ íë¦„ì— ë”°ë¼ Airflowë¥¼ Kubernetes ìœ„ì— ë°°í¬í•˜ê³  ìš´ì˜í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ê¸€ì„ ì‘ì„±í•´ë³´ê³ ì í•©ë‹ˆë‹¤. ì´ ê¸€ì€ ì‹œë¦¬ì¦ˆë¡œ ì—°ì¬ë©ë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-1\">Airflow on Kubernetes (1): CeleryExecutor</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-2\">Airflow on Kubernetes (2): KubernetesExecutor</a></li>\n<li><a href=\"https://swalloow.github.io/airflow-on-kubernetes-3\">Airflow on Kubernetes (3): Airflow Logging, Monitoring</a></li>\n</ul>\n<br>\n<h2 id=\"airflow-on-kubernetes\" style=\"position:relative;\"><a href=\"#airflow-on-kubernetes\" aria-label=\"airflow on kubernetes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow on Kubernetes</h2>\n<p>ì§€ë‚œ ê¸€ì—ì„œëŠ” <a href=\"https://github.com/helm/charts/tree/master/stable/airflow\">stable/airflow</a> helm chartë¥¼ ì´ìš©í•˜ì—¬ CeleryExecutorì˜ ê° ëª¨ë“ˆì„ Kubernetes ìœ„ì— ì˜¬ë¦¬ëŠ” ë°©ì‹ì— ëŒ€í•´ ì„¤ëª…í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” ë§ì´ ì‚¬ìš©í•˜ëŠ” Airflow Helm Chartì— ëŒ€í•´ ì•Œì•„ë³´ê³  ìµœê·¼ì— ì¶”ê°€ëœ <strong>Official Airflow Helm Chart</strong>ë¥¼ ì´ìš©í•˜ì—¬ KubernetesExecutorë¥¼ ë°°í¬í–ˆì„ ë•Œ ì–´ë–¤ ì•„í‚¤í…ì³ë¥¼ ê°€ì§€ëŠ”ì§€ì— ëŒ€í•´ ì„¤ëª…ë“œë¦¬ë ¤ í•©ë‹ˆë‹¤. ë¨¼ì € ë§ì´ ì‚¬ìš©í•˜ëŠ” ì°¨íŠ¸ëŠ” ì•„ë˜ì™€ ê°™ì´ 3ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<p><strong>1. stable/airflow</strong>:\në‹¤ì–‘í•œ ì˜µì…˜ì„ ì§€ì›í•˜ê³  ë§ì´ ì‚¬ìš©í•˜ì§€ë§Œ ì»¤ë®¤ë‹ˆí‹° ë²„ì „ì…ë‹ˆë‹¤.\nê³µì‹ ë¦´ë¦¬ì¦ˆ ì´í›„ì— ê°œë°œì´ ì¤‘ë‹¨ë  ì˜ˆì •ì…ë‹ˆë‹¤.</p>\n<p><strong>2. astronomer/airflow-chart</strong>:\nAirflow as a Serviceë¥¼ ê°œë°œí•˜ëŠ” astronomerì—ì„œ ê³µê°œí•œ ì°¨íŠ¸ì…ë‹ˆë‹¤.\nairflow 2.0ì˜ ê³µì‹ ì°¨íŠ¸ë¡œ í™œìš©ë  ì˜ˆì •ì…ë‹ˆë‹¤. (mergeëœ ìƒíƒœ)</p>\n<p><strong>3. apache/airflow-on-k8s-operator</strong>:\nKubernetes Operatorë¥¼ í™œìš©í•œ ë°©ì‹ìœ¼ë¡œ ìœ„ì™€ ë‹¤ë¥¸ êµ¬ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\nêµ¬ê¸€ì—ì„œ apacheì— ê¸°ì¦í–ˆìœ¼ë©° GCPì˜ Composerì—ì„œ í™œìš©ë˜ê³  ìˆë‹¤ê³  ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<p>ì´ì™¸ì—ë„ ìµœê·¼ì— ê³µì‹ ì°¨íŠ¸ê°€ <a href=\"https://github.com/apache/airflow/pull/8777\">PR-8777</a>ì„ í†µí•´ merge ë˜ì—ˆìŠµë‹ˆë‹¤.\nì•„ì§ ì •ì‹ ë¦´ë¦¬ì¦ˆëŠ” ì•„ë‹ˆì§€ë§Œ í° ì´ìŠˆëŠ” ì—†ëŠ” ê²ƒìœ¼ë¡œ ë³´ì—¬ ê³µì‹ ì°¨íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"airflow-executor-on-kubernetes\" style=\"position:relative;\"><a href=\"#airflow-executor-on-kubernetes\" aria-label=\"airflow executor on kubernetes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Airflow Executor on Kubernetes</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1Zi0Ql_Gfn9kQvz3i0P2Xgsh62n63TDYk\" alt=\"task_lifecycle\"></p>\n<p>ë¨¼ì € ê³µì‹ ì°¨íŠ¸ ê¸°ì¤€ìœ¼ë¡œ executorë§ˆë‹¤ ì»´í¬ë„ŒíŠ¸ê°€ ì–´ë–¤ í˜•íƒœë¡œ ì˜¬ë¼ê°€ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\nì»´í¬ë„ŒíŠ¸ëŠ” í¬ê²Œ ì•„ë˜ì™€ ê°™ì´ êµ¬ë¶„í•˜ê³  ìˆìœ¼ë©° ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì€ ë¼ì´í”„ì‚¬ì´í´ì— ë”°ë¼ ë™ì‘í•©ë‹ˆë‹¤.</p>\n<ul>\n<li><strong>webserver</strong>: Airflow UI, RBAC, DAG monitoring</li>\n<li><strong>scheduler</strong>: task monitoring, trigger, DAG sync, DAG processing</li>\n<li><strong>executor</strong>: how task instance running (pluggable)</li>\n<li><strong>worker</strong>: task instance processing</li>\n</ul>\n<br>\n<h2 id=\"localexecutor\" style=\"position:relative;\"><a href=\"#localexecutor\" aria-label=\"localexecutor permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LocalExecutor</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1U7o-jJvDijVh842ueaZwG2joq4cdJZpc\" alt=\"localexecutor\"></p>\n<p>LocalExecutorëŠ” Schedulerì—ì„œ ê° taskê°€ subprocess í˜•íƒœë¡œ ëŒì•„ê°€ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤. Scale-Outì´ ì–´ë µê¸° ë•Œë¬¸ì— ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ìš©ë„ë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"celeryexecutor--dag-pv\" style=\"position:relative;\"><a href=\"#celeryexecutor--dag-pv\" aria-label=\"celeryexecutor  dag pv permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CeleryExecutor + DAG PV</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1Yitccb8iF2rDnzC22wp5lWyxLowiRQhV\" alt=\"celeryexecutor3\"></p>\n<p>CeleryExecutorëŠ” Schedulerê°€ task queueì— ì‘ì—…ì„ ì „ë‹¬í•˜ê³  workerì—ì„œ ì‘ì—…ì´ ìˆ˜í–‰ë˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤. ì§€ë‚œ ë²ˆ ê¸€ì—ì„œ ì–¸ê¸‰í–ˆë“¯ì´ ì—¬ëŸ¬ ë…¸ë“œì— ê±¸ì³ ìˆëŠ” DAG íŒŒì¼ì„ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ <strong>PV, git-sync</strong> 2ê°€ì§€ ì˜µì…˜ì„ ì§€ì›í•©ë‹ˆë‹¤. ì´ ì˜µì…˜ì€ KubernetesExecutorì—ì„œë„ ì§€ì›í•©ë‹ˆë‹¤.</p>\n<br>\n<p>ìœ„ì˜ ê·¸ë¦¼ì—ì„œëŠ” AWS EFSë¥¼ ê¸°ì¤€ìœ¼ë¡œ í‘œí˜„í–ˆì§€ë§Œ NFSë¥¼ ì§€ì›í•˜ëŠ” ìŠ¤í† ë¦¬ì§€ì—ì„œ ëª¨ë‘ í™œìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ ë°©ì‹ì€ ìŠ¤í† ë¦¬ì§€ë¥¼ ë³„ë„ë¡œ ë‘ê¸° ë•Œë¬¸ì— gitê³¼ ë‹¤ë¥´ê²Œ ë°°í¬ ì£¼ê¸°ë¥¼ ê°€ì ¸ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nê·¸ë¦¬ê³  worker podì´ <strong>statefulset</strong> í˜•íƒœë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê° workerì— PVë¥¼ ì—°ê²°í•˜ê³  airflow UIì—ì„œ ê° taskì˜ ë¡œê·¸ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"celeryexecutor--dag-git-sync\" style=\"position:relative;\"><a href=\"#celeryexecutor--dag-git-sync\" aria-label=\"celeryexecutor  dag git sync permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CeleryExecutor + DAG git-sync</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1VodhbkJMzMbMWKookXTiGr8rPChS8Uwe\" alt=\"celeryexecutor4\"></p>\n<p>git-sync ì˜µì…˜ì„ ì‚¬ìš©í•œë‹¤ë©´ ìœ„ì™€ ê°™ì€ ê·¸ë¦¼ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.\nairflowì˜ ê° ì»´í¬ë„ŒíŠ¸ì— git-sync ì»¨í…Œì´ë„ˆê°€ sidecar í˜•íƒœë¡œ ì¶”ê°€ë©ë‹ˆë‹¤.\nì´ ë°©ì‹ì€ <strong>DAG ì „ìš© git repositoryê°€ ìˆë‹¤ë©´ ìë™ìœ¼ë¡œ ë°°í¬ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤</strong>ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. ì²˜ìŒ ì°¨íŠ¸ë¥¼ ë°°í¬í• ë•Œ init container ë‹¨ê³„ì—ì„œ git cloneì„ ìˆ˜í–‰í•˜ê³  ì´í›„ë¶€í„°ëŠ” git-sync ì‚¬ì´ë“œì¹´ ì»¨í…Œì´ë„ˆë¥¼ í†µí•´ ì£¼ê¸°ì ìœ¼ë¡œ pullì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"celeryexecutor--keda-autoscaler\" style=\"position:relative;\"><a href=\"#celeryexecutor--keda-autoscaler\" aria-label=\"celeryexecutor  keda autoscaler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CeleryExecutor + KEDA AutoScaler</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1gT38whMNgcmMLDhegS7TKjVXRO2bm38o\" alt=\"keda\"></p>\n<br>\n<p><strong>KEDA AutoScaler</strong>ëŠ” ê³µì‹ ì°¨íŠ¸ì—ë§Œ ì¶”ê°€ëœ ì˜µì…˜ì…ë‹ˆë‹¤.\nê¸°ì¡´ì˜ Horizontal Pod AutoscalerëŠ” ë¦¬ì†ŒìŠ¤(CPU, Memory) ë©”íŠ¸ë¦­ì„ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤ì¼€ì¼ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ê²Œ ë©ë‹ˆë‹¤. ë°˜ë©´ì— KEDAëŠ” <strong>íŠ¹ì • ì´ë²¤íŠ¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤ì¼€ì¼ ì—¬ë¶€ë¥¼ ê²°ì •</strong>í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ airflowëŠ” metadbë¥¼ í†µí•´ í˜„ì¬ ì‹¤í–‰ ì¤‘ì´ê±°ë‚˜ ëŒ€ê¸° ì¤‘ì¸ taskê°€ ì–¼ë§ˆë‚˜ ì¡´ì¬í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì´ë²¤íŠ¸ë¥¼ í™œìš©í•˜ì—¬ workerì˜ scaleì„ ê²°ì •í•œë‹¤ë©´ queueì— taskê°€ ë§ì´ ì¶”ê°€ë˜ëŠ” ì‹œì ì— ë” ë¹ ë¥´ê²Œ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> ceil<span class=\"token punctuation\">(</span><span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>::<span class=\"token keyword\">decimal</span> <span class=\"token operator\">/</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> task_instance\n<span class=\"token keyword\">WHERE</span> state<span class=\"token operator\">=</span><span class=\"token string\">'running'</span> <span class=\"token operator\">OR</span> state<span class=\"token operator\">=</span><span class=\"token string\">'queued'</span></code></pre></div>\n<p>ì´ë¥¼ ìœ„í•´ airflowì—ì„œëŠ” KEDAì˜ <strong>PostgreSQL trigger</strong>ë¥¼ í™œìš©í•˜ì˜€ê³  ì‹¤ì œ ìœ„ì™€ ê°™ì€ ì¿¼ë¦¬ê°€ ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤. KEDAëŠ” CRDì™€ custom controllerë¡œ êµ¬ì„±ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ê¸°ì¡´ HPAì™€ í•¨ê»˜ ì‚¬ìš© ê°€ëŠ¥í•˜ë©° ëª¨ë“  K8S í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"celeryexecutor-vs-kubernetesexecutor\" style=\"position:relative;\"><a href=\"#celeryexecutor-vs-kubernetesexecutor\" aria-label=\"celeryexecutor vs kubernetesexecutor permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CeleryExecutor vs KubernetesExecutor</h2>\n<p>ì—¬ê¸°ê¹Œì§€ CeleryExecutorì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. CeleryExecutor ë˜í•œ Kubernetes ìœ„ì— ë°°í¬í•˜ë©´ Helm ì°¨íŠ¸ë¥¼ í†µí•œ ì„ ì–¸í˜• ë¦¬ì†ŒìŠ¤ ê´€ë¦¬, ì‰¬ìš´ ë²„ì „ ì—…ë°ì´íŠ¸, DAG ë°°í¬ ìë™í™”, ì‰¬ìš´ ë¦¬ì†ŒìŠ¤ í™•ì¥ ë“±ì˜ ì¥ì ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ Celeryì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ë‚¨ì•„ìˆê¸° ë•Œë¬¸ì— Redis, Celery Workerì— ëŒ€í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ê³„ì† ì ìœ í•˜ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ì‹œ ë§í•´ì„œ, <strong>Scale to Zero</strong>ê°€ ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤. KubernetesExecutorëŠ” taskê°€ ì¡´ì¬í• ë•Œë§Œ podì´ ìƒì„±ë˜ê³  taskê°€ ì™„ë£Œë˜ë©´ ì¢…ë£Œë˜ê¸° ë•Œë¬¸ì— ë” ë¦¬ì†ŒìŠ¤ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"kubernetesexecutor-kubernetespodoperator\" style=\"position:relative;\"><a href=\"#kubernetesexecutor-kubernetespodoperator\" aria-label=\"kubernetesexecutor kubernetespodoperator permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>KubernetesExecutor, KubernetesPodOperator</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1dSfx9OxnCYpw7g0gMmOtnF7mNDb_k5Cg\" alt=\"kubernetesexecutor\"></p>\n<br>\n<p>ìœ„ì˜ ê·¸ë¦¼ì²˜ëŸ¼ KubernetesExecutorëŠ” Brokerì™€ ê°™ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì ìœ í•˜ê³  ìˆì„ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ë¦¬ì†ŒìŠ¤ë¥¼ í• ë‹¹í•˜ê³  ìŠ¤ì¼€ì¤„ë§ í•˜ëŠ” ì—­í• ì€ Kubernetes Schedulerê°€ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. Airflow SchedulerëŠ” API Serverì—ê²Œ task ìˆ˜í–‰ì„ ìœ„í•œ Pod ìƒì„±ì„ ìš”ì²­í•©ë‹ˆë‹¤. workerëŠ” <code class=\"language-text\">images.airflow</code>ì— ì„¤ì •í•œ ì´ë¯¸ì§€ë¡œ Podì´ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ì¶”ê°€ë¡œ í•„ìš”í•œ íŒŒì´ì¬ íŒ¨í‚¤ì§€ê°€ ì¡´ì¬í•œë‹¤ë©´ ë³„ë„ì˜ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ë§Œì¼ task pod ë§ˆë‹¤ ë‹¤ë¥¸ ì´ë¯¸ì§€ì™€ ë¦¬ì†ŒìŠ¤ ì„¤ì •ì„ ê°€ì§€ë„ë¡ í•˜ê³  ì‹¶ë‹¤ë©´ <strong>KubernetesPodOperator</strong>ë¥¼ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤. KubernetesPodOperatorëŠ” workerë¥¼ í†µí•´ podì´ ìƒì„±ë˜ëŠ” êµ¬ì¡°ì´ë¯€ë¡œ íŒŒë¼ë©”í„°ë¥¼ í†µí•´ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ì„¤ì •ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"kubernetesexecutor-process\" style=\"position:relative;\"><a href=\"#kubernetesexecutor-process\" aria-label=\"kubernetesexecutor process permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>KubernetesExecutor Process</h2>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1mviHViGJS1tTQtl4JrgUFR9IdaersPoY\" alt=\"kubeexecutor2\"></p>\n<br>\n<p>KubernetesExecutorëŠ” ìœ„ì™€ ê°™ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•´ ë™ì‘í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ Podì´ ìƒì„±ë˜ëŠ” ê³¼ì •ê³¼ ë™ì¼í•˜ë©° airflowì—ì„œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ python kubernetes client libraryë¥¼ í†µí•´ k8s_model ì´ë¼ëŠ” ê°ì²´ë¡œ K8S APIë¥¼ ì¶”ìƒí™”í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. </p>\n<br>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1hzzK8Jx5olsXsQTiVdPyKPqNA-CA-ulT\" alt=\"kubeexecutor3\"></p>\n<br>\n<p>taskê°€ ì™„ë£Œë˜ê¸° ì „ì— Airflow DB ìƒíƒœ ì—…ë°ì´íŠ¸ ë‹¨ê³„ì—ì„œ OOM ë“±ì˜ ì´ìœ ë¡œ Pod Crashê°€ ì–¸ì œë‚˜ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ì— ëŒ€í•œ ì¥ì•  ì‹œë‚˜ë¦¬ì˜¤ë„ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. DB ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í•˜ë”ë¼ë„ airflow schedulerëŠ” Kubernetes Watch APIë¥¼ í†µí•´ podì˜ ìƒíƒœë¥¼ ì „ë‹¬ë°›ì•„ ë‹¤ì‹œ DB ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. CeleryExecutorì˜ ê²½ìš°, task ìƒíƒœì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ celeryì— ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸í•˜ëŠ” ë°©ì‹ì´ë¼ë©´ <strong>KubernetesExecutorëŠ” ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì „ë‹¬ë°›ê¸° ë•Œë¬¸ì— ìŠ¤ì¼€ì¤„ëŸ¬ì— ëŒ€í•œ ë¶€í•˜ê°€ ë” ë‚®ë‹¤</strong>ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"kubernetesexecutor-batch-cronjob\" style=\"position:relative;\"><a href=\"#kubernetesexecutor-batch-cronjob\" aria-label=\"kubernetesexecutor batch cronjob permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>KubernetesExecutor Batch, CronJob</h2>\n<p>ê³µì‹ ì°¨íŠ¸ì—ì„œëŠ” ì‚¬ìš©ìì˜ í¸ì˜ë¥¼ ìœ„í•´ RBAC ì´ˆê¸° ì‚¬ìš©ìë¥¼ ìƒì„±í•´ì£¼ëŠ” <strong>create-user BatchJob</strong>ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. <strong>Helm Hooks (post-install)</strong> ë¥¼ í†µí•´ ì°¨íŠ¸ ë¦¬ì†ŒìŠ¤ê°€ ëª¨ë‘ ìƒì„±ëœ ì´í›„ì— ìˆ˜í–‰ë©ë‹ˆë‹¤. ë” ì´ìƒ exec ëª…ë ¹ì–´ë¡œ bashì— ë“¤ì–´ê°€ create-user ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤!</p>\n<p>ì¶”ê°€ë¡œ <strong>cleanup CronJob</strong>ì´ ìˆìŠµë‹ˆë‹¤. <code class=\"language-text\">AIRFLOW__KUBERNETES__DELETE_WORKER_PODS</code> ì˜µì…˜ì„ í†µí•´ taskê°€ ëë‚˜ë”ë¼ë„ podì´ ì¢…ë£Œë˜ì§€ ì•Šë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ë° ì´ë•Œ ë‚´ê°€ ì›í•˜ëŠ” ì£¼ê¸°ë§ˆë‹¤ ì˜¤ë˜ëœ podì„ ì‚­ì œí•  ìˆ˜ ìˆëŠ” CronJob ì…ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"official-helm-chart-issue\" style=\"position:relative;\"><a href=\"#official-helm-chart-issue\" aria-label=\"official helm chart issue permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Official Helm Chart Issue</h2>\n<p>ê³µì‹ ë²„ì „ ì°¨íŠ¸ëŠ” ì•„ë˜ì™€ ê°™ì€ ì´ìŠˆê°€ ë‚¨ì•„ìˆì§€ë§Œ 2.0 ì •ì‹ ë²„ì „ ì¶œì‹œì™€ í•¨ê»˜ í•´ê²°ë  ì˜ˆì •ì…ë‹ˆë‹¤.\nê¸€ì„ ì‘ì„±í•˜ëŠ” ê³¼ì •ì—ì„œ DAG ë™ê¸°í™” ê´€ë ¨ ë²„ê·¸ë¥¼ ë°œê²¬í•˜ì˜€ì§€ë§Œ ë¦¬ë·°ë¥¼ í†µí•´ ê³§ë°”ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤. (<a href=\"https://github.com/apache/airflow/pull/9371\">PR-9371</a>). stable/airflow ì°¨íŠ¸ì™€ ë¹„êµí–ˆì„ë•Œ ì•„ì‰¬ìš´ ì ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>í˜„ì¬ ë²„ì „ì—ì„œëŠ” backendë¡œ postgresqlë§Œ ì§€ì› <a href=\"https://github.com/apache/airflow/issues/9627\">(ISSUE-9627)</a></li>\n<li>pip ë“± ì‘ì—… ì‹¤í–‰ì— í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜í•˜ëŠ” ì˜µì…˜ì´ ì—†ìŒ</li>\n<li>initContainerë¥¼ ìˆ˜ì •í•´ì„œ ì„¤ì¹˜í•˜ê±°ë‚˜ ì´ë¯¸ì§€ ë³„ë„ë¡œ ìƒì„±í•´ì•¼í•¨</li>\n<li>ì°¨íŠ¸ì— Ingress ì„¤ì •ì— ëŒ€í•œ ì˜µì…˜ì´ ë¶€ì¡±</li>\n<li>KubernetesExecutorì˜ ê²½ìš° remote logging ì„¤ì •ì„ í•´ì•¼ UIì—ì„œ ë¡œê·¸ í™•ì¸ ê°€ëŠ¥</li>\n</ul>\n<br>\n<h2 id=\"deploy\" style=\"position:relative;\"><a href=\"#deploy\" aria-label=\"deploy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy</h2>\n<p>ì‚¬ì‹¤ ë°°í¬ì™€ ì˜µì…˜ì— ëŒ€í•œ ë‚´ìš©ì€ ì§€ë‚œ ê¸€ì—ì„œ ë§í•œ ë‚´ìš©ê³¼ í¬ê²Œ ë‹¤ë¦„ì´ ì—†ìŠµë‹ˆë‹¤. ì•„ì§ ì •ì‹ ë¦´ë¦¬ì¦ˆê¹Œì§€ ë³€ê²½ë  ì—¬ì§€ê°€ ë§ë‹¤ë³´ë‹ˆ ì•„ë˜ ê³µì‹ ë¬¸ì„œ ë”°ë¼í•˜ì‹œëŠ” ë°©ë²•ì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤ <a href=\"https://github.com/apache/airflow/tree/master/chart\">(apache/airflow/chart)</a>. ë‹¤ìŒ ê¸€ì—ì„œëŠ” KubernetesExecutorì˜ ë¡œê¹…ê³¼ ëª¨ë‹ˆí„°ë§ì— ëŒ€í•´ ë‹¤ë£¨ì–´ë³´ê² ìŠµë‹ˆë‹¤!</p>","excerpt":"ìµœê·¼ Airflowì—ëŠ” Kubernetes ì§€ì›ì„ ìœ„í•´ ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì¶”ê°€ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë³€í™”ì˜ íë¦„ì— ë”°ë¼ Airflowâ€¦"}}},{"id":"c9c22c87-26a0-5eef-b26b-689b1f9b3819","title":"Serverless ETL ì„œë¹„ìŠ¤ë“¤ì— ëŒ€í•œ ë¦¬ë·°","slug":"serverless-etl","publishDate":"August 23, 2019","publishDateISO":"2019-08-23","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"a5384ea3-80c9-5139-9665-b747d4894123","childMarkdownRemark":{"id":"30e59fb2-d022-54b7-9e6c-a50bdeeba8f1","timeToRead":5,"html":"<p>15ë…„ AWS Lambdaê°€ ì¶œì‹œëœ ì´í›„, ëœ¨ê±°ìš´ ë°˜ì‘ì„ ë³´ì´ë©° ë‹¤ì–‘í•œ ì„œë²„ë¦¬ìŠ¤ ì„œë¹„ìŠ¤ë“¤ì´ ì¶œì‹œë˜ì—ˆë‹¤.\nê·¸ ì¤‘ ETLì— ê´€ë ¨ë˜ì–´ ìˆëŠ” ì„œë¹„ìŠ¤ë“¤ì„ ì‚¬ìš©í•´ë³´ë©´ì„œ ëŠë‚€ ì ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ë ¤ í•œë‹¤.</p>\n<br>\n<h1 id=\"lambdaì™€-athenaë¥¼-í™œìš©í•œ-ì¿¼ë¦¬\" style=\"position:relative;\"><a href=\"#lambda%EC%99%80-athena%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EC%BF%BC%EB%A6%AC\" aria-label=\"lambdaì™€ athenaë¥¼ í™œìš©í•œ ì¿¼ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lambdaì™€ Athenaë¥¼ í™œìš©í•œ ì¿¼ë¦¬</h1>\n<p>AthenaëŠ” Prestoë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“  ëŒ€í™”í˜• ì¿¼ë¦¬ ì„œë¹„ìŠ¤ì´ë‹¤.\nì¿¼ë¦¬ ë‹¹ ìŠ¤ìº”í•œ ë°ì´í„°ì˜ TBë‹¹ 5 USD ë§Œ ë‚´ë©´ ëœë‹¤.\në³´í†µ ë¶„ì„ìš© ì¿¼ë¦¬ë¥¼ ìœ„í•œ í´ëŸ¬ìŠ¤í„°ëŠ” ë¦¬ì†ŒìŠ¤ ìš”ì²­ì´ ë¶ˆê·œì¹™ì ì¸ ê²½ìš°ê°€ ë§ë‹¤.\nìš´ì˜ì„ ìœ„í•œ ë¹„ìš©ê¹Œì§€ ê³ ë ¤í•œë‹¤ë©´ ì •ë§ ì¢‹ì€ ì„œë¹„ìŠ¤ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.\ní•˜ì§€ë§Œ ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ê·¸ë ‡ë“¯ ì¥ì ë§Œ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.\níŠ¹íˆ Athenaë¥¼ ë¶„ì„ìš© ì¿¼ë¦¬ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤ë©´ ëª‡ ê°€ì§€ ì œí•œì‚¬í•­ì„ ë§ˆì£¼ì¹  ìˆ˜ë„ ìˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=13Q_Ke3ZJuJxwR3Ahy479hT5nPJcNiSRV\"></p>\n<p>Athenaë¥¼ ETL ìš©ë„ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ Lambda, CloudWatchë¥¼ í†µí•´ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆë‹¤.\nAthena ë¿ë§Œ ì•„ë‹ˆë¼ Glue, EMR ë“± ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë„ ëª¨ë‘ Lambdaë¥¼ í†µí•´ ì‹¤í–‰í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—\nì •ë§ ì˜¨ë””ë©˜ë“œë¡œ ë„ì›Œë†“ëŠ” ì¸ìŠ¤í„´ìŠ¤ í•˜ë‚˜ë„ ì—†ì´ ETLì„ êµ¬ì„±í•  ìˆ˜ë„ ìˆë‹¤.\ní•˜ì§€ë§Œ ì •ë§ ë°ì´í„°ê°€ ë§ê³  ë³µì¡í•œ ì‘ì—…ì´ë¼ë©´ ì•„ë˜ì™€ ê°™ì€ ì œì•½ì‚¬í•­ë“¤ì„ ì˜ ì´í•´í•˜ê³  ì„ íƒí•´ì•¼ í•œë‹¤.</p>\n<br>\n<h2 id=\"êµ¬ê¸€ì˜-ë¹…ì¿¼ë¦¬ì™€-ë‹¬ë¦¬-ì¿¼ë¦¬-ë¹„ìš©ì„-ì¶”ì •í•˜ëŠ”-ê¸°ëŠ¥ì´-ì—†ë‹¤\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%EA%B8%80%EC%9D%98-%EB%B9%85%EC%BF%BC%EB%A6%AC%EC%99%80-%EB%8B%AC%EB%A6%AC-%EC%BF%BC%EB%A6%AC-%EB%B9%84%EC%9A%A9%EC%9D%84-%EC%B6%94%EC%A0%95%ED%95%98%EB%8A%94-%EA%B8%B0%EB%8A%A5%EC%9D%B4-%EC%97%86%EB%8B%A4\" aria-label=\"êµ¬ê¸€ì˜ ë¹…ì¿¼ë¦¬ì™€ ë‹¬ë¦¬ ì¿¼ë¦¬ ë¹„ìš©ì„ ì¶”ì •í•˜ëŠ” ê¸°ëŠ¥ì´ ì—†ë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>êµ¬ê¸€ì˜ ë¹…ì¿¼ë¦¬ì™€ ë‹¬ë¦¬ ì¿¼ë¦¬ ë¹„ìš©ì„ ì¶”ì •í•˜ëŠ” ê¸°ëŠ¥ì´ ì—†ë‹¤</h2>\n<p>AthenaëŠ” ì¿¼ë¦¬ ë¹„ìš©ì„ ì¶”ì •í•˜ëŠ” ê¸°ëŠ¥ì´ ì—†ê¸° ë•Œë¬¸ì— ì˜ ëª¨ë¥´ê³  ì¿¼ë¦¬ë¥¼ ë§‰ ë‚ ë¦°ë‹¤ë©´ ê³¼ê¸ˆ í­íƒ„ì„ ë§ì´í•  ìˆ˜ ìˆë‹¤.\në¬¼ë¡  ì²˜ìŒ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, AWSì— ì‹¤ìˆ˜í•œ ìƒí™©ì„ ì„¤ëª…í•˜ë©´ ì–´ëŠì •ë„ ê³¼ê¸ˆì„ ë¬¼ëŸ¬ì£¼ê¸°ë„ í•œë‹¤.</p>\n<br>\n<h2 id=\"athenaì—ëŠ”-ë™ì‹œ-ì¿¼ë¦¬-ì œí•œê³¼-ì‹œê°„-ì œí•œì´-ì¡´ì¬í•œë‹¤\" style=\"position:relative;\"><a href=\"#athena%EC%97%90%EB%8A%94-%EB%8F%99%EC%8B%9C-%EC%BF%BC%EB%A6%AC-%EC%A0%9C%ED%95%9C%EA%B3%BC-%EC%8B%9C%EA%B0%84-%EC%A0%9C%ED%95%9C%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%9C%EB%8B%A4\" aria-label=\"athenaì—ëŠ” ë™ì‹œ ì¿¼ë¦¬ ì œí•œê³¼ ì‹œê°„ ì œí•œì´ ì¡´ì¬í•œë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Athenaì—ëŠ” ë™ì‹œ ì¿¼ë¦¬ ì œí•œê³¼ ì‹œê°„ ì œí•œì´ ì¡´ì¬í•œë‹¤</h2>\n<p>Athenaì˜ ê¸°ë³¸ ê³„ì • ë‹¹ ì¿¼ë¦¬ í•œë„ëŠ” 20ê°œì´ë‹¤. Supportì— ìš”ì²­í•˜ë©´ ëŠ˜ë ¤ì£¼ê¸°ë„ í•˜ì§€ë§Œ ì´ ì—­ì‹œ ì œí•œì´ ìˆë‹¤. ë˜í•œ 30ë¶„ì´ë¼ëŠ” ì¿¼ë¦¬ ì œí•œ ì‹œê°„ì´ ì¡´ì¬í•œë‹¤.\në”°ë¼ì„œ ì˜¤ë˜ê±¸ë¦¬ê±°ë‚˜ ë¬´ê±°ìš´ ì‘ì—…ì— Athena ì¿¼ë¦¬ë¥¼ í™œìš©í•˜ëŠ” ê²½ìš°, ì•ë‹¨ì— íë¥¼ ë‘ëŠ” ê²½ìš°ê°€ ë§ë‹¤.</p>\n<br>\n<h2 id=\"athenaëŠ”-udfë¥¼-ì§€ì›í•˜ì§€-ì•ŠëŠ”ë‹¤\" style=\"position:relative;\"><a href=\"#athena%EB%8A%94-udf%EB%A5%BC-%EC%A7%80%EC%9B%90%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94%EB%8B%A4\" aria-label=\"athenaëŠ” udfë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AthenaëŠ” UDFë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤</h2>\n<p>ì–´ì©Œë©´ í¬ê²Œ ë‹¤ê°€ì˜¬ ìˆ˜ ìˆëŠ” ì œí•œì‚¬í•­ ì¤‘ì— í•˜ë‚˜ì´ë‹¤.\nUDFë¥¼ ë§ì´ ë“±ë¡í•˜ê³  ì‚¬ìš©í–ˆë‹¤ë©´ ì‚¬ìš©ì ì…ì¥ì—ì„œ ë¶ˆí¸í•  ìˆ˜ ìˆë‹¤.</p>\n<br>\n<h2 id=\"athenaì˜-ctas-ì¿¼ë¦¬ì—ëŠ”-íŒŒí‹°ì…˜-í•œë„ê°€-ì¡´ì¬í•œë‹¤\" style=\"position:relative;\"><a href=\"#athena%EC%9D%98-ctas-%EC%BF%BC%EB%A6%AC%EC%97%90%EB%8A%94-%ED%8C%8C%ED%8B%B0%EC%85%98-%ED%95%9C%EB%8F%84%EA%B0%80-%EC%A1%B4%EC%9E%AC%ED%95%9C%EB%8B%A4\" aria-label=\"athenaì˜ ctas ì¿¼ë¦¬ì—ëŠ” íŒŒí‹°ì…˜ í•œë„ê°€ ì¡´ì¬í•œë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Athenaì˜ CTAS ì¿¼ë¦¬ì—ëŠ” íŒŒí‹°ì…˜ í•œë„ê°€ ì¡´ì¬í•œë‹¤</h2>\n<p>CTAS ì¿¼ë¦¬ë€ SELECTì˜ ê²°ê³¼ë¡œ ì±„ì›Œì§€ëŠ” ìƒˆ í…Œì´ë¸”ì„ ìƒì„±í•˜ëŠ” ì¿¼ë¦¬ë¥¼ ë§í•œë‹¤.\nCTAS ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, WITH ì ˆì˜ external_locationì„ í†µí•´ ì €ì¥ë  ìœ„ì¹˜ë¥¼ ì§€ì •í•œë‹¤.\nì´ ë•Œ Athenaê°€ ìƒì„±í•˜ëŠ” ì¿¼ë¦¬ ê²°ê³¼ íŒŒí‹°ì…˜ì´ 100ê°œë¥¼ ë„˜ì–´ê°€ëŠ” ê²½ìš° ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.</p>\n<br>\n<h1 id=\"glue-etl-data-catalog\" style=\"position:relative;\"><a href=\"#glue-etl-data-catalog\" aria-label=\"glue etl data catalog permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Glue ETL, Data Catalog</h1>\n<p>Glueì™€ S3 BatchëŠ” Athenaì™€ ë‹¬ë¦¬ íƒœìƒë¶€í„° ETLì„ ìœ„í•´ ë§Œë“¤ì–´ì§„ ì„œë²„ë¦¬ìŠ¤ ì„œë¹„ìŠ¤ì´ë‹¤.\níŠ¹íˆ Hive Metastoreë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” Glue Data Catalogì™€\nìë™ìœ¼ë¡œ ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•´ì£¼ëŠ” Glue CrawlerëŠ” ì •ë§ í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\nGlue Data Catalogë¥¼ ì‚¬ìš©í•œë‹¤ë©´ Athena, EMR ë‚´ì—ì„œ Glueë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë°ì´í„° ì†ŒìŠ¤ë¥¼ í†µí•©í•  ìˆ˜ ìˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1rN1-SFqxqljQNQXhEqv0uTpC1ymrVXbo\"></p>\n<p>í•˜ì§€ë§Œ Glue ETLì™€ S3 Batch ì„œë¹„ìŠ¤ëŠ” ìš”ê¸ˆì— ë¹„í•´ í™œìš©ë„ê°€ ë‚®ë‹¤ê³  ìƒê°í•œë‹¤.\në¨¼ì € Glue ETLì€ ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ inputê³¼ outputì„ ì •ì˜í•˜ê³  ê·¸ ì‚¬ì´ì— transform ì‘ì—…ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.\nSparkì˜ DataFrameì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©° DynamicFrame, Built-In Transform ë“±ì„ ì‚¬ìš©í•˜ì—¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•œë‹¤.\nì„œë¹„ìŠ¤ ì¤‘ê°„ì— ì¶”ê°€ë˜ëŠ” ê°„ë‹¨í•œ ETL Batchì— ì‚¬ìš©í•˜ê¸°ëŠ” ë¬´ë‚œí•´ë³´ì´ì§€ë§Œ ê·¸ê²Œ ì•„ë‹ˆë¼ë©´ ì•„ë˜ì™€ ê°™ì€ ì‚¬í•­ë“¤ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤.</p>\n<br>\n<h2 id=\"glue-etlì€-dpuë¥¼-ê¸°ì¤€ìœ¼ë¡œ-ìš”ê¸ˆì´-ê³„ì‚°ëœë‹¤\" style=\"position:relative;\"><a href=\"#glue-etl%EC%9D%80-dpu%EB%A5%BC-%EA%B8%B0%EC%A4%80%EC%9C%BC%EB%A1%9C-%EC%9A%94%EA%B8%88%EC%9D%B4-%EA%B3%84%EC%82%B0%EB%90%9C%EB%8B%A4\" aria-label=\"glue etlì€ dpuë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìš”ê¸ˆì´ ê³„ì‚°ëœë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Glue ETLì€ DPUë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìš”ê¸ˆì´ ê³„ì‚°ëœë‹¤</h2>\n<p>Glue ETLì˜ ìš”ê¸ˆì€ DPUë¼ëŠ” í•˜ë‚˜ì˜ ì²˜ë¦¬ ë‹¨ìœ„ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‚°ì •ë˜ëŠ”ë° 1 DPUëŠ” 4CPUì™€ 16GBì˜ ë©”ëª¨ë¦¬ë¥¼ ê°€ì§„ë‹¤.\nDPU ì‹œê°„ë‹¹ 0.44 USD, ì´ˆ ë‹¨ìœ„ë¡œ ì²­êµ¬ë˜ë©° Apache Spark ìœ í˜• ETL ì‘ì—…ë‹¹ ìµœì†Œ ì‹œê°„ì€ 10ë¶„ì´ë‹¤.\nSpark ê¸°ë°˜ì˜ ETLì—ì„œëŠ” Executorì— ëŒ€í•œ ì„¤ì •ì´ ì¤‘ìš”í•˜ë‹¤.\nì‘ì—…ì— ë”°ë¼ CPUê°€ ë§ì´ í•„ìš”í•  ìˆ˜ë„ ìˆê³  ë©”ëª¨ë¦¬ê°€ ë§ì´ í•„ìš”í•  ìˆ˜ë„ ìˆë‹¤.\ní•˜ì§€ë§Œ GlueëŠ” DPUë¼ëŠ” ë‹¨ìœ„ë¡œ ê³ ì •ë˜ì–´ ìˆë‹¤ë³´ë‹ˆ ë¹„ìš© íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ì› ë‹¤.\në§Œì¼ ìì²´ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‚¬ìš©í•˜ê³  ì „ì²´ íŒŒì´í”„ë¼ì¸ ë‚´ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ë©´\nGlueContextê°€ ëœ¨ëŠ” ì‹œê°„ê¹Œì§€ ê³ ë ¤í–ˆì„ë•Œ ì •ë§ ì €ë ´í•œ ì„œë¹„ìŠ¤ì¸ì§€ ì˜ ëª¨ë¥´ê² ë‹¤.</p>\n<br>\n<h2 id=\"glue-etlì€-ë””ë²„ê¹…-ëª¨ë‹ˆí„°ë§-ê¸°ëŠ¥ì´-ì•„ì§-ë¶€ì¡±í•˜ë‹¤\" style=\"position:relative;\"><a href=\"#glue-etl%EC%9D%80-%EB%94%94%EB%B2%84%EA%B9%85-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%EA%B8%B0%EB%8A%A5%EC%9D%B4-%EC%95%84%EC%A7%81-%EB%B6%80%EC%A1%B1%ED%95%98%EB%8B%A4\" aria-label=\"glue etlì€ ë””ë²„ê¹… ëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥ì´ ì•„ì§ ë¶€ì¡±í•˜ë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Glue ETLì€ ë””ë²„ê¹…, ëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥ì´ ì•„ì§ ë¶€ì¡±í•˜ë‹¤</h2>\n<p>Sparkì—ëŠ” Spark UI ë¼ëŠ” íœ¼ë¥­í•œ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œê°€ ì¡´ì¬í•˜ì§€ë§Œ Glueì—ì„œëŠ” ì•„ì§ ì´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.\nëŒ€ì‹  ìì²´ì ìœ¼ë¡œ CloudWatchë¥¼ í†µí•´ ë©”ëª¨ë¦¬, ë¡œê·¸ë¥¼ ì œê³µí•˜ëŠ”ë° ì•„ì§ ì§€í‘œê°€ ë§ì´ ë¶€ì¡±í•´ë³´ì˜€ë‹¤.\nDAGê°€ ì–´ë–»ê²Œ êµ¬ì„±ë˜ëŠ”ì§€ì™€ Shuffle ê´€ë ¨ ì§€í‘œë„ ë³¼ ìˆ˜ê°€ ì—†ì–´ ë¬´ê±°ìš´ ì‘ì—…ì´ë¼ë©´ ë§ì€ ë…¸ë ¥ì´ í•„ìš”í•˜ë‹¤. ì•„ì§ ì˜¤í”ˆí•œì§€ ì–¼ë§ˆ ì§€ë‚˜ì§€ ì•Šì€ ì„œë¹„ìŠ¤ë¼ ì´ ë¶€ë¶„ì€ ì•ìœ¼ë¡œ ë§ì´ ê°œì„ ë ê±°ë¼ ìƒê°í•œë‹¤.</p>\n<br>\n<h1 id=\"step-functionì„-ì‚¬ìš©í•œ-etl-workflow-ê´€ë¦¬\" style=\"position:relative;\"><a href=\"#step-function%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%9C-etl-workflow-%EA%B4%80%EB%A6%AC\" aria-label=\"step functionì„ ì‚¬ìš©í•œ etl workflow ê´€ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step Functionì„ ì‚¬ìš©í•œ ETL Workflow ê´€ë¦¬</h1>\n<p>Step Functionì€ Serverless ê¸°ë°˜ì˜ Workflow ì„œë¹„ìŠ¤ë‹¤.\nì—¬ê¸°ì—ì„œëŠ” ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” Airflowì™€ ë¹„êµí•´ê°€ë©° Serverless ETLì´ ê°€ì§€ëŠ” íŠ¹ì§•ì„ ì„¤ëª…í•´ë³´ë ¤ í•œë‹¤.</p>\n<br>\n<h2 id=\"step-functionì€-aslì´ë¼ëŠ”-ì–¸ì–´ë¡œ-ì •ì˜ëœë‹¤\" style=\"position:relative;\"><a href=\"#step-function%EC%9D%80-asl%EC%9D%B4%EB%9D%BC%EB%8A%94-%EC%96%B8%EC%96%B4%EB%A1%9C-%EC%A0%95%EC%9D%98%EB%90%9C%EB%8B%A4\" aria-label=\"step functionì€ aslì´ë¼ëŠ” ì–¸ì–´ë¡œ ì •ì˜ëœë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step Functionì€ ASLì´ë¼ëŠ” ì–¸ì–´ë¡œ ì •ì˜ëœë‹¤</h2>\n<p>Step Functionì— ë“¤ì–´ê°€ëŠ” ê° ë‹¨ê³„ì—ëŠ” Lambda, Fargate ë“±ì˜ ì„œë²„ë¦¬ìŠ¤ ì„œë¹„ìŠ¤ê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤.\nê·¸ë¦¬ê³  ê° ë‹¨ê³„ëŠ” Amazon States Language ë¼ëŠ” json ê¸°ë°˜ì˜ êµ¬ì¡°í™”ëœ ì–¸ì–´ë¡œ ì •ì˜ëœë‹¤.\nAirflowê°€ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì´ìœ  ì¤‘ì— í•˜ë‚˜ê°€ íŒŒì´ì¬ìœ¼ë¡œ DAGë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì¸ë°\nì´ì— ë¹„í•´ json ê¸°ë°˜ì˜ Step Functionì€ ë„ˆë¬´ ë³µì¡í•˜ê²Œ ëŠê»´ì¡Œë‹¤.</p>\n<br>\n<h2 id=\"step-functionì—ëŠ”-operator-sensorê°€-ì—†ë‹¤\" style=\"position:relative;\"><a href=\"#step-function%EC%97%90%EB%8A%94-operator-sensor%EA%B0%80-%EC%97%86%EB%8B%A4\" aria-label=\"step functionì—ëŠ” operator sensorê°€ ì—†ë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step Functionì—ëŠ” Operator, Sensorê°€ ì—†ë‹¤</h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1u8wxsTHUK_TMh8ZUfuuY5d7OMbJSur4R\"></p>\n<p>Lambdaì™€ ê°™ì€ ì„œë²„ë¦¬ìŠ¤ ì„œë¹„ìŠ¤ëŠ” ìˆ˜í–‰ì— ëŒ€í•œ ì œí•œ ì‹œê°„ì´ ì¡´ì¬í•œë‹¤.\nê° ë‹¨ê³„ê°€ ëŒ€ë¶€ë¶„ ëŒë‹¤ ê¸°ë°˜ì´ë‹¤ ë³´ë‹ˆ ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ Loopë¥¼ ëŒë©° ì²´í¬í•˜ëŠ” íŒ¨í„´ìœ¼ë¡œ Sensorë¥¼ êµ¬í˜„í•œë‹¤. Airflowì—ëŠ” ë¦¬ì†ŒìŠ¤ë§ˆë‹¤ ë¯¸ë¦¬ ì •ì˜ëœ Operator, Sensorê°€ ë§ì§€ë§Œ Step Functionì—ì„œëŠ” ì´ë¥¼ ë‹¤ êµ¬í˜„í•´ì•¼ í•œë‹¤.\në§Œì¼ Loopë¥¼ í”¼í•˜ê³  ì‹¶ë‹¤ë©´ Fargateë¡œ Sensorë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆì§€ë§Œ FargateëŠ” ìš”ê¸ˆì´ ë§ì´ ë‚˜ì˜¨ë‹¤.</p>\n<br>\n<h2 id=\"ì •ë¦¬í•˜ë©´ì„œ\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC%ED%95%98%EB%A9%B4%EC%84%9C\" aria-label=\"ì •ë¦¬í•˜ë©´ì„œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë¦¬í•˜ë©´ì„œ</h2>\n<p>ì“°ë‹¤ë³´ë‹ˆ ë‹¨ì ë§Œ ë‚˜ì—´í•œ ê²ƒ ê°™ì•„ ë³´ì´ì§€ë§Œ AWS ì„œë¹„ìŠ¤ì™€ ìš”ê¸ˆì€ ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ë˜ê¸° ë•Œë¬¸ì—\në‚˜ì¤‘ì—ëŠ” ì´ëŸ¬í•œ ì œí•œì‚¬í•­ë“¤ì´ í•´ê²°ë ì§€ë„ ëª¨ë¥¸ë‹¤. ê·¸ë¦¬ê³  ìƒí™©ì— ë”°ë¼ ì ì ˆíˆ ì‚¬ìš©í•œë‹¤ë©´ ì¥ì ì´ ë§ë‹¤.\nê·¸ë¦¬ê³  ì„œë²„ë¦¬ìŠ¤ê°€ ì•„ë‹ˆë¼ ì–¸ê¸‰í•˜ì§€ ì•Šì•˜ì§€ë§Œ Managed Cluster ì„œë¹„ìŠ¤ì¸ EMRì„ ì‚¬ìš©í•´ì„œ ëª¨ë‘ í•´ê²°í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤.\në§Œì¼ Event ê¸°ë°˜ì˜ ê°„ë‹¨í•œ ETL ì´ë¼ë©´ Serverless ETLì´ ê°€ì§€ëŠ” ì¥ì ì„ í¬ê²Œ í™œìš©í•´ë³´ê¸¸ ì¶”ì²œí•œë‹¤.</p>","excerpt":"15ë…„ AWS Lambdaê°€ ì¶œì‹œëœ ì´í›„, ëœ¨ê±°ìš´ ë°˜ì‘ì„ ë³´ì´ë©° ë‹¤ì–‘í•œ ì„œë²„ë¦¬ìŠ¤ ì„œë¹„ìŠ¤ë“¤ì´ ì¶œì‹œë˜ì—ˆë‹¤.\nê·¸ ì¤‘ ETLâ€¦"}}},{"id":"c41958b4-0f03-5549-94c4-2e19fa5fcc89","title":"Amazon EKSì— Kubeflow êµ¬ì¶•í•˜ê¸°","slug":"eks-kubeflow","publishDate":"March 10, 2019","publishDateISO":"2019-03-10","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"46a42260-b4aa-51d5-aa64-b7247af33731","childMarkdownRemark":{"id":"fef60629-38e4-5c67-8b2f-f654ddcbf758","timeToRead":3,"html":"<p>AWS EKSëŠ” Fully managed K8S ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” EKS í™˜ê²½ì— Kubeflowë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"http://swalloow.github.io/why-kubeflow\">Why kubeflow in your Infrastructure</a></li>\n<li><a href=\"http://swalloow.github.io/eks-kubeflow\">Amazon EKSì— Kubeflow êµ¬ì¶•í•˜ê¸°</a></li>\n<li>Kubeflowì˜ ModelDB</li>\n<li>Kubeflowì˜ Hyper parameter Tuning (Katib)</li>\n</ul>\n<br>\n<h2 id=\"ê¸°ë³¸-í™˜ê²½-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%B9%98\" aria-label=\"ê¸°ë³¸ í™˜ê²½ ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ê¸°ë³¸ í™˜ê²½ ì„¤ì¹˜</h2>\n<p>Kubeflowë¥¼ ì„¤ì¹˜í•˜ê¸° ì´ì „ì— AWS CLI, Dockerê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\nEKSì—ì„œëŠ” ìµœê·¼ì— GPU ì¸ìŠ¤í„´ìŠ¤ì¸ P2, P3ì— ëŒ€í•œ ì§€ì›ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.\nì´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ AWS Marketplaceì—ì„œ <a href=\"https://aws.amazon.com/marketplace/pp/B07GRHFXGM\">EKS-optimized AMI with GPU Support</a>ë¥¼ êµ¬ë…í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>EKSëŠ” Web UI ë˜ëŠ” eksctlì´ë¼ëŠ” cli ë„êµ¬ë¥¼ ì‚¬ìš©í•´ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\neksctlì€ kubectlì´ë‚˜ kopsì™€ ìœ ì‚¬í•œ ëª…ë ¹ì–´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\nìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://aws.amazon.com/ko/blogs/opensource/eksctl-eks-cluster-one-command/\">https://aws.amazon.com/ko/blogs/opensource/eksctl-eks-cluster-one-command/</a> ì—ì„œ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"eks-í´ëŸ¬ìŠ¤í„°-ìƒì„±\" style=\"position:relative;\"><a href=\"#eks-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%83%9D%EC%84%B1\" aria-label=\"eks í´ëŸ¬ìŠ¤í„° ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EKS í´ëŸ¬ìŠ¤í„° ìƒì„±</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install eksctl</span>\n$ brew tap weaveworks/tap\n$ brew <span class=\"token function\">install</span> weaveworks/tap/eksctl\n\n<span class=\"token comment\"># create cluster</span>\n$ eksctl create cluster eks-cpu <span class=\"token punctuation\">\\</span>\n--node-type<span class=\"token operator\">=</span>c4.xlarge <span class=\"token punctuation\">\\</span>\n--timeout<span class=\"token operator\">=</span>40m <span class=\"token punctuation\">\\</span>\n--nodes<span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token punctuation\">\\</span>\n--region<span class=\"token operator\">=</span>ap-northeast-2\n\n<span class=\"token comment\"># NVIDIA driver plugin</span>\nkubectl apply -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v1.11/nvidia-device-plugin.yml\nkubectl get nodes <span class=\"token string\">\"-o=custom-columns=NAME:.metadata.name,MEMORY:.status.allocatable.memory,CPU:.status.allocatable.cpu,GPU:.status.allocatable.nvidia\\.com/gpu\"</span></code></pre></div>\n<ul>\n<li>ë¨¼ì € Homebrewë¡œ <code class=\"language-text\">eksctl</code>ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. ì´í›„ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ c4 ì¸ìŠ¤í„´ìŠ¤ ê¸°ë°˜ì˜ EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ê³  Memory, CPU, GPU ì •ë³´ë¥¼ í™•ì¸í•´ì¤ë‹ˆë‹¤.</li>\n<li>GPU ì¸ìŠ¤í„´ìŠ¤ë¡œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•˜ê³  ì‹¶ë‹¤ë©´ ìƒì„±í•˜ê¸° ì´ì „ì— EC2 Limit í˜ì´ì§€ì—ì„œ p2 ë˜ëŠ” p3 ì¸ìŠ¤í„´ìŠ¤ì˜ limitì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. 0ìœ¼ë¡œ ë˜ì–´ìˆë‹¤ë©´ <code class=\"language-text\">Request limit Increase</code>ê°€ í•„ìš”í•©ë‹ˆë‹¤.</li>\n<li>GPU-enabled workerë¥¼ ê°€ì§€ëŠ” EKS í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•œë‹¤ë©´ NVIDIA driver pluginì„ í™œì„±í™”ì‹œí‚¤ëŠ” ê³¼ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.</li>\n<li>Create clusterì—ì„œ <code class=\"language-text\">AccessDenied</code> ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°, ì‚¬ìš©í•  IAM ìœ ì €ë¥¼ ìƒì„±í•˜ê³  EKS ê´€ë ¨ permissionê³¼ <code class=\"language-text\">AWSCloudFormationReadOnlyAccess</code>ë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. EKSëŠ” í˜„ì¬ ê¸°ì¤€ 1.11 ë²„ì „ì„ defaultë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1y10f8hW0KFZGSn7WLFne_aqUV4YjPQqJ\" alt=\"eks\"></p>\n<p>EKS ë©”ë‰´ì— ê°€ë³´ì‹œë©´ EC2 ì¸ìŠ¤í„´ìŠ¤, ë„¤íŠ¸ì›Œí¬ ì„¤ì •ì´ ì™„ë£Œëœ ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nAWS CloudFormationì—ì„œ clusterì™€ node-groupì— ëŒ€í•œ stackì´ ìƒì„±ë©ë‹ˆë‹¤.</p>\n<p>K8S ëŒ€ì‹œë³´ë“œëŠ” <a href=\"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/dashboard-tutorial.html\">AWS EKS ê³µì‹ ë¬¸ì„œ</a>ë¥¼ ì°¸ê³ í•˜ì—¬ ë„ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"ksonnetì„-ì´ìš©í•œ-kubeflow-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#ksonnet%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-kubeflow-%EC%84%A4%EC%B9%98\" aria-label=\"ksonnetì„ ì´ìš©í•œ kubeflow ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ksonnetì„ ì´ìš©í•œ KubeFlow ì„¤ì¹˜</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install ksonnet</span>\n$ brew <span class=\"token function\">install</span> ksonnet/tap/ks\n$ ks version\nksonnet version: <span class=\"token number\">0.13</span>.1\njsonnet version: v0.11.2\nclient-go version: kubernetes-1.10.4\n\n<span class=\"token comment\"># install kubeflow</span>\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">KUBEFLOW_TAG</span><span class=\"token operator\">=</span>v0.4.1\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">KUBEFLOW_SRC</span><span class=\"token operator\">=</span>/tmp/kubeflow_src\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">KFAPP</span><span class=\"token operator\">=</span>eks-kubeflow\n\n$ <span class=\"token function\">mkdir</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>\n$ <span class=\"token function\">curl</span> https://raw.githubusercontent.com/kubeflow/kubeflow/<span class=\"token variable\">${KUBEFLOW_TAG}</span>/scripts/download.sh <span class=\"token operator\">|</span> <span class=\"token function\">bash</span>\n\n$ <span class=\"token function\">sh</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>/scripts/kfctl.sh init <span class=\"token variable\">${KFAPP}</span> --platform none\n$ <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">${KFAPP}</span>\n$ <span class=\"token function\">sh</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>/scripts/kfctl.sh generate k8s\n$ <span class=\"token function\">sh</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>/scripts/kfctl.sh apply k8s</code></pre></div>\n<p>ksonnetìœ¼ë¡œ KubeFlowë¥¼ ì„¤ì¹˜í•˜ê¸° ì´ì „ì— ë¨¼ì € Homebrewë¡œ ksonnetì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"kubeflow\" style=\"position:relative;\"><a href=\"#kubeflow\" aria-label=\"kubeflow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>KubeFlow</h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1W9rnEB-Bn5IZjLOymYXNxMPNclyY4eJn\" alt=\"kubeflow-pods\">\n<img src=\"http://drive.google.com/uc?export=view&#x26;id=15IWqbbib_vhB_k4FlUK_K39ERUbkVHr0\" alt=\"kubeflow-pvc\"></p>\n<p>KubeFlowë¥¼ ì„¤ì¹˜í•˜ê³  ë‚˜ë©´ Pods, Deployment, Service, ConfigMap ë“± ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë“¤ì´ ìë™ìœ¼ë¡œ ë°°í¬ë©ë‹ˆë‹¤. defaultë¡œ PVCëŠ” EBS gp2 ë³¼ë¥¨ì´ ì„¤ì •ëœ ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>EKSì—ì„œëŠ” IAM ê¸°ë°˜ì˜ RBAC ì¸ì¦ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\nì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ EKSì˜ JupyterHubë¥¼ ë¡œì»¬ì˜ 8080 í¬íŠ¸ë¡œ í¬ì›Œë”©í•´ì„œ ì ‘ì†í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl port-forward svc/jupyter-lb -n kubeflow <span class=\"token number\">8080</span>:80</code></pre></div>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1XNiADQX6faiejXKz3OlpwYMhqZQ6xPoz\" alt=\"kubeflow-jupyterhub\"></p>\n<p>ìœ„ì™€ ê°™ì´ ì„¤ì¹˜í•˜ê³  ë‚œ ì´í›„ì— KubeFlow ë¬¸ì„œì˜ git summerization íŠœí† ë¦¬ì–¼ì„ ê·¸ëŒ€ë¡œ ë”°ë¼í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ìë™ìœ¼ë¡œ ë°°í¬ë˜ë‹¤ ë³´ë‹ˆ ìƒëµí•˜ê³  ë„˜ì–´ê°€ëŠ” ê²½ìš°ê°€ ë§ì€ë° production í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ ê° ì„¤ì • YAML íŒŒì¼ì„ ë‚´ í™˜ê²½ì— ë§ë„ë¡ ìˆ˜ì •í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ì‚­ì œëŠ” ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹¤í–‰ì‹œí‚¤ë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>/<span class=\"token variable\">${KFAPP}</span>\n$ <span class=\"token function\">sh</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>/scripts/kfctl.sh delete k8s</code></pre></div>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://aws.amazon.com/ko/blogs/opensource/kubeflow-amazon-eks/\">https://aws.amazon.com/ko/blogs/opensource/kubeflow-amazon-eks/</a></li>\n<li><a href=\"https://github.com/aws-samples/machine-learning-using-k8s/blob/master/kubeflow.md\">https://github.com/aws-samples/machine-learning-using-k8s/blob/master/kubeflow.md</a></li>\n<li><a href=\"https://eksctl.io/\">https://eksctl.io/</a></li>\n</ul>\n<br>","excerpt":"AWS EKSëŠ” Fully managed K8S ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” EKS í™˜ê²½ì— Kubeflowâ€¦"}}},{"id":"b8091786-4329-5d05-802b-b6b069b38702","title":"Why Kubeflow in your Infrastructure?","slug":"why-kubeflow","publishDate":"March 09, 2019","publishDateISO":"2019-03-09","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"9ea4a340-b124-57db-977d-2a8c3a1a9cdf","childMarkdownRemark":{"id":"a056a78c-da2c-502e-8b6d-1656d874de89","timeToRead":2,"html":"<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1JO_ek8Dyr-i5-uvjd4NpzMKBqL6PICDV\" alt=\"Hidden Technical Dept in Machine Learning Systems\"></p>\n<p>ì‹¤ì œ MLì„ ì„œë¹„ìŠ¤ì— ì ìš©ì‹œí‚¤ëŠ” ì¼ì€ ìœ„ ê·¸ë¦¼ì— ë‚˜íƒ€ë‚œ ë°”ì™€ ê°™ì´ ML ëª¨ë¸ë§ ë³´ë‹¤ ì´ì™¸ì˜ ì‘ì—…ë“¤ì´ ë§ì´ í•„ìš”í•©ë‹ˆë‹¤. íŠ¹íˆ ì„œë¹„ìŠ¤ì˜ ì—¬ëŸ¬ ê¸°ëŠ¥ì— MLì„ ì ìš©ì‹œí‚¤ë ¤ í•˜ëŠ” ê²½ìš°, ì´ëŸ¬í•œ íŒŒì´í”„ë¼ì¸ì´ ë³µì¡í•´ì§€ê³  ìœ ì§€ë³´ìˆ˜ê°€ í˜ë“  ë°©í–¥ìœ¼ë¡œ ê°€ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì´ìœ ë¡œ ê·œëª¨ìˆëŠ” IT ì„œë¹„ìŠ¤ íšŒì‚¬ë“¤ì€ ê³µí†µì˜ ML í”Œë«í¼ì„ êµ¬ì¶•í•˜ê³¤ í•©ë‹ˆë‹¤.</p>\n<p>ì•ìœ¼ë¡œ ì†Œê°œí•˜ë ¤ëŠ” KubeflowëŠ” Kubernetesë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ML Toolkit ì…ë‹ˆë‹¤. ì•„ì§ ë²„ì „ì´ ë‚®ì•„ production í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê³³ì´ ë§ì§€ ì•Šì§€ë§Œ ë¯¸ë¦¬ ì•Œì•„ë‘ë©´ ì¢‹ì„ ê²ƒ ê°™ì•„ ì»´í¬ë„ŒíŠ¸ë“¤ì„ í•˜ë‚˜ì”© ë¶„ì„í•´ë³´ë ¤ í•©ë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"http://swalloow.github.io/why-kubeflow\">Why kubeflow in your Infrastructure</a></li>\n<li><a href=\"http://swalloow.github.io/eks-kubeflow\">Amazon EKSì— Kubeflow êµ¬ì¶•í•˜ê¸°</a></li>\n<li>Kubeflowì˜ ModelDB</li>\n<li>Kubeflowì˜ Hyper parameter Tuning (Katib)</li>\n</ul>\n<br>\n<h2 id=\"why-kubeflow\" style=\"position:relative;\"><a href=\"#why-kubeflow\" aria-label=\"why kubeflow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why Kubeflow?</h2>\n<p>ì´ë¯¸ ê¸°ì¡´ì˜ ì¸í”„ë¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìë™í™”ëœ ML Workflowê°€ êµ¬ì¶•ë˜ì–´ ìˆë‹¤ë©´, êµ³ì´ Kubeflowë¡œ ì˜®ê¸¸ í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì•„ë˜ì™€ ê°™ì€ ìƒí™©ì„ ê°€ì§„ íŒ€ì´ë¼ë©´ KubeflowëŠ” ì¢‹ì€ ì„ íƒì§€ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>ì´ë¯¸ Kubernetes ê¸°ë°˜ì˜ ì¸í”„ë¼ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë©°, ML ì¸í”„ë¼ë¥¼ êµ¬ì¶•í•˜ë ¤ëŠ” ê²½ìš°</li>\n<li>ì„œë¹„ìŠ¤ë¥¼ On-premise, Multi-cloud í™˜ê²½ì— ë°°í¬í•´ì•¼ í•˜ëŠ” ê²½ìš°</li>\n<li>Scalable MLì´ í•„ìˆ˜ì ì´ë©°, ê¸°ì¡´ì˜ ì—¬ëŸ¬ ML ì„œë¹„ìŠ¤ë¥¼ ì‰½ê²Œ ë°°í¬í•˜ê³  ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ ë¹„ìš©ì„ ì¤„ì´ë ¤ëŠ” ê²½ìš°</li>\n<li>Research Engineer, Data Scientist ë¥¼ ìœ„í•œ ì¸í”„ë¼ ê´€ë¦¬ì˜ ë³µì¡ì„±ì„ ìµœì†Œí™”í•˜ê³  ì¼ê´€ëœ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ì—¬ ëª‡ ë²ˆì˜ í´ë¦­ë§Œìœ¼ë¡œ ì„¤ì •ì„ ì‰½ê²Œ í•˜ê³  ì‹¶ì€ ê²½ìš°</li>\n</ul>\n<br>\n<h2 id=\"consistency-in-infrastructure\" style=\"position:relative;\"><a href=\"#consistency-in-infrastructure\" aria-label=\"consistency in infrastructure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Consistency in Infrastructure</h2>\n<p>KubeflowëŠ” Kubernetes ê¸°ë°˜ì˜ ì¸í”„ë¼ê°€ ê°€ì§€ëŠ” ì¥ì ì„ ê·¸ëŒ€ë¡œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ê° ì„œë¹„ìŠ¤ì— ëŒ€í•œ Monitoring, Health Check, Replication ë“±ì˜ ê¸°ë³¸ ìš”êµ¬ì‚¬í•­ì„ ê°–ì¶”ê³  ìˆìœ¼ë©° ì‰¬ìš´ ë°°í¬ í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ì™¸ì—ë„ ì•„ë˜ì™€ ê°™ì€ usecaseì—ì„œ í™œìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>Research Engineerë“¤ì´ ì¸í”„ë¼ê°€ ì•„ë‹Œ ëª¨ë¸ë§ì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë‘ê°€ Docker ê¸°ë°˜ì˜ ì¶”ìƒí™”ëœ í™˜ê²½ì—ì„œ ì—°êµ¬ë¥¼ í•  ìˆ˜ ìˆìœ¼ë©°, ë™ì¼í•œ ë°ì´í„°, ì—°êµ¬ ê²°ê³¼ë¥¼ ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ìƒí™”ëœ GPU í™˜ê²½ì—ì„œ ëª¨ë¸ì„ ë¶„ì‚° í•™ìŠµì‹œí‚¬ ìˆ˜ ìˆìœ¼ë©°, TensorFlow, PyTorch, MXNet ë“± ë‹¤ì–‘í•œ í”„ë ˆì„ì›Œí¬ í™˜ê²½ì„ ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li>KubeflowëŠ” end-to-endë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ML í”„ë¡œì íŠ¸ë¥¼ productionì— ë°˜ì˜í•˜ëŠ” ê³¼ì •ì´ ë‹¨ìˆœí•´ì§‘ë‹ˆë‹¤. ì§€ì†ì ì¸ ë°ì´í„° íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ì—¬ <strong>argo</strong>ë¥¼ í†µí•´ ëª¨ë¸ì„ ì—…ë°ì´íŠ¸ í•˜ê³ , <strong>seldon</strong>ì„ í†µí•´ production í™˜ê²½ì„ í…ŒìŠ¤íŠ¸í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li><strong>Katib</strong>ì„ í†µí•´ Hyper parameter tuning ê³¼ì •ì„ ì‰½ê²Œ ìë™í™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <strong>Katib</strong>ì—ì„œ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì—¬ëŸ¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ í™•ì¥ì‹œí‚¬ ìˆ˜ ìˆìœ¼ë©°, íŠœë‹ ê²°ê³¼ë¥¼ ì§€ì†ì ìœ¼ë¡œ ê¸°ë¡í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<br>\n<h2 id=\"resource-utilization-by-the-training--serving-modules\" style=\"position:relative;\"><a href=\"#resource-utilization-by-the-training--serving-modules\" aria-label=\"resource utilization by the training  serving modules permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resource utilization by the Training / Serving modules</h2>\n<p>í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆìœ¼ë©°, í´ë¼ìš°ë“œ ë¹„ìš©ì„ ìµœì í™”ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. K8S í´ëŸ¬ìŠ¤í„°ëŠ” ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ì— ì—¬ëŸ¬ Podì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì‚¬ìš©í•˜ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ íŒ€ ë˜ëŠ” í”„ë¡œì íŠ¸ ë‹¨ìœ„ë¡œ namespaceë¥¼ ë¶„ë¦¬ì‹œì¼œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ ëª¨ë‹ˆí„°ë§ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì¼ë°˜ì ì¸ í´ë¼ìš°ë“œ ì¸í”„ë¼ í™˜ê²½ì„ ì„œë¹„ìŠ¤ ë¼ì´í”„ì‚¬ì´í´ê³¼ ì—°ê³„ë˜ì–´ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— training jobì´ ëë‚œ ì´í›„ì—ë„ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¼œì ¸ ìˆê¸° ë•Œë¬¸ì— ê·¸ì— ëŒ€í•œ ë¹„ìš©ì„ ì§€ë¶ˆí•´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ Kubeflowë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ì‚¬ìš©ëŸ‰ì— ë”°ë¼ í´ëŸ¬ìŠ¤í„°ë¥¼ auto scaling í•œë‹¤ê±°ë‚˜ spot instanceë¡œ training jobì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://medium.com/kubeflow/why-kubeflow-in-your-infrastructure-56b8fabf1f3e\">https://medium.com/kubeflow/why-kubeflow-in-your-infrastructure-56b8fabf1f3e</a></li>\n</ul>","excerpt":"Hidden Technical Dept in Machine Learning Systems ì‹¤ì œ MLâ€¦"}}},{"id":"50a917d3-58d2-56fb-b3c1-101b359f2f8a","title":"Apache Airflowì— ê¸°ì—¬í•˜ë©´ì„œ ë°°ìš´ ì ë“¤","slug":"airflow-contrib","publishDate":"December 08, 2018","publishDateISO":"2018-12-08","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"a216f939-c13e-5c9e-bf73-f38e51932651","childMarkdownRemark":{"id":"188eab1d-542f-5ef1-b928-da67dfe8eee5","timeToRead":4,"html":"<p>Apache AirflowëŠ” ì½”ë“œë¥¼ í†µí•´ ì›Œí¬í”Œë¡œìš°ë¥¼ ê´€ë¦¬í•˜ê³  ëª¨ë‹ˆí„°ë§ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” í”Œë«í¼ì´ë‹¤.\nAirflow í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì„¤ëª…ì€ ë‹¤ë¥¸ ê¸€ì—ì„œë„ ë§ì´ ë‹¤ë£¨ê¸° ë•Œë¬¸ì— ìƒëµí•˜ê³ \nì´ ê¸€ì—ì„œëŠ” ì²˜ìŒìœ¼ë¡œ ì•„íŒŒì¹˜ í”„ë¡œì íŠ¸ì— ê¸°ì—¬í•´ë³¸ ê²½í—˜ì„ ì •ë¦¬í•´ë³´ë ¤ í•œë‹¤.</p>\n<br>\n<h2 id=\"ê¸°ì—¬í•˜ê²Œ-ëœ-ë°°ê²½\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EC%97%AC%ED%95%98%EA%B2%8C-%EB%90%9C-%EB%B0%B0%EA%B2%BD\" aria-label=\"ê¸°ì—¬í•˜ê²Œ ëœ ë°°ê²½ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ê¸°ì—¬í•˜ê²Œ ëœ ë°°ê²½</h2>\n<p>ë‹¹ì‹œì— ê´€ë¦¬í•˜ë˜ ë°ì´í„° ì¸í”„ë¼ì—ëŠ” ì˜ì¡´ì„±ì´ ì–½í˜€ìˆëŠ” ë°°ì¹˜ ì‘ì—…ì´ ìƒë‹¹íˆ ë§ì•˜ë‹¤.\nì—¬ê¸°ì—ì„œ ì˜ì¡´ì„±ì´ ì–½í˜€ìˆë‹¤ëŠ” ë§ì€ A ì‘ì—…ê³¼ B ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ëë‚˜ê³  ë‚œ ë’¤ C ì‘ì—…ì„ í•´ì•¼í•˜ëŠ” ê²½ìš°ë¥¼ ë§í•œë‹¤.\në˜í•œ ê° ì‘ì—…ë“¤ì€ ì„œë¡œ ë‹¤ë¥¸ ì‹œê°„ì— ìŠ¤ì¼€ì¤„ë§ ë˜ì–´ì•¼ í–ˆê³ , ì‘ì—…ì´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš° ì¬ì‹œë„ ë˜ëŠ” íŠ¹ì • ë¡œì§ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆì–´ì•¼ í–ˆë‹¤.</p>\n<p>ì²˜ìŒì—ëŠ” ë‹¨ìˆœí•œ êµ¬ì¡°ì´ë‹¤ ë³´ë‹ˆ ìŠ¤í¬ë¦½íŠ¸ë¡œ ê´€ë¦¬í–ˆì§€ë§Œ ì ì°¨ ëŠ˜ì–´ë‚˜ëŠ” ìš´ì˜ ì´ìŠˆì— ëŒ€ì‘í•˜ê¸° ìœ„í•´ Airflowë¥¼ í™œìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.\ní•˜ì§€ë§Œ ìš´ì˜í•˜ë‹¤ ë³´ë‹ˆ AWS ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ë“¤ì˜ ì—¬ëŸ¬ ë²„ê·¸ë¥¼ ë°œê²¬í•˜ê²Œ ë˜ì—ˆê³  ì´ë¥¼ ìˆ˜ì •í•˜ê¸° ìœ„í•´ PRì„ ì¶”ê°€í–ˆì—ˆë‹¤.</p>\n<br>\n<h2 id=\"ì•„íŒŒì¹˜-í”„ë¡œì íŠ¸-pr-í”„ë¡œì„¸ìŠ¤\" style=\"position:relative;\"><a href=\"#%EC%95%84%ED%8C%8C%EC%B9%98-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-pr-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4\" aria-label=\"ì•„íŒŒì¹˜ í”„ë¡œì íŠ¸ pr í”„ë¡œì„¸ìŠ¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì•„íŒŒì¹˜ í”„ë¡œì íŠ¸ PR í”„ë¡œì„¸ìŠ¤</h2>\n<p>ì•„íŒŒì¹˜ í”„ë¡œì íŠ¸ëŠ” ì´ìŠˆ ê´€ë¦¬ ë„êµ¬ë¡œ JIRAë¥¼ ì‚¬ìš©í•œë‹¤. CI ë„êµ¬ëŠ” í”„ë¡œì íŠ¸ë§ˆë‹¤ ë‹¤ë¥¸ í¸ì¸ë° Airflowì˜ ê²½ìš° TravisCIë¥¼ ì‚¬ìš©í•œë‹¤.\nëª¨ë“  í”„ë¡œì íŠ¸ì—ëŠ” ì²˜ìŒ í”„ë¡œì íŠ¸ì— ê¸°ì—¬í•˜ë ¤ëŠ” ê°œë°œìë¥¼ ìœ„í•´ <strong>CONTRIBUTING.md</strong> ë¼ëŠ” ë¬¸ì„œë¥¼ ì œê³µí•œë‹¤.\në¬¸ì„œì—ëŠ” ê°œë°œ ë° í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ì–´ë–»ê²Œ êµ¬ì¶•í•´ì•¼í•˜ëŠ”ì§€, ì§€ì¼œì•¼í•  ê·œì¹™, PR ê°€ì´ë“œë¼ì¸ ë“±ì— ëŒ€í•´ ì„¤ëª…ë˜ì–´ ìˆë‹¤.\nê·¸ë¦¬ê³  PR templateë¥¼ ì¤€ìˆ˜í•´ì•¼ í•˜ëŠ”ë° ì˜ ëª¨ë¥´ê² ë‹¤ë©´, ì´ì „ PRë“¤ì„ í™•ì¸í•˜ê³  ë¹„ìŠ·í•œ ì–‘ì‹ìœ¼ë¡œ ì‘ì„±í•˜ë©´ ëœë‹¤.</p>\n<p>ë‚´ê°€ ì²˜ìŒ ì ‘í–ˆë˜ Airflow ë¬¸ì„œì—ëŠ” AWS ê´€ë ¨ Hook, Operatorë„ ë°˜ì˜ë˜ì–´ ìˆì§€ ì•Šì•˜ë‹¤.\nê·¸ë˜ì„œ ì²« PRë¡œ AWS, GCP ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë¬¸ì„œ ê¸°ì—¬ë¥¼ í•˜ê²Œ ë˜ì—ˆë‹¤.\në¬¸ì„œ ê´€ë¦¬ì—ëŠ” <a href=\"https://readthedocs.org/\">readthedocs</a>ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì—ˆê³  Sphinx ë¹Œë“œë¥¼ í†µí•´ ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.</p>\n<p>ì‚¬ìš©í•˜ë‹¤ë³´ë‹ˆ íŠ¹íˆ EMR ê´€ë ¨ Hookê³¼ Operatorì— ë²„ê·¸ê°€ ë§ì•˜ë‹¤.\në§Œì¼ JIRAì— ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆëŠ” ì´ìŠˆê°€ ì•„ë‹ˆë¼ë©´ ì´ìŠˆë¥¼ ìƒˆë¡œ ìƒì„±í•œ ë‹¤ìŒ PRì„ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1d0SNiE9qJza0CtmU8S2k8h4Q3iRPE8vN\"></p>\n<p>ë¹„ìŠ·í•œ ì´ìŠˆë¥¼ ê²ªê³  ìˆëŠ” ì‚¬ëŒë“¤ì´ ìˆì–´ì„œ ì¢€ ì‹ ê¸°í–ˆë‹¤.\nê·¸ë¦¬ê³  <strong>ì•„ì£¼ ì‘ì€ ìˆ˜ì •ì´ë¼ë„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì¶”ê°€</strong>í•´ì•¼ í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œê²Œ ë˜ì—ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1Re-gmGnEOlB8hxPhAkbjYQpQ-6kOzm6j\"></p>\n<p>ì–‘ì‹ë§Œ ì˜ ì§€í‚¤ë©´ ì»¤ë¯¸í„°ë“¤ì€ ì •ë§ ì¹œì ˆí•˜ë‹¤. ë‚´ê°€ íŒŒì•…í•˜ì§€ ëª»í•œ ë¶€ë¶„ê¹Œì§€ ì•Œë ¤ì£¼ê³ , ì½”ë“œ ë¦¬ë·°ë„ ë°›ì„ ìˆ˜ ìˆë‹¤.\në‹¤ë¥¸ PRì„ ì°¸ê³ í•˜ë©´ì„œ ë§ì´ ë°°ìš¸ ìˆ˜ ìˆì—ˆë‹¤.</p>\n<br>\n<h2 id=\"í´ë¼ìš°ë“œ-ì¸í”„ë¼-í…ŒìŠ¤íŠ¸-ë°©ë²•\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EC%9D%B8%ED%94%84%EB%9D%BC-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%B0%A9%EB%B2%95\" aria-label=\"í´ë¼ìš°ë“œ ì¸í”„ë¼ í…ŒìŠ¤íŠ¸ ë°©ë²• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í´ë¼ìš°ë“œ ì¸í”„ë¼ í…ŒìŠ¤íŠ¸ ë°©ë²•</h2>\n<p>AWSëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í´ë¼ìš°ë“œ í™˜ê²½ì´ë‹¤.\në”°ë¼ì„œ ê³¼ê¸ˆë¬¸ì œë¡œ ì¸í•´ ì‹¤ì œë¡œ ì¶”ê°€, ë³€ê²½í•œ ì˜¤í¼ë ˆì´í„°ê°€ ì˜ ë™ì‘í•˜ëŠ”ì§€ ë§¤ë²ˆ í™•ì¸í•´ë³´ê¸°ê°€ í˜ë“¤ë‹¤.\nAirflowì—ì„œëŠ” AWS ì„œë¹„ìŠ¤ë¥¼ Mocking í•˜ê¸° ìœ„í•´ <a href=\"https://github.com/spulec/moto\">moto</a> ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¥¼ í™œìš©í•´ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@mock_s3</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">test_my_model_save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># Create Bucket so that test can run</span>\n    conn <span class=\"token operator\">=</span> boto3<span class=\"token punctuation\">.</span>resource<span class=\"token punctuation\">(</span><span class=\"token string\">'s3'</span><span class=\"token punctuation\">,</span> region_name<span class=\"token operator\">=</span><span class=\"token string\">'us-east-1'</span><span class=\"token punctuation\">)</span>\n    conn<span class=\"token punctuation\">.</span>create_bucket<span class=\"token punctuation\">(</span>Bucket<span class=\"token operator\">=</span><span class=\"token string\">'mybucket'</span><span class=\"token punctuation\">)</span>\n    model_instance <span class=\"token operator\">=</span> MyModel<span class=\"token punctuation\">(</span><span class=\"token string\">'steve'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'is awesome'</span><span class=\"token punctuation\">)</span>\n    model_instance<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    body <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span>Object<span class=\"token punctuation\">(</span><span class=\"token string\">'mybucket'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'steve'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Body'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">assert</span> body <span class=\"token operator\">==</span> <span class=\"token string\">'is awesome'</span></code></pre></div>\n<p>ìœ„ì™€ ê°™ì´ motoì—ì„œ ë¯¸ë¦¬ ì •ì˜í•œ mock objectë¥¼ decoratorë¥¼ ì‚¬ìš©í•˜ì—¬ ì‰½ê²Œ í™œìš©í•  ìˆ˜ ìˆë‹¤.\ní•˜ì§€ë§Œ AWSì—ì„œ ê³µì‹ìœ¼ë¡œ ì§€ì›í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì•„ë‹ˆë‹¤ë³´ë‹ˆ ì—…ë°ì´íŠ¸ê°€ ëŠ¦ì–´ì§€ê¸°ë„ í•œë‹¤.\nì´ëŸ° ì´ìœ ë¡œ ì¸í•´ unittestì˜ mockìœ¼ë¡œ ì‘ì„±ëœ í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ë§ì´ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">TestEmrAddStepsOperator</span><span class=\"token punctuation\">(</span>unittest<span class=\"token punctuation\">.</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># When</span>\n    _config <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'Name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'test_step'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'ActionOnFailure'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'CONTINUE'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'HadoopJarStep'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">'Jar'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'command-runner.jar'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'Args'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string\">'/usr/lib/spark/bin/run-example'</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        configuration<span class=\"token punctuation\">.</span>load_test_config<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># Mock out the emr_client (moto has incorrect response)</span>\n        self<span class=\"token punctuation\">.</span>emr_client_mock <span class=\"token operator\">=</span> MagicMock<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>operator <span class=\"token operator\">=</span> EmrAddStepsOperator<span class=\"token punctuation\">(</span>\n            task_id<span class=\"token operator\">=</span><span class=\"token string\">'test_task'</span><span class=\"token punctuation\">,</span>\n            job_flow_id<span class=\"token operator\">=</span><span class=\"token string\">'j-8989898989'</span><span class=\"token punctuation\">,</span>\n            aws_conn_id<span class=\"token operator\">=</span><span class=\"token string\">'aws_default'</span><span class=\"token punctuation\">,</span>\n            steps<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>_config\n        <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_init</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>operator<span class=\"token punctuation\">.</span>aws_conn_id<span class=\"token punctuation\">,</span> <span class=\"token string\">'aws_default'</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>operator<span class=\"token punctuation\">.</span>emr_conn_id<span class=\"token punctuation\">,</span> <span class=\"token string\">'emr_default'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_render_template</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        ti <span class=\"token operator\">=</span> TaskInstance<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>operator<span class=\"token punctuation\">,</span> DEFAULT_DATE<span class=\"token punctuation\">)</span>\n        ti<span class=\"token punctuation\">.</span>render_templates<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        expected_args <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n            <span class=\"token string\">'Name'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'test_step'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'ActionOnFailure'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'CONTINUE'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'HadoopJarStep'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token string\">'Jar'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'command-runner.jar'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">'Args'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token string\">'/usr/lib/spark/bin/run-example'</span>\n                <span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n\n        self<span class=\"token punctuation\">.</span>assertListEqual<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>operator<span class=\"token punctuation\">.</span>steps<span class=\"token punctuation\">,</span> expected_args<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    unittest<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>unittestë¡œ ì‘ì„±ëœ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” APIë¡œ ì£¼ê³  ë°›ëŠ” jsonì„ ì§ì ‘ ì •ì˜í•´ì¤˜ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆë‹¤.\ní…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í•˜ê³  ë‚œ ë‹¤ìŒ ë°”ë¡œ PRì„ ì¶”ê°€í•˜ëŠ” ê²ƒë³´ë‹¤ ë¡œì»¬ CIë¥¼ ë¯¸ë¦¬ ëŒë ¤ë³´ëŠ”ê²Œ ì¢‹ë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1MEOqsKocQTV8y5y_y2xrpIppkw2ndOvT\"></p>\n<p>TravisCIëŠ” ì˜¤í”ˆì†ŒìŠ¤ì¸ ê²½ìš° ë¬´ë£Œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, yml íŒŒì¼ì— ë¯¸ë¦¬ ì •ì˜ë˜ì–´ ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ë©´ ëœë‹¤. ë¡œì»¬ì—ì„œ CIê°€ í†µê³¼ë˜ê³  ë‚˜ë©´ PRì„ ì¶”ê°€í•´ë„ ì¢‹ë‹¤.\nì‘ì—…ì´ ê¸¸ì–´ì§€ë©´ì„œ ì»¤ë°‹ì´ ì—¬ëŸ¬ ê°œë¡œ ëŠ˜ì–´ë‚˜ëŠ” ê²½ìš°, <strong>commitì„ squash</strong> í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.\n(ë‚˜ì¤‘ì— ë¬¸ì œê°€ ìƒê²¼ì„ ë•Œ ì‰½ê²Œ rebase í•˜ê¸° ìœ„í•¨)</p>\n<br>\n<h2 id=\"ì¡ë‹¤í•œ-ì •ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%9E%A1%EB%8B%A4%ED%95%9C-%EC%A0%95%EB%A6%AC\" aria-label=\"ì¡ë‹¤í•œ ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¡ë‹¤í•œ ì •ë¦¬</h2>\n<ul>\n<li><a href=\"https://issues.apache.org/jira/browse/AIRFLOW-713\">[AIRFLOW-713] EmrCreateJobFlowOperator and EmrAddStepsOperator attributes are not jinjafied</a></li>\n<li><a href=\"https://issues.apache.org/jira/browse/AIRFLOW-950\">[AIRFLOW-950] Missing AWS integrations on documentation::integrations</a></li>\n<li><a href=\"https://issues.apache.org/jira/browse/AIRFLOW-1453\">[AIRFLOW-1453] Add 'steps' into template_fields in EmrAddSteps</a></li>\n<li><a href=\"https://issues.apache.org/jira/browse/AIRFLOW-1436\">[AIRFLOW-1436, AIRFLOW-1475] EmrJobFlowSensor consideres Cancelled step as Successful</a></li>\n</ul>\n<p>ê·¸ ë™ì•ˆ 5ê°œ ì •ë„ì˜ ë²„ê·¸ë¥¼ í•´ê²°í–ˆê³  ìˆ˜ì •í–ˆë˜ AWS EMR ê´€ë ¨ ë²„ê·¸ë“¤ì€ 1.9 - 10 ë²„ì „ì— ëª¨ë‘ ë°˜ì˜ ë˜ì—ˆë‹¤.\nì´ì™¸ì—ë„ Airflowì—ëŠ” ì—¬ì „íˆ ìì˜í•œ ë²„ê·¸ê°€ ë§ì´ ë‚¨ì•„ìˆë‹¤.\n(Dockerë¡œ ìš´ì˜í–ˆì„ ë•Œ ë¡œê·¸ê°€ ì´ìƒí•˜ê²Œ ë‚˜íƒ€ë‚œë‹¤ê±°ë‚˜, SubDag Deadlock ë¬¸ì œ ë“±)\në‹¹ì‹œì— ë¸”ë¡œê·¸ë¥¼ ì—´ì‹¬íˆ í–ˆë‹¤ë©´ ìš´ì˜ ê´€ë ¨í•´ì„œ ê¸€ì„ ë‚¨ê²¼ì„í…ë° í•˜ëŠ” ì•„ì‰¬ì›€ì´ ë‚¨ì•„ìˆë‹¤.</p>\n<p>ì–´ì¨‹ë“  Airflowë¥¼ ì ìš©í•˜ê³  ë‚œ ë’¤, í¸íˆ ìƒˆë²½ì— ì ë“¤ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.\nì§€ê¸ˆì€ ë¨¸ì‹ ëŸ¬ë‹ íŒŒì´í”„ë¼ì¸ ê´€ë ¨ ë„êµ¬ê°€ ë§ì´ ë‚˜ì™”ì§€ë§Œ, Airflowë„ ì¶©ë¶„íˆ í•´ë‹¹ ì˜ì—­ì„ ì»¤ë²„í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ê·¸ë¦¬ê³  ì˜¤í”ˆì†ŒìŠ¤ì— ëŒ€í•´ ë‹¤ì‹œ í•œë²ˆ ìƒê°í•´ë³´ê²Œ ë˜ì—ˆë‹¤.\në§ì€ ì‚¬ëŒë“¤ì´ ì°¸ì—¬í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ì´ë‹¤ ë³´ë‹ˆ ë‹¹ì—°íˆ ë²„ê·¸ë‚˜ ì´ìŠˆê°€ ìƒê¸¸ ìˆ˜ ìˆê³ ,\në¬¸ì œê°€ ìƒê²¼ì„ ë•Œ ê³ ì³ë‹¬ë¼ê³  ê°•ìš”í•˜ê±°ë‚˜ ê¸°ë‹¤ë¦¬ëŠ” ê²ƒë³´ë‹¤ ìŠ¤ìŠ¤ë¡œ ìˆ˜ì •í•´ì„œ ê¸°ì—¬í•˜ëŠ” ê²ƒì´ ì˜¬ë°”ë¥¸ íƒœë„ê°€ ì•„ë‹Œê°€ ì‹¶ë‹¤.</p>","excerpt":"Apache AirflowëŠ” ì½”ë“œë¥¼ í†µí•´ ì›Œí¬í”Œë¡œìš°ë¥¼ ê´€ë¦¬í•˜ê³  ëª¨ë‹ˆí„°ë§ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” í”Œë«í¼ì´ë‹¤.\nAirflowâ€¦"}}},{"id":"c548511f-3e1d-5c2e-a96f-b0e297f133e2","title":"Kafka Connectë¡œ S3ì— ë°ì´í„°ë¥¼ ì €ì¥í•´ë³´ì","slug":"kafka-connect","publishDate":"November 16, 2018","publishDateISO":"2018-11-16","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"e81fb246-b516-57b8-bf98-7771d7cfb4fc","childMarkdownRemark":{"id":"26d0807b-21d9-5de5-864e-e44c27cc2883","timeToRead":4,"html":"<p>Kafkaì—ëŠ” ì •ë§ ìœ ìš©í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.\nì˜¤ëŠ˜ì€ ê·¸ ì¤‘ í•˜ë‚˜ì¸ Kafka-Connectì— ëŒ€í•´ ì•Œì•„ë³´ê³ ,\nConfluentì—ì„œ ì œê³µí•˜ëŠ” Kafka-Connect-S3ë¥¼ í™œìš©í•˜ì—¬\nS3ë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"kafka-connect\" style=\"position:relative;\"><a href=\"#kafka-connect\" aria-label=\"kafka connect permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka Connect</h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=172qcC4a0mgYnkeZHlH7HH4lar1dAebA3\" alt=\"kafka-connect\"></p>\n<p>ìš°ë¦¬ëŠ” ì„œë²„ë¡œë¶€í„° ìƒì„±ë˜ëŠ” ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ Kafkaì— ë³´ë‚´ê¸°ë„ í•˜ê³ ,\nKafka Topicì— ìŒ“ì—¬ìˆëŠ” ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ RDBMS, Object Storageì™€ ê°™ì€ ì‹œìŠ¤í…œì— ë³´ë‚´ê¸°ë„ í•©ë‹ˆë‹¤.\nKafka ConnectëŠ” ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì´ ë‹¤ì–‘í•œ ì‹œìŠ¤í…œê³¼ Kafka ì‚¬ì´ì˜ ì—°ê²°ì„ ë„ì™€ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.\nSource Systemì—ì„œ Kafkaë¡œ ë“¤ì–´ê°€ëŠ” Connectorë¥¼ Source Connectë¼ ë¶€ë¥´ê³ ,\nKafkaì—ì„œ Target Systemìœ¼ë¡œ ë³´ë‚´ëŠ” Connectorë¥¼ Sink Connectë¼ ë¶€ë¦…ë‹ˆë‹¤.</p>\n<p>Kafka ConnectëŠ” JSON, Avro, Protobuf ë“±ì˜ ë‹¤ì–‘í•œ ì§ë ¬í™” í¬ë©§ì„ ì§€ì›í•˜ë©°\nKafka Schema Registryì™€ ì—°ë™ì‹œì¼œ ê³µí†µëœ ìŠ¤í‚¤ë§ˆ ì§€ì •ì„ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì‚¬ì‹¤ Fluentdì™€ ELK Stackì—ì„œ ì‚¬ìš©í•˜ëŠ” Logstash ë“± ì„œë¡œ ë‹¤ë¥¸ ì‹œìŠ¤í…œ ê°„ì˜ ë¸Œë¦¿ì§€ ì—­í• ì„ í•˜ëŠ” í”„ë ˆì„ì›Œí¬ë“¤ì€ ë‹¤ì–‘í•˜ê²Œ ì¡´ì¬í•©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ Kafka Connectê°€ ê°–ëŠ” ê°•ì ì€ Kafkaì™€ ê¸´ë°€íˆ ì—°ë™ë˜ì–´ ìˆë‹¤ëŠ” ì  ì…ë‹ˆë‹¤.</p>\n<p>Kafka Connectë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ” Producer, Consumer APIë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\nì´ ê³¼ì •ì—ì„œ ì´ë¯¸ ì²˜ë¦¬ë˜ê±°ë‚˜ ì‹¤íŒ¨í•œ ë°ì´í„°ë¥¼ ì¶”ì í•œë‹¤ê±°ë‚˜, ë°ì´í„° ë¶„ì‚°ì²˜ë¦¬, ì‘ì—…ì„ ë°°í¬í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼ë§Œ í•©ë‹ˆë‹¤.</p>\n<p>Kafka ConnectëŠ” ì•ì˜ ëª¨ë“  ì‘ì—…ì„ ìˆ˜í–‰í•  ë¿ë§Œ ì•„ë‹ˆë¼ connector taskë¥¼ í´ëŸ¬ìŠ¤í„° ì „ì²´ì— ìë™ìœ¼ë¡œ ë°°í¬í•©ë‹ˆë‹¤.\në˜í•œ, Connect Worker ì¤‘ì— í•˜ë‚˜ê°€ ì‹¤íŒ¨í•˜ê±°ë‚˜ Network partitionì´ ë°œìƒí•˜ë”ë¼ë„ ì‹¤í–‰í•˜ë˜ ì‘ì—…ì„ ë‚˜ë¨¸ì§€ Workerë“¤ì—ê²Œ ìë™ìœ¼ë¡œ ì¬ì¡°ì •í•©ë‹ˆë‹¤.\nOffsetì„ ìë™ìœ¼ë¡œ ê´€ë¦¬, ìœ ì§€í•˜ê¸° ë•Œë¬¸ì— ì¬ì‹œì‘í•˜ë”ë¼ë„ ì¤‘ë‹¨ ì‹œì ë¶€í„° ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆê³  (Exactly Once Delivery),\nHigh performance Kafka libraryë¡œ ì‘ì„±ë˜ì–´ ë¹ ë¥´ë©° ë¶ˆí•„ìš”í•œ polling ì‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\në¬´ì—‡ë³´ë‹¤ ì½”ë“œ í•œ ì¤„ ì—†ì´ ì‚¬ìš©í•˜ê¸° í¸í•˜ë‹¤ëŠ” ê²ƒë„ í° ê°•ì ì…ë‹ˆë‹¤.\ní˜¹ì‹œ Kafkaë¥¼ ì´ë¯¸ ì¤‘ì•™ ì§‘ì¤‘í˜• ë¡œê·¸ ì €ì¥ì†Œë¡œ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ Kafka Connectë¥¼ ê³ ë ¤í•´ë³¼ë§Œ í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"kafka-connect-s3\" style=\"position:relative;\"><a href=\"#kafka-connect-s3\" aria-label=\"kafka connect s3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka-Connect-S3</h2>\n<p>ì´ ê¸€ì—ì„œëŠ” Confluentë¡œ Kafkaë¥¼ ì„¤ì¹˜í•˜ì§€ ì•Šì€ ê²½ìš°ë¥¼ ì˜ˆì‹œë¡œ ë“¤ê² ìŠµë‹ˆë‹¤.\nì´ë¯¸ confluent-hubë¥¼ ì„¤ì¹˜í•˜ì…¨ê±°ë‚˜ Confluentë¡œ Kafkaë¥¼ ì„¤ì¹˜í•˜ì…¨ë‹¤ë©´ ê³µì‹ë¬¸ì„œë¥¼ ë”°ë¼ê°€ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1R80lOarW9k1RGv2kYAYxNz_-q6wUsm28\" alt=\"aws-kafka-s3\"></p>\n<p>ë°ì´í„° ì¸í”„ë¼ê°€ AWS í™˜ê²½ì— êµ¬ì¶•ë˜ì–´ ìˆë‹¤ë©´ S3ë¥¼ Cold Storageë¡œ ë§ì´ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.\nìµœëŒ€í•œ ë‹¨ìˆœí•˜ê²Œ ê·¸ë¦¼ì„ ê·¸ë ¤ë³´ë©´ ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì€ ì•„í‚¤í…ì³ê°€ ë‚˜ì˜¤ê²Œ ë©ë‹ˆë‹¤.\nì—¬ê¸°ì—ì„œëŠ” Kafkaì—ì„œ S3ë¡œ ì‹¤ì‹œê°„ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ Kafka-Connect-S3ë¥¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ë¨¼ì € confluentì—ì„œ kafka-connect-s3ë¥¼ ë‹¤ìš´ë°›ì•„ plugins ê²½ë¡œì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">wget</span> https://api.hub.confluent.io/api/plugins/confluentinc/kafka-connect-s3/versions/4.1.1/archive\n$ <span class=\"token function\">unzip</span> archive\n$ <span class=\"token function\">mkdir</span> -p plugins/kafka-connect-s3\n$ <span class=\"token function\">cp</span> confluentinc-kafka-connect-s3-4.1.1/lib/* plugins/kafka-connect-s3/</code></pre></div>\n<p>ì´ì œ kafka config ê²½ë¡œì— <code class=\"language-text\">connect.properties</code>ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì„¤ì • íŒŒì¼ì„ ì¶”ê°€í•©ë‹ˆë‹¤.\n<code class=\"language-text\">bootstrap.servers</code>ì™€ <code class=\"language-text\">plugin.path</code> ê²½ë¡œëŠ” ìƒí™©ì— ë§ê²Œ ìˆ˜ì •í•˜ì‹œë©´ ë©ë‹ˆë‹¤.\nì¶”ê°€ë¡œ kafka í´ëŸ¬ìŠ¤í„°ë¥¼ private networkë¡œ ì—°ê²°í•˜ê³  ì‹¶ë‹¤ë©´ 9093 í¬íŠ¸ë¥¼ ì‚¬ìš©í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Kafka broker IP addresses to connect to\nbootstrap.servers=localhost:9092\n\n# Path to directory containing the connector jar and dependencies\nplugin.path=/home/ec2-user/kafka/plugins\n\n# Converters to use to convert keys and values\nkey.converter=org.apache.kafka.connect.storage.StringConverter\nvalue.converter=org.apache.kafka.connect.storage.StringConverter\n\n# The internal converters Kafka Connect uses for storing offset and configuration data\ninternal.key.converter=org.apache.kafka.connect.json.JsonConverter\ninternal.value.converter=org.apache.kafka.connect.json.JsonConverter\ninternal.key.converter.schemas.enable=false\ninternal.value.converter.schemas.enable=false\noffset.storage.file.filename=/tmp/connect.offsets</code></pre></div>\n<br>\n<p>ê¸°ì¡´ í´ëŸ¬ìŠ¤í„°ì— Authentication credentials, encryptionì´ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´,\nconnect.propertiesì— ê´€ë ¨ ì„¤ì •ì„ ì¶”ê°€í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>ë‹¤ìŒ S3ì— ë°ì´í„°ê°€ ì €ì¥ë  Bucketì„ ìƒì„±í•˜ê³ , AWS Credentialsë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ pip <span class=\"token function\">install</span> awscli\n$ aws configure</code></pre></div>\n<p>sink connector ê´€ë ¨ ì„¤ì • íŒŒì¼ì„ <code class=\"language-text\">s3-sink.properties</code>ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ config ê²½ë¡œì— ì¶”ê°€í•©ë‹ˆë‹¤.\ntopicsì™€ s3.bucket.nameì˜ ì´ë¦„ì€ ë§ê²Œ ìˆ˜ì •í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">name=s3-sink\nconnector.class=io.confluent.connect.s3.S3SinkConnector\ntasks.max=1\ntopics=my-topic-name\ns3.region=ap-northeast-2\ns3.bucket.name=my-bucket-name\ns3.compression.type=gzip\ns3.part.size=5242880\nflush.size=3\nstorage.class=io.confluent.connect.s3.storage.S3Storage\nformat.class=io.confluent.connect.s3.format.json.JsonFormat\nschema.generator.class=io.confluent.connect.storage.hive.schema.DefaultSchemaGenerator\npartitioner.class=io.confluent.connect.storage.partitioner.TimeBasedPartitioner\npartition.duration.ms=3600000\npath.format=YYYY-MM-dd\nlocale=KR\ntimezone=UTC\nschema.compatibility=NONE</code></pre></div>\n<br>\n<p>ì´ì œ Kafka ì„¤ì¹˜ ê²½ë¡œë¡œ ì´ë™í•˜ê³  Kafka-Connectë¥¼ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤.\nì—¬ê¸°ì—ì„œëŠ” standalone modeë¡œ ì‹¤í–‰ì‹œì¼°ì§€ë§Œ, ê²½ìš°ì— ë”°ë¼ cluster modeë¡œ ì‹¤í–‰í•˜ê±°ë‚˜\ndocker containerë¡œ ì‹¤í–‰ì‹œì¼œë„ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./bin/connect-standalone.sh connect.properties s3-sink.properties</code></pre></div>\n<p>ì´ì œ ì§€ì •í•œ S3 Bucketì˜ topic/my-topic-name/2018-11-16 ê²½ë¡œì— ê°€ì‹œë©´\nì§€ì •í•œ ì„¤ì • ê°’ì— ë”°ë¼ íŒŒì¼ì´ ì €ì¥ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1bepmpAHi7kwUnqvGOwyq0i8jSMIhhMeU\"></p>\n<p>ì´ë¯¸ Yahooì˜ kafka-managerë¥¼ ì‚¬ìš©í•˜ê³  ê³„ì‹  ë¶„ë“¤ì€ consumers ë©”ë‰´ë¡œ ê°€ì‹œë©´\ntopic ë§ˆë‹¤ lagë„ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"kafka-connect-s3-configuration\" style=\"position:relative;\"><a href=\"#kafka-connect-s3-configuration\" aria-label=\"kafka connect s3 configuration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka-Connect-S3 Configuration</h2>\n<p>ë°ì´í„° ì¸í”„ë¼ì— ë§ê²Œ ìˆ˜ì •í•´ì•¼í•  ì˜µì…˜ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><strong>s3.part.size</strong>: S3ì˜ multi part upload ì‚¬ì´ì¦ˆë¥¼ ì§€ì •</li>\n<li><strong>flush.size</strong>: file commit ì‹œ ì €ì¥í•  recordì˜ ìˆ˜ (íŒŒì¼ ì‚¬ì´ì¦ˆì™€ ì—°ê´€)</li>\n<li><strong>partitioner.class</strong>: partition ê¸°ì¤€ì„ ì§€ì • (TimeBasedPartitionerëŠ” ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ íŒŒí‹°ì…”ë‹)</li>\n</ul>\n<p>ì´ì™¸ì—ë„ Avro Formatê³¼ Schema Registryë¥¼ ì‚¬ìš©í•˜ì‹ ë‹¤ë©´ <code class=\"language-text\">format.class</code>, <code class=\"language-text\">schema.generator.class</code>ë¥¼ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.\në” ìì„¸í•œ ë‚´ìš©ì€ <a href=\"https://docs.confluent.io/5.0.0/connect/kafka-connect-s3/configuration_options.html#s3-configuration-options\">ê³µì‹ë¬¸ì„œ</a>ì—ì„œ í™•ì¸í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p>ì‚¬ì‹¤ KafkaëŠ” ì´ë¯¸ ëŒ€ë¶€ë¶„ì˜ ë°ì´í„° íŒŒì´í”„ë¼ì¸ì—ì„œ í™œìš©í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì´ ê°•ì ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.\nETL ê³¼ì •ì´ ë‹¤ì–‘í•˜ê³  ë³µì¡í•  ìˆ˜ë¡ ìƒˆë¡œìš´ í”„ë ˆì„ì›Œí¬ê°€ ì¶”ê°€ë˜ê³  ì•„í‚¤í…ì³ê°€ ë³µì¡í•´ì§€ê¸° ë§ˆë ¨ì¸ë°,\nKafkaì˜ ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì˜ í™œìš©í•˜ë©´ ì•„í‚¤í…ì³ë¥¼ ë‹¨ìˆœí™”ì‹œí‚¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"https://www.confluent.io/blog/kafka-connect-deep-dive-converters-serialization-explained\">https://www.confluent.io/blog/kafka-connect-deep-dive-converters-serialization-explained</a></li>\n<li><a href=\"https://docs.confluent.io/5.0.0/connect/kafka-connect-s3/index.html\">https://docs.confluent.io/5.0.0/connect/kafka-connect-s3/index.html</a></li>\n</ul>","excerpt":"Kafkaì—ëŠ” ì •ë§ ìœ ìš©í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤.\nì˜¤ëŠ˜ì€ ê·¸ ì¤‘ í•˜ë‚˜ì¸ Kafka-Connectì— ëŒ€í•´ ì•Œì•„ë³´ê³ ,\nConfluentâ€¦"}}},{"id":"6e05249f-6d11-5fe8-9c0f-2ad22a78c83c","title":"Raft consensus algorithm","slug":"raft-consensus","publishDate":"September 01, 2018","publishDateISO":"2018-09-01","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"c603432b-0bfc-5d13-92ef-bb9f6b0614d0","childMarkdownRemark":{"id":"0ec7ec4f-c7ec-5944-902c-ba22c2a35bf8","timeToRead":2,"html":"<p>Consensusë€ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë…¸ë“œ ê°„ì˜ ìƒíƒœë¥¼ ê³µìœ í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ë§í•©ë‹ˆë‹¤.\nê°€ì¥ ìœ ëª…í•œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ Paxosê°€ ìˆê³ , Zookeeperì—ì„œ ì‚¬ìš©í•˜ëŠ” Zabì´ ìˆìŠµë‹ˆë‹¤.\nRaftëŠ” ì´í•´í•˜ê¸° ì–´ë ¤ìš´ ê¸°ì¡´ì˜ ì•Œê³ ë¦¬ì¦˜ê³¼ ë‹¬ë¦¬ ì‰½ê²Œ ì´í•´í•˜ê³  êµ¬í˜„í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.\n(PS. ì´ ê¸€ì€ ë¸”ë¡ì²´ì¸ì—ì„œì˜ Consensus ì•Œê³ ë¦¬ì¦˜ì„ ë§í•˜ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤)</p>\n<br>\n<h2 id=\"what-is-consensus-problem\" style=\"position:relative;\"><a href=\"#what-is-consensus-problem\" aria-label=\"what is consensus problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is consensus problem</h2>\n<p>í•˜ë‚˜ì˜ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ìˆê³  í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì—ê²Œ ë°ì´í„°ë¥¼ ì „ë‹¬í•œë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.\nì„œë²„ëŠ” í•˜ë‚˜ì˜ ë…¸ë“œë¡œ ì´ë£¨ì–´ì ¸ìˆê¸° ë•Œë¬¸ì— í•©ì˜ê°€ ì´ë£¨ì–´ì§€ëŠ”ê±´ ì•„ì£¼ ì‰¬ìš´ ë¬¸ì œì…ë‹ˆë‹¤.\n(ì—¬ê¸°ì—ì„œ ë§í•˜ëŠ” í•©ì˜ëŠ” ê³µìœ ëœ ìƒíƒœë¼ê³  ì´í•´í•˜ì‹œë©´ ë©ë‹ˆë‹¤)</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1-KZIAy8UAFgLlUCHESjbOO7pgCVHByGS\" alt=\"con1\"></p>\n<p>ë§Œì¼ ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ ì—¬ëŸ¬ ë…¸ë“œë¡œ ì´ë£¨ì–´ì§„ ë¶„ì‚° ì„œë²„ì—ì„œ í•©ì˜ë¥¼ ì´ë£¨ì–´ë‚´ì•¼í•œë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?\nì´ëŸ¬í•œ ë¬¸ì œë¥¼ <strong>distributed consensus problem</strong> ì´ë¼ê³  í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"raft-algorithm\" style=\"position:relative;\"><a href=\"#raft-algorithm\" aria-label=\"raft algorithm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Raft Algorithm</h2>\n<p>Raftì˜ nodeëŠ” <strong>Follower, Candidate, Leader</strong>ë¼ëŠ” 3ê°€ì§€ stateë¥¼ ê°€ì§‘ë‹ˆë‹¤.\nëª¨ë“  ë…¸ë“œëŠ” ì²˜ìŒì— Follower stateë¥¼ ê°€ì§€ê³  ì‹œì‘í•©ë‹ˆë‹¤.\në§Œì¼ Followerê°€ Leaderì˜ ì‘ë‹µì„ ë°›ì§€ ëª»í•˜ë©´ Candidate ìƒíƒœë¡œ ì „í™˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1CiOwa7f7dv50HgqvF3Rm4MrWVQlQMRF4\" alt=\"election\"></p>\n<p>CandidateëŠ” ë‹¤ë¥¸ ë…¸ë“œë“¤ì—ê²Œ íˆ¬í‘œë¥¼ ìš”ì²­í•˜ê³  ë…¸ë“œë“¤ì€ íˆ¬í‘œ ê²°ê³¼ë¥¼ ì‘ë‹µìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.\në…¸ë“œ ì¤‘ ê°€ì¥ ë§ì€ í‘œë¥¼ ì–»ì€ ë…¸ë“œëŠ” Leaderê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì´ëŸ¬í•œ í”„ë¡œì„¸ìŠ¤ë¥¼ <strong>Leader Election</strong> ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"leader-election\" style=\"position:relative;\"><a href=\"#leader-election\" aria-label=\"leader election permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Leader Election</h2>\n<p>RaftëŠ” íˆ¬í‘œë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ë‘ ê°€ì§€ timeout ì„¤ì •ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\nì²« ë²ˆì§¸ëŠ” <strong>Election timeout</strong> ì…ë‹ˆë‹¤.\nElection timeout ì´ë€, Followerì—ì„œ Candidateë¡œ ì „í™˜ë˜ê¸° ìœ„í•´ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\nì¼ë°˜ì ìœ¼ë¡œ Election timeoutì€ 150msì—ì„œ 300ms ì‚¬ì´ì˜ ê°’ìœ¼ë¡œ ëœë¤í•˜ê²Œ ì„¤ì •ë©ë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=18EJCDHGadTVHAtFEoXIms6OnB8hn8DTY\" alt=\"timeout\"></p>\n<ol>\n<li>Election timeoutì´ ëë‚˜ë©´ FollowerëŠ” Candidateê°€ ë˜ê³  Election termì„ ì‹œì‘í•©ë‹ˆë‹¤.</li>\n<li>CandidateëŠ” ë³¸ì¸ì—ê²Œ íˆ¬í‘œë¥¼ í•˜ê³  ë‹¤ë¥¸ ë…¸ë“œë“¤ì—ê²Œ íˆ¬í‘œ ìš”ì²­ ë©”ì„¸ì§€ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.</li>\n<li>ë§Œì¼ ë©”ì„¸ì§€ë¥¼ ë°›ëŠ” ë…¸ë“œê°€ í•´ë‹¹ Election termì—ì„œ ì•„ì§ íˆ¬í‘œë¥¼ í•˜ì§€ ì•Šì•˜ë‹¤ë©´, ë¨¼ì € ë©”ì„¸ì§€ë¥¼ ì „ë‹¬í•´ì¤€ Candidateì—ê²Œ íˆ¬í‘œí•©ë‹ˆë‹¤.</li>\n<li>íˆ¬í‘œë¥¼ ë§ˆì¹œ í•´ë‹¹ ë…¸ë“œëŠ” Election timeoutì´ ì´ˆê¸°í™” ë©ë‹ˆë‹¤.</li>\n<li>ê°€ì¥ ë§ì€ í‘œë¥¼ ë°›ì€ ë…¸ë“œê°€ Leaderë¡œ ì„ ì •ë©ë‹ˆë‹¤.</li>\n</ol>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=14gQt-B4NYslCtwca8xcATt9a2IVH7qqH\" alt=\"reelection\"></p>\n<ol>\n<li>ì„ ì • ì´í›„ LeaderëŠ” Append Entries ë©”ì„¸ì§€ë¥¼ Followerë“¤ì—ê²Œ ì „ì†¡í•©ë‹ˆë‹¤.\n(ì´ ë©”ì„¸ì§€ëŠ” <strong>Heartbeat timeout</strong> ì— ì„¤ì •ëœ ê°„ê²©ë§ˆë‹¤ ë³´ë‚´ê²Œ ë©ë‹ˆë‹¤)</li>\n<li>Followerë“¤ì€ Append Entries ë©”ì„¸ì§€ë¥¼ ë°›ìœ¼ë©´ Election timeoutì´ ì´ˆê¸°í™”ë˜ê³  ë©”ì„¸ì§€ì— ëŒ€í•œ ì‘ë‹µì„ Leaderì—ê²Œ ë³´ëƒ…ë‹ˆë‹¤.</li>\n<li>ë§Œì¼ Followerì—ê²Œ Heartbeatê°€ ë„ë‹¬í•˜ì§€ ì•Šìœ¼ë©´ ë‹¤ì‹œ Election termì´ ì‹œì‘ë˜ê³ , FollowerëŠ” Candidate ìƒíƒœë¡œ ì „í™˜ë©ë‹ˆë‹¤.\n(ìœ„ ê·¸ë¦¼ì€ ë…¸ë“œAê°€ ì£½ê³  ë‚œ ì´í›„ ë…¸ë“œBê°€ Leaderë¡œ ì„ ì •ë˜ê³  Heartbeat ë©”ì„¸ì§€ë¥¼ ì „ë‹¬í•˜ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤)</li>\n</ol>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1OtRVbaqBh-QmGg5JjDF4hxt4LFxK4oTP\" alt=\"same1\"></p>\n<ol>\n<li>ë§Œì¼ ë‘ ê°œì˜ ë…¸ë“œê°€ ë™ì‹œì— Election termì„ ì‹œì‘í•˜ê³  ë©”ì„¸ì§€ê°€ ë™ì‹œì— Followerì—ê²Œ ë„ë‹¬í•œë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.</li>\n<li>ì´ëŸ¬í•œ ê²½ìš° ë…¸ë“œA, ë…¸ë“œBëŠ” 2í‘œì”© ì–»ê²Œ ë˜ê³ , í‘œê°€ ë™ì¼í•˜ë¯€ë¡œ í•´ë‹¹ Election termì—ëŠ” Leaderê°€ ì„ ì •ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>\n<li>Leaderê°€ ì„ ì •ë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ Election timeoutì— ë”°ë¼ ìƒˆë¡œìš´ Election termì„ ì‹œì‘í•˜ê²Œ ë©ë‹ˆë‹¤.</li>\n</ol>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1o-llsn2rZop8u0jxzam8_K2hu-3n-nvD\" alt=\"same2\"></p>\n<br>\n<h2 id=\"log-replication\" style=\"position:relative;\"><a href=\"#log-replication\" aria-label=\"log replication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Log Replication</h2>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=13PUDuWgR3bl8frAbiHhpkRieWuKrygVI\" alt=\"message\"></p>\n<p>Leaderê°€ ì„ ì •ë˜ê³  ë‚œ ì´í›„, ì‹œìŠ¤í…œì˜ ëª¨ë“  ë³€í™”ëŠ” Leaderë¥¼ í†µí•´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.\ní´ë¼ì´ì–¸íŠ¸ëŠ” Leaderì—ê²Œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê³ , LeaderëŠ” ë°ì´í„°ì˜ ë³µì œí•˜ì—¬ Followerì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤.\nì´ ê³¼ì •ì€ ì•ì„œ ì–¸ê¸‰í–ˆë˜ <strong>Append Entries</strong> ë©”ì„¸ì§€ë¥¼ í†µí•´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=1RQVmzrOGOg0HZnZ8fO5dpZwoW7XVMd79\" alt=\"res\"></p>\n<p>FollowerëŠ” ë°›ì€ ë°ì´í„°ë¥¼ commit í•˜ê³  ê²°ê³¼ë¥¼ Leaderì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤.\nLeaderëŠ” Followë¡œë¶€í„° ë°›ì€ ê²°ê³¼ë¥¼ Clientì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p>ì •ë¦¬í•˜ìë©´ ë¶„ì‚° ì‹œìŠ¤í…œì€ fault-tolerenceë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ consensus algorithmì„ ì‚¬ìš©í•˜ê³  ìˆê³ ,\në¶„ì‚° ì‹œìŠ¤í…œì„ ë‹¤ë£¨ëŠ” í”„ë ˆì„ì›Œí¬ë§ˆë‹¤ Consensus êµ¬í˜„ì´ ì¡°ê¸ˆì”© ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nê·¸ë¦¬ê³  ì›í™œí•œ Leader Electionì„ ìœ„í•´ í´ëŸ¬ìŠ¤í„° ë…¸ë“œì˜ ê°œìˆ˜ëŠ” í™€ìˆ˜ë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>\n<p>Raftì˜ ê²½ìš° Redis clusterì—ì„œ ì‘ìš©í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆê³ ,\nElasticsearch cluster ë˜í•œ quorum-based consensus algorithmì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nì•„ë˜ì˜ Raft ë…¼ë¬¸ê³¼ ì‹œê°í™” ìë£Œ ë§í¬ë¥¼ ë³´ì‹œë©´ ë” ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><a href=\"https://raft.github.io/raft.pdf\">https://raft.github.io/raft.pdf</a></li>\n<li><a href=\"http://thesecretlivesofdata.com/raft/\">http://thesecretlivesofdata.com/raft/</a></li>\n<li><a href=\"https://raft.github.io/\">https://raft.github.io/</a></li>\n</ul>\n<br>","excerpt":"Consensusë€ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë…¸ë“œ ê°„ì˜ ìƒíƒœë¥¼ ê³µìœ í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ë§í•©ë‹ˆë‹¤.\nê°€ì¥ ìœ ëª…í•œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ Paxosâ€¦"}}},{"id":"314dca06-efff-5b51-a3f2-609f2e02b3bb","title":"AWSì— Hadoop MR ì–´í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½ êµ¬ì¶•í•˜ê¸°","slug":"aws-hadoop","publishDate":"June 13, 2018","publishDateISO":"2018-06-13","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"85e2c430-57ba-5039-afc3-8ba29e23441f","childMarkdownRemark":{"id":"fa2082b2-a22e-59b9-a803-553e8dc09e59","timeToRead":4,"html":"<p>ì´ë²ˆ í•™ê¸°ì— í•˜ë‘¡ í”„ë¡œê·¸ë˜ë° ê°•ì˜ë¥¼ ë“¤ìœ¼ë©´ì„œ ì •ë§ ì‹¤ìŠµ í™˜ê²½ì˜ ê°œì„ ì´ í•„ìš”í•˜ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤...\në‚˜ì•½í•œ ì‹¤ìŠµ í™˜ê²½ì†ì—ì„œ ê³¼ì œì™€ ê¸°ë§ í”„ë¡œì íŠ¸ë¥¼ ì œì¶œí•´ì•¼í•˜ëŠ” í›„ë°°ë“¤ì„ ìœ„í•´ AWSë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤!</p>\n<br>\n<h2 id=\"ec2-amazon-linux2ì—-ê¸°ë³¸-í™˜ê²½-êµ¬ì¶•\" style=\"position:relative;\"><a href=\"#ec2-amazon-linux2%EC%97%90-%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95\" aria-label=\"ec2 amazon linux2ì— ê¸°ë³¸ í™˜ê²½ êµ¬ì¶• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EC2 Amazon Linux2ì— ê¸°ë³¸ í™˜ê²½ êµ¬ì¶•</h2>\n<p>AWSì—ëŠ” EMRì´ë¼ëŠ” í´ëŸ¬ìŠ¤í„° ì„œë¹„ìŠ¤ê°€ ìˆì§€ë§Œ, ìŠ¤í„°ë”” ëª©ì ì´ë¼ë©´ ë¹„ìš©ì„ ìƒê°í•´ì„œ ì‚¬ìš©í•˜ì§€ ì•Šê² ìŠµë‹ˆë‹¤.\nAmazon Linux AMIëŠ” EC2ì—ì„œ í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë¦¬ëˆ…ìŠ¤ ì´ë¯¸ì§€ì…ë‹ˆë‹¤.\në§Œì¼ í•™ìƒìš© í¬ë ˆë”§ì´ ìˆë‹¤ë©´ <strong>t2.medium</strong> ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.</p>\n<p>ë¨¼ì €, JAVA JDKì™€ Hadoop íŒŒì¼ì„ ë°›ê² ìŠµë‹ˆë‹¤. ì‹¤ìŠµ í™˜ê²½ì€ ìë°” 7, í•˜ë‘¡ 1.2 ë²„ì „ì…ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> yum update -y\n$ <span class=\"token function\">sudo</span> yum <span class=\"token function\">install</span> -y java-1.7.0-openjdk-devel\n$ <span class=\"token function\">wget</span> https://archive.apache.org/dist/hadoop/core/hadoop-1.2.1/hadoop-1.2.1.tar.gz\n$ <span class=\"token function\">tar</span> xvfz hadoop-1.2.1</code></pre></div>\n<p>ê·¸ë¦¬ê³  ìë°” í”„ë¡œì íŠ¸ë¥¼ ìœ„í•´ Mavenë„ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">wget</span> http://mirror.navercorp.com/apache/maven/maven-3/3.5.3/binaries/apache-maven-3.5.3-bin.tar.gz\n$ <span class=\"token function\">tar</span> xvfs apache-maven-3.5.3-bin.tar.gz\n$ <span class=\"token function\">mv</span> apache-maven-3.5.3/ apache-maven\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/profile.d/maven.sh\n\n<span class=\"token comment\"># Apache Maven Environment Variables</span>\n<span class=\"token comment\"># MAVEN_HOME for Maven 1 - M2_HOME for Maven 2</span>\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">M2_HOME</span><span class=\"token operator\">=</span>/home/ec2-user/apache-maven\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token variable\">${M2_HOME}</span>/bin:<span class=\"token variable\">${<span class=\"token environment constant\">PATH</span>}</span>\n\n$ <span class=\"token function\">chmod</span> +x maven.sh\n$ <span class=\"token builtin class-name\">source</span> /etc/profile.d/maven.sh</code></pre></div>\n<p>ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ê°€ ë˜ì—ˆë‹¤ë©´ ì•„ë˜ì˜ ëª…ë ¹ì–´ì— ëŒ€í•œ ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ java --version\n$ mvn --version</code></pre></div>\n<br>\n<h2 id=\"hadoop-í™˜ê²½-êµ¬ì¶•\" style=\"position:relative;\"><a href=\"#hadoop-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95\" aria-label=\"hadoop í™˜ê²½ êµ¬ì¶• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop í™˜ê²½ êµ¬ì¶•</h2>\n<p>ì‹¤ìŠµí™˜ê²½ì€ <strong>Pseudo-Distibuted</strong> ëª¨ë“œë¡œ ì§„í–‰í•©ë‹ˆë‹¤.\në¨¼ì € Password less SSH Loginì„ ì„¤ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.\nê·¸ë¦¬ê³  í¸ì˜ë¥¼ ìœ„í•´ hadoop-1.2.1 í´ë”ì— Symbolic linkë¥¼ ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ssh login setting</span>\n$ ssh-keygen -t rsa -P <span class=\"token string\">\"\"</span>\n$ <span class=\"token function\">cat</span> /home/ec2-user/.ssh/id_rsa.pub <span class=\"token operator\">>></span> /home/ec2-user/.ssh/authorized_keys\n\n<span class=\"token comment\"># symbolic link</span>\n$ <span class=\"token function\">ln</span> -s hadoop-1.2.1 hadoop</code></pre></div>\n<p>ì´ì œ HDFSì™€ MR ì‹¤í–‰ì„ ìœ„í•´ ì„¤ì •íŒŒì¼ì„ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤.\në¨¼ì € <code class=\"language-text\">hadoop-env.sh</code>ì„ ì—´ì–´ <code class=\"language-text\">JAVA_HOME</code> í™˜ê²½ë³€ìˆ˜ë¥¼ ì§€ì •í•´ì¤ë‹ˆë‹¤.\nê°€ìƒë¶„ì‚°ëª¨ë“œì—ì„œëŠ” masters, slaves íŒŒì¼ì„ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> hadoop\n$ <span class=\"token function\">vi</span> conf/hadoop-env.sh\n\n<span class=\"token comment\"># set JAVA_HOME in this file, so that it is correctly defined on</span>\n<span class=\"token comment\"># remote nodes.</span>\n\n<span class=\"token comment\"># The java implementation to use. Required.</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">JAVA_HOME</span><span class=\"token operator\">=</span>/usr/lib/jvm/java-1.7.0\n\n<span class=\"token comment\"># Extra Java CLASSPATH elements.  Optional.</span>\n<span class=\"token comment\"># export HADOOP_CLASSPATH=</span></code></pre></div>\n<p>ì´ì œ <code class=\"language-text\">core-site.xml</code> íŒŒì¼ì„ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤.\nHDFS ë°ì´í„° íŒŒì¼ë“¤ì€ í™ˆ ë””ë ‰í† ë¦¬ì˜ hadoop-data í´ë”ì— ì €ì¥í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> conf/core-site.xml\n\n<span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>fs.default.name<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>hdfs://localhost:900<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>hadoop.tmp.dir<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>/home/ec2-user/hadoop-data/<span class=\"token operator\">&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">hdfs-site.xml</code> íŒŒì¼ë„ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤.\ndfs.replication í”„ë¡œí¼í‹°ëŠ” ë³µì œ ê°œìˆ˜ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.\nì¼ë°˜ì ìœ¼ë¡œ ë³µì œ ê°œìˆ˜ë¥¼ 3ìœ¼ë¡œ ë‘ëŠ” ê²ƒì„ ê¶Œì¥í•˜ì§€ë§Œ,\nì‹¤ìŠµì—ì„œëŠ” Fully-Distributed ëª¨ë“œê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— 1ë¡œ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> conf/hdfs-site.xml\n\n<span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>dfs.replication<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span><span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">mapred-site.xml</code> íŒŒì¼ë„ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤.\nmapred.job.tracker í”„ë¡œí¼í‹°ëŠ” job trackerê°€ ë™ì‘í•˜ëŠ” ì„œë²„ë¥¼ ë§í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">vi</span> conf/mapred-site.xml\n\n<span class=\"token operator\">&lt;</span>configuration<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>property<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>name<span class=\"token operator\">></span>mapred.job.tracker<span class=\"token operator\">&lt;</span>/name<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>value<span class=\"token operator\">></span>localhost:900<span class=\"token operator\"><span class=\"token file-descriptor important\">1</span>&lt;</span>/value<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>/property<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>/configuration<span class=\"token operator\">></span></code></pre></div>\n<br>\n<h2 id=\"hadoop-mr\" style=\"position:relative;\"><a href=\"#hadoop-mr\" aria-label=\"hadoop mr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hadoop MR</h2>\n<p>ì´ì œ NameNodeë¥¼ ì´ˆê¸°í™”í•˜ê³  í•˜ë‘¡ê³¼ ê´€ë ¨ëœ ëª¨ë“  ë°ëª¬ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./bin/hadoop namenode-format\n./bin/start-all.sh</code></pre></div>\n<p>jpsë¥¼ í†µí•´ ìë°” í”„ë¡œì„¸ìŠ¤ê°€ ì œëŒ€ë¡œ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ jps\n3368 TaskTracker\n2991 DataNode\n3241 JobTracker\n3480 Jps\n2872 NameNode\n3139 SecondaryNameNode</code></pre></div>\n<p>HDFS ì›¹ ì¸í„°í˜ì´ìŠ¤ ì£¼ì†ŒëŠ” <a href=\"http://localhost:50070\">http://localhost:50070</a> ì´ë©°,\nMapReduce ì›¹ ì¸í„°í˜ì´ìŠ¤ ì£¼ì†ŒëŠ” <a href=\"http://localhost:50030\">http://localhost:50030</a> ì…ë‹ˆë‹¤.\në“¤ì–´ê°€ì‹œë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</p>\n<p><img src=\"http://drive.google.com/uc?export=view&#x26;id=15OIYCbnc1cy93jJgqX1y8a5vfpCBkpqM\"></p>\n<p>ì´ì œ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” WordCount ì˜ˆì œë¥¼ ì‹¤í–‰ì‹œì¼œë³´ê² ìŠµë‹ˆë‹¤.\në¨¼ì € WordCount ì˜ˆì œì˜ input ë°ì´í„°ë¥¼ HDFSì— ì—…ë¡œë“œí•˜ê³  jar íŒŒì¼ê³¼ output ê²½ë¡œë¥¼ ì§€ì •í•´ì¤ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ./bin/hadoop fs -put conf/hadoop-env.sh ./hadoop-env.sh\n$ ./bin/hadoop jar hadoop-examples-1.2.1.jar wordcount hadoop-env.sh output</code></pre></div>\n<p>HDFSì— writeí•œ ê²°ê³¼ëŠ” HDFSì˜ output ê²½ë¡œì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ./bin/hadoop fs -ls output\n$ ./bin/hadoop fs -cat output/part-r-00000</code></pre></div>\n<br>\n<h2 id=\"intellij\" style=\"position:relative;\"><a href=\"#intellij\" aria-label=\"intellij permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IntelliJ</h2>\n<p>ì´ë²ˆì—” ì˜ˆì œê°€ ì•„ë‹ˆë¼ Hadoop MR ì–´í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œì íŠ¸ë¥¼ ìƒˆë¡œ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.\nIntelliJì—ì„œ JAVA, maven í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<p>ê·¸ë¦¬ê³  pom.xmlì€ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.swalloow.hadoop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>hadoop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.0-SNAPSHOT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.apache.hadoop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>hadoop-core<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.2.1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Mapperì™€ Reducer í´ë˜ìŠ¤ë¥¼ ìˆ˜ì •í•œ ë‹¤ìŒ, <code class=\"language-text\">mvn packages</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ jar íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.\nê·¸ë¦¬ê³  input íŒŒì¼ì„ ì´ì „ê³¼ ë™ì¼í•˜ê²Œ HDFSì— ì¶”ê°€í•˜ê³  ìƒì„±í•œ jar íŒŒì¼ì„ í†µí•´ MR jobì„ ì‹¤í–‰ì‹œí‚¤ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<p>ì•„ë˜ ë§í¬ëŠ” ì½”ì¸ ê±°ë˜ ë°ì´í„°ë¥¼ ì…ë ¥ë°›ì•„ ì´ë™í‰ê· ì„ (SMA) ì¶”ì„¸ë¥¼ ê³„ì‚°í•´ì£¼ëŠ” ê°„ë‹¨í•œ ì˜ˆì‹œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. í…œí”Œë¦¿ì€ ììœ ë¡­ê²Œ ì°¸ê³ í•˜ì…”ë„ ë©ë‹ˆë‹¤!</p>\n<p><a href=\"https://github.com/Swalloow/hadoop-mr-project\">https://github.com/Swalloow/hadoop-mr-project</a></p>\n<br>","excerpt":"â€¦"}}},{"id":"8d868e76-473f-5075-bfa6-fef3751eb0d8","title":"Data Science inconvenient truth","slug":"data-science-inconvenient-truth","publishDate":"April 01, 2018","publishDateISO":"2018-04-01","heroImage":{"id":"434fa86e-ac5b-52f4-8bd1-6ac1432526e2","title":"cover-datascience","fluid":{"aspectRatio":1.5,"src":"//images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=1800&h=1200&q=50 1800w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=1800&h=1200&q=50&fm=webp 1800w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/5l0PQJpz5C5IDFjHYigWJI/389fe4852b9cb39e9ada4938db33e6ca/cover_datascience.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"9ac3e892-037b-56dd-823b-b494ff739acd","childMarkdownRemark":{"id":"ee66eb82-0a50-5b28-8ce7-83a5921f67eb","timeToRead":1,"html":"<h2 id=\"ë°ì´í„°ê³¼í•™ì˜-ë¶ˆí¸í•œ-ì§„ì‹¤\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0%EA%B3%BC%ED%95%99%EC%9D%98-%EB%B6%88%ED%8E%B8%ED%95%9C-%EC%A7%84%EC%8B%A4\" aria-label=\"ë°ì´í„°ê³¼í•™ì˜ ë¶ˆí¸í•œ ì§„ì‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë°ì´í„°ê³¼í•™ì˜ ë¶ˆí¸í•œ ì§„ì‹¤</h2>\n<ul>\n<li>Data is never clean (ë°ì´í„°ëŠ” ì ˆëŒ€ ê¹¨ë—í•˜ì§€ ì•Šë‹¤)</li>\n<li>You will spend most of your time cleaning and preparing data (ë‹¹ì‹ ì€ ë¶„ì„ì˜ ëŒ€ë¶€ë¶„ì˜ ì‹œê°„ì„ ì „ì²˜ë¦¬ ë‹¨ê³„ì—ì„œ ë³´ë‚´ê²Œ ë  ê²ƒì´ë‹¤)</li>\n<li>95% of tasks do not require deep learning (95% ì¼ì€ Deep Learningì„ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ”ë‹¤)</li>\n<li>In 90% of cases generalized linear regression will do the trick (ì‹¤ì œ ë¶„ì„ì˜ 90%ëŠ” GLMìœ¼ë¡œ í•´ê²°ëœë‹¤ )</li>\n<li>Big Data is just a tool (ë¹… ë°ì´í„°ëŠ” ë‹¨ì§€ ë„êµ¬ì¼ ë¿ì´ë‹¤)</li>\n<li>You should embrace the Bayesian approach (ë‹¹ì‹ ì€ ë² ì´ì§€ì•ˆ ì ‘ê·¼ì„ í¬ìš©í•´ì•¼ í•œë‹¤)</li>\n<li>No one cares how you did it (ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” ë„¤ê°€ ì–´ë–¤ ë°©ë²•ì„ ì‚¬ìš©í–ˆëŠ”ê°€ëŠ” ì¤‘ìš”í•˜ì§€ ì•Šë‹¤) </li>\n<li>Academia and business are two different worlds (í•™ê³„ì™€ ì‚°ì—…ê³„ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì„¸ê³„ì´ë‹¤)</li>\n<li>Presentation is key - be a master of Power Point (í”„ë¦¬ì  í…Œì´ì…˜ì´ í•µì‹¬ì´ë‹¤: PowerPointì˜ ë§ˆìŠ¤í„°ê°€ ë˜ë¼)</li>\n<li>All models are false, but some are useful (ëª¨ë“  ëª¨ë¸ì€ í‹€ë ¸ë‹¤, í•˜ì§€ë§Œ ëª‡ëª‡ì€ ìœ ìš©í•˜ë‹¤)</li>\n<li>There is no fully automated Data Science. You need to get your hands dirty (ì™„ì „ ìë™í™”ëœ ë°ì´í„° ê³¼í•™ê°™ì€ ê²ƒì€ ì—†ë‹¤. ì¸ê°„ì´ ê°œì…ë˜ì–´ì•¼ í•  ë¶€ë¶„ì´ ìˆë‹¤)</li>\n</ul>\n<br>\n<p>Ref: <a href=\"https://www.kdnuggets.com/2015/05/data-science-inconvenient-truth.html\">https://www.kdnuggets.com/2015/05/data-science-inconvenient-truth.html</a></p>","excerpt":"ë°ì´í„°ê³¼í•™ì˜ ë¶ˆí¸í•œ ì§„ì‹¤ Data is never clean (ë°ì´í„°ëŠ” ì ˆëŒ€ ê¹¨ë—í•˜ì§€ ì•Šë‹¤) You will spend most of yourâ€¦"}}},{"id":"ae1bd687-b1b2-535f-a826-8e600505d3df","title":"ì œí”Œë¦° ë…¸íŠ¸ë¶ ìë™ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ ë§Œë“¤ê¸°","slug":"zeppelin-bootstrap","publishDate":"September 13, 2017","publishDateISO":"2017-09-13","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"a29a76e7-6151-5f0f-8eb3-1c75a8fb8f5a","childMarkdownRemark":{"id":"1107c2c0-8dc1-5eca-a038-7c07e481d047","timeToRead":1,"html":"<p>ì œí”Œë¦° ë…¸íŠ¸ë¶ì„ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ê°€ë” ì œí”Œë¦° ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ì‹œì‘í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.\nì´ ë•Œ, view ë˜ëŠ” udf ë“±ë¡ì„ ìœ„í•´ ì²˜ìŒ ì‹¤í–‰ì‹œì¼œì•¼ í•˜ëŠ” ë…¸íŠ¸ë¶ì´ ìˆë‹¤ë©´ ì°¸ ë²ˆê±°ë¡­ìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ <strong>Zeppelin Notebook API</strong> ì‚¬ìš©í•œë‹¤ë©´ ì´ë¥¼ ì‰½ê²Œ ìë™í™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"zeppelin-notebook-api\" style=\"position:relative;\"><a href=\"#zeppelin-notebook-api\" aria-label=\"zeppelin notebook api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zeppelin Notebook API</h2>\n<p>ì œí”Œë¦°ì€ ë…¸íŠ¸ë¶ ìë™ì‹¤í–‰ì„ ìœ„í•œ REST APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ ì œí”Œë¦°ì— ì¸ì¦ì´ ê±¸ë ¤ìˆë‹¤ë©´, ì¸ì¦ì„ ê±°ì³ì•¼ë§Œ APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në”°ë¼ì„œ, ë¨¼ì € curlë¡œ ì„¸ì…˜ ê°’ì„ ë°›ê³  í•´ë‹¹ ë…¸íŠ¸ë¶ ì•„ì´ë””ë¥¼ í˜¸ì¶œí•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<p>ë…¸íŠ¸ë¶ ì•„ì´ë””ëŠ” í•´ë‹¹ ë…¸íŠ¸ URLì˜ ê°€ì¥ ë§ˆì§€ë§‰ ê°’ ì…ë‹ˆë‹¤. (ex 2AZPHY918)\nì•„ë˜ì˜ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì•„ì´ë””ê°€ user, íŒ¨ìŠ¤ì›Œë“œê°€ 1234ì¸ ê²½ìš°ë¥¼ ì˜ˆì‹œë¡œ ë“¤ì—ˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#!/bin/sh\nsudo /usr/lib/zeppelin/bin/zeppelin-daemon.sh stop\nsleep 3\nsudo /usr/lib/zeppelin/bin/zeppelin-daemon.sh start\n\nsleep 15\n\nSESSION=&quot;`curl -i --data &#39;userName=user&amp;password=1234)&#39; -X POST http://zeppelin-url.com:8890/api/login | grep &#39;Set-Cookie: JSESSIONID=&#39; | cut -d &#39;:&#39; -f2 |  tail -1 | cut -d &#39;;&#39; -f1`&quot;\necho $SESSION\ncurl -i -b ${SESSION} -X POST http://zeppelin-url.com:8890/api/notebook/job/NOTEBOOK_ID</code></pre></div>\n<p>Notebook APIë¥¼ í™œìš©í•˜ë©´ ë…¸íŠ¸ë¶ ì‹¤í–‰ ë¿ë§Œ ì•„ë‹ˆë¼, Cronì´ë‚˜ ë…¸íŠ¸ë¶ ê¶Œí•œ ì„¤ì •ë„ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nìì„¸í•œ ë‚´ìš©ì€ ì•„ë˜ì˜ ê³µì‹ë¬¸ì„œì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://zeppelin.apache.org/docs/0.7.3/rest-api/rest-notebook.html\">https://zeppelin.apache.org/docs/0.7.3/rest-api/rest-notebook.html</a></li>\n</ul>\n<br>","excerpt":"ì œí”Œë¦° ë…¸íŠ¸ë¶ì„ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ê°€ë” ì œí”Œë¦° ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ì‹œì‘í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.\nì´ ë•Œ, view ë˜ëŠ” udfâ€¦"}}},{"id":"ae3d06e8-e30e-5942-b118-b3e930d67172","title":"Hive Metastore êµ¬ì¶• ê´€ë ¨ ë¬¸ì œì™€ í•´ê²°ê³¼ì •","slug":"hive-metastore-issue","publishDate":"August 11, 2017","publishDateISO":"2017-08-11","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"8ff6b231-b785-52d0-8bed-8d7b851c2c78","childMarkdownRemark":{"id":"ce6997a5-dcfe-5d66-ad3b-4c121fa5b2f8","timeToRead":2,"html":"<p>ìµœê·¼ Hive Metastoreë¥¼ êµ¬ì¶•í•˜ë©´ì„œ ê²ªì€ ì´ìŠˆì™€ í•´ê²°ê³¼ì •ì„ ê¸°ë¡í•´ë‘ë ¤ê³  í•©ë‹ˆë‹¤.\nì‚¬ìš© í™˜ê²½ì€ Spark 2.1.1, Hive 2.1.1 ì…ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"hive-partition\" style=\"position:relative;\"><a href=\"#hive-partition\" aria-label=\"hive partition permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hive Partition</h2>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> EXTERNAL <span class=\"token keyword\">TABLE</span> table_name <span class=\"token punctuation\">(</span>\ncol1 STRING<span class=\"token punctuation\">,</span>\ncol2 STRING\n<span class=\"token punctuation\">)</span>\nPARTITIONED <span class=\"token keyword\">BY</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">key</span> STRING<span class=\"token punctuation\">)</span>\nSTORED <span class=\"token keyword\">AS</span> PARQUET\nLOCATION <span class=\"token string\">'location'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Hiveì—ì„œ ë³´í†µ ìœ„ì™€ ê°™ì€ ì¿¼ë¦¬ë¡œ í…Œì´ë¸”ì„ ìƒì„±í•©ë‹ˆë‹¤.\nMetastoreëŠ” ë§ ê·¸ëŒ€ë¡œ ì™¸ë¶€ì— ìˆëŠ” í…Œì´ë¸”ì˜ ì •ë³´(ìŠ¤í‚¤ë§ˆ, íŒŒí‹°ì…˜ ë“±)ë¥¼ ì €ì¥í•˜ëŠ” ê°œë…ì…ë‹ˆë‹¤.\në”°ë¼ì„œ <strong>EXTERNAL TABLE</strong> ë¡œ ìƒì„±í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ í…Œì´ë¸”ì„ DROP ì‹œí‚¤ë©´ ë‹¤ ë‚ ì•„ê°€ê²Œ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> table_name\n<span class=\"token keyword\">ADD</span> <span class=\"token keyword\">PARTITION</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">key</span><span class=\"token operator\">=</span><span class=\"token string\">'2017-08-11'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ë„ì¤‘ì— Partition keyë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ì„ ë•ŒëŠ” ìœ„ì™€ ê°™ì€ ì¿¼ë¦¬ë¥¼ í†µí•´ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nê·¸ëŸ¬ë‚˜, ì¶”ê°€í•œ ì •ë³´ê°€ ë°”ë¡œ ë°˜ì˜ì´ ì•ˆë  ë•Œê°€ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ ê²½ìš°ì—ëŠ” <code class=\"language-text\">MSCK REPAIR TABLE table_name;</code> ì¿¼ë¦¬ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nMSCKëŠ” Metastore Checkì˜ ì•½ìë¼ê³  í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"hive-metastore-parquet\" style=\"position:relative;\"><a href=\"#hive-metastore-parquet\" aria-label=\"hive metastore parquet permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hive Metastore, Parquet</h2>\n<p>ë¨¼ì € ê²ªì—ˆë˜ ë¬¸ì œì— ëŒ€í•´ ì„¤ëª…ë“œë¦¬ìë©´ Hive Metastoreì— ë¶„ëª…íˆ í…Œì´ë¸”ì´ ë“¤ì–´ê°€ìˆê³ ,\nHueì—ì„œëŠ” ì˜ ë³´ì´ëŠ”ë° Zeppelinì—ì„œëŠ” ëª¨ë“  ë°ì´í„°ì— null ê°’ì´ ì°í˜€ìˆì—ˆìŠµë‹ˆë‹¤.</p>\n<p>ìš°ì„  Sparkìœ¼ë¡œ Hiveë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ 2.0 ë²„ì „ ì´í›„ ë¶€í„° ì¡°ê¸ˆ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.\nì´ì „ì—ëŠ” HiveContextë¥¼ ì‚¬ìš©í–ˆë‹¤ë©´, ì´ì œ SparkSessionì—ì„œ <code class=\"language-text\">.enableHiveSupport()</code> ì¶”ê°€ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.\nì œí”Œë¦°ì—ì„œëŠ” SparkSessionì´ sparkì´ë¼ëŠ” ë³€ìˆ˜ë¡œ ì œê³µë˜ëŠ”ë°,\nì´ ê²½ìš° interpreterì— <code class=\"language-text\">zeppelin.spark.useHiveContext=true</code>ë¥¼ ì¶”ê°€í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë‹¤ì‹œ ë¬¸ì œë¡œ ëŒì•„ì™€ì„œ ì¢€ ë” í™•ì¸í•´ë³´ë‹ˆ ì»¬ëŸ¼ëª…ì— ëŒ€ë¬¸ìê°€ ë“¤ì–´ê°€ë©´ ëª¨ë“  ê°’ì´ nullë¡œ ì¶œë ¥ë˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.\nSpark ê³µì‹ë¬¸ì„œì— ì´ì™€ ê´€ë ¨ëœ ë‚´ìš©ì´ ì˜ ë‚˜ì™€ìˆìŠµë‹ˆë‹¤.</p>\n<p>Spark SQLì—ì„œ Hive metastoreë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²½ìš°, ì„±ëŠ¥ ìƒì˜ ì´ìŠˆë¡œ SerDe ëŒ€ì‹  Spark SQLì˜ <strong>MetastoreParquet</strong> ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\nì´ë•Œ ì£¼ì˜ì‚¬í•­ìœ¼ë¡œ HiveëŠ” ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë¶„í•˜ì§€ ì•Šì§€ë§Œ, ParquetëŠ” êµ¬ë¶„í•©ë‹ˆë‹¤. (Hive is case insensitive, while Parquet is not)</p>\n<p>ì´ë¥¼ ìœ„í•´ Spark 2.1.1 ë²„ì „ë¶€í„° ìƒˆë¡œìš´ Spark Propertiesê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n<p>ë”°ë¼ì„œ, Zeppelin interpreterì— ì•„ë˜ì˜ ì„¤ì • ê°’ì„ ì¶”ê°€í•´ì£¼ì‹œë©´ í•´ê²°ë©ë‹ˆë‹¤.\n<code class=\"language-text\">spark.sql.hive.caseSensitiveInferenceMode = INFER_AND_SAVE</code></p>\n<br>\n<h2 id=\"hive-tblproperties\" style=\"position:relative;\"><a href=\"#hive-tblproperties\" aria-label=\"hive tblproperties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hive TBLPROPERTIES</h2>\n<p>ìœ„ì—ì„œ ë§í•œëŒ€ë¡œ Spark Propertiesë¥¼ ì¶”ê°€í•˜ë©´,\nHive metastoreì˜ parameterì— <code class=\"language-text\">spark.sql.sources.schema.part</code>ê°€ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ì—¬ê¸°ì—ì„œ \"field: name\"ì— ëŒ€ì†Œë¬¸ìê°€ ì˜ êµ¬ë¶„ë˜ëŠ” ê²½ìš°, ë¬¸ì œê°€ ì—†ì§€ë§Œ ê°„í˜¹ ì†Œë¬¸ìë¡œ ë“¤ì–´ì˜¤ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.\nì´ ê²½ìš°ì—ëŠ” ì•„ë˜ì˜ ì¿¼ë¦¬ë¥¼ í†µí•´ Hive parameterë¥¼ ìˆ˜ì •í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> table_name <span class=\"token keyword\">SET</span> TBLPROPERTIES <span class=\"token punctuation\">(</span><span class=\"token string\">\"spark.sql.sources.schema.part.0\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"fix this line\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://spark.apache.org/docs/latest/sql-programming-guide.html#hive-metastore-parquet-table-conversion\">https://spark.apache.org/docs/latest/sql-programming-guide.html#hive-metastore-parquet-table-conversion</a></li>\n<li><a href=\"http://spark.apache.org/docs/latest/sql-programming-guide.html#upgrading-from-spark-sql-21-to-22\">http://spark.apache.org/docs/latest/sql-programming-guide.html#upgrading-from-spark-sql-21-to-22</a></li>\n</ul>\n<br>","excerpt":"ìµœê·¼ Hive Metastoreë¥¼ êµ¬ì¶•í•˜ë©´ì„œ ê²ªì€ ì´ìŠˆì™€ í•´ê²°ê³¼ì •ì„ ê¸°ë¡í•´ë‘ë ¤ê³  í•©ë‹ˆë‹¤.\nì‚¬ìš© í™˜ê²½ì€ Spark 2.1.1, Hive 2.1.â€¦"}}},{"id":"521ef7ff-15d1-5f53-b269-e5e9a75838d1","title":"Spark DataFrameì„ MySQLì— ì €ì¥í•˜ëŠ” ë°©ë²•","slug":"spark-df-mysql","publishDate":"July 17, 2017","publishDateISO":"2017-07-17","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"11db5a37-d4e3-5555-90b2-7f2f8aae6d79","childMarkdownRemark":{"id":"02bdf521-be03-59df-87f6-df899fda1460","timeToRead":1,"html":"<p>Sparkì—ì„œ MySQLì— ì ‘ê·¼í•˜ê³  DataFrameì„ read, write í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.\nì°¸ê³ ë¡œ ì €ëŠ” Spark 2.1.0 ë²„ì „ì„ ì‚¬ìš© ì¤‘ ì…ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"mysql-jdbc-driver\" style=\"position:relative;\"><a href=\"#mysql-jdbc-driver\" aria-label=\"mysql jdbc driver permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MySQL JDBC Driver</h2>\n<p>JDBCë¥¼ í†µí•´ ì ‘ê·¼í•˜ê¸° ë•Œë¬¸ì— ë“œë¼ì´ë²„ê°€ í•„ìš”í•©ë‹ˆë‹¤.\në§Œì¼ SBTë¥¼ ì‚¬ìš©í•˜ì‹ ë‹¤ë©´, build.sbtì— mavenì˜ <code class=\"language-text\">mysql-connector-java</code> ë¥¼ ì¶”ê°€í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<p>ì§ì ‘ jar íŒŒì¼ì„ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ìƒí™©ì´ë¼ë©´, ë‹¤ìŒ ë§í¬ë¥¼ í†µí•´ ë‹¤ìš´ë°›ìœ¼ì‹œë©´ ë©ë‹ˆë‹¤.\n<a href=\"https://dev.mysql.com/downloads/connector/j/\">https://dev.mysql.com/downloads/connector/j/</a></p>\n<p>ê·¸ë¦¬ê³  ë°›ìœ¼ì‹  jar íŒŒì¼ì„ -jars ì˜µì…˜ìœ¼ë¡œ ì¶”ê°€í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.</p>\n<p><code class=\"language-text\">â€“jars /home/example/jars/mysql-connector-java-5.1.26.jar</code></p>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ spark-submit ì„ ì‚¬ìš©í•˜ì‹ ë‹¤ë©´, --packages ì˜µì…˜ì„ ì¶”ê°€í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<p><code class=\"language-text\">--packages mysql:mysql-connector-java:5.1.39</code></p>\n<br>\n<h2 id=\"spark-dataframe-mysql\" style=\"position:relative;\"><a href=\"#spark-dataframe-mysql\" aria-label=\"spark dataframe mysql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark DataFrame MySQL</h2>\n<p>Sparkì˜ DataFrameì€ read, write í•¨ìˆ˜ë¥¼ í†µí•´ ì‰½ê²Œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì•„ë˜ ì˜ˆì‹œëŠ” Scala ì–¸ì–´ë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"scala\"><pre class=\"language-scala\"><code class=\"language-scala\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>spark<span class=\"token punctuation\">.</span>sql</span><span class=\"token punctuation\">.</span>SaveMode\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util</span><span class=\"token punctuation\">.</span>Properties\n\n<span class=\"token keyword\">val</span> tempDF <span class=\"token operator\">=</span> List<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2017-06-01\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2017-06-03\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>toDF<span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"start\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"end\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">val</span> properties <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> Properties<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nproperties<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"userId\"</span><span class=\"token punctuation\">)</span>\nproperties<span class=\"token punctuation\">.</span>put<span class=\"token punctuation\">(</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"password\"</span><span class=\"token punctuation\">)</span>\ntempDF<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">.</span>mode<span class=\"token punctuation\">(</span>SaveMode<span class=\"token punctuation\">.</span>Append<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>jdbc<span class=\"token punctuation\">(</span><span class=\"token string\">\"jdbc:mysql://url/database\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"table\"</span><span class=\"token punctuation\">,</span> properties<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ìœ„ ì˜ˆì œì—ì„œëŠ” Propertiesë¥¼ í†µí•´ ì„¤ì •ê°’ì„ ë„£ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤.\nìœ ì € ì •ë³´ë‚˜ ì£¼ì†ŒëŠ” ë§ê²Œ ë³€ê²½í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<p>mode ë¼ëŠ” ê²ƒì´ ìˆëŠ”ë° <code class=\"language-text\">SaveMode.Append</code>ëŠ” ê¸°ì¡´ì˜ í…Œì´ë¸”ì— ì¶”ê°€í•˜ëŠ” ë°©ì‹ì´ê³ \n<code class=\"language-text\">SaveMode.Overwrite</code>ì˜ ê²½ìš° ê¸°ì¡´ì˜ í…Œì´ë¸”ì„ ìƒˆë¡œìš´ ë°ì´í„°ë¡œ ëŒ€ì²´í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.</p>\n<br>","excerpt":"Sparkì—ì„œ MySQLì— ì ‘ê·¼í•˜ê³  DataFrameì„ read, write í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.\nì°¸ê³ ë¡œ ì €ëŠ” Spark 2.â€¦"}}},{"id":"23238ff5-8f3e-5b04-951c-d1971d69b5a2","title":"AWS EMR stepì„ ì´ìš©í•œ Spark Batch ì‘ì—…","slug":"emr-step","publishDate":"July 02, 2017","publishDateISO":"2017-07-02","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"9b14c883-75a8-5767-9605-b31d2fc92488","childMarkdownRemark":{"id":"d4d37967-d3d8-5a21-9dab-b655511c629a","timeToRead":1,"html":"<p>AWS EMRì€ íŠ¹ì • ì‘ì—…ì„ ë“±ë¡í•  ìˆ˜ ìˆëŠ” <strong>step</strong> ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ ë§¤ì¼ ìƒˆë²½ì— í´ëŸ¬ìŠ¤í„°ì—ì„œ ëŒë ¤ì•¼í•˜ëŠ” Batch ì‘ì—…ì´ ìˆë‹¤ë©´ stepê³¼ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í†µí•´ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"emr-step\" style=\"position:relative;\"><a href=\"#emr-step\" aria-label=\"emr step permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EMR Step</h2>\n<p>Stepì€ AWS console ë‚´ì—ì„œ ì¶”ê°€í•´ë„ ë˜ì§€ë§Œ, AWS-Clië¥¼ ì´ìš©í•´ì„œ ë“±ë¡í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\nAWS-Clië¡œ ë“±ë¡í•˜ë©´ ì´í›„ì— ìŠ¤í¬ë¦½íŠ¸ë¡œ í™œìš©í•  ìˆ˜ë„ ìˆë‹¤ëŠ” í¸ë¦¬í•¨ì´ ìˆìŠµë‹ˆë‹¤.</p>\n<p>AWS EMR stepì„ ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\nê°€ë…ì„±ì„ ìœ„í•´ ì¤„ë°”ê¿ˆ, ë„ì–´ì“°ê¸°ë¥¼ í–ˆì§€ë§Œ ì‹¤ì œë¡œ ë“±ë¡í•  ë•ŒëŠ” ì „ë¶€ ë¶™ì´ì…”ì•¼ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ aws emr add-steps\n    --cluster-id <span class=\"token variable\">$CLUSTERID</span>,\n    --steps <span class=\"token assign-left variable\">Name</span><span class=\"token operator\">=</span><span class=\"token variable\">$JOBNAME</span>,\n    <span class=\"token assign-left variable\">Jar</span><span class=\"token operator\">=</span><span class=\"token variable\">$JARFILE</span>,\n    <span class=\"token assign-left variable\">Args</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n        /usr/lib/spark/bin/spark-submit,\n        --deploy-mode,client,\n        --properties-file,/etc/spark/conf/spark-defaults.conf,\n        --conf,spark.yarn.executor.memoryOverhead<span class=\"token operator\">=</span><span class=\"token number\">2048</span>,\n        --conf,spark.executor.memory<span class=\"token operator\">=</span>4g,\n        --packages,<span class=\"token variable\">$SPARK_PACKAGES</span>\n    <span class=\"token punctuation\">]</span>,\n    <span class=\"token assign-left variable\">ActionOnFailure</span><span class=\"token operator\">=</span><span class=\"token variable\">${ACTION_ON_FAIL}</span>'</code></pre></div>\n<p>Spark ì‘ì—… ì‹¤í–‰ì€ <code class=\"language-text\">Spark-submit</code>ì„ ì´ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì— ë°°í¬í•˜ëŠ” í˜•ì‹ì…ë‹ˆë‹¤.\nì´ë¥¼ ìœ„í•´ jar íŒŒì¼ì´ í´ë¼ì´ì–¸íŠ¸ì˜ ë¡œì»¬ ê²½ë¡œì— í¬í•¨ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\nActionOnFailureë¥¼ í†µí•´ ì‹¤íŒ¨ ì‹œ Terminate, Stop ë“±ì˜ ì˜µì…˜ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë§Œì•½ ë“±ë¡í•œ ì‘ì—…ì„ ì·¨ì†Œí•˜ê³  ì‹¶ë‹¤ë©´, <code class=\"language-text\">cancel-steps</code>ë¥¼ ì´ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ aws emr cancel-steps <span class=\"token punctuation\">..</span>.</code></pre></div>\n<p>Spark ì‘ì—…ì´ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•œë‹¤ë©´,\nê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì€ ìœ„ì˜ EMR step ë“±ë¡ ìŠ¤í¬ë¦½íŠ¸ë¥¼ crontabìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤.\në§Œì•½ ì‘ì—…ì´ ë‹¤ì–‘í•˜ê³  ë³µì¡í•˜ë‹¤ë©´, <strong>AWS Data Pipeline</strong> ì´ë¼ëŠ” ì œí’ˆì„ ê³ ë ¤í•´ë³´ëŠ” ê²ƒë„ ë°©ë²•ì…ë‹ˆë‹¤.\n<a href=\"https://aws.amazon.com/ko/datapipeline/details/\">https://aws.amazon.com/ko/datapipeline/details/</a></p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"http://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-spark-submit-step.html\">http://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-spark-submit-step.html</a></li>\n<li><a href=\"http://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-work-with-steps.html\">http://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-work-with-steps.html</a></li>\n</ul>\n<br>","excerpt":"AWS EMRì€ íŠ¹ì • ì‘ì—…ì„ ë“±ë¡í•  ìˆ˜ ìˆëŠ” step ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´ ë§¤ì¼ ìƒˆë²½ì— í´ëŸ¬ìŠ¤í„°ì—ì„œ ëŒë ¤ì•¼í•˜ëŠ” Batchâ€¦"}}},{"id":"0d2128fb-e03c-513c-a13e-65512e32e50f","title":"AWS í™˜ê²½ì—ì„œ Cloudera Manager ì„¤ì¹˜í•˜ê¸°","slug":"cloudera-install","publishDate":"June 23, 2017","publishDateISO":"2017-06-23","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"cdc4d71a-e492-55c0-b955-f40f79e66e7d","childMarkdownRemark":{"id":"2e871a94-f412-52b4-a05e-d7e994b02bcc","timeToRead":1,"html":"<p>í´ë¼ìš°ë°ë¼ ë§¤ë‹ˆì €ëŠ” í•˜ë‘¡ ì—ì½”ì‹œìŠ¤í…œì„ ì‰½ê²Œ ì„¤ì¹˜í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.\nì´ë¥¼ ì´ìš©í•˜ì—¬ AWS EC2 ì¸ìŠ¤í„´ìŠ¤ì— í•˜ë‘¡ í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.\në‚´ ë…¸íŠ¸ë¶ì— ê°€ìƒë¨¸ì‹  ì—¬ëŸ¬ ê°œë¥¼ ë„ìš°ê¸° í˜ë“  ê²½ìš°ì— ì¢‹ì€ ëŒ€ì•ˆì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"cloudera-manager\" style=\"position:relative;\"><a href=\"#cloudera-manager\" aria-label=\"cloudera manager permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cloudera Manager</h2>\n<p>í´ë¼ìš°ë°ë¼ëŠ” ë°ì´í„° ì¸í”„ë¼ ê´€ë ¨ ì†”ë£¨ì…˜ê³¼ ì»¨ì„¤íŒ…ì„ í•˜ëŠ” í•˜ë‘¡ ì „ë¬¸ ê¸°ì—…ì…ë‹ˆë‹¤.\ní•˜ë‘¡ì˜ ì°½ì‹œì \"ë”ê·¸ ì»¤íŒ…\"ë„ í´ë¼ìš°ë°ë¼ì˜ ìˆ˜ì„ ì•„í‚¤í…íŠ¸ë¡œ ì¼í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nImpala, Hue ë“± ì—¬ëŸ¬ ì˜¤í”ˆì†ŒìŠ¤ë„ ê°œë°œí•˜ê³  ìˆìœ¼ë©°,\nì˜¤í”ˆì†ŒìŠ¤ í•˜ë‘¡ í”„ë¡œì íŠ¸ë¡œë¶€í„° ì‚¬ëŒë“¤ì´ ì‰½ê²Œ ì„¤ì¹˜í•  ìˆ˜ ìˆë„ë¡ ë°°í¬íŒ(CDH)ì„ ë§Œë“¤ì–´ì„œ ì œê³µí•´ì¤ë‹ˆë‹¤.\nCloudera Managerì—ëŠ” ìœ ë£Œ, ë¬´ë£Œë²„ì „ì´ ìˆëŠ”ë° ì—¬ê¸°ì—ì„œëŠ” ë¬´ë£Œë²„ì „(Express)ì„ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"install\" style=\"position:relative;\"><a href=\"#install\" aria-label=\"install permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install</h2>\n<p><img src=\"https://hadoopabcd.files.wordpress.com/2015/01/2.png?w=1378&#x26;h=510\"></p>\n<p>ì„¤ì¹˜ëŠ” AWS EC2 m4.large / CentOS / 8GiB ì—ì„œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.\ní”„ë¦¬í‹°ì–´ì¸ t2.micro ì˜ ê²½ìš° ë‚´ë ¤ê°€ê±°ë‚˜ ì„¤ì¹˜ê°€ ì•ˆë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì œì™¸í•˜ê³  ì•„ë¬´ê±°ë‚˜ ì“°ì…”ë„ ìƒê´€ì—†ìŠµë‹ˆë‹¤.</p>\n<p><img src=\"https://hadoopabcd.files.wordpress.com/2015/01/3.png\"></p>\n<p>í´ëŸ¬ìŠ¤í„°ì˜ ìˆ˜ì— ë”°ë¼ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  Elastic IPë¡œ public IPë¥¼ í• ë‹¹ì‹œì¼œì¤ë‹ˆë‹¤.\nCloudera ManagerëŠ” ê¸°ë³¸ìœ¼ë¡œ 7180 í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— Inboundì—ì„œ ì—´ì–´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ yum <span class=\"token function\">install</span> <span class=\"token function\">wget</span>\n$ <span class=\"token function\">wget</span> http://archive.cloudera.com/cm4/installer/latest/cloudera-manager-installer.bin\n$ <span class=\"token function\">chmod</span> +x cloudera-manager-installer.bin\n$ ./cloudera-manager-installer.bin</code></pre></div>\n<p>ë¨¼ì € JDKë¥¼ ì„¤ì¹˜í•œ ë‹¤ìŒ, ìœ„ì˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ cloudera-manager-installerë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰ì‹œì¼œì¤ë‹ˆë‹¤.</p>\n<p><img src=\"/assets/images/cloudera-login.png\"></p>\n<p>ì„¤ì¹˜ê°€ ì™„ë£Œë˜ê³  ë‚˜ì„œ, <code class=\"language-text\">localhost:7180</code>ìœ¼ë¡œ ì ‘ì†í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¡œê·¸ì¸ í™”ë©´ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.\nì´ˆê¸° ìœ ì € ì•„ì´ë””ì™€ íŒ¨ìŠ¤ì›Œë“œëŠ” admin ì…ë‹ˆë‹¤. ì´í›„ì—ëŠ” ë³¸ì¸ì´ ì›í•˜ëŠ” í™˜ê²½ì— ë§ì¶”ì–´ ì„¤ì¹˜ë¥¼ ì§„í–‰í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"trouble-shooting\" style=\"position:relative;\"><a href=\"#trouble-shooting\" aria-label=\"trouble shooting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Trouble Shooting</h2>\n<p><img src=\"/assets/images/error.png\" alt=\"Error1\"></p>\n<p><code class=\"language-text\">Fatal Error: SELinux is enabled. It must be disabled to install and use this product.</code>\në³´ì•ˆ ê´€ë ¨ëœ ë¬¸ì œì¸ë° <code class=\"language-text\">vi /etc/selinux/config</code>ë¡œ ë“¤ì–´ê°€ì„œ SELinuxë¥¼ í•´ì œì‹œì¼œì£¼ë©´ í•´ê²° ë©ë‹ˆë‹¤.</p>\n<br>\n<p><img src=\"/assets/images/fail.png\" alt=\"Error2\"></p>\n<p>CDHë¥¼ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ <code class=\"language-text\">sudo vi /etc/ssh/sshd_config</code>ì— ë“¤ì–´ê°€\nì„ì‹œë¡œ ë£¨íŠ¸ ê³„ì •ì˜ SSH ì ‘ì†ì„ í—ˆìš©í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.\nì„¤ì¹˜í›„ì—ëŠ” ë‹¤ì‹œ ì ê¸ˆ ì„¤ì •í•´ì£¼ì…”ë„ ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"http://www.cloudera.com/documentation/manager/5-1-x/Cloudera-Manager-Installation-Guide/cm5ig_install_on_ec2.html\">http://www.cloudera.com/documentation/manager/5-1-x/Cloudera-Manager-Installation-Guide/cm5ig<em>install</em>on_ec2.html</a></li>\n</ul>\n<br>","excerpt":"í´ë¼ìš°ë°ë¼ ë§¤ë‹ˆì €ëŠ” í•˜ë‘¡ ì—ì½”ì‹œìŠ¤í…œì„ ì‰½ê²Œ ì„¤ì¹˜í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.\nì´ë¥¼ ì´ìš©í•˜ì—¬ AWS ECâ€¦"}}},{"id":"5fb2b1b6-0c88-5b33-b094-05fdd281005c","title":"Sparkì˜ Random Samplingì— ëŒ€í•˜ì—¬","slug":"spark-sampling","publishDate":"June 20, 2017","publishDateISO":"2017-06-20","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"d005037c-e152-5d2c-9817-eeee932c5e09","childMarkdownRemark":{"id":"e5acac9d-9bd0-5a16-aae3-05e8929d391e","timeToRead":1,"html":"<p>ë°ì´í„°ë¥¼ ë¶„ì„í•˜ë‹¤ë³´ë©´ ì„ì˜ì˜ ìƒ˜í”Œì„ ì¶”ì¶œí•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê¹ë‹ˆë‹¤.\nê·¸ë˜ì„œ ì´ë²ˆì—ëŠ” Sparkì—ì„œ ëœë¤ ìƒ˜í”Œë§ì„ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"sample\" style=\"position:relative;\"><a href=\"#sample\" aria-label=\"sample permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sample()</h2>\n<p>Spark RDD API ì—ëŠ” ë‹¤ì–‘í•œ sampling ë©”ì„œë“œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.\nê·¸ ì¤‘ì—ì„œ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” <code class=\"language-text\">sample()</code>ì— ëŒ€í•´ ë¨¼ì € ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># sample(boolean withReplacement, double fraction, long seed)</span>\nval rdd <span class=\"token operator\">=</span> sc<span class=\"token punctuation\">.</span>parallelize<span class=\"token punctuation\">(</span><span class=\"token number\">1</span> to <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\nrdd<span class=\"token punctuation\">.</span>sample<span class=\"token punctuation\">(</span>false<span class=\"token punctuation\">,</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>count</code></pre></div>\n<p>ì²« ë²ˆì§¸ ì¸ìëŠ” ì¶”ì¶œ ë°©ì‹ì„ ê²°ì •í•©ë‹ˆë‹¤. <strong>Trueë©´ ë³µì›ì¶”ì¶œ, Falseë©´ ë¹„ë³µì›ì¶”ì¶œ</strong> ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\nì—¬ê¸°ì—ì„œ ë§í•˜ëŠ” ë³µì›ì¶”ì¶œì´ë€, í•œ ë²ˆ ë½‘ì€ ê²ƒì„ ë‹¤ì‹œ ë½‘ì„ ìˆ˜ ìˆê²Œ í•˜ëŠ” ë°©ë²•ì„ ë§í•©ë‹ˆë‹¤.\nì„¸ ë²ˆì§¸ ì¸ìë¡œ ì‹œë“œ ë³€ìˆ˜ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì‹œë“œë€, ì»´í“¨í„°ê°€ ë‚œìˆ˜ë¥¼ ì¼ì •í•˜ê²Œ ìƒì„±í•˜ì§€ ì•Šë„ë¡ ë³€í™”ë¥¼ ì£¼ëŠ” ê°’ì„ ë§í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"takesample\" style=\"position:relative;\"><a href=\"#takesample\" aria-label=\"takesample permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>takeSample()</h2>\n<p>takeSample()ë„ ëœë¤ ìƒ˜í”Œë§ì„ ì§€ì›í•˜ëŠ” ë©”ì„œë“œì§€ë§Œ, ìœ„ì™€ ì¡°ê¸ˆ ë‹¤ë¥¸ ì ì´ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># takeSample(boolean withReplacement, int num, long seed)</span>\nval rdd <span class=\"token operator\">=</span> sc<span class=\"token punctuation\">.</span>parallelize<span class=\"token punctuation\">(</span><span class=\"token number\">1</span> to <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\nrdd<span class=\"token punctuation\">.</span>takeSample<span class=\"token punctuation\">(</span>false<span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">takeSample()</code>ì€ ë‘ ë²ˆì§¸ ì¸ìë¥¼ ì§€ì •í•˜ì—¬ ëª‡ ê°œë¥¼ ì¶”ì¶œí•  ê²ƒì¸ì§€ ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ, ê²°ê³¼ ê°’ì´ RDDê°€ ì•„ë‹Œ ë¦¬ìŠ¤íŠ¸ë‚˜ ë°°ì—´ì´ê¸° ë•Œë¬¸ì— <strong>ë©”ëª¨ë¦¬ì— ì£¼ì˜</strong> í•´ì•¼ í•©ë‹ˆë‹¤.\nì •ë¦¬í•˜ìë©´, í¬ê¸°ë¥¼ ì •í•´ë†“ê³  ìƒ˜í”Œì„ ì¶”ì¶œí•˜ê³ ì í•œë‹¤ë©´ takeSample() ë©”ì„œë“œê°€ ì í•©í•˜ê³ \në©”ëª¨ë¦¬ë¥¼ ìƒê°í•´ì„œ ì‘ì€ ê°’ì„ ì¶”ì¶œí•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>\n<p>ì´ì™¸ì—ë„ <code class=\"language-text\">sampleByKey, sampleByKeyExtract</code> ë©”ì„œë“œê°€ ì¡´ì¬í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://spark.apache.org/docs/1.6.2/api/java/org/apache/spark/rdd/RDD.html\">https://spark.apache.org/docs/1.6.2/api/java/org/apache/spark/rdd/RDD.html</a></li>\n</ul>\n<br>","excerpt":"ë°ì´í„°ë¥¼ ë¶„ì„í•˜ë‹¤ë³´ë©´ ì„ì˜ì˜ ìƒ˜í”Œì„ ì¶”ì¶œí•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ìƒê¹ë‹ˆë‹¤.\nê·¸ë˜ì„œ ì´ë²ˆì—ëŠ” Sparkâ€¦"}}},{"id":"dea745a4-cb4c-53c1-9a2b-eb9a44e5b9d0","title":"Sparkì˜ Temporary Viewì— ëŒ€í•˜ì—¬","slug":"spark-temp-view","publishDate":"June 16, 2017","publishDateISO":"2017-06-16","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"6da21b62-c3d6-5a04-bbe7-be693d5a5ff7","childMarkdownRemark":{"id":"3a3f8a1d-10e8-576e-98d6-87748b4bdbed","timeToRead":2,"html":"<p>SQLì˜ View ì²˜ëŸ¼ Sparkì—ì„œë„ Viewë¥¼ ì§€ì›í•©ë‹ˆë‹¤.\nì´ í¬ìŠ¤íŒ…ì—ì„œëŠ” Spark 2.1.0 ë¶€í„° ìƒê¸´ <code class=\"language-text\">Spark Global Temporary View</code>ì™€\nê¸°ì¡´ì˜ <code class=\"language-text\">TempView</code>ê°€ ì–´ë–¤ ì°¨ì´ê°€ ìˆëŠ”ì§€ ê·¸ë¦¬ê³  ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼í•˜ëŠ”ì§€ ì•Œì•„ë³´ê³˜ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"spark-temporary-view\" style=\"position:relative;\"><a href=\"#spark-temporary-view\" aria-label=\"spark temporary view permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark Temporary View</h2>\n<p>ê³µì‹ë¬¸ì„œë¥¼ ë³´ë©´ Sparkì˜ Temporary ViewëŠ” Session-Scope ì…ë‹ˆë‹¤.\në¬´ìŠ¨ ë§ì´ëƒ í•˜ë©´, Viewì˜ ìƒëª…ì£¼ê¸°ê°€ ì„¸ì…˜ì— ë‹¬ë ¤ìˆë‹¤ëŠ” ëœ» ì…ë‹ˆë‹¤.\n(ì—¬ê¸°ì—ì„œ ë§í•˜ëŠ” ì„¸ì…˜ì€ SparkSession ì…ë‹ˆë‹¤)\nê·¸ë¦¬ê³ , ì„¸ì…˜ì´ ì¢…ë£Œë˜ë©´ ìë™ìœ¼ë¡œ View í…Œì´ë¸”ì´ Drop ë©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"createorreplacetempview\" style=\"position:relative;\"><a href=\"#createorreplacetempview\" aria-label=\"createorreplacetempview permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CreateOrReplaceTempView</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df <span class=\"token operator\">=</span> spark<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span> df<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>CreateOrReplaceTempView<span class=\"token punctuation\">(</span><span class=\"token string\">\"TempView\"</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>dropTempView<span class=\"token punctuation\">(</span><span class=\"token string\">\"TempView\"</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>unpersist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ë¨¼ì € ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ TempViewë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.\nìœ„ì˜ ì˜ˆì‹œëŠ” PySpark ì½”ë“œì…ë‹ˆë‹¤.\nì„¸ ë²ˆì§¸ ì¤„ì˜ <code class=\"language-text\">createOrReplaceTempView</code>ê°€ Viewë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ì¸ë°,\nSparkì€ Lazy evaluationì´ê¸° ë•Œë¬¸ì— ì•„ì§ ì‹¤í–‰ ë˜ê¸° ì´ì „ ì…ë‹ˆë‹¤.\nì´í›„ ë‘ ë²ˆì§¸ ì¤„ì—ì„œ count() í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë©´ ìƒì„±ë˜ë©°,\nTempViewë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë©”ëª¨ë¦¬ì— ë‘ê³  ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\në‹¤ ì‚¬ìš©í•œ ë‹¤ìŒì—ëŠ” ê¼­ <code class=\"language-text\">unpersist</code> í•¨ìˆ˜ë¡œ í• ë‹¹ëœ ë©”ëª¨ë¦¬ë¥¼ í•´ì œì‹œì¼œì¤˜ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>ìœ„ì™€ ë‹¤ë¥´ê²Œ Temp Viewì— ëŒ€í•œ ëª…ë ¹ë§Œ ë‚´ë¦¬ê³  ë§ˆì§€ë§‰ì— í•œë²ˆì— ì²˜ë¦¬í•´ë„ ë˜ì§€ë§Œ,\nì—¬ëŸ¬ ê°œë¡œ ìª¼ê°œì„œ ëª…ë ¹ì„ ë‚´ë¦¬ëŠ” ê²ƒì´ ìƒëŒ€ì ìœ¼ë¡œ ë¹ ë¥´ë‹¤ê³  í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"global-temporary-view\" style=\"position:relative;\"><a href=\"#global-temporary-view\" aria-label=\"global temporary view permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Global Temporary View</h2>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">GLOBAL</span> <span class=\"token keyword\">TEMPORARY</span> <span class=\"token keyword\">VIEW</span> temp_view <span class=\"token keyword\">AS</span> <span class=\"token keyword\">SELECT</span> a<span class=\"token punctuation\">,</span> b <span class=\"token keyword\">FROM</span> tbl\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> global_temp<span class=\"token punctuation\">.</span>temp_view\n<span class=\"token keyword\">DROP</span> <span class=\"token keyword\">VIEW</span> global_temp<span class=\"token punctuation\">.</span>temp_view</code></pre></div>\n<p>ìœ„ì˜ ì˜ˆì‹œëŠ” Spark SQL ì½”ë“œì…ë‹ˆë‹¤.\nGlobal Temporary ViewëŠ” Spark 2.1.0ì—ì„œ ì²˜ìŒ ì†Œê°œë˜ì—ˆìœ¼ë©°, <code class=\"language-text\">GLOBAL TEMPORARY VIEW</code> ë¼ëŠ” í‚¤ì›Œë“œë¡œ ìƒì„±í•©ë‹ˆë‹¤.\nê·¸ë ‡ê²Œ ì„ ì–¸í•˜ê³  ë‚˜ë©´ ì¼ì¢…ì˜ ì„ì‹œ í…Œì´ë¸”ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì‚­ì œí•  ë•ŒëŠ” <code class=\"language-text\">DROP VIEW</code> ë¼ëŠ” í‚¤ì›Œë“œë¡œ ì‚­ì œí•©ë‹ˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ Global Temporary ViewëŠ” ì¡°ê¸ˆ ìœ„í—˜í•©ë‹ˆë‹¤.\nì´ ViewëŠ” ë§ ê·¸ëŒ€ë¡œ ì „ì—­ì ì¸ ìƒíƒœë¡œ ë‚¨ê¸° ìœ„í•´ ì‹œìŠ¤í…œì˜ ì„ì‹œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì—°ê²°ë©ë‹ˆë‹¤.\nê·¸ë˜ì„œ ì ‘ê·¼í•  ë•Œ, <code class=\"language-text\">global_temp</code>ë¡œ ì ‘ê·¼í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ê²°ë¡ ë¶€í„° ë§í•˜ìë©´ Global Temporary ViewëŠ” ëª¨ë“  ì„¸ì…˜ì—ì„œ ê³µìœ  ê°€ëŠ¥í•˜ë©°,\nSpark ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë˜ê¸° ì „ê¹Œì§€ ì‚´ì•„ìˆê²Œ ë©ë‹ˆë‹¤.\nì œ ê²½ìš° Master ë…¸ë“œì˜ í•˜ë“œë””ìŠ¤í¬ì— ì €ì¥ë˜ì–´ ìˆì—ˆìŠµë‹ˆë‹¤.\nì´ë ‡ê²Œ ë˜ë©´ ì¼ë‹¨ IOë¡œ ì¸í•´ ë¡œë”©ì†ë„ê°€ ìƒë‹¹íˆ ëŠë ¤ì§€ê³ ,\në§Œì¼ Viewì˜ í¬ê¸°ê°€ ë©”ëª¨ë¦¬ ìš©ëŸ‰ì„ ë„˜ì–´ê°”ë”ë¼ë©´ Masterê°€ ë‚´ë ¤ê°ˆ ìˆ˜ë„ ìˆëŠ” ìƒí™©ì…ë‹ˆë‹¤.\nì´ì™€ ê°™ì€ ì´ìœ ë¡œ Global Temporary ViewëŠ” ì‹ ì¤‘íˆ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://spark.apache.org/docs/2.1.1/api/java/org/apache/spark/sql/catalog/Catalog.html\">https://spark.apache.org/docs/2.1.1/api/java/org/apache/spark/sql/catalog/Catalog.html</a></li>\n<li><a href=\"https://spark.apache.org/docs/latest/sql-programming-guide.html#global-temporary-view\">https://spark.apache.org/docs/latest/sql-programming-guide.html#global-temporary-view</a></li>\n</ul>\n<br>","excerpt":"SQLì˜ View ì²˜ëŸ¼ Sparkì—ì„œë„ Viewë¥¼ ì§€ì›í•©ë‹ˆë‹¤.\nì´ í¬ìŠ¤íŒ…ì—ì„œëŠ” Spark 2.1.â€¦"}}},{"id":"c83a7091-0a01-5886-876f-6a7e9d8cb6ca","title":"Pandas DataFrameì„ ë³‘ë ¬ì²˜ë¦¬ í•˜ëŠ” ë°©ë²•","slug":"pandas-parallel","publishDate":"February 27, 2017","publishDateISO":"2017-02-27","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"3a929e46-2df8-5ebb-a912-ab2e8ac6706f","childMarkdownRemark":{"id":"7f693de6-6997-5fe5-8cfc-b165faa35db3","timeToRead":1,"html":"<p>Scikit-learnì˜ ëª¨ë¸ë“¤ì€ cythonê³¼ joblibìœ¼ë¡œ ìµœì í™” ë° ìë™ ë³‘ë ¬ì²˜ë¦¬ ë˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆì§€ë§Œ,\nPandasëŠ” ì—¬ì „íˆ ë‚´ë¶€ì ìœ¼ë¡œ ë³‘ë ¬ì²˜ë¦¬ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ, í° ê·œëª¨ì˜ DataFrameì„ ëŒë¦¬ë‹¤ë³´ë©´ ì „ì²˜ë¦¬ì—ë„ ì‹œê°„ì´ ë§ì´ ê±¸ë¦¬ê²Œ ë©ë‹ˆë‹¤.\nê·¸ëŸ° ê²½ìš°ì— ë³‘ë ¬ì²˜ë¦¬ë¥¼ í†µí•´ ì†ë„ë¥¼ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì´ í¬ìŠ¤íŒ…ì—ì„œëŠ” ê°€ì¥ ê°„ë‹¨í•œ CPU í”„ë¡œì„¸ìŠ¤ ë³‘ë ¬ì²˜ë¦¬ë¥¼ ë‹¤ë£¨ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ë°©ë²•ì€ ê°„ë‹¨í•©ë‹ˆë‹¤.\nê±°ëŒ€í•œ DataFrameì„ CPU ì½”ì–´ ìˆ˜ ë§Œí¼ ë¶„í• í•˜ê³ , ì „ì²˜ë¦¬ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œ ë‹¤ìŒ ë‹¤ì‹œ í•©ì¹˜ë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">import</span> seaborn <span class=\"token keyword\">as</span> sns\n<span class=\"token keyword\">from</span> multiprocessing <span class=\"token keyword\">import</span> Pool\n\nnum_cores <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\niris <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>sns<span class=\"token punctuation\">.</span>load_dataset<span class=\"token punctuation\">(</span><span class=\"token string\">'iris'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ì˜ˆì‹œë¡œ iris ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤.\ncpu ì½”ì–´ì˜ ìˆ˜ëŠ” <code class=\"language-text\">multiprocessing.cpu_count()</code> í•¨ìˆ˜ë¥¼ í†µí•´ì„œ ì–»ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">parallelize_dataframe</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    df_split <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array_split<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> num_cores<span class=\"token punctuation\">)</span>\n    pool <span class=\"token operator\">=</span> Pool<span class=\"token punctuation\">(</span>num_cores<span class=\"token punctuation\">)</span>\n    df <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span>pool<span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span><span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">,</span> df_split<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    pool<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    pool<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> df</code></pre></div>\n<p>parallelize_dataframeì€ ì–´ë–¤ ì „ì²˜ë¦¬ í•¨ìˆ˜ê°€ ë“¤ì–´ì™”ì„ ë•Œ CPU ë³‘ë ¬ì²˜ë¦¬ë¥¼ ë„ì™€ì£¼ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.\nmultiprocessing.Poolì„ ì´ìš©í•˜ì—¬ ë¶„í• ëœ DataFrameì— í•¨ìˆ˜ë¥¼ ì ìš©ì‹œí‚¤ê³ ,\npd.concat()ìœ¼ë¡œ ë‹¤ì‹œ í•©ì¹˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">multiply_columns</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    data<span class=\"token punctuation\">[</span><span class=\"token string\">'length_of_word'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'species'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> data</code></pre></div>\n<p>ê° ì¢… ì´ë¦„ì˜ ê¸€ì ìˆ˜ë¥¼ ì„¸ëŠ” ì „ì²˜ë¦¬ í•¨ìˆ˜ë¥¼ ì˜ˆë¡œ ë“¤ì–´ ì†ë„ì°¨ì´ë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.\nê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<br>\n<p><img src=\"/assets/images/pandas-parallel.png\" alt=\"pandas-parrallel\"></p>\n<p>ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ Pandasì˜ engineì— Daskë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤.\n<a href=\"http://dask.readthedocs.io/en/latest/\">http://dask.readthedocs.io/en/latest/</a></p>","excerpt":"Scikit-learnì˜ ëª¨ë¸ë“¤ì€ cythonê³¼ joblibìœ¼ë¡œ ìµœì í™” ë° ìë™ ë³‘ë ¬ì²˜ë¦¬ ë˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆì§€ë§Œ,\nPandasâ€¦"}}},{"id":"6c0b771c-38aa-5b9b-9f90-cf9fffe85421","title":"Pandas DataFrameì„ MySQLì— ì €ì¥í•˜ëŠ” ë°©ë²•","slug":"dataframe-to-mysql","publishDate":"February 26, 2017","publishDateISO":"2017-02-26","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"e3b0fdda-5a39-5feb-b648-af85cc3e320a","childMarkdownRemark":{"id":"aa742a71-02df-5247-a8c3-37da2b1de659","timeToRead":1,"html":"<p>Pandas DataFrameì„ MySQLì— ì €ì¥í•˜ê¸° ìœ„í•´ ë¨¼ì € ì»¤ë„¥í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤.\níŒŒì´ì¬3ì—ì„œëŠ” <code class=\"language-text\">MySQLdb</code>ë¥¼ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, <code class=\"language-text\">pymysql</code>ë¡œ ë¶ˆëŸ¬ì™€ì•¼ í•©ë‹ˆë‹¤.\nê¼­ pymysqlì´ ì•„ë‹ˆì–´ë„ ìƒê´€ì—†ì§€ë§Œ, ì‚¬ìš©í•´ë³´ë©´ <code class=\"language-text\">mysql-connector</code> ë³´ë‹¤ ë¹ ë¥´ë‹¤ëŠ”ê±¸ ì²´ê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¨¼ì €, í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># python3\n$ pip install pymysql\n$ pip install sqlalchemy</code></pre></div>\n<br>\n<h2 id=\"sqlalchemy-pymysql-mysqldb\" style=\"position:relative;\"><a href=\"#sqlalchemy-pymysql-mysqldb\" aria-label=\"sqlalchemy pymysql mysqldb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SQLAlchemy, pymysql, MySQLdb</h2>\n<p><code class=\"language-text\">install_as_MySQLdb()</code> í•¨ìˆ˜ë¥¼ í†µí•´ MySQLdbì™€ í˜¸í™˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.\nì´ì œ sqlalchemyë¥¼ í†µí•´ DBì— ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì£¼ì†Œì—ì„œ root, passwordëŠ” DBì— ë§ê²Œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n<span class=\"token keyword\">from</span> sqlalchemy <span class=\"token keyword\">import</span> create_engine\n\n<span class=\"token comment\"># MySQL Connector using pymysql</span>\npymysql<span class=\"token punctuation\">.</span>install_as_MySQLdb<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">import</span> MySQLdb\n\nengine <span class=\"token operator\">=</span> create_engine<span class=\"token punctuation\">(</span><span class=\"token string\">\"mysql+mysqldb://root:\"</span><span class=\"token operator\">+</span><span class=\"token string\">\"password\"</span><span class=\"token operator\">+</span><span class=\"token string\">\"@localhost/db_name\"</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span>\nconn <span class=\"token operator\">=</span> engine<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n<h2 id=\"mysqlì—-ì €ì¥í•˜ê¸°\" style=\"position:relative;\"><a href=\"#mysql%EC%97%90-%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0\" aria-label=\"mysqlì— ì €ì¥í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MySQLì— ì €ì¥í•˜ê¸°</h2>\n<p>ì´ì œ DataFrameì„ MySQLì— í…Œì´ë¸” í˜•íƒœë¡œ ì €ì¥í•  ì°¨ë¡€ì…ë‹ˆë‹¤.\nì•„ë˜ì™€ ê°™ì´ pandasì˜ <code class=\"language-text\">to_sql()</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥í•˜ë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df<span class=\"token punctuation\">.</span>to_sql<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span>table<span class=\"token punctuation\">,</span> con<span class=\"token operator\">=</span>engine<span class=\"token punctuation\">,</span> if_exists<span class=\"token operator\">=</span><span class=\"token string\">'append'</span><span class=\"token punctuation\">)</span>\npython\n\nìì£¼ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë‹ˆ í•¨ìˆ˜ë¡œ ë”°ë¡œ ì„¤ì •í•´ì£¼ë©´ í¸í•©ë‹ˆë‹¤<span class=\"token punctuation\">.</span></code></pre></div>","excerpt":"Pandas DataFrameì„ MySQLì— ì €ì¥í•˜ê¸° ìœ„í•´ ë¨¼ì € ì»¤ë„¥í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤.\níŒŒì´ì¬â€¦"}}},{"id":"8396978b-cf43-57c1-8853-2a1fd69f9e6e","title":"Jupyter Notebook ì™¸ë¶€ì ‘ì† ì„¤ì •í•˜ê¸°","slug":"jupyter-config","publishDate":"February 12, 2017","publishDateISO":"2017-02-12","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"7c18488e-799f-581d-afbd-cb16754e4b6e","childMarkdownRemark":{"id":"7403eebf-2776-50aa-a81a-b617b9334fbb","timeToRead":1,"html":"<p>ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Jupyter Notebookì„ í™˜ê²½êµ¬ì¶•í•˜ê³  ë‚œ ì´í›„ì— ì™¸ë¶€ì ‘ì†ì„ ì„¤ì •í•˜ëŠ” ê³¼ì •ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. í™˜ê²½êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œëŠ” ì´ì „ì˜ í¬ìŠ¤íŒ… <a href=\"https://swalloow.github.io/jupyter-notebook-kernel\">https://swalloow.github.io/jupyter-notebook-kernel</a> ì„ ì°¸ê³ í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"ì™¸ë¶€ì ‘ì†-í—ˆìš©í•˜ê¸°\" style=\"position:relative;\"><a href=\"#%EC%99%B8%EB%B6%80%EC%A0%91%EC%86%8D-%ED%97%88%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"ì™¸ë¶€ì ‘ì† í—ˆìš©í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì™¸ë¶€ì ‘ì† í—ˆìš©í•˜ê¸°</h2>\n<p>ìš°ì„  <code class=\"language-text\">~/.jupyter/jupyter_notebook_config.py</code> ì— ìˆëŠ” Jupyter Notebookì˜ ì„¤ì •íŒŒì¼ì„ ì—´ì–´ì¤ë‹ˆë‹¤. ì•„ë§ˆ ëª¨ë‘ ì£¼ì„ì´ ê±¸ë ¤ìˆì„í…ë° í•„ìš”í•œ ë¶€ë¶„ë§Œ ìˆ˜ì •í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<ul>\n<li>ì‹¤í–‰ê²½ë¡œ ë³€ê²½ : <code class=\"language-text\">c.NotebookApp.default_url = &#39;/tree&#39;</code></li>\n<li>ì™¸ë¶€ì ‘ì† í—ˆìš© : <code class=\"language-text\">c.NotebookApp.ip = &#39;0.0.0.0&#39;</code></li>\n<li>í¬íŠ¸ë³€ê²½: <code class=\"language-text\">c.NotebookApp.port = 8888</code></li>\n</ul>\n<br>\n<h2 id=\"ë¹„ë°€ë²ˆí˜¸-ì„¤ì •í•˜ê¸°\" style=\"position:relative;\"><a href=\"#%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"ë¹„ë°€ë²ˆí˜¸ ì„¤ì •í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¹„ë°€ë²ˆí˜¸ ì„¤ì •í•˜ê¸°</h2>\n<p>ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•˜ë©´ urlì— ì ‘ì†í–ˆì„ ë•Œ, ì•”í˜¸ë¥¼ ì…ë ¥í•˜ëŠ” í™”ë©´ì´ ë‚˜íƒ€ë‚˜ê²Œ ë©ë‹ˆë‹¤. Jupyter Notebookì—ì„œëŠ” HASH ê°’ì„ í†µí•´ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ë¨¼ì €, ìƒˆë¡œìš´ ë…¸íŠ¸ë¥¼ ìƒì„±í•˜ê³  ë‹¤ìŒì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ì•”í˜¸ë¥¼ ì„¤ì •í•˜ëŠ” ì¹¸ì´ ë‚˜ì˜¤ê³  ê²°ê³¼ ê°’ì´ ì£¼ì–´ì§€ë©´ ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ì„œ <code class=\"language-text\">c.NotebookApp.password = u&#39;&#39;</code> ì—¬ê¸°ì— ë¶™ì—¬ë„£ê¸° í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> notebook<span class=\"token punctuation\">.</span>auth <span class=\"token keyword\">import</span> passwd<span class=\"token punctuation\">;</span>\npasswd<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>","excerpt":"ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” Jupyter Notebookâ€¦"}}},{"id":"ac4d21a5-d1d3-51f4-b301-ef5fe84a6eed","title":"DB í…Œì´ë¸”ì„ DataFrameìœ¼ë¡œ ì½ì–´ì˜¤ëŠ” ë°©ë²•","slug":"db-to-dataframe","publishDate":"January 14, 2017","publishDateISO":"2017-01-14","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"c2cd971c-bec9-5e5a-8704-02f3736f9caa","childMarkdownRemark":{"id":"cbaa2cc7-96ca-560a-86c9-be1cfe047b8e","timeToRead":1,"html":"<p>ë³¸ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì˜ˆì‹œë¥¼ MySQLë¡œ ë“¤ì§€ë§Œ sqlalchemyì˜ ì»¤ë„¥í„°ë§Œ ë³€ê²½í•´ì£¼ë©´,\nMySQL ë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ì— ì ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<p>ë¨¼ì € sqlalchemyê°€ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.\nsqlalchemyì™€ mysqlì„ ì—°ê²°í•˜ëŠ” íŒ¨í‚¤ì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>\n<p>íŒŒì´ì¬2ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ <code class=\"language-text\">mysql-python</code>, 3ì„ ì‚¬ìš©í•œë‹¤ë©´ <code class=\"language-text\">pymysql</code>ì„ ì„¤ì¹˜í•´ì£¼ë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># python2\n$ pip install mysql-python\n$ pip install sqlalchemy\n\n# python3\n$ pip install pymysql\n$ pip install sqlalchemy</code></pre></div>\n<br>\n<p>ì´ì œ sqlalchemyë¥¼ í†µí•´ DBì— ì—°ê²°í•´ë³´ê² ìŠµë‹ˆë‹¤.\nì£¼ì†Œì—ì„œ root, password, tableì€ DBì— ë§ê²Œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n<span class=\"token keyword\">from</span> sqlalchemy <span class=\"token keyword\">import</span> create_engine\n\nengine <span class=\"token operator\">=</span> create_engine<span class=\"token punctuation\">(</span><span class=\"token string\">'mysql://root:password@localhost/table'</span><span class=\"token punctuation\">,</span> convert_unicode<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\nconn <span class=\"token operator\">=</span> engine<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ pandasë¥¼ í†µí•´ tableì„ ì½ì–´ë“¤ì¼ ì°¨ë¡€ì…ë‹ˆë‹¤.\npandasì˜ <code class=\"language-text\">read_sql()</code> ì€ 0.19 ë²„ì „ë¶€í„° ìƒê²¨ë‚¬ìœ¼ë©°, sqlalchemyë¥¼ í•„ìˆ˜ë¡œ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">data <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_sql_table<span class=\"token punctuation\">(</span><span class=\"token string\">'table_name'</span><span class=\"token punctuation\">,</span> conn<span class=\"token punctuation\">)</span>\ndata<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<br>\n<h2 id=\"mysql-dump-íŒŒì¼ì„-ì½ì–´ì˜¤ëŠ”-ë°©ë²•\" style=\"position:relative;\"><a href=\"#mysql-dump-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EC%9D%BD%EC%96%B4%EC%98%A4%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"mysql dump íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” ë°©ë²• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MySQL dump íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” ë°©ë²•</h2>\n<p>ì¶”ê°€ë¡œ ì™¸ë¶€ë¡œë¶€í„° ë°ì´í„°ë¥¼ ë„˜ê²¨ë°›ì„ ë•Œ DB dump íŒŒì¼ (.sql) ì„ ë„˜ê²¨ë°›ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.\në°ì´í„°ë² ì´ìŠ¤ ì „ì²´ë¥¼ ë°›ì€ dump íŒŒì¼ì´ë¼ë©´, ì»¤ë©˜ë“œì— ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># root, database, data.sqlì€ ì•Œì•„ì„œ ìˆ˜ì •\n$ mysqldump -u root -p database &gt; data.sql</code></pre></div>\n<br>\n<p>íŠ¹ì • í…Œì´ë¸”ë§Œ ë°›ê³  ì‹¶ë‹¤ë©´, ì»¤ë©˜ë“œì— ë‹¤ìŒê³¼ ê°™ì´ ì…ë ¥í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># root, table, database, data.sqlì€ ì•Œì•„ì„œ ìˆ˜ì •\n$ mysqldump -u root -p database table &gt; data.sql</code></pre></div>\n<br>\n<p>ìœ„ì™€ ê°™ì€ ê³¼ì •ì´ ëë‚˜ë©´, ë‚˜ì˜ MySQL ê³„ì •ì— ë°ì´í„°ê°€ ì €ì¥ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì´í›„ì—ëŠ” ì•ì—ì„œ ì„¤ëª…í•œëŒ€ë¡œ pandasë¥¼ í†µí•´ DataFrameìœ¼ë¡œ ë³€í™˜í•˜ë©´ ë©ë‹ˆë‹¤.</p>","excerpt":"ë³¸ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì˜ˆì‹œë¥¼ MySQLë¡œ ë“¤ì§€ë§Œ sqlalchemyì˜ ì»¤ë„¥í„°ë§Œ ë³€ê²½í•´ì£¼ë©´,\nMySQLâ€¦"}}},{"id":"2b717c14-f760-515c-ab04-78976e855c7d","title":"Jupyter Notebook ë‹¤ì¤‘ì»¤ë„ ì„¤ì •í•˜ê¸°","slug":"jupyter-notebook-kernel","publishDate":"January 28, 2017","publishDateISO":"2017-01-28","heroImage":{"id":"dab22ea8-d54d-52a6-852a-278ba3b19a2b","title":"cover-dataengineering","fluid":{"aspectRatio":1.499531396438613,"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50","srcSet":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50 1600w","srcWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50&fm=webp","srcSetWebp":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=450&h=300&q=50&fm=webp 450w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=900&h=600&q=50&fm=webp 900w,\n//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(max-width: 1800px) 100vw, 1800px"},"ogimg":{"src":"//images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&fl=progressive&q=50"}},"body":{"id":"474c97da-c421-5a28-804e-a766dbdf66d6","childMarkdownRemark":{"id":"d9e323c4-1b1e-5b95-adfa-3b23e2ba4c60","timeToRead":5,"html":"<p>Jupyer Notebookì€ ì›¹ ê¸°ë°˜ì˜ ëŒ€í™”í˜• ë…¸íŠ¸ë¶ ì§€ì›ìœ¼ë¡œ ìˆ˜ì‹, í‘œ, ê·¸ë¦¼ ë“±ì„ í‘œí˜„í•˜ê¸° ì‰¬ìš´ ê°œë°œ í™˜ê²½ì…ë‹ˆë‹¤.\nì½”ë”©ê³¼ ë¬¸ì„œí™”(Markdown)ê¹Œì§€ í•œ í™”ë©´ì—ì„œ ê°€ëŠ¥í•˜ë©° ì»¤ë„ í™•ì¥ì„ í†µí•´ ë‹¤ì–‘í•œ íŒŒì´ì¬ ë²„ì „ ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ì–¸ì–´ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</p>\n<p>ì´ì œ íŒŒì´ì¬ì„ ì²˜ìŒ ì„¤ì¹˜í•œë‹¤ê³  ê°€ì •í•˜ê³  ë§¥ OSì—ì„œ ê°„ë‹¨í•˜ê²Œ jupyter í™˜ê²½ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì†Œê°œí•´ë“œë¦¬ê³ ì í•©ë‹ˆë‹¤.</p>\n<br>\n<h2 id=\"pyenv-ì„¤ì¹˜í•˜ê¸°\" style=\"position:relative;\"><a href=\"#pyenv-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"pyenv ì„¤ì¹˜í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pyenv ì„¤ì¹˜í•˜ê¸°</h2>\n<h3 id=\"1-homebrewë¥¼-í†µí•´-pyenvë¥¼-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#1-homebrew%EB%A5%BC-%ED%86%B5%ED%95%B4-pyenv%EB%A5%BC-%EC%84%A4%EC%B9%98\" aria-label=\"1 homebrewë¥¼ í†µí•´ pyenvë¥¼ ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Homebrewë¥¼ í†µí•´ pyenvë¥¼ ì„¤ì¹˜</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ brew install pyenv</code></pre></div>\n<br>\n<h3 id=\"2-pyenv-initì„-bashrcì—-ì¶”ê°€-zshë¥¼-ì‚¬ìš©í•˜ëŠ”-ê²½ìš°-zshrc\" style=\"position:relative;\"><a href=\"#2-pyenv-init%EC%9D%84-bashrc%EC%97%90-%EC%B6%94%EA%B0%80-zsh%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0-zshrc\" aria-label=\"2 pyenv initì„ bashrcì— ì¶”ê°€ zshë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° zshrc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. pyenv initì„ ~/.bashrcì— ì¶”ê°€ (zshë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ~/.zshrc)</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ echo &#39;eval &quot;$(pyenv init -)&quot;&#39; &gt;&gt; ~/.bashrc</code></pre></div>\n<br>\n<h3 id=\"3-pyenv-ì‚¬ìš©í•´ë³´ê¸°\" style=\"position:relative;\"><a href=\"#3-pyenv-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"3 pyenv ì‚¬ìš©í•´ë³´ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. pyenv ì‚¬ìš©í•´ë³´ê¸°</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pyenv versions\nsystem (set by /Users/USERNAME/.pyenv/version)</code></pre></div>\n<br>\n<h3 id=\"4-pyenv-ëª…ë ¹ì–´-ì •ë¦¬\" style=\"position:relative;\"><a href=\"#4-pyenv-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A0%95%EB%A6%AC\" aria-label=\"4 pyenv ëª…ë ¹ì–´ ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. pyenv ëª…ë ¹ì–´ ì •ë¦¬</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pyenv install &lt;version&gt;\n$ pyenv uninstall &lt;version&gt;\n$ pyenv install -list\n$ pyenv shell &lt;version&gt;\n$ pyenv activate &lt;environment&gt;\n$ pyenv deactivate &lt;environment&gt;</code></pre></div>\n<br>\n<h2 id=\"pyenv-virtualenv-ì„¤ì¹˜í•˜ê¸°\" style=\"position:relative;\"><a href=\"#pyenv-virtualenv-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"pyenv virtualenv ì„¤ì¹˜í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>pyenv-virtualenv ì„¤ì¹˜í•˜ê¸°</h2>\n<h3 id=\"1-homebrewë¥¼-í†µí•´-pyenv-virtualenvë¥¼-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#1-homebrew%EB%A5%BC-%ED%86%B5%ED%95%B4-pyenv-virtualenv%EB%A5%BC-%EC%84%A4%EC%B9%98\" aria-label=\"1 homebrewë¥¼ í†µí•´ pyenv virtualenvë¥¼ ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Homebrewë¥¼ í†µí•´ pyenv-virtualenvë¥¼ ì„¤ì¹˜</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ brew install pyenv-virtualenv</code></pre></div>\n<br>\n<h3 id=\"2-virtualenv-initì„-bashrcì—-ì¶”ê°€-zshë¥¼-ì‚¬ìš©í•˜ëŠ”-ê²½ìš°-zshrc\" style=\"position:relative;\"><a href=\"#2-virtualenv-init%EC%9D%84-bashrc%EC%97%90-%EC%B6%94%EA%B0%80-zsh%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0-zshrc\" aria-label=\"2 virtualenv initì„ bashrcì— ì¶”ê°€ zshë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° zshrc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. virtualenv initì„ ~/.bashrcì— ì¶”ê°€ (zshë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ~/.zshrc)</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ echo &#39;eval &quot;$(pyenv virtualenv-init -)&quot;&#39; &gt;&gt; ~/.bashrc</code></pre></div>\n<br>\n<h3 id=\"2-pyenv-virtualenv-ì‚¬ìš©í•´ë³´ê¸°\" style=\"position:relative;\"><a href=\"#2-pyenv-virtualenv-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"2 pyenv virtualenv ì‚¬ìš©í•´ë³´ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. pyenv-virtualenv ì‚¬ìš©í•´ë³´ê¸°</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># pyenv virtualenv [python version] [myname]\n$ pyenv virtualenv 2.7.11 python2\n$ pyenv virtualenv 3.5.1 python3</code></pre></div>\n<br>\n<h3 id=\"2-virtualenv-ëª…ë ¹ì–´-ì •ë¦¬\" style=\"position:relative;\"><a href=\"#2-virtualenv-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A0%95%EB%A6%AC\" aria-label=\"2 virtualenv ëª…ë ¹ì–´ ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. virtualenv ëª…ë ¹ì–´ ì •ë¦¬</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pyenv virtualenv versions\n$ pyenv virtualenv [python version] [myname]\n$ pyenv shell [myname]</code></pre></div>\n<br>\n<h3 id=\"jupyter-notebook-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#jupyter-notebook-%EC%84%A4%EC%B9%98\" aria-label=\"jupyter notebook ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jupyter Notebook ì„¤ì¹˜</h3>\n<p>ì´ì œ ë°©ê¸ˆ ì„¤ì¹˜í–ˆë˜ íŒŒì´ì¬ 2ì™€ 3 ë²„ì „ì˜ í™˜ê²½ì— python, notebook, jupyterë¥¼ ì„¤ì¹˜í•  ì°¨ë¡€ì…ë‹ˆë‹¤.\në”°ë¼ì„œ ë°©ê¸ˆ ì„¤ì¹˜í•œ í™˜ê²½ì„ ê°ê° activateí•œ ë‹¤ìŒì— ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.</p>\n<br>\n<h3 id=\"1-pip-install-python2-python3-ê°ê°-ì‹¤í–‰\" style=\"position:relative;\"><a href=\"#1-pip-install-python2-python3-%EA%B0%81%EA%B0%81-%EC%8B%A4%ED%96%89\" aria-label=\"1 pip install python2 python3 ê°ê° ì‹¤í–‰ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. pip install (python2, python3 ê°ê° ì‹¤í–‰)</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pip install ipython\n$ pip install notebook\n$ pip install jupyter</code></pre></div>\n<br>\n<h3 id=\"2-ì´ˆê¸°-jupyter-configuration-íŒŒì¼-ìƒì„±-ë§ˆì°¬ê°€ì§€ë¡œ-ê°ê°-ì‹¤í–‰\" style=\"position:relative;\"><a href=\"#2-%EC%B4%88%EA%B8%B0-jupyter-configuration-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1-%EB%A7%88%EC%B0%AC%EA%B0%80%EC%A7%80%EB%A1%9C-%EA%B0%81%EA%B0%81-%EC%8B%A4%ED%96%89\" aria-label=\"2 ì´ˆê¸° jupyter configuration íŒŒì¼ ìƒì„± ë§ˆì°¬ê°€ì§€ë¡œ ê°ê° ì‹¤í–‰ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. ì´ˆê¸° Jupyter configuration íŒŒì¼ ìƒì„± (ë§ˆì°¬ê°€ì§€ë¡œ ê°ê° ì‹¤í–‰)</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ jupyter notebook --generate-config\nInstalled kernelspec python3 in /Users/username/Library/Jupyter/kernels/python3</code></pre></div>\n<br>\n<h3 id=\"3-ìƒì„±ëœ-jupyternotebookconfigpy-ì„¤ì •-ì›í•˜ëŠ”-ê²½ìš°ì—ë§Œ-ì»¤ìŠ¤í…€-ì„¤ì •\" style=\"position:relative;\"><a href=\"#3-%EC%83%9D%EC%84%B1%EB%90%9C-jupyternotebookconfigpy-%EC%84%A4%EC%A0%95-%EC%9B%90%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0%EC%97%90%EB%A7%8C-%EC%BB%A4%EC%8A%A4%ED%85%80-%EC%84%A4%EC%A0%95\" aria-label=\"3 ìƒì„±ëœ jupyternotebookconfigpy ì„¤ì • ì›í•˜ëŠ” ê²½ìš°ì—ë§Œ ì»¤ìŠ¤í…€ ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. ìƒì„±ëœ jupyter<em>notebook</em>config.py ì„¤ì • (ì›í•˜ëŠ” ê²½ìš°ì—ë§Œ ì»¤ìŠ¤í…€ ì„¤ì •)</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ vi /Users/username/Library/Jupyter/kernels/python3/jupyter_notebook_config.py\n\n$ c.NotebookApp.ip = &#39;127.0.0.1&#39;\n$ c.NotebookApp.open_browser = False\n$ c.NotebookApp.port = 8888\n$ c.NotebookApp.password = [SHA password]</code></pre></div>\n<br>\n<h3 id=\"4-ipykernel-ì„¤ì •-ë§ˆì°¬ê°€ì§€ë¡œ-ê°ê°-ì‹¤í–‰\" style=\"position:relative;\"><a href=\"#4-ipykernel-%EC%84%A4%EC%A0%95-%EB%A7%88%EC%B0%AC%EA%B0%80%EC%A7%80%EB%A1%9C-%EA%B0%81%EA%B0%81-%EC%8B%A4%ED%96%89\" aria-label=\"4 ipykernel ì„¤ì • ë§ˆì°¬ê°€ì§€ë¡œ ê°ê° ì‹¤í–‰ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. ipykernel ì„¤ì • (ë§ˆì°¬ê°€ì§€ë¡œ ê°ê° ì‹¤í–‰)</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ pyenv shell python2\n$ python -m ipykernel install --user\nInstalled kernelspec python2 in /home/seen/.local/share/jupyter/kernels/python2</code></pre></div>\n<br>\n<h3 id=\"5-kerneljson-í™•ì¸-ì›í•˜ëŠ”-ê²½ìš°ì—ë§Œ-ì»¤ìŠ¤í…€-ì„¤ì •\" style=\"position:relative;\"><a href=\"#5-kerneljson-%ED%99%95%EC%9D%B8-%EC%9B%90%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0%EC%97%90%EB%A7%8C-%EC%BB%A4%EC%8A%A4%ED%85%80-%EC%84%A4%EC%A0%95\" aria-label=\"5 kerneljson í™•ì¸ ì›í•˜ëŠ” ê²½ìš°ì—ë§Œ ì»¤ìŠ¤í…€ ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. kernel.json í™•ì¸ (ì›í•˜ëŠ” ê²½ìš°ì—ë§Œ ì»¤ìŠ¤í…€ ì„¤ì •)</h3>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">$ vi /home/seen/.local/share/jupyter/kernels/python<span class=\"token number\">2</span>/kernel.json\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"display_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Python 2\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"language\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"python\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"argv\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"/home/seen/.pyenv/versions/py27/bin/python\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"-m\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"ipykernel\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"-f\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"{connection_file}\"</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h3 id=\"6-jupyter-notebookì„-ì‹¤í–‰\" style=\"position:relative;\"><a href=\"#6-jupyter-notebook%EC%9D%84-%EC%8B%A4%ED%96%89\" aria-label=\"6 jupyter notebookì„ ì‹¤í–‰ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. jupyter notebookì„ ì‹¤í–‰</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ jupyter notebook\n\n# background running\n$ nohup jupyter notebook &amp;\n\n# kill process\n$ ps -a\n37788 ttys000 0:00:00 ...python (ë…¸íŠ¸ë¶ì„ ì‹¤í–‰í•œ í”„ë¡œì„¸ìŠ¤)\n$ kill 37788</code></pre></div>\n<br>\n<h3 id=\"ì •ë¦¬\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"ì •ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë¦¬</h3>\n<p>ìœˆë„ìš°10 ì—ì„œ ì•„ì£¼ ê³ ìƒí–ˆë˜ í™˜ê²½ì„¤ì •ì´ ë§¥ OSì—ì„œëŠ” ì•„ì£¼ ê°„í¸í•˜ê²Œ ë©ë‹ˆë‹¤â€¦\nì˜ ì•ˆë˜ê±°ë‚˜ ì˜¤ë¥˜ê°€ ìƒê¸°ì‹œë©´ ëŒ“ê¸€ë¡œ ì•Œë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤!</p>\n<br>\n<h3 id=\"ì°¸ê³ ë§í¬\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EB%A7%81%ED%81%AC\" aria-label=\"ì°¸ê³ ë§í¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ë§í¬</h3>\n<ul>\n<li><a href=\"https://github.com/yyuu/pyenv\">https://github.com/yyuu/pyenv</a></li>\n<li><a href=\"https://github.com/yyuu/pyenv-virtualenv\">https://github.com/yyuu/pyenv-virtualenv</a></li>\n</ul>","excerpt":"Jupyer Notebookâ€¦"}}}]}},"pageContext":{"slug":"dataengineering","basePath":"","paginationPath":"/tag/dataengineering","pageNumber":3,"humanPageNumber":4,"skip":18,"limit":6,"numberOfPages":7,"previousPagePath":"/tag/dataengineering/3","nextPagePath":"/tag/dataengineering/5"}}}