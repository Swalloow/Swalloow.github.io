{"componentChunkName":"component---src-templates-post-js","path":"/spark-on-kubernetes-scheduler/","result":{"data":{"contentfulPost":{"title":"Spark on Kubernetes: 커스텀 스케줄러 (1)","slug":"spark-on-kubernetes-scheduler","metaDescription":null,"publishDate":"June 08, 2023","publishDateISO":"2023-06-08","tags":[{"title":"DataEngineering","id":"25d7d0d6-3cf7-5e19-a5cb-9c3fa926046f","slug":"dataengineering"}],"heroImage":{"title":"cover-dataengineering","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&q=50&fm=webp 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&q=50&fm=webp 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(min-width: 1600px) 1600px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&fl=progressive&q=50&fm=jpg 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&fl=progressive&q=50&fm=jpg 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg 1600w","sizes":"(min-width: 1600px) 1600px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgb/xAAcEAACAgMBAQAAAAAAAAAAAAAAAQIREiExYeH/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDK1DF0vgtxW9EylQu8nTotmo+gHfAEP//Z"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":3,"html":"<p>Spark 3.4 버전부터 Customized K8S Scheduler 기능이 GA 되었습니다 👏🏻<br>\n그래서 오늘은 커스텀 스케줄러가 왜 필요하고 어떻게 적용할 수 있는지 정리해보려고 합니다.</p>\n<p><br><br></p>\n<h2 id=\"spark-kubernetes-scheduling\" style=\"position:relative;\"><a href=\"#spark-kubernetes-scheduling\" aria-label=\"spark kubernetes scheduling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark Kubernetes Scheduling</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 57.66526019690576%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"spark-k8s\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/3rf4qupMJ99w5THRe8OkYy/3f71d3caf42909aaf305df3d5a64836e/spark-k8s.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/3rf4qupMJ99w5THRe8OkYy/3f71d3caf42909aaf305df3d5a64836e/spark-k8s.png?w=356 356w,\nhttps://images.ctfassets.net/tushy4jlcik7/3rf4qupMJ99w5THRe8OkYy/3f71d3caf42909aaf305df3d5a64836e/spark-k8s.png?w=711 711w,\nhttps://images.ctfassets.net/tushy4jlcik7/3rf4qupMJ99w5THRe8OkYy/3f71d3caf42909aaf305df3d5a64836e/spark-k8s.png?w=1422 1422w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>쿠버네티스 환경에서 spark-submit을 실행하면 pod가 실행되는 순서는 다음과 같습니다.</p>\n<ul>\n<li>spark-submit 명령어 실행</li>\n<li>Kube API를 통해 driver pod 생성</li>\n<li>driver pod → API Server에 executor 생성 요청</li>\n<li>Kube API를 통해 executor pod 생성</li>\n</ul>\n<p>위와 같이 driver가 executor를 관리함에 따라 동적으로 리소스를 확장할 수 있지만\ndriver가 생성되기 전까지 전체 executor에 필요한 리소스를 알 수 없다는 단점이 있습니다.\n이러한 이유로 클러스터 내에 리소스가 고갈된 상황에서 성능 문제가 발생할 수 있습니다.</p>\n<br>\n<p><strong>클러스터 내에 리소스가 고갈된 경우</strong><br>\n<span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 57.38461538461538%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"allo1\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/5hTv6QcJdxi9F4JDlfuX4K/4a9eafde5ae7f235163148ffd7de6e2c/allo1.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/5hTv6QcJdxi9F4JDlfuX4K/4a9eafde5ae7f235163148ffd7de6e2c/allo1.png?w=325 325w,\nhttps://images.ctfassets.net/tushy4jlcik7/5hTv6QcJdxi9F4JDlfuX4K/4a9eafde5ae7f235163148ffd7de6e2c/allo1.png?w=650 650w,\nhttps://images.ctfassets.net/tushy4jlcik7/5hTv6QcJdxi9F4JDlfuX4K/4a9eafde5ae7f235163148ffd7de6e2c/allo1.png?w=1300 1300w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>클러스터의 리소스 풀이 요청 받은 리소스보다 부족한 상황이라고 가정해보겠습니다.\n위 그림에서 녹색은 실제로 노드에 할당되어 running 중인 pod, 빨간색은 리소스가 부족으로 인해 pending 상태의 pod 입니다.</p>\n<p>각 앱은 리소스 경쟁에 의해 driver와 executor 1개씩 정상적으로 생성되어 3개의 앱이 실행 중인 상태입니다. 하지만 3개의 앱은 executor 리소스를 확보하지 못했기 때문에 작업을 완료할 수 없습니다. EKS 환경이라면 노드 리소스를 확보하더라도 VPC IP 고갈 문제로 인해 이러한 상황을 충분히 마주칠 수 있습니다.</p>\n<br>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 60.129659643435986%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"allo2\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/6U6rRqyACQNSOLT8tqXN40/5d69b571b23d34fdeac29a067e680ecc/allo2.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/6U6rRqyACQNSOLT8tqXN40/5d69b571b23d34fdeac29a067e680ecc/allo2.png?w=309 309w,\nhttps://images.ctfassets.net/tushy4jlcik7/6U6rRqyACQNSOLT8tqXN40/5d69b571b23d34fdeac29a067e680ecc/allo2.png?w=617 617w,\nhttps://images.ctfassets.net/tushy4jlcik7/6U6rRqyACQNSOLT8tqXN40/5d69b571b23d34fdeac29a067e680ecc/allo2.png?w=1234 1234w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>위와 같이 리소스 내에서 가능한 앱이 정상적으로 실행, 종료되고 나머지는 대기하는게 더 효율적이라고 볼 수 있습니다.\n쿠버네티스에서는 기본 스케줄러가 배치 작업에 최적화된 형태가 아니기 때문에 위와 같은 문제가 발생할 수 있습니다. 이를 해결하기 위해 <code class=\"language-text\">kube-batch</code>, <code class=\"language-text\">volcano</code>, <code class=\"language-text\">yunikorn</code> 등의 커스텀 배치 스케줄러가 개발되었습니다.</p>\n<p><br><br></p>\n<h2 id=\"spark-app-aware-scheduling\" style=\"position:relative;\"><a href=\"#spark-app-aware-scheduling\" aria-label=\"spark app aware scheduling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark App-aware Scheduling</h2>\n<p>기본 스케줄러는 <code class=\"language-text\">filtering</code>, <code class=\"language-text\">scoring</code> 과정을 거쳐 pod가 실행될 최적의 노드를 찾습니다. 이 때 스케줄 단위는 pod 입니다. 반면 대용량 배치 작업에서는 동시에 수 백개의 pod가 생성되기도 합니다. 또한 동시에 여러 작업이 실행되기 때문에 우선순위, 조직 별 리소스 제한 등을 고려해서 안정적으로 작업을 마치기 위한 대기열이 필요합니다.</p>\n<p>커스텀 배치 스케줄러에서는 이를 해결하기 위해 <strong>앱 단위로 스케줄을 결정하는 App-aware 방식을 사용</strong>합니다. 뿐만 아니라 대용량 배치 작업을 위해 Job Ordering, Hierarchy Resource Queue, Node Sorting 단계에서 다양한 스케줄링 알고리즘을 지원합니다.</p>\n<p><strong>Bin Packing</strong><br>\n<span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 30.321406913280775%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAMCAMAAAAnHQ9/AAABWVBMVEX////9/f/8/f709PTB0PU7b+rE0/h+o+Fpls5umNzz8/PB0fgzaenB0vikw8622Kicv8Xg4ODV1dXc3Nzk5OTq6urE37m22Knb29vW1tb29va62q1Bc+o7nIVFtF9Uumw/slqV1KP5+fn7+/v19fX6+vqBtK6KxJiXx6ODwpLk9Ojw8PC/z/U4aOMQi18DmycKni0AmiVzx4fu7u7n5+fW1db+/v6Ws9KbuLFqnqywxbXT09PR0dGgwafd8eHG0PHYRDkhi1gcnSF4x4X39/fx8fG0epfYRTqOWWWIt3qfvYmfvYh8tHLG0PLdYFXdX1V9lUr1tgf1vB71tAKkzIDhdGvZSj/TsAf1uhf1uA7ArgnG0PO+SlV5lUzttQrtvCLtswOizICnfaW9SlZ+XXbLrwjsuRjsuBW5rQrx9f3S3vrL5tzI6c/h8+Xd5vvT3/rS4PTJ6dD4/Pl4L/NBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUCC0zRTGwdgAAAK9JREFUGBkFwbEuQ2EAgNHz8XNFuNXJYmCUGMXqwcVitLOwSCRWSjTtIM4JAACAwh/AALuFtgBgP1oDDDAV2gKAKVoD7AAAAAAADMuqXwAAMLUBMIzd+gwAAOz9BCBwWCc+l1VVL2CO01LPGOCiWFZVvd88wmVUFQzwdBuK3s4/ru7AYjttDqpWMID5e+5rUXX/6gkwza3magUDmBccVwXAWcxVYABzKALgKArXD/gHwm4dbOjBtmsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"bin1-side\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/3xq1IvNaIvGo5GFGfrSFMe/54bbe46c1b6d52eba037c74c98830f16/bin1-side.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/3xq1IvNaIvGo5GFGfrSFMe/54bbe46c1b6d52eba037c74c98830f16/bin1-side.png?w=412 412w,\nhttps://images.ctfassets.net/tushy4jlcik7/3xq1IvNaIvGo5GFGfrSFMe/54bbe46c1b6d52eba037c74c98830f16/bin1-side.png?w=825 825w,\nhttps://images.ctfassets.net/tushy4jlcik7/3xq1IvNaIvGo5GFGfrSFMe/54bbe46c1b6d52eba037c74c98830f16/bin1-side.png?w=1649 1649w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>Node Sorting 단계를 예시로 들어보겠습니다.\n기본 스케줄러에서 driver, executor pod가 여러 노드에 고르게 분산하면 앱은 네트워크 지연, 셔플 시 원격에서 데이터를 가져와야 하는 상황이 발생합니다.</p>\n<p>이 때 테트리스처럼 <strong>Bin Packing 방식을 적용한다면 어플리케이션을 최대한 가깝게 할당</strong>할 수 있습니다. 클라우드 환경에서 이를 적용하면 노드 scale-in도 원활하게 수행할 수 있습니다.</p>\n<p><br><br></p>\n<h2 id=\"spark-gang-scheduling\" style=\"position:relative;\"><a href=\"#spark-gang-scheduling\" aria-label=\"spark gang scheduling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spark Gang Scheduling</h2>\n<p>앞서 리소스가 고갈된 상황의 경우, Gang Scheduling을 사용한다면 안정적으로 작업을 실행할 수 있습니다. 노드가 0대인 상황에서 앱이 제출되었다고 가정해보겠습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 55.70228091236494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"gang1\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/5OoSnJUq9bkaVk3GvARGZJ/37cf098eb06188b68341765956768a71/gang1.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/5OoSnJUq9bkaVk3GvARGZJ/37cf098eb06188b68341765956768a71/gang1.png?w=417 417w,\nhttps://images.ctfassets.net/tushy4jlcik7/5OoSnJUq9bkaVk3GvARGZJ/37cf098eb06188b68341765956768a71/gang1.png?w=833 833w,\nhttps://images.ctfassets.net/tushy4jlcik7/5OoSnJUq9bkaVk3GvARGZJ/37cf098eb06188b68341765956768a71/gang1.png?w=1666 1666w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>위의 그림은 기본 스케줄러를 적용했을 때 모습입니다.<br>\n필요한 최소 리소스가 미리 정해져있으나 노드 생성까지 대기 시간이 발생합니다.</p>\n<ul>\n<li>driver 리소스 요청 → 1대 생성</li>\n<li>executor 리소스 요청 → 2대 생성</li>\n</ul>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 56.89252336448598%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAMAAABODP0nAAAKzmlDQ1BpY2MAAEiJlZcHVJNZFoDf/6c3WkKkE3oTpBNASuih9yYqIQkklBgTgogdGRzBsSAiAuqIiiAKjo6AjAWxYGFQbNgHZBBQ1sGCDZX9gSXMzJ7dPXtzbt6Xm/tueef9OTcAUII5YnEmrARAlihbEunvxYhPSGTgBgEaaAEi0ARGHK5UzAoPDwaIzKx/lff3ADS53racjPXv3/9XUeHxpVwAoCSEU3hSbhbCbYi+4ool2QCgjiF2g2XZ4km+gzBNghSI8NAkp03zl0lOmWK00pRPdKQ3woYA4MkcjiQNALI1YmfkcNOQOORwhK1FPKEI4bUIu3MFHB7CSF4wNytrySSPIGyK+IsBoNAQZqb8KWbaX+KnyONzOGlynu5rSvA+Qqk4k7P8/zya/y1ZmbKZHMaIkgWSgEhkpSPndz9jSZCcRSmhYTMs5E35T7FAFhAzw1ypd+IM8zg+QfK9maHBM5wq9GPL42Szo2eYL/WNmmHJkkh5rlSJN2uGOZLZvLKMGLldwGfL4+cJouNmOEcYGzrD0oyooFkfb7ldIouU188X+XvN5vWT954l/VO/QrZ8b7YgOkDeO2e2fr6INRtTGi+vjcf38Z31iZH7i7O95LnEmeFyf36mv9wuzYmS781GLufs3nD5GaZzAsNnGPgAXxCMvBggHNgCJ0RtQAQA2fzc7MlmvJeIl0uEaYJsBgt54vgMtohrNZdha21rB8Dk8zt9Jd7en3ouITp+1iYqBcBxEDHmztqSFQA41YlcH51Zm6k9AIohAFzayZVJcqZt6Mk3DPKroAhoQB3oAANgCiyR2hyBK/BEKg4EYSAaJIBFgAsEIAtIwDKwEqwDhaAYbAU7QAXYC/aDWnAUHAfN4DQ4Dy6D6+AmuAsegV4wAF6CUfAejEMQhIMoEBVSh3QhI8gCsoWYkDvkCwVDkVAClAylQSJIBq2E1kPFUAlUAe2D6qCfoFPQeegq1A09gPqgYegN9BlGwWSYBmvDxvA8mAmz4CA4Gl4Ip8FL4Ty4AN4Ml8PV8BG4CT4PX4fvwr3wS3gMBVAkFB2lh7JEMVHeqDBUIioVJUGtRhWhylDVqAZUK6oDdRvVixpBfUJj0VQ0A22JdkUHoGPQXPRS9Gr0JnQFuhbdhL6Ivo3uQ4+iv2EoGC2MBcYFw8bEY9IwyzCFmDJMDeYk5hLmLmYA8x6LxdKxJlgnbAA2AZuOXYHdhN2NbcS2Ybux/dgxHA6njrPAueHCcBxcNq4Qtwt3BHcOdws3gPuIJ+F18bZ4P3wiXoTPx5fhD+PP4m/hB/HjBCWCEcGFEEbgEZYTthAOEFoJNwgDhHGiMtGE6EaMJqYT1xHLiQ3ES8THxLckEkmf5EyKIAlJa0nlpGOkK6Q+0ieyCtmc7E1OIsvIm8mHyG3kB+S3FArFmOJJSaRkUzZT6igXKE8pHxWoClYKbAWewhqFSoUmhVsKrxQJikaKLMVFinmKZYonFG8ojigRlIyVvJU4SquVKpVOKfUojSlTlW2Uw5SzlDcpH1a+qjykglMxVvFV4akUqOxXuaDST0VRDajeVC51PfUA9RJ1gIalmdDYtHRaMe0orYs2qqqiaq8aq5qrWql6RrWXjqIb09n0TPoW+nH6PfrnOdpzWHP4czbOaZhza84HNU01TzW+WpFao9pdtc/qDHVf9Qz1berN6k800BrmGhEayzT2aFzSGNGkabpqcjWLNI9rPtSCtcy1IrVWaO3X6tQa09bR9tcWa+/SvqA9okPX8dRJ1ynVOaszrEvVddcV6pbqntN9wVBlsBiZjHLGRcaonpZegJ5Mb59el964vol+jH6+fqP+EwOiAdMg1aDUoN1g1FDXMMRwpWG94UMjghHTSGC006jD6IOxiXGc8QbjZuMhEzUTtkmeSb3JY1OKqYfpUtNq0ztmWDOmWYbZbrOb5rC5g7nAvNL8hgVs4WghtNht0T0XM9d5rmhu9dweS7IlyzLHst6yz4puFWyVb9Vs9Wqe4bzEedvmdcz7Zu1gnWl9wPqRjYpNoE2+TavNG1tzW65tpe0dO4qdn90auxa71/YW9nz7Pfb3HagOIQ4bHNodvjo6OUocGxyHnQydkp2qnHqYNGY4cxPzijPG2ct5jfNp508uji7ZLsdd/nC1dM1wPew6NN9kPn/+gfn9bvpuHLd9br3uDPdk9x/dez30PDge1R7PPA08eZ41noMsM1Y66wjrlZe1l8TrpNcHbxfvVd5tPigff58iny5fFd8Y3wrfp376fml+9X6j/g7+K/zbAjABQQHbAnrY2mwuu449GugUuCrwYhA5KCqoIuhZsHmwJLg1BA4JDNke8jjUKFQU2hwGwthh28OehJuELw3/JQIbER5RGfE80iZyZWRHFDVqcdThqPfRXtFboh/FmMbIYtpjFWOTYutiP8T5xJXE9cbPi18Vfz1BI0GY0JKIS4xNrEkcW+C7YMeCgSSHpMKkewtNFuYuvLpIY1HmojOLFRdzFp9IxiTHJR9O/sIJ41RzxlLYKVUpo1xv7k7uS54nr5Q3zHfjl/AHU91SS1KH0tzStqcNCzwEZYIRobewQvg6PSB9b/qHjLCMQxkTmXGZjVn4rOSsUyIVUYbo4hKdJblLusUW4kJx71KXpTuWjkqCJDVSSLpQ2pJNQwalTpmp7DtZX457TmXOx2Wxy07kKueKcjuXmy/fuHwwzy/v4Ar0Cu6K9pV6K9et7FvFWrVvNbQ6ZXX7GoM1BWsG1vqvrV1HXJex7td86/yS/Hfr49a3FmgXrC3o/87/u/pChUJJYc8G1w17v0d/L/y+a6Pdxl0bvxXxiq4VWxeXFX/ZxN107QebH8p/mNicurlri+OWPVuxW0Vb723z2FZbolySV9K/PWR7UymjtKj03Y7FO66W2Zft3UncKdvZWx5c3rLLcNfWXV8qBBV3K70qG6u0qjZWfdjN231rj+eehr3ae4v3fv5R+OP9ff77mqqNq8v2Y/fn7H9+IPZAx0HmwboajZrimq+HRId6ayNrL9Y51dUd1jq8pR6ul9UPH0k6cvOoz9GWBsuGfY30xuJj4Jjs2Iufkn+6dzzoePsJ5omGn41+rjpJPVnUBDUtbxptFjT3tiS0dJ8KPNXe6tp68herXw6d1jtdeUb1zJazxLMFZyfO5Z0baxO3jZxPO9/fvrj90YX4C3cuRlzsuhR06cplv8sXOlgd5664XTl91eXqqWvMa83XHa83dTp0nvzV4deTXY5dTTecbrTcdL7Z2j2/++wtj1vnb/vcvnyHfef63dC73fdi7t3vSerpvc+7P/Qg88HrhzkPxx+tfYx5XPRE6UnZU62n1b+Z/dbY69h7ps+nr/NZ1LNH/dz+l79Lf/8yUPCc8rxsUHewbsh26PSw3/DNFwteDLwUvxwfKfyH8j+qXpm++vkPzz86R+NHB15LXk+82fRW/e2hd/bv2sfCx56+z3o//qHoo/rH2k/MTx2f4z4Pji/7gvtS/tXsa+u3oG+PJ7ImJsQcCWdqFEAhCqemAvDmEDIfJwBAvQkAccH0fD0l0PR/gikC/4mnZ/ApcQSg1hOAaEQnx8eDiJogqoB8Dp+2w3Z2cv2XSFPtbKdjkZqR0aRsYuItMj/izAD42jMxMd48MfG1Bin2IQBt76fn+klROgLAawOWdVDwY7xNLvibTM/8f+rx7yuYrMAe/H39J270GBs95xzeAAABUFBMVEX////8/Pz49/fk4+P39vb39/fd3Nzs6+vm5ubv7+/m5eXr6+v39vft7Ozx8fH7+/vy8PDRyMzn4+T5+fjl5OT29/bq6urSzsvc39j+//7+/v7Y48/x9O7t8OrDx7nm5OLP4MGvxJ309PPo5+fk5OT29va3zKWZtYHc3NzY2Njm5eaguYu+06zX19fS2c2hvYnL1sLV1tXW1tbY4dC7zqvf6NbS0dHm6ePZ3NXw7+/7+vrW2dLe4dvz9PLX2tPm5+Tv7u7z8/Ps7Ozv7+709PTa2drq6en29fXr6ur19fXx8fDS0tL4+PjZ2dn4+Pfl5eX5+fnY19fJycnu7e3Y19j3+Pfx8PC/vr7o5OXm4ePp6enY1tfX1tbSzM7U0tPV0NLKx8i3r7HAvr/29/X9/f3u7O308/Pq5ujUzM/p6ejZ19fi4eHg39/f3t7v7u/y8vKg2M5xAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAB3RJTUUH6AEUCC0zRTGwdgAAARNJREFUGBmtwdVWAmEUgNHPgWOBjInd/ip2d6GYDHaL3f3+d8p4LlwuZ5YX7s3fZVn8TSCIS7JzArl5eMsXVIgfwhbfFAgqgstGFRYVAyWo0jJUFFd5RSVV1TVQW1cPNDQ24Wq2UC1kmNa29lhHZ1esu6e3r3+ge3BomC9hVIiMkdGxcSYmp2B6ZnYO4vMLCVyCivBJFuNLy9grAnZ0FVhbMXwRVJRPSTyFUS2Ak8KToKJAEm/rqAg4MbwJKgQj+AiiNtjcwkcYlSKJH0Ft7+ziZw+1f4AvwXV4dDyAr5P0afrsPH1xeWXEmKCI5TiOJWKMiFyLiDEmQcbNLc5d1f3DbRa/iz/iSjzZT8/2y+vbO//gA9o7IURWu+bMAAAAEnRFWHRleGlmOkV4aWZPZmZzZXQANzjJ1HsnAAAAGXRFWHRleGlmOlBpeGVsWERpbWVuc2lvbgAxNzEyNcS2bAAAABh0RVh0ZXhpZjpQaXhlbFlEaW1lbnNpb24AOTc0nQKifQAAAFx0RVh0ZXhpZjpVc2VyQ29tbWVudAA2NSwgODMsIDY3LCA3MywgNzMsIDAsIDAsIDAsIDgzLCA5OSwgMTE0LCAxMDEsIDEwMSwgMTEwLCAxMTUsIDEwNCwgMTExLCAxMTZAuB9yAAAAKHRFWHRpY2M6Y29weXJpZ2h0AENvcHlyaWdodCBBcHBsZSBJbmMuLCAyMDIzk7OPCgAAABd0RVh0aWNjOmRlc2NyaXB0aW9uAERpc3BsYXkXG5W4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"gang2\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/1pcbNLSZKN9zhTD4OeZrZf/f278c96da874a022b6cab85d4bac046a/gang2.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/1pcbNLSZKN9zhTD4OeZrZf/f278c96da874a022b6cab85d4bac046a/gang2.png?w=428 428w,\nhttps://images.ctfassets.net/tushy4jlcik7/1pcbNLSZKN9zhTD4OeZrZf/f278c96da874a022b6cab85d4bac046a/gang2.png?w=856 856w,\nhttps://images.ctfassets.net/tushy4jlcik7/1pcbNLSZKN9zhTD4OeZrZf/f278c96da874a022b6cab85d4bac046a/gang2.png?w=1712 1712w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>위의 그림은 gang 스케줄링을 적용했을 때 모습입니다.<br>\n한번에 필요한 리소스를 확보하여 대기 시간을 최소화합니다.</p>\n<ul>\n<li>driver 리소스 요청 → placeholder 리소스 요청 → 노드 3대 생성</li>\n<li>driver, executor pod 즉시 할당</li>\n</ul>\n<p>여기에서 placeholder pod은 아무 동작도 안하지만 미리 리소스를 확보하기 위해 존재하는 dummy pod 입니다. 만약 리소스를 확보하지 못하는 상황이라면 앱은 대기합니다.\n<strong>Gang Scheduling은 FIFO 큐와 함께 실행하여 리소스 경쟁으로 인한 교착상태에 빠지지 않도록</strong> 할 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 47.13541666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAATCAMAAADVnb8xAAABhlBMVEX////r6+vo6Ojt7e3q6urq6+r8/Pvk5OTl5uXl5eXq6+zw8PDf39/6+vr+8fH79/f6+vv4+Pjt9+vy+fDp6ejm5ub7+/v95uf9/v79/f3+/v7g8dz5+fn95ebw+O/83d/f8dvz+vLd8Nn+9/fi8t/u9+z95OX2+/Xa7tbm9OPr9uj//v75/PjX7dP83d7y+fH97O3+9vf7/fvV7ND+8PHs9+rf8Nvm5eb94+T9/v3U7M/+//708/Px8vLw+O7h8d3e3d7h4uH4+Pn9/vz5+Pjd3d7n6Of94uPW7dH7/fr19PPs7e7+8vL96+z3/Pb8/Pz+8/T+7u/Y7dP4/Pf83N36/fnb79f1+/T//f383t/8/vze8Nr83+D9+/rv+O7829z58fHj3czs9ur45+fW3MLs7Ovo49np9ebq6uno6OnY2NfIysn18/Df4M/3+/X8+/vn5+fs7Ozp6enMzc3Ozs38+vj19fX39/fh4uL29/f29vb09PTz8/Pd3d3r6+r6+vn6+fn4+fnObqQVAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH6AEUCC0zRTGwdgAAATlJREFUGBkFwYdDzAEYANBXjiKf6Gh+P1cZlVWccS5kJjsjIzsjFGWPC/nPvQcAAAAAAEBT85rSWgBgXUtraf0GANo2BpvaN8eWgI4ytm7rhK7unl7oKwNJAbC9D0ioAP1lQFAABgYBgR0F2LkLINkNDA0DJCpgZA+AtLcA+/YDSByA0RGAEMYOwqEqoKdTcHgMR44COCbV4Hh9HHDipKSCUxMAnD5zVg3j9XMA5y9MJhcZGARAi1DD1CUAl69IV6+5PgwAN+T0TW7dBgDhjpkpAEDWuHsPAMj7D2arAABZeDgKAMhHj+u9AABRTDwBAIin1VkAAM+ezwEAePFyBgDAq9fzgDdvJ98tLELT+w/A0vLHT5+/fAW+RWbG9x8/IzN/NYNGRmau/G5kZP5ZAYC/pQYAgNW2f4D/03wrmg3mPPoAAAARdEVYdGV4aWY6Q29sb3JTcGFjZQAxD5sCSQAAABN0RVh0ZXhpZjpFeGlmT2Zmc2V0ADEwMnNCKacAAAAZdEVYdGV4aWY6UGl4ZWxYRGltZW5zaW9uADE5MjD6eamJAAAAGHRFWHRleGlmOlBpeGVsWURpbWVuc2lvbgA5MDWlRAQsAAAAGHRFWHRleGlmOlNvZnR3YXJlAFBob3RvU2NhcGV02ZskAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"kubemarkk\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/3DRNtnh2w1JZeU17o2IiLR/834aae6213df1e8c56a9341b8f4edce4/kubemarkk.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/3DRNtnh2w1JZeU17o2IiLR/834aae6213df1e8c56a9341b8f4edce4/kubemarkk.png?w=480 480w,\nhttps://images.ctfassets.net/tushy4jlcik7/3DRNtnh2w1JZeU17o2IiLR/834aae6213df1e8c56a9341b8f4edce4/kubemarkk.png?w=960 960w,\nhttps://images.ctfassets.net/tushy4jlcik7/3DRNtnh2w1JZeU17o2IiLR/834aae6213df1e8c56a9341b8f4edce4/kubemarkk.png?w=1920 1920w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>또한 동시 실행 Pod가 많을 수록 스케줄링 성능 향상을 기대할 수 있습니다. 위 그림은 Yunikorn에서 kubemark를 통해 벤치마크한 결과입니다. 회사 환경에서 spark 작업 시간을 기준으로 테스트했을 때도 성능 향상을 확인할 수 있었습니다.</p>\n<p>다음 글에서는 Spark 3.4 버전에서 공식적으로 지원하는 Volcano, Yunikorn에 대해 이어서 정리해보겠습니다.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://yunikorn.apache.org/docs/\">https://yunikorn.apache.org/docs/</a></li>\n<li><a href=\"https://blog.cloudera.com/spark-on-kubernetes-gang-scheduling-with-yunikorn/\">https://blog.cloudera.com/spark-on-kubernetes-gang-scheduling-with-yunikorn/</a></li>\n</ul>","excerpt":"Spark 3.4 버전부터 Customized K8S Scheduler 기능이 GA 되었습니다 👏🏻\n그래서 오늘은 커스텀 스케줄러가 왜 필요하고 어떻게 적용할 수 있는지 정리해보려고 합니다.  Spark Kubernetes Scheduling  쿠버네티스 환경에서 spark-submit을 실행하면 pod가 실행되는 순서는 다음과 같습니다. spark-submit 명령어 실행 Kube API를 통해 driver pod 생성 driver pod → API Server에 executor 생성 요청 Kube API를 통해 executor pod…"}}}},"pageContext":{"slug":"spark-on-kubernetes-scheduler","basePath":"","prev":{"slug":"spark-on-kubernetes-scheduler-2","publishDate":"2023-12-10"},"next":{"slug":"berlin","publishDate":"2023-05-10"}}},"staticQueryHashes":["1946181227","2744905544","3732430097"]}