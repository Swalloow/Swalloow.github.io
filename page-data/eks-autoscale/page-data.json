{"componentChunkName":"component---src-templates-post-js","path":"/eks-autoscale/","result":{"data":{"contentfulPost":{"title":"EKS의 AutoScaling 이해하기","slug":"eks-autoscale","metaDescription":null,"publishDate":"November 23, 2019","publishDateISO":"2019-11-23","tags":[{"title":"DevOps","id":"5a31222a-01e6-5627-8680-b50849114510","slug":"devops"}],"heroImage":{"title":"cover-devops","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&q=50&fm=webp 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&q=50&fm=webp 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&q=50&fm=webp 1080w","sizes":"(min-width: 1080px) 1080px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&fl=progressive&q=50&fm=jpg 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&fl=progressive&q=50&fm=jpg 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg 1080w","sizes":"(min-width: 1080px) 1080px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUBAwQG/8QAIhAAAgICAQMFAAAAAAAAAAAAAQIAEQMEEiFBYQUxUbHB/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgT/xAAYEQEAAwEAAAAAAAAAAAAAAAAAARESIf/aAAwDAQACEQMRAD8AsOxkC8iyKfgvX5M528xy2WSvOS/qKBuO4NqOnT3krlYhnUlaF12lCbR2m9xFFkvw5hOePqbKabGGI73CG4Lr/9k="}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":2,"html":"<p>오늘은 Kubernetes의 Cluster AutoScaling에 대해 정리해보려 합니다.\n그 다음 EKS에서는 어떻게 적용할 수 있는지, 어떤 효과를 볼 수 있는지 알아보겠습니다.</p>\n<br>\n<h2 id=\"kubernetes-cluster-autoscaling\" style=\"position:relative;\"><a href=\"#kubernetes-cluster-autoscaling\" aria-label=\"kubernetes cluster autoscaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes Cluster AutoScaling</h2>\n<p>Kubernetes는 Cluster AutoScaler를 통해 동적으로 인프라를 확장할 수 있습니다.\nCluster AutoScaler는 Pod의 리소스 요청에 따라 클러스터의 노드를 추가하거나 제거합니다.\n만약 리소스 부족으로 인해 스케줄링 대기 상태의 Pod가 존재하는 경우 Cluster AutoScaler가 노드를 추가합니다.\n추가 시 설정한 Min, Max 값을 넘어가지 않도록 구성 할 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 56.85714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAIAAAD2sJpCAAAEQ0lEQVRIx61WTW9bVRA9M/fe954dJ06a9CNpmiIEpZFKERQKYsECVexgDUskfgo/BAk2LJAqdd8FEhWlEojChhRBP9I2bu34K7af78cMCydKS0HEpLO8M29G582551xSVRwsJpVEhOcR9oB1ZVl2u93RcBRFqrXa2AeAoGqMscaUwx0VKYoipmiMXV09+Z8NaVrESsSNDW3fAZvJKbIZOXWBjKXdGmKm54b4qZ+8eY1ufhoZIFgFFj8xa1+AaKpFWAAppRQDEbFh6O7HIiIqhm1MiYiyLFOg0+60Ot2X2JWKxwP20S5W/DwXKUZjsql3HHzZbPYGozLPMyZY54If+5BExDljSKzLl5dPpJTq9frs/Dx++nY4AkNy9sMRZlMikI8ps2YCo9NpD3f61ZlqDAEg52xKUUSTCIBqdXZ+YcECGIXK5esSU6302h8pEVQzIopJ147yZx/NZQ4hBGstETEAWxw5fg52GSBIH9UTsMYQxxittcaY6kz9xw3bH6qqA0CAqGXimGS+xu+9ObuLuN1L322E86tmsyVX7yXHYECATsSZTfr4khyZUyLa39/6hzjzAYh3yUUMkxkgJI0xWsu9gfnme335hNnqyOXfoyMwkWjqJyzncuUsFTksACZsjUUfJwa9voLMIQQwQwgI8N6rWmufoKEr4Ipn1+acazabZTlwlVN/tOVBTwCcroAIBFVgnGBIRXUXsSjOrsYza32lmRA0d0Mfa5WqtU7v3mZrHU1uzgFiaWkJWNxqSRRtBRQGTKB/I1fmqNGyg1GdwEmQWecDWwsBZomdnVaqCKrNMf70esyAASJSVQGaCScdQfcERBWbW3E0VhAIk32oAiqYq/HyUTOtHPqgV2+M2n0xDAAxiTUMIAkWavz+xUrmaF+5fr7bu7XVo+TfWV/97WG/1enXZ7JL51f40LKsEojd3w732/ZKud8e3X64PRzL9iDeedRtbO8kObwd6D822UccBaKAirMcBarKBMuH9aIYIxEZY6YwiRBx9YdhdyCqSKLYo6eILtbNu68V138pOzv/kD0yx5fermaOAHjvsyybziRanfj1tXJ92TQ68uVGLAhEUEVLcHGWPq/RlRvj00vmwXb66lasEIggis2EVwu6sF4cXzTe+6cE4ICDCXS/J49GysAbC+wMkgDQBNQdMajRlztdAXDhiey6ghQxRElirWXmqQcr8OKKvLC6Q1x4z7kbBqlkmctzaTaMCNZW5NixPqjwnnI3CqmS5S7L5e49JiI27n/6MQGP+6SNnMj4QBWXjyNbq87BD5QZzR4NNIeaEKnYy1qLTgfPsmkKcsWEG7+W3R0xTHsmoQBEMD/L51/Jbm74Tl/oCVEU0SRar/Fb5wprDv30SXE8HA5jDM5lk9khRBEQI3OOmWMM1rrxeFyr1VxWeW6PPVFi4xAnUkAAFAwCFKIMpZSImUQpCdzB7vdfPVxhuWOwvsgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"autoscaler\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>먼저 AutoScaler를 설정하면 대기 상태의 Pod을 주기적으로 확인합니다.\n클러스터 리소스가 부족하면서 사용자가 정의한 최대 노드 수에 도달하지 않은 경우 노드 프로비저닝을 요청합니다.\n노드가 추가되면 스케줄러에 의해 대기 상태의 Pod들이 새로운 노드로 할당됩니다.</p>\n<p>노드를 축소하는 프로세스는 사용자가 정의한 메트릭에 의해 시작됩니다.\n예를 들어 CPU Utilization이 50% 이하로 설정했다고 가정해보겠습니다.\nCluster AutoScaler는 삭제할 노드에서 실행 중인 Pod를 다른 노드로 안전하게 이동시킬 수 있는지 확인합니다.\n이때 Pod가 로컬 스토리지를 사용하고 있었다면 데이터 유실이 발생할 수 있으니 <strong>PV 사용</strong>을 권장합니다.\n이러한 확인 프로세스를 노드 또는 Pod 단위로 수행하고 Pod이 모두 이동하게 되면 노드를 제거합니다.</p>\n<br>\n<h2 id=\"eks-autoscaler\" style=\"position:relative;\"><a href=\"#eks-autoscaler\" aria-label=\"eks autoscaler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EKS AutoScaler</h2>\n<p>EKS의 AutoScaler는 AWS의 Auto Scaling Group을 활용하고 있습니다.\nASG는 주기적으로 현재 상태를 확인하고 <strong>Desired State</strong>로 변화하는 방식으로 동작합니다.\n사용자는 클러스터 노드 수를 제한하는 Min, Max 값을 지정할 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAWCAIAAAA97EnnAAAEb0lEQVRIx8VV6W/cRBTP/4uQ+Ahf+MYHWgl6fQEJFQSIciQkoU0KaZujhNxNs9nDu+v1HrZ319ecnvG5Ns92kwYaQVXa8jSy3rx5nt+8Y34zl/9PMneuxWnmx7M8y94qsKoNPtse3K7h5c1DSvDzdTjHzmq+tZQT940At7raxw+Uq1uD5e0Tx3FmWR4nWTTL8/Zx/tWH+cKN/NuPCv21AwNYXWkf1epqryeEeJ7/nd/kzffkN1fk9Xej9cU3UmOEPNMwwjCspr7vuwjZtmX21HFfM9SObVmEUrC/ZuAoiqSUcRwDNnwBgIIwRigjjOFqwhjYK5/ZbFZ2Ry1f/jyfDKsdRCl+KaCAJ9gHuhdGyeXAACmFDIIAtiaEyDMJSkEIV/q5vTgC41KIcPmL8NY70Q/X8zQBF0wIPhOEUJWevQOVEHEJcBVrlkEMsyiOgzBM07QKKJ0VCuyYJGBLs7x0Kt2iKIa1WHBmTWR5EQBJ1/XpdFpEUUpVuInpBjJ6ETjzBZeB5D4/ODzp9eraSFGNjougt9Nut39yejLo11WzMxz34yQmlOztH/fUU01vgxvmJIyjIArPbt/L0sAcBAE5TJMUjrmyuda+e2u09MlOa93yprBcazYeri+Mv/6gdrh42n8KFsbZL+v324vXBvdu7igbHnEhKUmSwJk86iLmOtiy8dQltksdzBEYYeoQG0a1ipk3y2YFMC8iDnwpuqaiqk/M441mv2Z7NqR07BiK3hidPNZau6rRjZOEctoxWuCmn2yBm0c8KA0kbFYVofhCFFCFBBQoH4wUDPCBA4Je1C6tIs4phxaUjIvt3ZbSHipDqzFyHUSgrPWGtn/UUTWjoSPVcKC0Hiabj0/bnaEyspsjF1EupPSLFjnjugv5zP4x1XkQQDclMggXNttPl1Z689+vnU4gL7B81NRXHp3qX97Y2W0dqHZenFKAW31+obu4sFafIiqKiEDSzMEBjKknx46Ar40ClwQulWPPnyBh48Ji48DypEfCAtgvLlIogrBtonZ/Omy06gPHIwyyZti4qaNBs9NR9a7pwfbMF4qJOtp42FDqQxczaN0oCKKLXQV69hIEkknOAiFgaOoQmyPfNvlU9wmGnjH0yaQ/FJbh2wa1zCSKOKWd9oBNnrlJRgMhQ2DZAvl8nGf60lEBZ1kUSAgllHL33q/WnU/9n67iw1XuWbDcfFJTlr4Tt99nv//otfbhJ07Z3t1VfOcK//kaOroviAedkwBDpUlGnIy6GbIyd5yhaUbsjHnFwHaGrWK1VHLJnwGHwo8gX1KQ9iE9fkQ35nFjh3sOLBNdpY0/6MYCPXqIevWCTDgjygE9fABG1NgVBBVUAkTxt1z/W7IL5krjmDMGZANsyWgphPicw2lgyiiwdcnUlIAFiJieuYG/8IF4GBTlFR+J4valKfCvpvV7moYwTksLsLxpjlW1pxsG3KW05FJCaOHW0+DVOCfXV3+dKvE8uKjkIvMBo9m2ff5cVrzoui75q9t/BX5r8iejUNCMtVa89gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"asg2\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>위와 같이 목적에 따라 여러 종류의 ASG를 설정하고 서로 다른 <strong>AutoScaling Policy</strong>를 적용할 수 있습니다.\n<strong>Spot Instance Group</strong>을 설정하면 저렴하지만 입찰 가격에 의해 언제든지 인스턴스가 내려갈 수 있습니다.\n하지만 EKS의 <strong>Spot Interrupt Handler (DeamonSet)</strong> 에 의해 정상적으로 실행 중인 Pod들을 재배치할 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 39.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAMAAABTCc2fAAABxVBMVEXl5eTi4uLv7+/u7u7y8vL5+fn5+fjw8PDq6unq6urp6eno6Ojf39/e3t7d3d3n5+bf3t7j4uLm5uXi4eHg4ODk5OPl5eXk4+Pl5OTg4N/d3dzf397h4ODg39/h4eHd3Nze3d3h4eDk5OTj4+Le3t3j5uva3uPW2t7d4OTf4ufe4eTc3+Ha3eDa3N/c3+Lf4uXb3+TX2+De4uba3uLc4OXd4eXb3uPe4ebY3ODS1trU2NzZ3eHe4eXg4+jX2t7Y3OHc4OTZ3eLf4+jh5ero7fTn7PTi5+3g5evs8fj3+//4+//3+v70+f7v9fzy+P7x9/7w9fzw9vzx9/3v9fvn7PLh5uzi6O7k6e/h5+3t8/rn7fPy+P/r8ffz+P/5+Pj6+fn49/f39vb8/Pv+/v79/f38/Pz+/f3+/v3///7//////v739/b39/f9/fz6+vr9/Pzp6uvn6Ovp6uzz8/P19fX09PTs7Ozn5+fc3Nza293V19rb3N7j4+Pt7e3i4eLg3+DZ2dna2tr7+/vk5eTa29rj5OPY2Njb29vm5ebm5ube3d7x8e709/T6+/v9+vv77/Dx8fH29vb8+vr67+/9+vr67u75+vrvdXliAAABcElEQVQYGY3BT2sTQRzH4c93MjMbkxWL9CQG9SD4hgTxIBVsRfCgiRovhVKImKLiWVF69zUp2B56aC0orsnOxv253fqn0IvPIyQQEmqYMGQChHHE8aMvoXNS3VHZVavsFjmSOTW+LCU3y6BDXSzrqv4wpwY6oVzke8tRAvwlHauFU6PuSIug1vwMuqivouEv6JiBkzCXgqvfrVHkUhKLXsqNhu5YTFmJDMgMmQwSjayM/OMDRIu0DAwDIg2LnOD4T56/EhBpVYFTVvsPHg6dH3n/KITw2J3WedLrjfsKI0nPrtzkTTEs0dYAVtg+pKCxzvbtV9n8Pl1pc/pU+rY10Vv4zlCHND7cmr8n5zqc16w6+5LRpt9L+wMd+HVfyTZ2PmImY2VDvro7mRUcLL3GL2z/huP5Zf8p3rNp8GEneB9iiHEXm4ZJmMUYnfmfxiA6Pnu/AMZUQGrx24AEVAhw4BxcU1VRQWwBGnMkgnhB2OUX6gyB4WKNup8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"asg3\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>그리고 위 그림과 같이 앞서 설정한 Cluster AutoScaler에 의해 새로운 Spot Instance가 추가됩니다.\n분석용 클러스터 같은 경우, 주말과 야간 시간에 사용량이 낮다는 사실을 이미 알고 있기 때문에\n<strong>CloudWatch Scheduled Policy</strong>를 통해 노드를 축소하면 비용을 절감할 수 있습니다.</p>\n<br>\n<h2 id=\"eks-autoscaler-설정\" style=\"position:relative;\"><a href=\"#eks-autoscaler-%EC%84%A4%EC%A0%95\" aria-label=\"eks autoscaler 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EKS AutoScaler 설정</h2>\n<p>먼저 EKS에 ASG 권한을 가지는 IAM Role을 만들어서 Worker Node 보안 그룹에 추가합니다.\n다음으로 ASG 그룹 태그를 설정하고 yaml 파일을 클러스터에 배포합니다.\n자세한 내용은 <a href=\"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/cluster-autoscaler.html\">공식 문서</a>를 통해 진행하실 수 있습니다.\n만약 Policy로 메모리 지표를 사용하고 싶다면 각 노드에 <strong>CloudWatch Agent</strong>를 배포해야 합니다.</p>\n<br>","excerpt":"오늘은 Kubernetes의 Cluster AutoScaling에 대해 정리해보려 합니다.\n그 다음 EKS에서는 어떻게 적용할 수 있는지, 어떤 효과를 볼 수 있는지 알아보겠습니다. Kubernetes Cluster AutoScaling Kubernetes는 Cluster AutoScaler를 통해 동적으로 인프라를 확장할 수 있습니다.\nCluster AutoScaler는 Pod의 리소스 요청에 따라 클러스터의 노드를 추가하거나 제거합니다.\n만약 리소스 부족으로 인해 스케줄링 대기 상태의 Pod가 존재하는 경우 Cluster AutoScaler…"}}}},"pageContext":{"slug":"eks-autoscale","basePath":"","prev":{"slug":"aws-cert","publishDate":"2019-11-30"},"next":{"slug":"eks-vpc-cni","publishDate":"2019-11-04"}}},"staticQueryHashes":["1946181227","2744905544","3732430097"]}