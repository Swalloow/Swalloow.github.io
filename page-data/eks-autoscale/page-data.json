{"componentChunkName":"component---src-templates-post-js","path":"/eks-autoscale/","result":{"data":{"contentfulPost":{"title":"EKS의 AutoScaling 이해하기","slug":"eks-autoscale","metaDescription":null,"publishDate":"November 23, 2019","publishDateISO":"2019-11-23","tags":[{"title":"DevOps","id":"5a31222a-01e6-5627-8680-b50849114510","slug":"devops"}],"heroImage":{"title":"cover-devops","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&q=50&fm=webp 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&q=50&fm=webp 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&q=50&fm=webp 1080w","sizes":"(min-width: 1080px) 1080px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&fl=progressive&q=50&fm=jpg 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&fl=progressive&q=50&fm=jpg 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg 1080w","sizes":"(min-width: 1080px) 1080px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEFBP/EACIQAAICAgIABwAAAAAAAAAAAAECABEDBBIhQVFSYqHB0f/EABUBAQEAAAAAAAAAAAAAAAAAAAIE/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oADAMBAAIRAxEAPwBnZyBeRZVPlzr6mc7mVspLMle7LY+KkobTN2QOuoxkJBYEihdeEoTbVlN4KKLoTfrP7CQTvOOioMIdhZX/2Q=="}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":2,"html":"<p>오늘은 Kubernetes의 Cluster AutoScaling에 대해 정리해보려 합니다.\n그 다음 EKS에서는 어떻게 적용할 수 있는지, 어떤 효과를 볼 수 있는지 알아보겠습니다.</p>\n<br>\n<h2 id=\"kubernetes-cluster-autoscaling\" style=\"position:relative;\"><a href=\"#kubernetes-cluster-autoscaling\" aria-label=\"kubernetes cluster autoscaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes Cluster AutoScaling</h2>\n<p>Kubernetes는 Cluster AutoScaler를 통해 동적으로 인프라를 확장할 수 있습니다.\nCluster AutoScaler는 Pod의 리소스 요청에 따라 클러스터의 노드를 추가하거나 제거합니다.\n만약 리소스 부족으로 인해 스케줄링 대기 상태의 Pod가 존재하는 경우 Cluster AutoScaler가 노드를 추가합니다.\n추가 시 설정한 Min, Max 값을 넘어가지 않도록 구성 할 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 56.85714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAXCAMAAABODP0nAAACqVBMVEX////x8O/U09XFxMO/vr7T09O+wMDCw8PIyMnEwMPT0tPCv8LEwsDMy8vJyMnHycz/5Lz/1pb/2J3/x3D/qSD9qCD/ri/9/f36+vr+/f7+/v7+///8/Pz09PSjo6P3ox/WjhrLhxnsnR7/ri75+fnq6OnQzs2/vb/Rz8/S0dDX1tbKysjGx8jCwsPIyMi7ubrIyc319fXckRvTihrOiRrNhxn9rS/39/fX1dS7u73Ozc7FxsfMzM7SzMzFxMTJx8i/vr/DxMbc3Nzn7vxkk+5cje1Yie1Xie1plu/4+v729vb/qSH7+/v8/f+lwPWYt/SXtfKWtfPN3PpZi+17o/FjkO5Hfevp8P3//Pb/+/H/+/Ld6Ptai+17pfFsl+/c5vtNg+tVietRhutNguvj6fbi4uK3t7fc5/va5vtsneqFqs2SvuR9quCJsNN9quSYxOqWwuhrnOvU4vpSh+tfkutZjetZjOtTh+vw9P3d5/vb5vvR3/rJ2fnZ5fv5+/6VtPOIq/KGqfCUtPO+2O6ixuWTss3e7Pikx+abvNmdv9z4+Pi00euQuNt0lLDZ6feUveGBpcSHrMuRsvOEqfKQsfPx9f2SsvP6+/7f6PtbjO18o/FumO+0y/dcjO1+pfFrlu/e6Puzy/fX4vVileuCqtGLteF5p+SDq9R9qeCMueqRvehvoOtkl+uCqc+Mt+J5p+ODrNR7qOGOu+ptnuvc6Pvf6fxXi+tyo+lzo+pnmetqnOpwoepekeu2zPdYjOtpm+pxoupdkeve6fz9/f+nwvabufSmwfWowvbp6eng3+DZ2trl5ubc293k4+PZ2djb2t3a2tvi4uPa2dnj5OXa2Nru7+/19fbk5eXr6+rp6Orp6ejp6Ojj4+Tn5+jr7Ozv7u/n5+ft7e7l5OVyBfRwAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH6AoNADQ1Y4DE5wAAAWBJREFUGBmNwT9rE3EAgOH3vfyuJqhpSS2toYiO4qQgEVz9A9KvIeIXcBFdsjk4uLq4KC5umg6Cs0WL4NxFtLF1MDgoFWLOu8tdej069Hk4KqnyoF/sk7oFAX9SE6hraEJEnSzr967brH7rMlye8/cJM1scFGjrvC5oR4fdT10WTX3pbcAVZ94Fzpgipeu3BgwXTwMfflxe2WFJQSckCYF5U2Rc+whcF7j24nUv2W2re2RaBDgpJiZEbu4AL5nauK0jCi0CtCwMt6h6yh32Bc4qJtGExjlqOiMKHQKP70vOPjXxecEEojECfXNPtjnMo3tkAtA0x+FecTQrq+QCpYenJKdJQq7hXS4NyAVKXfUtmRvqOpmY3iZTgVJzQCF+Q+Hm6PMuU1J61rDw57i5vZZrlAKlJVOThv9Cx786aTrXkplAqa3k7D84RiaOxsxIxXtL41i9QIVUXHxuxdWvVPwHfetKl8i7w8UAAAARdEVYdGV4aWY6Q29sb3JTcGFjZQAxD5sCSQAAABJ0RVh0ZXhpZjpFeGlmT2Zmc2V0ADkwWYzemwAAABh0RVh0ZXhpZjpQaXhlbFhEaW1lbnNpb24ANzAwQr883wAAABh0RVh0ZXhpZjpQaXhlbFlEaW1lbnNpb24AMzk4B6BGDgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"autoscaler\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/3yeHu3qYc2f8Cy7p2wQBSv/fde07c2123d13d79c69cf884facbb9c7/autoscaler.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>먼저 AutoScaler를 설정하면 대기 상태의 Pod을 주기적으로 확인합니다.\n클러스터 리소스가 부족하면서 사용자가 정의한 최대 노드 수에 도달하지 않은 경우 노드 프로비저닝을 요청합니다.\n노드가 추가되면 스케줄러에 의해 대기 상태의 Pod들이 새로운 노드로 할당됩니다.</p>\n<p>노드를 축소하는 프로세스는 사용자가 정의한 메트릭에 의해 시작됩니다.\n예를 들어 CPU Utilization이 50% 이하로 설정했다고 가정해보겠습니다.\nCluster AutoScaler는 삭제할 노드에서 실행 중인 Pod를 다른 노드로 안전하게 이동시킬 수 있는지 확인합니다.\n이때 Pod가 로컬 스토리지를 사용하고 있었다면 데이터 유실이 발생할 수 있으니 <strong>PV 사용</strong>을 권장합니다.\n이러한 확인 프로세스를 노드 또는 Pod 단위로 수행하고 Pod이 모두 이동하게 되면 노드를 제거합니다.</p>\n<br>\n<h2 id=\"eks-autoscaler\" style=\"position:relative;\"><a href=\"#eks-autoscaler\" aria-label=\"eks autoscaler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EKS AutoScaler</h2>\n<p>EKS의 AutoScaler는 AWS의 Auto Scaling Group을 활용하고 있습니다.\nASG는 주기적으로 현재 상태를 확인하고 <strong>Desired State</strong>로 변화하는 방식으로 동작합니다.\n사용자는 클러스터 노드 수를 제한하는 Min, Max 값을 지정할 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAWCAIAAAA97EnnAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH6AoNADQ1Y4DE5wAABEJJREFUSMfFVltv3FQQ7v/jAd4QD/CEhETeQOIHAEEoqIKiCgkihFqo1CS0IQ2bcEsb5bJNdjfLXm2v7bXjPb4f32/ry9phdq0srcjLQlrmwZrzzez5/M1YM3vj4n+yG3MvyQsjzl82cZcg395jP2jZq7v7qqr+HS+KovJFsbVyYUkvhJig6dd2ybeecPea9JAX4nSSpHk4zi56j4u77xebnxTfLoF//cRIFJutdrVWH9C0aZrzcLD9pffRK95nr3vLrwbryy+kx4qisCzreV55xBifz4zutpleh+61ueFQlmVN066ZeDKZpGkKPXVdN4qi8XgchiE4juPYtj0H4RnHMYQgf9akg+LOexciAa7v+4ZhaDOD9wYfEMAPW0qaTa4mhqvxpQmCgJ+3fyJwNVQInODrpfibd6Obb8Al5QuVFl0a4D/vUH4QX0Gc57llWVmWlYJ0XQcHjvO7gKCUCwjg4AdBAJUAJI4iQ5ayeHqvKIo0TUO/IAQXQpFKxVRTDMPkCmIvdFVdcTxn99Exi4iB0KdHhKyJSRo36/2TWpMWegyi6HMqTse6oe38dMQikhmRDCJVrJi2EadxNkkX7nE0DuEFQdzaxja3tTJ6uHzGVJE8gtDpaXPv8A98681uq/InVQMEdGxsVPgHH59v34Q0IAb109qkY0HnJGM00jlBGyJ8LmJBs2XFFHmFAZ9XWd1WICobCL6kmeLA0bDmB15rUG9Tp9zheouuS6qYZinNk+AP6jtE63GfbSdZYli4zTQ65FP26VabOVN02XKsNEsgeWHFTjBWdMP1g4f3T4mh2BnKHV6TNCjg5Gi//2Sf6kGtz/U+J8VpphvW+ndVgkVdXu3yumrYhu0Cnmb5wsThOClLfW+z1d/6nl+/dUBOiSF0XGd+OyTV20u1Ru+ERLNSexu/ENTa7eHmKqTppl2WOskmQ9mXcCSoASv7nByMtFA2I8EIBorLah7CoWREgCM9VMzxs4rDGonqFOpVD+q0DMRJlvdYVKPETuOs2aHaDIIaANMpiZrUqHdy1KBlBVvmVPHk3yhOfNfU1Mj32u2BLXIOGroiZ2MtTxOW5gSGBcSTeV1gAfEss1ojPYmHHFfiPNPwbAvwYpItTJyOo7LUP9zdNjdWvAefuq09W5MhdLB/Wq888r96x6tXtG51Vmrnx/sVb+1Df+tzSHNNvSx1nsS5OixMKdeFXGWnPhYKWyksCY4FHhUGyjUenoWHL4nDACYXTAOtfWC29s3dVatfNdUpscp0rd6x+fsds/GrSjRKYqN7ZDb3yjTHxFPiogDRCyuG3yhIcE3D0jVDUyz4VFXFNnDkuViVp6CqWFjHihx6jo11SDB11cIaNAiOqogWZX1uScAshLEOM48gCPgvkF0aIP1+n6KoOQIzdTAYQBqM0nKy/qftVNpohGD3PYvAqEIIlY2cG6xLWBLXsxZfsv0FuQGy4iXOzQYAAAARdEVYdGV4aWY6Q29sb3JTcGFjZQAxD5sCSQAAABJ0RVh0ZXhpZjpFeGlmT2Zmc2V0ADkwWYzemwAAABh0RVh0ZXhpZjpQaXhlbFhEaW1lbnNpb24ANzAwQr883wAAABh0RVh0ZXhpZjpQaXhlbFlEaW1lbnNpb24AMzky53WvEAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"asg2\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/lOrcof5mni6AUshFimyTt/6751ae3444d526dfa19923017c508234/asg2.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>위와 같이 목적에 따라 여러 종류의 ASG를 설정하고 서로 다른 <strong>AutoScaling Policy</strong>를 적용할 수 있습니다.\n<strong>Spot Instance Group</strong>을 설정하면 저렴하지만 입찰 가격에 의해 언제든지 인스턴스가 내려갈 수 있습니다.\n하지만 EKS의 <strong>Spot Interrupt Handler (DeamonSet)</strong> 에 의해 정상적으로 실행 중인 Pod들을 재배치할 수 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 39.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAQCAMAAABTCc2fAAABR1BMVEXk5OTd3d3s7Ozq6urr6+vt7e339/fu7u7n5+fo6OjY2NjX19fW1tbi4uLm5ubj4+Pl5eXl5OTh4eHg4ODf39/g3+Dk4+Tk5+vc3+LV2Nzh5Off4uXY297W2NvS1djT1tnY2t3b3uHZ3ODb3uLW2d3W2dza3eHY29/g4+bU19vV2NvU19rT1trY5PHm7PLc4ufb4Obp7vT3+v34+v34+/30+P3t8/nx9v3r8ffh5uzZ3+Ta3+Xg5evZ3uTu9Prf5Oro7vTo7fP29vb5+fn09PTz8/P8/Pz7+/v9/f3+/v7////n6Ovj5uvn6ezs7e7x8fHw8PDy8vL5+frb2tvc3uDX2t/b3eDn5ufo5+jc3Nzd3N3Z2dn6+vrQ0NDS0tLV1dXU1NTZ2Nn7/Pvt8+7w9fHv7+/9+vr35eXp6en19fX9+/v46Oj67u7EWH88AAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH6AoNADQ1Y4DE5wAAAVJJREFUGBmNwTFrU1EcxuHfe865MTG5TRFri4vS3W9gEbWUkg5ODorGBvu1pIMuztVqoCLo5JcQHUqhlyLFIIn33PM3SVuQtkOeR2jMcAJFLpFp2BCSv6qSTMfzsmRZ5aGsRe8sHnNdKaaazB9CW4s6k7xiJqksYz5S/fecNGjE2NIvA3RHUyYhCZNJ5jQ1hIb+MBUWJCWvGAxJVN5kGjkZ/vNDSHaNKa2LmQTHbBwzColLmDgvpG93NYYYfIGNXS4oldUrH1qrkvqjR/3UifCxzgVNrUnwjPbznCfdF/wn725yIu9t5kyoM7wt7f9dLj7APcAzVu29LN5X2eMjqL9z6zvZSuZoh7DP19dL6jX8GBOae9sPtd4BsNsc7bTURJ1b0nc+VTJt/eRU2sOc2dMjuLJE9aa8HwKvtgQry8VCsf2AUxa6hzcKJgbbdNLGzR//AJffcyZLycj3AAAAEXRFWHRleGlmOkNvbG9yU3BhY2UAMQ+bAkkAAAASdEVYdGV4aWY6RXhpZk9mZnNldAA5MFmM3psAAAAYdEVYdGV4aWY6UGl4ZWxYRGltZW5zaW9uADcwMEK/PN8AAAAYdEVYdGV4aWY6UGl4ZWxZRGltZW5zaW9uADI3OJjhAbcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"asg3\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/5hN8HX3ekJv9pnlzQifHIG/dabe87994617d385756e7d67392d0c21/asg3.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>그리고 위 그림과 같이 앞서 설정한 Cluster AutoScaler에 의해 새로운 Spot Instance가 추가됩니다.\n분석용 클러스터 같은 경우, 주말과 야간 시간에 사용량이 낮다는 사실을 이미 알고 있기 때문에\n<strong>CloudWatch Scheduled Policy</strong>를 통해 노드를 축소하면 비용을 절감할 수 있습니다.</p>\n<br>\n<h2 id=\"eks-autoscaler-설정\" style=\"position:relative;\"><a href=\"#eks-autoscaler-%EC%84%A4%EC%A0%95\" aria-label=\"eks autoscaler 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EKS AutoScaler 설정</h2>\n<p>먼저 EKS에 ASG 권한을 가지는 IAM Role을 만들어서 Worker Node 보안 그룹에 추가합니다.\n다음으로 ASG 그룹 태그를 설정하고 yaml 파일을 클러스터에 배포합니다.\n자세한 내용은 <a href=\"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/cluster-autoscaler.html\">공식 문서</a>를 통해 진행하실 수 있습니다.\n만약 Policy로 메모리 지표를 사용하고 싶다면 각 노드에 <strong>CloudWatch Agent</strong>를 배포해야 합니다.</p>\n<br>","excerpt":"오늘은 Kubernetes의 Cluster AutoScaling에 대해 정리해보려 합니다.\n그 다음 EKS에서는 어떻게 적용할 수 있는지, 어떤 효과를 볼 수 있는지 알아보겠습니다. Kubernetes Cluster AutoScaling Kubernetes는 Cluster AutoScaler를 통해 동적으로 인프라를 확장할 수 있습니다.\nCluster AutoScaler는 Pod의 리소스 요청에 따라 클러스터의 노드를 추가하거나 제거합니다.\n만약 리소스 부족으로 인해 스케줄링 대기 상태의 Pod가 존재하는 경우 Cluster AutoScaler…"}}}},"pageContext":{"slug":"eks-autoscale","basePath":"","prev":{"slug":"aws-cert","publishDate":"2019-11-30"},"next":{"slug":"eks-vpc-cni","publishDate":"2019-11-04"}}},"staticQueryHashes":["1946181227","2744905544","3732430097"]}