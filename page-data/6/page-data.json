{"componentChunkName":"component---src-templates-posts-js","path":"/6","result":{"data":{"allContentfulPost":{"edges":[{"node":{"title":"분산 컨테이너 환경에서의 디자인 패턴 (3)","id":"5973ce53-a8c6-5165-af2f-eb64b920f602","slug":"container-patterns3","publishDate":"April 06, 2019","heroImage":{"title":"cover-develop","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=450&h=300&q=50&fm=webp 450w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=900&h=600&q=50&fm=webp 900w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&h=1200&q=50&fm=webp 1800w","sizes":"(min-width: 1800px) 1800px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&h=1200&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=450&h=300&fl=progressive&q=50&fm=jpg 450w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=900&h=600&fl=progressive&q=50&fm=jpg 900w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&h=1200&fl=progressive&q=50&fm=jpg 1800w","sizes":"(min-width: 1800px) 1800px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4gJASUNDX1BST0ZJTEUAAQEAAAIwQURCRQIQAABtbnRyUkdCIFhZWiAHzwAGAAMAAAAAAABhY3NwQVBQTAAAAABub25lAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLUFEQkUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApjcHJ0AAAA/AAAADJkZXNjAAABMAAAAGt3dHB0AAABnAAAABRia3B0AAABsAAAABRyVFJDAAABxAAAAA5nVFJDAAAB1AAAAA5iVFJDAAAB5AAAAA5yWFlaAAAB9AAAABRnWFlaAAACCAAAABRiWFlaAAACHAAAABR0ZXh0AAAAAENvcHlyaWdodCAxOTk5IEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkAAAAZGVzYwAAAAAAAAARQWRvYmUgUkdCICgxOTk4KQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAGN1cnYAAAAAAAAAAQIzAABjdXJ2AAAAAAAAAAECMwAAY3VydgAAAAAAAAABAjMAAFhZWiAAAAAAAACcGAAAT6UAAAT8WFlaIAAAAAAAADSNAACgLAAAD5VYWVogAAAAAAAAJjEAABAvAAC+nP/bAEMAEAsMDgwKEA4NDhIREBMYKBoYFhYYMSMlHSg6Mz08OTM4N0BIXE5ARFdFNzhQbVFXX2JnaGc+TXF5cGR4XGVnY//bAEMBERISGBUYLxoaL2NCOEJjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY//AABEIAA0AFAMBIgACEQEDEQH/xAAXAAEBAQEAAAAAAAAAAAAAAAAEAAEF/8QAIhAAAgIDAAAHAQAAAAAAAAAAAQIDEQAEEhMUISIxQaGx/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP/xAAXEQEBAQEAAAAAAAAAAAAAAAAAEQEh/9oADAMBAAIRAxEAPwDgvHMddmjWmr2mhX7hNfzgkucjwwLNcn+Y2LaPKB0VlArn4vNm2YxGyrrqCfu8nkhdFkChz65YR5umvkDLCT//2Q=="}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":3,"html":"<p>구글 클라우드 팀이 Kubernetes와 같은 Container Orchestration 기술을 개발하면서 겪은\n분산 컨테이너 환경에서의 디자인 패턴에 대해 정리한 내용입니다.\n지난 글에 이어서 배치 작업에 관련된 디자인 패턴에 대한 내용입니다.</p>\n<ul>\n<li><a href=\"http://swalloow.github.io/container-patterns\">분산 컨테이너 환경에서의 디자인 패턴 1. Single-Node Patterns</a></li>\n<li><a href=\"http://swalloow.github.io/container-patterns2\">분산 컨테이너 환경에서의 디자인 패턴 2. Multi-Node Serving Patterns</a></li>\n<li><a href=\"http://swalloow.github.io/container-patterns3\">분산 컨테이너 환경에서의 디자인 패턴 3. Batch Computational Patterns</a></li>\n</ul>\n<br>\n<h2 id=\"batch-computational-patterns\" style=\"position:relative;\"><a href=\"#batch-computational-patterns\" aria-label=\"batch computational patterns permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Batch Computational Patterns</h2>\n<p>앞서 설명했던 long-running computation 패턴과 달리 이번에는 일시적으로 돌아가는 Batch Computational 패턴에 대한 내용이다.\n배치 프로세스는 사용자 로그 데이터의 수집, 데이터 분석 또는 미디어 파일의 변환 등에 자주 사용된다.\n일반적으로 대용량 데이터의 처리 속도를 높이기 위해 병렬 처리를 사용한다는 특징이 있다.\n이에 대해 가장 유명한 패턴은 MapReduce 패턴이며 이미 많이 사용하고 있다.</p>\n<br>\n<h2 id=\"work-queue-systems\" style=\"position:relative;\"><a href=\"#work-queue-systems\" aria-label=\"work queue systems permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Work Queue Systems</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 32.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"work queue\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/5UjzV59mErstGoxMdDY6WO/5d88056bed8ecd4f17c625e4ccaa331f/work_queue.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/5UjzV59mErstGoxMdDY6WO/5d88056bed8ecd4f17c625e4ccaa331f/work_queue.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/5UjzV59mErstGoxMdDY6WO/5d88056bed8ecd4f17c625e4ccaa331f/work_queue.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/5UjzV59mErstGoxMdDY6WO/5d88056bed8ecd4f17c625e4ccaa331f/work_queue.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>배치 프로세싱의 가장 간단한 형태가 바로 Work Queue System 이다.\nQueue 형태의 작업 대기열이 있고 이를 관리해주는 컨테이너가 Worker에 작업을 분배해주는 형태이다.\n일반적으로 작업 대기열에서 각 작업은 일정 시간 내에 수행되어야 하며 처리량에 따라 Worker는 Scale-out 할 수 있어야 한다.\n작업이 지속적으로 지연된다면 큐에 작업이 계속 쌓이게 되고 이는 장애로 이어질 수 있다.</p>\n<br>\n<h2 id=\"source-worker-container-interface\" style=\"position:relative;\"><a href=\"#source-worker-container-interface\" aria-label=\"source worker container interface permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source, Worker Container Interface</h2>\n<ul>\n<li>Source 컨테이너와 Worker 컨테이너에 대한 인터페이스가 필요</li>\n<li>작업 대기열 스트림을 제공하는 컨테이너와 실제로 작업을 처리하는 컨테이너를 분리</li>\n<li>Source 컨테이너가 Ambassador 역할을 수행 (Storage, Network, Kafka/Redis Queue에 대한 통신을 맡음)</li>\n<li>현재 대기열에 쌓인 작업 리스트, 작업에 대한 구체적인 정보를 알려주는 Work Queue API 구현 필요</li>\n<li>작업에 대한 설정 정보는 Kubernetes의 ConfigMap과 ConfigMapVolume을 활용해서 구현</li>\n<li>Worker 컨테이너는 Rolling Update, Dynamic Scaling 기능이 필요</li>\n<li>Work Queue, Worker Process에 대한 모니터링이 필요</li>\n</ul>\n<br>\n<h2 id=\"event-driven-batch-processing\" style=\"position:relative;\"><a href=\"#event-driven-batch-processing\" aria-label=\"event driven batch processing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Event-Driven Batch Processing</h2>\n<p>앞서 설명한 작업 대기열 처리는 하나의 입력을 하나의 출력으로 변환할 때 많이 사용한다.\n하지만 단일 작업 이상을 처리해야 한다거나 단일 입력에서 여러 출력을 생성해야 하는 경우도 있다.\n이러한 경우 여러 작업 대기열을 연결하는 이벤트 스트림 방식을 통해 작업을 수행한다.\n이전 단계의 작업이 완료되면 이벤트가 발생하고 이벤트를 통해 다음 단계의 대기열로 이동하는 형태이다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 29.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAMCAMAAAAnHQ9/AAAA51BMVEX////8/Pz+/v739/fG1d/V3+X7+/v29/fn6+76+vr09PTG0NjO1dnu7u729vbq7O20xtL19fXEz9fP1trt7e3n6eqiuMfa2trm5ubx8fG3ydTJ1Nvj5eayyNfb5ey0y9q3z9/n6uzV4uq5ytXV4Ofe5uu+0N2+0d3o6+zH1uCyxdLG09z29fXH0tmluMTp6enY3uKmuMSnu8nT19rr6+vq6ur9/f3c3NzfwcLqxMXU3OHAztfl5eXs7Ozj4+Py8vK7ztvX2tzk5OT02tvv4ODS2d6+ytL5+fno6er4+PjU2+DAy9Pz8/MTtrPbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUCgUXJ+suYwAAALlJREFUGNNtkQcPgjAQhY+quKt1Ae69FSdO3Fv//++RhFqE8tqkl8t395JXAIETuEpA5uvx+mhHNC6VPxCklQC/+VA4EsUMpM1YnLBpBiaSKdEJpjOS7ASVbO7Pmpb5Ar+xWCpXOLBaq3Ngo9lqc2Cn23OCqA+DoQ3Eqjwa48l0NrdATVosV7DebGXdApWdutfI4XjSNWsjQucLXG+E3G3WGPDjyazNwDWCXm9mTWP+GIcFjkROrj/4Be95D66Gir6mAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"sharder\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/5eVXMAvajMHgvNOM4GtgBi/b080f0f83fb26c7fc1d2825318c44568/sharder.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/5eVXMAvajMHgvNOM4GtgBi/b080f0f83fb26c7fc1d2825318c44568/sharder.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/5eVXMAvajMHgvNOM4GtgBi/b080f0f83fb26c7fc1d2825318c44568/sharder.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/5eVXMAvajMHgvNOM4GtgBi/b080f0f83fb26c7fc1d2825318c44568/sharder.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>스트림 처리에 대한 여러 패턴이 존재하지만 위 그림은 그 중 하나인 Sharder에 대한 내용이다.\nSharder는 작업 큐 2개를 두고 만일 두 개의 큐가 모두 healthy 하다면, id 기준으로 작업을 분배한다.\n만일 어느 하나가 unhealthy 하다면, 새로운 큐를 생성해서 다른 한쪽으로 작업을 분배한다.\n이를 통해 단일 큐를 사용하는 것보다 안정적이고 작업을 분산처리할 수 있다.</p>\n<p>이외에도 Publisher/Subscriber, Merger, Splitter 등의 패턴이 있다.\nSpark의 DAG와 같은 그림을 떠올린다면 어떤 내용인지 바로 이해할 수 있을 것이다.\n처리 시간이 비교적 짧은 이벤트 기반의 배치 프로세싱은 앞서 소개했던 FaaS 패턴으로 구현할 수도 있다.\nAWS의 Lambda, Stream, Kinesis Firehose를 떠올리면 된다.</p>\n<br>\n<h2 id=\"coordinated-batch-processing\" style=\"position:relative;\"><a href=\"#coordinated-batch-processing\" aria-label=\"coordinated batch processing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Coordinated Batch Processing</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 37.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAPCAMAAAChiX3RAAABd1BMVEX////7+/v4+Pj6+vr39/f39/b8/Pz4+fnu7/C+ztquwMzZ4uidtsf29vbx8vKkwNPV2t7t8fOyxtTU4OfK1t/m7PC+0Nz5+vr19vbD1+Tj5+rU1NTr7vGnvcve3t7P2N3EzdPk6eu1wsr29/e5x9Di5efp6env8vS80N37+/zK1+G8ytTh5+yuw9H09PW1y9vc4OPc5eu5ytXn6+7x8/S50+Xj5ui90t/O2eDS3+i8zdrH1d6yydnR2N3v7+/s7Ozr6+vz9fa90Ny1yNTm6erD0ty4y9jT2uDX4ObBztbb5ezI0tnj6u7Q2uLf5ejM197e5uv+/v7u7u6pw9Okvs+9zdepxNaqxdixxNG1ytiqw9TDztbm5ubY2NjW3eHX3+XV2dzf5+3b3+LE0ty7zdnT2+D19fXn5+e2zNupx9y0xM65yNPq6urZ4uedt8nb3uDg5enk5uf9/f3n7O+9zNbG2eauz+bQ2uHk6ey2xM3z8/Pe5eqmvcxTDsRsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUCgUWUOwe9QAAAQVJREFUGBkFwSFuFAEAQNH3Z2cG2NkGgYYbUNWggAMQRI+B4SB4guwJSOrRReBIFUHhQEBANem23eG9AAAgyDp0ZzwcYGq+AeauAYbDigddLVX9g8abFdh2vQIOYNvVtqrl1x0GgGV5PAOA3c5u93tZlmUDI8BSewCwZKmlvoIRYFsA4CTPOpx0OwEjwLZe1sUtwFFVdTMDtcKrqso5ssLw/NGfi9P1HLQJHE/TdPlk+vgNAtafxw+fzp9PL6EROBzVi84AgP22er0CtYI3tQ59+rFHVuBtH24BDYCzeb5/7/33PQCY5xXACNjP9Q4AYAqAQVU1fflbVTUAbDYBCAAAZgAA/Adg0D1COxhvJgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"coordinate\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/4oBRvo1UJSlho5IccmzkBv/eb6e03b6b41c19c70abe2e98dc171718/coordinate.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/4oBRvo1UJSlho5IccmzkBv/eb6e03b6b41c19c70abe2e98dc171718/coordinate.png?w=175 175w,\nhttps://images.ctfassets.net/tushy4jlcik7/4oBRvo1UJSlho5IccmzkBv/eb6e03b6b41c19c70abe2e98dc171718/coordinate.png?w=350 350w,\nhttps://images.ctfassets.net/tushy4jlcik7/4oBRvo1UJSlho5IccmzkBv/eb6e03b6b41c19c70abe2e98dc171718/coordinate.png?w=700 700w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>처음에는 단일 대기열로 처리했지만 더 복잡한 배치 작업을 처리하기 위해 대기열을 분할하고 연결했다.\n하지만 최종 단계에서는 결국 원하는 결과를 생성하기 위해 여러 출력을 하나로 합쳐야 한다.\n합치는 작업은 여러 개의 작업 큐가 모두 종료되고 난 이후에 수행되어야 한다.\n이와 관련된 패턴으로 Join과 Reduce가 있다.\nJoin과 달리 Reducer의 경우 parallel 하게 시작할 수 있다는 차이가 있다.\ncount, sum, histogram을 추출하는 작업이 이에 해당한다.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p>책을 마무리할 무렵 Kubernetes Korea Group 세미나에서 책 저자의 발표를 들을 수 있었다.\n다른 컨퍼런스에서 진행했던 발표들과 내용이 유사했고 Azure Kuberentes Service에 대한 홍보가 짙었지만\n클라우드 네이티브와 최근 개발 환경의 변화에 대한 생각을 들을 수 있는 시간이었다.</p>\n<p>그동안 개발할 때 정형화 된 패턴을 공부하지 않았음에도 비슷한 형태로 설계된 경우를 많이 볼 수 있었다.\n하지만 패턴을 한번 정리하고 나면 더 명확하게 이해되고 현재 상황에 맞는 패턴을 적용할 수 있게 되는 것 같다.\n마틴 파울러의 리팩토링 책도 그렇고 이번 책 또한 그런 부분을 느낄 수 있었다.</p>\n<ul>\n<li><a href=\"https://static.googleusercontent.com/media/research.google.com/ko//pubs/archive/45406.pdf\">GooglePaper - Design patterns for container-based distributed systems</a></li>\n<li>Designing Distributed Systems: Brendan Burns</li>\n</ul>\n<br>","excerpt":"구글 클라우드 팀이 Kubernetes와 같은 Container Orchestration…"}}}},{"node":{"title":"분산 컨테이너 환경에서의 디자인 패턴 (2)","id":"e70f1f8d-c9d5-550e-bc7d-0b3004a22a98","slug":"container-patterns2","publishDate":"March 23, 2019","heroImage":{"title":"cover-develop","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=450&h=300&q=50&fm=webp 450w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=900&h=600&q=50&fm=webp 900w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&h=1200&q=50&fm=webp 1800w","sizes":"(min-width: 1800px) 1800px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&h=1200&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=450&h=300&fl=progressive&q=50&fm=jpg 450w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=900&h=600&fl=progressive&q=50&fm=jpg 900w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&h=1200&fl=progressive&q=50&fm=jpg 1800w","sizes":"(min-width: 1800px) 1800px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4gJASUNDX1BST0ZJTEUAAQEAAAIwQURCRQIQAABtbnRyUkdCIFhZWiAHzwAGAAMAAAAAAABhY3NwQVBQTAAAAABub25lAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLUFEQkUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApjcHJ0AAAA/AAAADJkZXNjAAABMAAAAGt3dHB0AAABnAAAABRia3B0AAABsAAAABRyVFJDAAABxAAAAA5nVFJDAAAB1AAAAA5iVFJDAAAB5AAAAA5yWFlaAAAB9AAAABRnWFlaAAACCAAAABRiWFlaAAACHAAAABR0ZXh0AAAAAENvcHlyaWdodCAxOTk5IEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkAAAAZGVzYwAAAAAAAAARQWRvYmUgUkdCICgxOTk4KQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAGN1cnYAAAAAAAAAAQIzAABjdXJ2AAAAAAAAAAECMwAAY3VydgAAAAAAAAABAjMAAFhZWiAAAAAAAACcGAAAT6UAAAT8WFlaIAAAAAAAADSNAACgLAAAD5VYWVogAAAAAAAAJjEAABAvAAC+nP/bAEMAEAsMDgwKEA4NDhIREBMYKBoYFhYYMSMlHSg6Mz08OTM4N0BIXE5ARFdFNzhQbVFXX2JnaGc+TXF5cGR4XGVnY//bAEMBERISGBUYLxoaL2NCOEJjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY//AABEIAA0AFAMBIgACEQEDEQH/xAAXAAEBAQEAAAAAAAAAAAAAAAAEAAEF/8QAIhAAAgIDAAAHAQAAAAAAAAAAAQIDEQAEEhMUISIxQaGx/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP/xAAXEQEBAQEAAAAAAAAAAAAAAAAAEQEh/9oADAMBAAIRAxEAPwDgvHMddmjWmr2mhX7hNfzgkucjwwLNcn+Y2LaPKB0VlArn4vNm2YxGyrrqCfu8nkhdFkChz65YR5umvkDLCT//2Q=="}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":5,"html":"<p>구글 클라우드 팀이 Kubernetes와 같은 Container Orchestration 기술을 개발하면서 겪은\n분산 컨테이너 환경에서의 디자인 패턴에 대해 정리한 내용입니다.\n지난 글에 이어서 멀티 노드에 관련된 디자인 패턴에 대한 내용입니다.</p>\n<ul>\n<li><a href=\"http://swalloow.github.io/container-patterns\">분산 컨테이너 환경에서의 디자인 패턴 1. Single-Node Patterns</a></li>\n<li><a href=\"http://swalloow.github.io/container-patterns2\">분산 컨테이너 환경에서의 디자인 패턴 2. Multi-Node Serving Patterns</a></li>\n<li><a href=\"http://swalloow.github.io/container-patterns3\">분산 컨테이너 환경에서의 디자인 패턴 3. Batch Computational Patterns</a></li>\n</ul>\n<br>\n<h2 id=\"multi-node-serving-pattern\" style=\"position:relative;\"><a href=\"#multi-node-serving-pattern\" aria-label=\"multi node serving pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multi-Node Serving Pattern</h2>\n<p>지난 번에 소개했던 싱글 노드 패턴들은 컨테이너 간에 커플링이 강하다는 특징이 있다.\n반면 이번에 소개할 멀티 노드 패턴들은 컨테이너 간에 커플링이 약하다.\n서로 다른 노드 간에 네트워크 호출을 통해 통신이 이루어지며\n<strong>Parallel, Coordinate via loose synchronization</strong>에 대한 이슈가 존재한다.\n특히 어플리케이션이 MSA 아키텍쳐로 구성된 경우, 컨테이너 간의 커플링이 낮다보니 스케일링에 이점이 있다.\n하지만 여러 노드에서 복잡한 구조로 동작하다보니 디버깅이 어려울 수 있다.</p>\n<br>\n<h2 id=\"replicated-load-balanced-services\" style=\"position:relative;\"><a href=\"#replicated-load-balanced-services\" aria-label=\"replicated load balanced services permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Replicated Load-Balanced Services</h2>\n<p>LoadBalancer가 트래픽을 관리하는 패턴이다. 가장 간단하면서 잘 알려져 있다.\nstateless한 서비스의 경우, LoadBalancer + Replica 형태로 쉽게 구성할 수 있다.\n처리해야 하는 요청에 따라 Scale-Up, Down을 쉽게 구성할 수 있어야 한다.</p>\n<ul>\n<li>LoadBalancing 패턴은 서비스의 network layer에 해당 (TCP/IP)</li>\n<li>Caching Layer는 web 서비스에서 유저의 요청을 메모리에 캐싱하는 프록시</li>\n<li>Caches Server에서 유저의 요청을 캐싱하고 있기 때문에 2번 요청을 보내더라도 실제 서버에는 1번만 요청</li>\n</ul>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 23.3%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"use sidecar\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/9lEyDDgeyOdXrIoBRQMzS/3bd336d0980e9b746ab53b7bfb980b8e/use_sidecar.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/9lEyDDgeyOdXrIoBRQMzS/3bd336d0980e9b746ab53b7bfb980b8e/use_sidecar.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/9lEyDDgeyOdXrIoBRQMzS/3bd336d0980e9b746ab53b7bfb980b8e/use_sidecar.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/9lEyDDgeyOdXrIoBRQMzS/3bd336d0980e9b746ab53b7bfb980b8e/use_sidecar.png?w=1000 1000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>가장 간단하게 웹 서버와 캐시 서버를 구성하는 방법은 위 그림과 같이 앞서 배웠던 Sidecar를 활용하는 방법.\n이 방법은 간단하게 구현할 수 있지만 내 웹 서버와 동일한 레벨에 있기 때문에 각자 스케일링하기 어렵다.\nKubernetes의 Deployments와 Service로 동일한 환경을 쉽게 구성해볼 수 있다.</p>\n<br>\n<h2 id=\"shared-services\" style=\"position:relative;\"><a href=\"#shared-services\" aria-label=\"shared services permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shared Services</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 26%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"shared\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/RzK8zaS4S49Y7Qa9R6kNy/5a64deb93e812c8284c3187023d7c656/shared.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/RzK8zaS4S49Y7Qa9R6kNy/5a64deb93e812c8284c3187023d7c656/shared.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/RzK8zaS4S49Y7Qa9R6kNy/5a64deb93e812c8284c3187023d7c656/shared.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/RzK8zaS4S49Y7Qa9R6kNy/5a64deb93e812c8284c3187023d7c656/shared.png?w=1000 1000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>위의 Load-Balanced Services가 stateless 하다면 shared service는 stateful.\nReplicated Service에서는 각 Pod에서 모두 동일한 요청을 처리하고,\nShared Service에서는 root가 routing 해주면서 서로 다른 요청을 처리한다.</p>\n<ul>\n<li>앞의 글에서 ambassador 패턴을 활용해 shared cache를 만드는 예제의 응용편</li>\n<li>요구사항: Cache Proxy에서 적절한 Cache Shard로 라우팅해주어야 한다</li>\n<li>cache hit, miss에 대한 처리 결과를 노드 사이에서 통신</li>\n<li>sharding은 single node에 들어갈 수 없을 정도의 데이터 사이즈가 있는 경우에 장점</li>\n<li>네트워크 latency와 데이터 등을 파악해서 적절한 아키텍쳐를 구성하는 것이 중요</li>\n</ul>\n<br>\n<h2 id=\"scatter-getter\" style=\"position:relative;\"><a href=\"#scatter-getter\" aria-label=\"scatter getter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scatter, Getter</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 45.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAASCAMAAAAewWyUAAAJ72lDQ1BpY2MAAEiJlZZ3VBTJFsare3IizZDTkHPOIGHIUYJkURlmYMjCEEVMyOIKKIqIJEVQiQquShATIoqBRUAB84IsAsq6GAAVlNcjuu6+d857533nVN1f36pz63bXH/0BQHJmJiTEwgIAxMUnc32cbOmBQcF03DiAAR6QgAAgMVlJCQwvL3eA6Hv8p+aHAcSL97R4tf5z/b9KkB2exAIA8kKYzU5ixSF8DmFtVgI3GeHfEVZIS05AGMYjTOMiDSIsxWPOCuvyOGyF7b/u8fWxQzgQADyZyeRyACCykTw9lcVB6hCzEdaNZ0fFI8w7y4oVyUTWie8R1oyL24gwiY6watjf6nD+UTPsr5pMJucvXnmXryLaxqaEx0ZxIpP/zw/yvxQXm/L9DN5XJ8dsdPNBohAypIAtiAUpIByZowAHRALk8OTw9K8t2G1M2MTl9UNnILcUTneJZ2lr0vV19cwA4N35Ssn5+9/ukvEjt6cUANsLPPqRszsEwGnkzkjpP3JKJ5B25gDoOcdK4aau5NC8CQOIgB/QgDiQAQpAFWgBfWAMLIANcACuwBP4giCwHrCQfuMAF6SBTLAD5IA8sA8cBGWgEhwDdeAUOAPawEVwFdwAd0A/GAKPwSiYAK/ALJgHixAE4SAKRIXEIVlICdKA9CFTyApygNwhHygICoU4UDyUAmVCO6E8qBAqg6qgeugX6Dx0FboFDUAPoTFoGnoLfYJRMBmmwdKwMqwDm8IM2A32hdfBHDgRzoCz4b1wCVwNn4Rb4avwHXgIHoVfwXMogCKhRFByKC2UKcoO5YkKRkWguKitqFxUMaoa1YTqQPWg7qFGUTOoj2gsmoqmo7XQFmhntB+ahU5Eb0Xno8vQdehWdDf6HnoMPYv+gqFgpDAaGHOMCyYQw8GkYXIwxZgaTAvmOmYIM4GZx2KxIlgVrAnWGRuEjcZuxuZjD2ObsZ3YAew4dg6Hw4njNHCWOE8cE5eMy8GV4k7iruAGcRO4D3gSXhavj3fEB+Pj8Vn4YnwD/jJ+ED+JXyQIEJQI5gRPApuwiVBAOE7oINwlTBAWiYJEFaIl0ZcYTdxBLCE2Ea8TnxDfkUgkeZIZyZsURdpOKiGdJt0kjZE+koXI6mQ7cgg5hbyXXEvuJD8kv6NQKMoUG0owJZmyl1JPuUZ5RvnAR+XT5nPhY/Nt4yvna+Ub5HvNT+BX4mfwr+fP4C/mP8t/l39GgCCgLGAnwBTYKlAucF5gRGBOkCqoJ+gpGCeYL9ggeEtwSggnpCzkIMQWyhY6JnRNaJyKoipQ7ags6k7qcep16gQNS1OhudCiaXm0U7Q+2qywkLChsL9wunC58CXhURGUiLKIi0isSIHIGZFhkU+i0qIM0XDR3aJNooOiC2KSYjZi4WK5Ys1iQ2KfxOniDuIx4vvF28SfSqAl1CW8JdIkjkhcl5iRpElaSLIkcyXPSD6SgqXUpXykNksdk+qVmpOWkXaSTpAulb4mPSMjImMjEy1TJHNZZlqWKmslGyVbJHtF9iVdmM6gx9JL6N30WTkpOWe5FLkquT65RXkVeT/5LPlm+acKRAVThQiFIoUuhVlFWUUPxUzFRsVHSgQlU6VIpUNKPUoLyirKAcq7lNuUp1TEVFxUMlQaVZ6oUlStVRNVq1Xvq2HVTNVi1A6r9avD6kbqkerl6nc1YA1jjSiNwxoDmhhNM814zWrNES2yFkMrVatRa0xbRNtdO0u7Tfu1jqJOsM5+nR6dL7pGurG6x3Uf6wnpuepl6XXovdVX12fpl+vfN6AYOBpsM2g3eGOoYRhueMTwgRHVyMNol1GX0WdjE2OucZPxtImiSahJhcmIKc3UyzTf9KYZxszWbJvZRbOP5sbmyeZnzP+00LKIsWiwmFqlsip81fFV45bylkzLKstRK7pVqNVRq1FrOWumdbX1cxsFG7ZNjc0kQ40RzTjJeG2ra8u1bbFdsDO322LXaY+yd7LPte9zEHLwcyhzeOYo78hxbHScdTJy2uzU6YxxdnPe7zziIu3Ccql3mXU1cd3i2u1GdlvjVub23F3dneve4QF7uHoc8HiyWml1/Oo2T+Dp4nnA86mXilei1wVvrLeXd7n3Cx89n0yfnjXUNRvWNKyZ97X1LfB97Kfql+LX5c/vH+Jf778QYB9QGDAaqBO4JfBOkERQVFB7MC7YP7gmeG6tw9qDaydCjEJyQobXqaxLX3drvcT62PWXNvBvYG44G4oJDQhtCF1iejKrmXNhLmEVYbMsO9Yh1iu2DbuIPR1uGV4YPhlhGVEYMcWx5BzgTEdaRxZHzkTZRZVFvYl2jq6MXojxjKmNWY4NiG2Ow8eFxp2PF4qPie/eKLMxfeNAgkZCTsJoonniwcRZrhu3JglKWpfUnkxDfq69KaopP6WMpVqllqd+SPNPO5sumB6f3rtJfdPuTZMZjhknNqM3szZ3Zcpl7sgc28LYUrUV2hq2tWubwrbsbRPbnbbX7SDuiNnxa5ZuVmHW+50BOzuypbO3Z4//5PRTYw5fDjdnZJfFrsqf0T9H/dy322B36e4vuezc23m6ecV5S/ms/Nt79PaU7FneG7G3r8C44Mg+7L74fcP7rffXFQoWZhSOH/A40FpEL8oten9ww8FbxYbFlYeIh1IOjZa4l7SXKpbuK10qiywbKrctb66QqthdsXCYfXjwiM2RpkrpyrzKT0ejjj6ocqpqrVauLj6GPZZ67MVx/+M9J0xP1NdI1OTVfK6Nrx2t86nrrjepr2+QaihohBtTGqdPhpzsP2V/qr1Jq6mqWaQ57zQ4nXL65S+hvwyfcTvTddb0bNM5pXMVLdSW3FaodVPrbFtk22h7UPvAedfzXR0WHS0XtC/UXpS7WH5J+FLBZeLl7MvLVzKuzHUmdM5c5Vwd79rQ9fha4LX73d7dfdfdrt+84XjjWg+j58pNy5sXb5nfOn/b9HbbHeM7rb1GvS2/Gv3a0mfc13rX5G57v1l/x8CqgcuD1oNX79nfu3Hf5f6dodVDA8N+ww9GQkZGH7AfTD2MffjmUeqjxcfbn2Ce5D4VeFr8TOpZ9W9qvzWPGo9eGrMf632+5vnjcdb4q9+Tfl+ayH5BeVE8KTtZP6U/dXHacbr/5dqXE68SXi3O5Pwh+EfFa9XX5/60+bN3NnB24g33zfLb/Hfi72rfG77vmvOaezYfN7+4kPtB/EPdR9OPPZ8CPk0upi3hlko+q33u+OL25cly3PJyApPL/GoFUMiAIyIAeFsLACUIAGo/YpPWrniyb34G+puz+c7gteIPHny54tu+yhiAJiTw7I9dJ+JHkKG8HaltAwDPTvraANjA4K/xTUkRBvrfzuCZE3h5eXmJFwFY/qpv23jPkytekCcs4pCP2vBoSCzkw797sn8Btg24qyeLwgMAAAFTUExURff49/n5+ff39/X19fj4+P///8nEvb22q7Cpoo2Bc/39/ZuRiIp+cfz8/JWMhJSLgvv7+/Ly8ubm5tLS0tfX19XV1crKytzc3N3d3eTk5MjIyM/Pz8bGxsvLy8nJyfPz8+Tm6LvFzqmzvLjByrzFzf7+/tPX3LvT6ZapuqW6zaa7zuXl5ZKltqC0x/Hx8bCxsrvBxp2jqbe9w7W7wLW1tdvb2+Li4uDg4N7e3uzs7OHh4czMzMPDw+7u7tnZ2d/f3/r6+snQ1sPO15qkrrvFz8vQ1OPl56Grtb/J07rEzMLK0p+qtLW/ydLW2bfG1JWoupeqvKG2yau1vtPY3KS5zJWpupervZ+zxa2/z5Cis5ervJ2yxLK6wK27yI+ispGktaG1yJmtv5CjtJuvwZquv/Dw8KGywYudrpmtvszQ07zCx8rMzunq673Cx7i9wcTJzNHT1ZvNeJIAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAAHdElNRQfoARQKBRZQ7B71AAAA30lEQVQoz42QsWoCQRRF75mZXQ2jblqxUAgBJU2adDYp8h/5tHxGSGUprH8giJVgkSZBEXWyKSJEdkfcW7yBO2fevPsQKgt+Ip6rBxZGVRmTRMwIaK2tC+6ugj60moVzRRUshSluAQjur67+L6qpewCHlTRYnndwlT9SgIak5dUwzsXMsjECSPH3iNxeDNN8YKbH+UZPHJPF3fTCjIPPYS7J7KU8jOnb+HrGABM9HxP4MHqBrX+PdWwDnI7sWx3IiIbJgK/TA71OOrD2UbCF5KUuQa79ppuDuun5jEF1xC81aS1DIY8zPAAAACh0RVh0aWNjOmNvcHlyaWdodABDb3B5cmlnaHQgQXBwbGUgSW5jLiwgMjAxOVhLNdcAAAAZdEVYdGljYzpkZXNjcmlwdGlvbgBCbHVlbGlnaHTP0WV8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"sgatter\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/3g4tbIQLjLFl4tSClkLat3/3573fa07b0b34f86c5e8b6abc978c2dd/sgatter.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/3g4tbIQLjLFl4tSClkLat3/3573fa07b0b34f86c5e8b6abc978c2dd/sgatter.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/3g4tbIQLjLFl4tSClkLat3/3573fa07b0b34f86c5e8b6abc978c2dd/sgatter.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/3g4tbIQLjLFl4tSClkLat3/3573fa07b0b34f86c5e8b6abc978c2dd/sgatter.png?w=1000 1000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>scatter, getter 패턴은 스케일링, 분산처리에 유용한 패턴 중 하나이다.\n위에 언급했던 패턴들처럼 트리 구조로 되어 있고,\nroot 서버가 요청을 분산시키거나 여러 서버로부터 받아오는 구조.\n이 패턴은 분산처리에서 embarassingly parallel 문제를 해결하는 것과 동일하다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 22.799999999999997%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAJCAMAAAB30J7MAAABFFBMVEX6+vr8/Pzw7uzv7On5+fn7+/vb19H////VzsnMw7urnpLt7ez9/f3d2dbZ1dL+/v739/fDvrr19fXi4+TJ0tfM1Nnq6uru7u7b3+LN1dvN0dTr6+v29vbm6+6VwNeSvNHI2OWWsse7zNn09PTt7e3k5OXa4OTY3uHm5ubn5+fv7+/c3t/KztHZ29zk5OTx8fHh6e3M1tvl5+jh5efP2d7l6+7z9fbY3+TO09fY3N7Ey8/Y3N/N0tbDys/W2Nmix9uUv9W2wcfy8vLl5eW/1N6Ot82uzNvc5eudus+kvc/H2OWYtcm8zdqux9qdutDP2N/c4ePX3eDp6uvp6+zf4+Xv8PHW2t7X297l6Onh4+Xc3+Lr7O0CWROqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUCgUWUOwe9QAAALxJREFUGNNjYGCEAiZmGIuBhRUK2GAMVhYGVnYo4OCEsVjhYlzccDGYQkYeXj40hfwsAoJCGAqFhEVExRhQTRSXkJSSFhMTk0FWyC4rJy+EbrWCopKQMj+KiawqqmrqGpr8KAq1tHV09fRRrDYwNGJkZ2cwNjGFKzQzt5C2tLLmt7G1Q1Jo7+DoxM7u7OLqBlfo7uHJ7+Xtw+7r5w9RyAAKpYDAICAtEBwYAuKBwzE0LJw1IiySNSosGhyOAPQfGAZpBRG2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"handson-scatter-set\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/5POz0nyZ2FA1AlyY9ksEzE/2e50c97a7364fef159861363a4e5cf62/handson-scatter-set.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/5POz0nyZ2FA1AlyY9ksEzE/2e50c97a7364fef159861363a4e5cf62/handson-scatter-set.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/5POz0nyZ2FA1AlyY9ksEzE/2e50c97a7364fef159861363a4e5cf62/handson-scatter-set.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/5POz0nyZ2FA1AlyY9ksEzE/2e50c97a7364fef159861363a4e5cf62/handson-scatter-set.png?w=1000 1000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p><strong>Hands On: Distributed Document Search</strong></p>\n<p>모든 문서 파일로부터 cat, dog 단어가 모두 포함되어 있는지 검색하는 문제를 풀어야 한다고 가정해보자.\n왼쪽 그림과 같이 각 노드로부터 서로 다른 단어를 검색하고 결과를 내는 방법이 있다.\n하지만 document 하나의 사이즈가 아주 크다면? 하나의 노드에서 처리는 불가능하다.\n이 경우, 단어 기준이 아니라 document 기준으로 분산처리해야 한다. (MapReduce의 WordCount 예제와 동일)</p>\n<p>이 때 적절한 노드 개수를 선정하는 것이 중요하다. (컴퓨팅과 비용 사이의 문제)\n노드가 많아질수록 요청을 분산하고 수집하는데 오버헤드가 발생할 수 있다.\n위 경우 처리가 가장 오래걸리는 노드의 시간이 전체 처리 시간을 결정할 것이다. (straggler problem)\n이를 해결하기 위해 Erasure Coding을 통해 연산을 추정하는 방법도 있다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 48.9%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"sharded replicated\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/36ZiXDVA2EjnHARxYwYE87/6ef89ffc90beb1870b88601173fe9bd1/sharded_replicated.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/36ZiXDVA2EjnHARxYwYE87/6ef89ffc90beb1870b88601173fe9bd1/sharded_replicated.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/36ZiXDVA2EjnHARxYwYE87/6ef89ffc90beb1870b88601173fe9bd1/sharded_replicated.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/36ZiXDVA2EjnHARxYwYE87/6ef89ffc90beb1870b88601173fe9bd1/sharded_replicated.png?w=1000 1000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p><strong>Scaling Scatter/Gather for Reliability and Scale</strong></p>\n<p>항상 실패에 대한 대비가 되어 있어야 한다. (Fault Tolerance)\n앞서 설명한대로 단순히 샤드의 수를 늘리는 것은 적절하지 못한 방법이다.\n각 Shard가 Replica로 구성되어 있기 때문에 동시에 업그레이드도 가능할 수 있어야 한다.</p>\n<br>\n<h2 id=\"functions-and-event-driven-processing\" style=\"position:relative;\"><a href=\"#functions-and-event-driven-processing\" aria-label=\"functions and event driven processing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Functions and Event-Driven Processing</h2>\n<p>방금 전까지는 long-running computation에 대한 패턴에 대해 소개했다면,\n이번에는 FaaS 기반의 일시적인 서비스에 대한 패턴에 대한 내용이다. (serverless computing)\n서버리스는 좋은 패턴이자 도구이지만 모든 어플리케이션에 무조건 적용하기 보다는\n장점과 단점을 잘 이해하고 적절한 경우에 사용하는 것이 좋다.</p>\n<ul>\n<li>함수 단위로 모듈화하고 바로 클라우드를 통해 서비스할 수 있다는 장점</li>\n<li>각 서비스가 완전히 독립적이어야 하고 상태를 스토리지에 저장해야 하기 때문에 운영이 복잡해질 수 있음</li>\n<li>함수 사이에 루프가 생기는 경우, 심각한 문제가 발생 (모니터링 필수적임)</li>\n<li>Event-Driven의 우선순위가 낮은 일시적인 작업을 처리할 때 유용함</li>\n<li>인메모리 수준의 빠른 처리가 필요한 경우, <strong>함수가 로드되는 오버헤드</strong>를 고려하면 부적합 할 수 있음</li>\n<li>가끔씩 수행되어야 하는 경우, 비용 측면에서 일반 인스턴스보다 저렴</li>\n<li>FaaS는 아주 간단한 Code Snippet으로 쉽게 구현할 수 있음</li>\n</ul>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 40.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"decorator\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/xjfMVqT8eVS6dbosdVija/7af4189fa6a0e3b3d668b3d71a09ceb7/decorator.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/xjfMVqT8eVS6dbosdVija/7af4189fa6a0e3b3d668b3d71a09ceb7/decorator.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/xjfMVqT8eVS6dbosdVija/7af4189fa6a0e3b3d668b3d71a09ceb7/decorator.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/xjfMVqT8eVS6dbosdVija/7af4189fa6a0e3b3d668b3d71a09ceb7/decorator.png?w=1000 1000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p><strong>FaaS Decorator Pattern: Request or Response Transformation</strong></p>\n<p>Input이 들어왔을 때, transform 해서 output을 내는 패턴이다.\n이번에는 Kubernetes 기반의 serverless 플랫폼인 kubeless로 간단한 예제를 진행해보았다.\n설치와 실행은 아래와 같이 진행하면 된다.\n예제 코드와 이에 대한 자세한 설명은 <a href=\"https://github.com/Swalloow/KubeStudy/tree/master/faas\">https://github.com/Swalloow/KubeStudy/tree/master/faas</a> 에서 확인.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install kubeless, cli</span>\nkubectl create ns kubeless\nkubectl create <span class=\"token parameter variable\">-f</span> https://github.com/kubeless/kubeless/releases/download/v1.0.3/kubeless-v1.0.3.yaml\n\n<span class=\"token function\">curl</span> <span class=\"token parameter variable\">-OL</span> https://github.com/kubeless/kubeless/releases/download/v1.0.3/kubeless_darwin-amd64.zip\n<span class=\"token function\">unzip</span> kubeless_darwin-amd64.zip\n<span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> bundles/kubeless_darwin-amd64/kubeless /usr/local/bin/\n\n<span class=\"token comment\"># install kubeless UI</span>\nkubectl create <span class=\"token parameter variable\">-f</span> https://raw.githubusercontent.com/kubeless/kubeless-ui/master/k8s.yaml\nkubectl get svc ui <span class=\"token parameter variable\">-n</span> kubeless\nkubectl port-forward svc/ui <span class=\"token parameter variable\">-n</span> kubeless <span class=\"token number\">3000</span>:3000</code></pre></div>\n<p><strong>Hands On: Implementing Two-Factor Authentication</strong></p>\n<ul>\n<li>Random Code Generator를 비동기로 생성</li>\n<li>로그인 서비스에 코드를 등록</li>\n<li>사용자의 전화로 문자메세지를 전송</li>\n</ul>\n<p><strong>Hands On: Implementing a Pipeline for New-User Signup</strong></p>\n<ul>\n<li>이벤트 기반의 파이프라인 예제</li>\n<li>MSA는 long-running 인 반면, Event Pipeline은 async, short-running</li>\n<li>빌드, 배포 CI 도구가 좋은 예제 (각 단계의 이벤트가 발생하면 함수 실행)</li>\n<li>유저가 신규 가입하면, welcome 이메일 전송하는 예제</li>\n<li>A list of required actions (e.g., sending a welcome mail)</li>\n<li>A list of optional actions (e.g., subscribing the user to a mailing list)</li>\n</ul>\n<br>\n<h2 id=\"9-ownership-election\" style=\"position:relative;\"><a href=\"#9-ownership-election\" aria-label=\"9 ownership election permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. Ownership Election</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 84.30000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"election\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/6hRbX4QfZKllzPAPqXJYOP/faadb941fd40864e53c31184a671d724/election.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/6hRbX4QfZKllzPAPqXJYOP/faadb941fd40864e53c31184a671d724/election.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/6hRbX4QfZKllzPAPqXJYOP/faadb941fd40864e53c31184a671d724/election.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/6hRbX4QfZKllzPAPqXJYOP/faadb941fd40864e53c31184a671d724/election.png?w=1000 1000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>분산 시스템에서는 Ownership을 결정하는 것이 중요하다. 리더가 여러 책임을 가지고 있다.\n마스터 노드에 장애가 발생하더라도 Election에 의해 새로운 마스터 노드를 선정할 수 있어야 한다.</p>\n<p><strong>Determining If You Even Need Master Election</strong></p>\n<ul>\n<li>노드가 안정적으로 영원히 돌아갈리가 없기 때문에 필요</li>\n<li>singleton container로 구현하는 방법도 있음</li>\n<li>컨테이너에 장애가 발생해도 재시작 가능</li>\n<li>health check를 구현했다면, hang에 걸려도 재시작</li>\n<li>노드에 장애가 발생하면 다른 노드로 이전</li>\n<li>하지만 이 방법은 uptime이 발생할 수 밖에 없음 (2초~5분 간 서비스 정지)</li>\n<li>노력하면 uptime을 일부 줄일 수 있겠지만 그 만큼 복잡성이 증가</li>\n</ul>\n<p><strong>The Basics of Master Election</strong></p>\n<p>가장 잘 알려진 Leader Election 알고리즘으로 Paxos와 Raft가 있다.\n자세한 내용은 이전에 작성한 <a href=\"http://swalloow.github.io/raft-consensus\">Raft Consensus</a> 글을 참고.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://static.googleusercontent.com/media/research.google.com/ko//pubs/archive/45406.pdf\">GooglePaper - Design patterns for container-based distributed systems</a></li>\n<li>Designing Distributed Systems: Brendan Burns</li>\n</ul>\n<br>","excerpt":"구글 클라우드 팀이 Kubernetes와 같은 Container Orchestration…"}}}},{"node":{"title":"Amazon EKS에 Kubeflow 구축하기","id":"a77d5de0-57d3-56d5-bedc-d02ee85072f7","slug":"eks-kubeflow","publishDate":"March 10, 2019","heroImage":{"title":"cover-dataengineering","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&q=50&fm=webp 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&q=50&fm=webp 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(min-width: 1600px) 1600px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&fl=progressive&q=50&fm=jpg 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&fl=progressive&q=50&fm=jpg 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg 1600w","sizes":"(min-width: 1600px) 1600px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgb/xAAcEAACAgMBAQAAAAAAAAAAAAAAAQIREiExYeH/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDK1DF0vgtxW9EylQu8nTotmo+gHfAEP//Z"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":3,"html":"<p>AWS EKS는 Fully managed K8S 서비스 입니다. 이번 글에서는 EKS 환경에 Kubeflow를 구축하는 방법에 대해 정리해보겠습니다.</p>\n<ul>\n<li><a href=\"http://swalloow.github.io/why-kubeflow\">Why kubeflow in your Infrastructure</a></li>\n<li><a href=\"http://swalloow.github.io/eks-kubeflow\">Amazon EKS에 Kubeflow 구축하기</a></li>\n<li>Kubeflow의 ModelDB</li>\n<li>Kubeflow의 Hyper parameter Tuning (Katib)</li>\n</ul>\n<br>\n<h2 id=\"기본-환경-설치\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%ED%99%98%EA%B2%BD-%EC%84%A4%EC%B9%98\" aria-label=\"기본 환경 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 환경 설치</h2>\n<p>Kubeflow를 설치하기 이전에 AWS CLI, Docker가 설치되어 있어야 합니다.\nEKS에서는 최근에 GPU 인스턴스인 P2, P3에 대한 지원을 제공하고 있습니다.\n이를 사용하기 위해 AWS Marketplace에서 <a href=\"https://aws.amazon.com/marketplace/pp/B07GRHFXGM\">EKS-optimized AMI with GPU Support</a>를 구독해주어야 합니다.</p>\n<p>EKS는 Web UI 또는 eksctl이라는 cli 도구를 사용해서 클러스터를 구성할 수 있습니다.\neksctl은 kubectl이나 kops와 유사한 명령어를 제공합니다.\n자세한 내용은 <a href=\"https://aws.amazon.com/ko/blogs/opensource/eksctl-eks-cluster-one-command/\">https://aws.amazon.com/ko/blogs/opensource/eksctl-eks-cluster-one-command/</a> 에서 참고하시면 됩니다.</p>\n<br>\n<h2 id=\"eks-클러스터-생성\" style=\"position:relative;\"><a href=\"#eks-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%83%9D%EC%84%B1\" aria-label=\"eks 클러스터 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EKS 클러스터 생성</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install eksctl</span>\n$ brew tap weaveworks/tap\n$ brew <span class=\"token function\">install</span> weaveworks/tap/eksctl\n\n<span class=\"token comment\"># create cluster</span>\n$ eksctl create cluster eks-cpu <span class=\"token punctuation\">\\</span>\n--node-type<span class=\"token operator\">=</span>c4.xlarge <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--timeout</span><span class=\"token operator\">=</span>40m <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--nodes</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">--region</span><span class=\"token operator\">=</span>ap-northeast-2\n\n<span class=\"token comment\"># NVIDIA driver plugin</span>\nkubectl apply <span class=\"token parameter variable\">-f</span> https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v1.11/nvidia-device-plugin.yml\nkubectl get nodes <span class=\"token string\">\"-o=custom-columns=NAME:.metadata.name,MEMORY:.status.allocatable.memory,CPU:.status.allocatable.cpu,GPU:.status.allocatable.nvidia\\.com/gpu\"</span></code></pre></div>\n<ul>\n<li>먼저 Homebrew로 <code class=\"language-text\">eksctl</code>을 설치합니다. 이후 아래의 명령어를 통해 c4 인스턴스 기반의 EKS 클러스터를 생성하고 Memory, CPU, GPU 정보를 확인해줍니다.</li>\n<li>GPU 인스턴스로 클러스터를 생성하고 싶다면 생성하기 이전에 EC2 Limit 페이지에서 p2 또는 p3 인스턴스의 limit을 확인해야 합니다. 0으로 되어있다면 <code class=\"language-text\">Request limit Increase</code>가 필요합니다.</li>\n<li>GPU-enabled worker를 가지는 EKS 클러스터를 생성한다면 NVIDIA driver plugin을 활성화시키는 과정이 필요합니다.</li>\n<li>Create cluster에서 <code class=\"language-text\">AccessDenied</code> 오류가 발생하는 경우, 사용할 IAM 유저를 생성하고 EKS 관련 permission과 <code class=\"language-text\">AWSCloudFormationReadOnlyAccess</code>를 추가해주어야 합니다. EKS는 현재 기준 1.11 버전을 default로 사용하고 있습니다.</li>\n</ul>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 58.9%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAYCAMAAAC/Wk/yAAABjFBMVEXx8/Pw8vPx8vLx8vPy8/Pr7/Hg6e7u8PDX4+vf6O7v8PDl6Ojm6enw8fHz9PTl5ua7vb3Nzs/AwcHk5ubh4+T29/fq7e3v8fHt7+/w8vLt7/D4+fnu7/DZ2tzp6uvz8/P29vb09PTv7/D19fX6+vrq6uvR0tLd3t7X19fP0NDW1tb6+/v5+fn5+fr+/v75+vr8/Pz9/v77+/v9/f3y8vPl5ufr7O3w8fL////39/jh4uPt7u/19fby9fLa4tvp8ej4+/jx9/H1+fXg4ePm5+ji4+Xq6+z7+/z29vfg4uPd3+Df4eLa3d7y9PTz9fXf4OHe3+Di4+Pt7e7u7u/t7e3w8PD09PXp6+vj5ebh5OXj5ubo6+vn6uvn6ur7/Pz09fX4+Pjq7Ozh5eXi5ubi5eXi5ebr7u7w8/Pu8PHr7e3t8PDq7O3z8/Tn6Orq6uzo6er6+vvx8fHv7+/u7+/w8PHn5+jk5eXj5OTs7Ozu7u7x8fL19vb39/fo6Onh4eHNzc7Ozs/Ly8v8/f3o6eubnh3NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUDTMnjWGZPwAAAZxJREFUKM+VkvdTwjAUgGOpotUGVxVnQykuao3gqHtXFHFBUakD98KBE/f6x00Zp+eh4PdL3nv57iV5FwByKBNN0RkBuXnm/AKmsCij+PsWxbIwAcOyFLAUl5SWpRWZcoqrqLRWVdfU1tUzRkeWzgJA88iGBDsv/g0RHQ2NTc1NLSiTCJ1SqyTKBCfXJmEjaHdJbvkHEMCOzq5uQSH09FJ9/UYgDwwOKT8gIsbJGNtS1eGR0TSikhVEZMbGJ9QOqMjY5cJ40k2O9kxNe73WGZ8PmAAAvlnOZYjU3Nz8gsWx6PcHApomBGVFppaWV0KhwiJdX9X1NUIlR8R1zrOBwuIkjnfERkd6M7SylWB7e2drd3dvP/0dnbD74FDXD61H5iNzha4f+9r+85jI+EnkNDXXeFFG6pl6TtZknhTtmhaNaheXfj/DMHS8enV9cxuLaRd3wn2UYENxUbITbHAjGLQ/PDwmxCfLTSzA83ykHxHCj4ZogllhAnQ4K8g3e355fZNEMeN/hO5vvP+aQIAinq9pyX31+CtR1Q8hlaBPkOylZOzG0MEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"kubeflow-eks\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/5pImEHgxFKvmlQD8madTVs/299c082039afd357181c8abdcee801d3/eks.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/5pImEHgxFKvmlQD8madTVs/299c082039afd357181c8abdcee801d3/eks.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/5pImEHgxFKvmlQD8madTVs/299c082039afd357181c8abdcee801d3/eks.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/5pImEHgxFKvmlQD8madTVs/299c082039afd357181c8abdcee801d3/eks.png?w=1000 1000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>EKS 메뉴에 가보시면 EC2 인스턴스, 네트워크 설정이 완료된 것을 확인하실 수 있습니다.\nAWS CloudFormation에서 cluster와 node-group에 대한 stack이 생성됩니다.</p>\n<p>K8S 대시보드는 <a href=\"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/dashboard-tutorial.html\">AWS EKS 공식 문서</a>를 참고하여 띄울 수 있습니다.</p>\n<br>\n<h2 id=\"ksonnet을-이용한-kubeflow-설치\" style=\"position:relative;\"><a href=\"#ksonnet%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-kubeflow-%EC%84%A4%EC%B9%98\" aria-label=\"ksonnet을 이용한 kubeflow 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ksonnet을 이용한 KubeFlow 설치</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># install ksonnet</span>\n$ brew <span class=\"token function\">install</span> ksonnet/tap/ks\n$ ks version\nksonnet version: <span class=\"token number\">0.13</span>.1\njsonnet version: v0.11.2\nclient-go version: kubernetes-1.10.4\n\n<span class=\"token comment\"># install kubeflow</span>\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">KUBEFLOW_TAG</span><span class=\"token operator\">=</span>v0.4.1\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">KUBEFLOW_SRC</span><span class=\"token operator\">=</span>/tmp/kubeflow_src\n$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">KFAPP</span><span class=\"token operator\">=</span>eks-kubeflow\n\n$ <span class=\"token function\">mkdir</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>\n$ <span class=\"token function\">curl</span> https://raw.githubusercontent.com/kubeflow/kubeflow/<span class=\"token variable\">${KUBEFLOW_TAG}</span>/scripts/download.sh <span class=\"token operator\">|</span> <span class=\"token function\">bash</span>\n\n$ <span class=\"token function\">sh</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>/scripts/kfctl.sh init <span class=\"token variable\">${KFAPP}</span> <span class=\"token parameter variable\">--platform</span> none\n$ <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">${KFAPP}</span>\n$ <span class=\"token function\">sh</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>/scripts/kfctl.sh generate k8s\n$ <span class=\"token function\">sh</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>/scripts/kfctl.sh apply k8s</code></pre></div>\n<p>ksonnet으로 KubeFlow를 설치하기 이전에 먼저 Homebrew로 ksonnet을 설치합니다.</p>\n<br>\n<h2 id=\"kubeflow\" style=\"position:relative;\"><a href=\"#kubeflow\" aria-label=\"kubeflow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>KubeFlow</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 54.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"kubeflow-pod\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/5pBSaBwBsrDxrokgg8dG6W/953dfc56fe406e04893d3b8ad375fe55/kubeflow-pod.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/5pBSaBwBsrDxrokgg8dG6W/953dfc56fe406e04893d3b8ad375fe55/kubeflow-pod.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/5pBSaBwBsrDxrokgg8dG6W/953dfc56fe406e04893d3b8ad375fe55/kubeflow-pod.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/5pBSaBwBsrDxrokgg8dG6W/953dfc56fe406e04893d3b8ad375fe55/kubeflow-pod.png?w=1000 1000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span>\n<span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 54%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"kubeflow-pvc\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/1JOgEjXtq6dzBWzDa7FvoG/48fd50788711879a7029fea56d9c0a63/kubeflow-pvc.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/1JOgEjXtq6dzBWzDa7FvoG/48fd50788711879a7029fea56d9c0a63/kubeflow-pvc.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/1JOgEjXtq6dzBWzDa7FvoG/48fd50788711879a7029fea56d9c0a63/kubeflow-pvc.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/1JOgEjXtq6dzBWzDa7FvoG/48fd50788711879a7029fea56d9c0a63/kubeflow-pvc.png?w=1000 1000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>KubeFlow를 설치하고 나면 Pods, Deployment, Service, ConfigMap 등 모든 컴포넌트들이 자동으로 배포됩니다. default로 PVC는 EBS gp2 볼륨이 설정된 것을 확인하실 수 있습니다.</p>\n<p>EKS에서는 IAM 기반의 RBAC 인증을 사용합니다.\n아래의 명령어를 통해 EKS의 JupyterHub를 로컬의 8080 포트로 포워딩해서 접속하실 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ kubectl port-forward svc/jupyter-lb <span class=\"token parameter variable\">-n</span> kubeflow <span class=\"token number\">8080</span>:80</code></pre></div>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 54.900000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"jupyter\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/59WRGFFpwcKqJcUN1t6Vez/0145c0b7fb92f5bf79380380777c6ab7/jupyter.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/59WRGFFpwcKqJcUN1t6Vez/0145c0b7fb92f5bf79380380777c6ab7/jupyter.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/59WRGFFpwcKqJcUN1t6Vez/0145c0b7fb92f5bf79380380777c6ab7/jupyter.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/59WRGFFpwcKqJcUN1t6Vez/0145c0b7fb92f5bf79380380777c6ab7/jupyter.png?w=1000 1000w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>위와 같이 설치하고 난 이후에 KubeFlow 문서의 git summerization 튜토리얼을 그대로 따라하실 수 있습니다. 모든 컴포넌트가 자동으로 배포되다 보니 생략하고 넘어가는 경우가 많은데 production 환경에서 사용하려면 각 설정 YAML 파일을 내 환경에 맞도록 수정할 필요가 있습니다. 삭제는 아래의 명령어를 통해 실행시키면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>/<span class=\"token variable\">${KFAPP}</span>\n$ <span class=\"token function\">sh</span> <span class=\"token variable\">${KUBEFLOW_SRC}</span>/scripts/kfctl.sh delete k8s</code></pre></div>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://aws.amazon.com/ko/blogs/opensource/kubeflow-amazon-eks/\">https://aws.amazon.com/ko/blogs/opensource/kubeflow-amazon-eks/</a></li>\n<li><a href=\"https://github.com/aws-samples/machine-learning-using-k8s/blob/master/kubeflow.md\">https://github.com/aws-samples/machine-learning-using-k8s/blob/master/kubeflow.md</a></li>\n<li><a href=\"https://eksctl.io/\">https://eksctl.io/</a></li>\n</ul>\n<br>","excerpt":"AWS EKS는 Fully managed K8S 서비스 입니다. 이번 글에서는 EKS 환경에 Kubeflow…"}}}},{"node":{"title":"Why Kubeflow in your Infrastructure?","id":"84dea44b-1c73-5776-aa79-b66ff03e2bc0","slug":"why-kubeflow","publishDate":"March 09, 2019","heroImage":{"title":"cover-dataengineering","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&q=50&fm=webp 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&q=50&fm=webp 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&q=50&fm=webp 1600w","sizes":"(min-width: 1600px) 1600px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=400&h=267&fl=progressive&q=50&fm=jpg 400w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=800&h=533&fl=progressive&q=50&fm=jpg 800w,\nhttps://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1600&h=1067&fl=progressive&q=50&fm=jpg 1600w","sizes":"(min-width: 1600px) 1600px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wAARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgb/xAAcEAACAgMBAQAAAAAAAAAAAAAAAQIREiExYeH/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDK1DF0vgtxW9EylQu8nTotmo+gHfAEP//Z"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7uo9TsqFN9EBsDBqDJ5vXl/4c58a9f94babb15d8fd996c247737656/cover_dataengineering.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":2,"html":"<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 35.03503503503504%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAOCAMAAABq1a50AAABKVBMVEX////o7/3E1/v8/f/p8P60zPrV4/yxy/o5evLF2PvY5fzS4fykwvmpxfl3pPZFgvN5pfZ1o/aYuvidvflEgfNyoPZglPWWuPhKhfM9ffJBgPNdkvRakPRQivSKsfdSi/Rkl/VYj/RAf/JHhPNUjPRbkfRXjvROiPNDgPNEgvNJhfNKhvNGg/NBf/JDgfM8fPJckfRZj/RQifNCgPNLhvNMh/N2o/Z4pPasucy8pWusmmvDtY2VuPiPtPifv/mau/hTi/Te6f3a5v3s8v57pvZqm/W/vLDUmRG4hRDgskhVjfRzofb1+P660fpxoPaKsPeFrfeXufjq8f6vyfpomvU+fvI/fvJWjfRilfVflPU9fPJNh/Ph6/21zfrC1vvG2fvK3PzR4Pz5+/9pAKfEAAAACXBIWXMAABcRAAAXEQHKJvM/AAAAB3RJTUUH6AEUDTMnjWGZPwAAAQtJREFUKM910GdXwjAUgOE4gAuOUgW0NIAptGrQVlBxD1woblHc8///CJObKAcOfT70NMnb5DSEhBsYREP91oYjUlQNYoDicipBRkalMR3GcWncQEkVmvIxQSZxkEpn0BTAtCWWsjY1VNEb5tRkHgozzDHBoKz4H5Zcb7YTzs3z8oIIF30/MGGJ2rR3xyzLVKqp3PIKX+UilGoOWgO/4oUcvb6xubW9s4v/HtlzGLP3oX4gHP6FR8fopHF6xqHo0moT4Fx9fKEuRIeXJe2KXNeUm9uu8C4qJVqgueTeCR7agWWlY12h1hLniWt4lCFvek/PXjks7OwI8PLaBugfvr1rH+RTv31959EPBr/dtDCUhk0EDAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"dept\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/3S0qsh5X6Nue7f5ZBPzUCj/ce6ae1e6ba020a4e7048c5df7224fe21/dept.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/3S0qsh5X6Nue7f5ZBPzUCj/ce6ae1e6ba020a4e7048c5df7224fe21/dept.png?w=250 250w,\nhttps://images.ctfassets.net/tushy4jlcik7/3S0qsh5X6Nue7f5ZBPzUCj/ce6ae1e6ba020a4e7048c5df7224fe21/dept.png?w=500 500w,\nhttps://images.ctfassets.net/tushy4jlcik7/3S0qsh5X6Nue7f5ZBPzUCj/ce6ae1e6ba020a4e7048c5df7224fe21/dept.png?w=999 999w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>실제 ML을 서비스에 적용시키는 일은 위 그림에 나타난 바와 같이 ML 모델링 보다 이외의 작업들이 많이 필요합니다. 특히 서비스의 여러 기능에 ML을 적용시키려 하는 경우, 이러한 파이프라인이 복잡해지고 유지보수가 힘든 방향으로 가는 경우가 많습니다. 이러한 이유로 규모있는 IT 서비스 회사들은 공통의 ML 플랫폼을 구축하곤 합니다.</p>\n<p>앞으로 소개하려는 Kubeflow는 Kubernetes를 기반으로 하는 오픈소스 ML Toolkit 입니다. 아직 버전이 낮아 production 환경에서 사용하는 곳이 많지 않지만 미리 알아두면 좋을 것 같아 컴포넌트들을 하나씩 분석해보려 합니다.</p>\n<ul>\n<li><a href=\"http://swalloow.github.io/why-kubeflow\">Why kubeflow in your Infrastructure</a></li>\n<li><a href=\"http://swalloow.github.io/eks-kubeflow\">Amazon EKS에 Kubeflow 구축하기</a></li>\n<li>Kubeflow의 ModelDB</li>\n<li>Kubeflow의 Hyper parameter Tuning (Katib)</li>\n</ul>\n<br>\n<h2 id=\"why-kubeflow\" style=\"position:relative;\"><a href=\"#why-kubeflow\" aria-label=\"why kubeflow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why Kubeflow?</h2>\n<p>이미 기존의 인프라를 기반으로 자동화된 ML Workflow가 구축되어 있다면, 굳이 Kubeflow로 옮길 필요는 없습니다. 하지만 아래와 같은 상황을 가진 팀이라면 Kubeflow는 좋은 선택지가 될 수 있습니다.</p>\n<ul>\n<li>이미 Kubernetes 기반의 인프라를 사용하고 있으며, ML 인프라를 구축하려는 경우</li>\n<li>서비스를 On-premise, Multi-cloud 환경에 배포해야 하는 경우</li>\n<li>Scalable ML이 필수적이며, 기존의 여러 ML 서비스를 쉽게 배포하고 리소스 관리 비용을 줄이려는 경우</li>\n<li>Research Engineer, Data Scientist 를 위한 인프라 관리의 복잡성을 최소화하고 일관된 인터페이스를 제공하여 몇 번의 클릭만으로 설정을 쉽게 하고 싶은 경우</li>\n</ul>\n<br>\n<h2 id=\"consistency-in-infrastructure\" style=\"position:relative;\"><a href=\"#consistency-in-infrastructure\" aria-label=\"consistency in infrastructure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Consistency in Infrastructure</h2>\n<p>Kubeflow는 Kubernetes 기반의 인프라가 가지는 장점을 그대로 가지고 있습니다. 각 서비스에 대한 Monitoring, Health Check, Replication 등의 기본 요구사항을 갖추고 있으며 쉬운 배포 환경을 제공합니다. 이외에도 아래와 같은 usecase에서 활용될 수 있습니다.</p>\n<ul>\n<li>Research Engineer들이 인프라가 아닌 모델링에만 집중할 수 있는 환경을 제공할 수 있습니다. 모두가 Docker 기반의 추상화된 환경에서 연구를 할 수 있으며, 동일한 데이터, 연구 결과를 공유할 수 있습니다. 가상화된 GPU 환경에서 모델을 분산 학습시킬 수 있으며, TensorFlow, PyTorch, MXNet 등 다양한 프레임워크 환경을 지원할 수 있습니다.</li>\n<li>Kubeflow는 end-to-end를 제공하기 때문에 ML 프로젝트를 production에 반영하는 과정이 단순해집니다. 지속적인 데이터 파이프라인을 구축하여 <strong>argo</strong>를 통해 모델을 업데이트 하고, <strong>seldon</strong>을 통해 production 환경을 테스트해 볼 수 있습니다.</li>\n<li><strong>Katib</strong>을 통해 Hyper parameter tuning 과정을 쉽게 자동화 할 수 있습니다. <strong>Katib</strong>에서 제공하는 인터페이스를 통해 여러 어플리케이션으로 확장시킬 수 있으며, 튜닝 결과를 지속적으로 기록하고 공유할 수 있습니다.</li>\n</ul>\n<br>\n<h2 id=\"resource-utilization-by-the-training--serving-modules\" style=\"position:relative;\"><a href=\"#resource-utilization-by-the-training--serving-modules\" aria-label=\"resource utilization by the training  serving modules permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resource utilization by the Training / Serving modules</h2>\n<p>테스트 환경을 쉽게 구축할 수 있으며, 클라우드 비용을 최적화시킬 수 있습니다. K8S 클러스터는 동일한 인스턴스에 여러 Pod을 실행시킬 수 있습니다. 따라서, 사용하는 리소스를 팀 또는 프로젝트 단위로 namespace를 분리시켜 리소스 사용량을 모니터링 할 수 있습니다.</p>\n<p>일반적인 클라우드 인프라 환경을 서비스 라이프사이클과 연계되어 있지 않기 때문에 training job이 끝난 이후에도 인스턴스가 켜져 있기 때문에 그에 대한 비용을 지불해야 합니다. 하지만 Kubeflow를 사용하는 경우, 사용량에 따라 클러스터를 auto scaling 한다거나 spot instance로 training job을 실행시킬 수 있습니다.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://medium.com/kubeflow/why-kubeflow-in-your-infrastructure-56b8fabf1f3e\">https://medium.com/kubeflow/why-kubeflow-in-your-infrastructure-56b8fabf1f3e</a></li>\n</ul>","excerpt":"실제 ML을 서비스에 적용시키는 일은 위 그림에 나타난 바와 같이 ML…"}}}},{"node":{"title":"KOPS로 AWS에 Kubernetes 클러스터 구축하기","id":"1b7724e0-f57a-512f-aac4-9a43284c7e5f","slug":"aws-kops","publishDate":"February 10, 2019","heroImage":{"title":"cover-devops","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&q=50&fm=webp 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&q=50&fm=webp 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&q=50&fm=webp 1080w","sizes":"(min-width: 1080px) 1080px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=270&h=180&fl=progressive&q=50&fm=jpg 270w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=540&h=360&fl=progressive&q=50&fm=jpg 540w,\nhttps://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1080&h=720&fl=progressive&q=50&fm=jpg 1080w","sizes":"(min-width: 1080px) 1080px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,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"}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/7KaSTt3mdmrYq2ZK1RiJku/dafd981ff3686217ac151b562e8b1412/cover_devops.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":4,"html":"<p>Kubernetes 클러스터를 구성하는 방법은 여러 가지가 있습니다.\n그 중에서 kubeadam은 온프레미스 환경에서 많이 사용하고 kops는 클라우드 환경에서 많이 사용하고 있습니다. 이번 글에서는 kops로 AWS EC2에 Kubernetes 클러스터 구축하는 방법에 대해 정리해보겠습니다.</p>\n<br>\n<h2 id=\"kops-kubectl-awscli-설치-linux\" style=\"position:relative;\"><a href=\"#kops-kubectl-awscli-%EC%84%A4%EC%B9%98-linux\" aria-label=\"kops kubectl awscli 설치 linux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>kops, kubectl, awscli 설치 (Linux)</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># kops 설치</span>\n<span class=\"token function\">wget</span> <span class=\"token parameter variable\">-O</span> kops https://github.com/kubernetes/kops/releases/download/<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-s</span> https://api.github.com/repos/kubernetes/kops/releases/latest <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> tag_name <span class=\"token operator\">|</span> <span class=\"token function\">cut</span> <span class=\"token parameter variable\">-d</span> <span class=\"token string\">'\"'</span> <span class=\"token parameter variable\">-f</span> <span class=\"token number\">4</span><span class=\"token variable\">)</span></span>/kops-linux-amd64\n<span class=\"token function\">chmod</span> +x ./kops\n<span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> ./kops /usr/local/bin/\n\n<span class=\"token comment\"># kubectl 설치</span>\n<span class=\"token function\">wget</span> <span class=\"token parameter variable\">-O</span> kubectl https://storage.googleapis.com/kubernetes-release/release/<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-s</span> https://storage.googleapis.com/kubernetes-release/release/stable.txt<span class=\"token variable\">)</span></span>/bin/linux/amd64/kubectl\n<span class=\"token function\">chmod</span> +x ./kubectl\n<span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> ./kubectl /usr/local/bin/kubectl\n\n<span class=\"token comment\"># aws-cli 설치 (amazon linux라면 불필요)</span>\npip <span class=\"token function\">install</span> awscli</code></pre></div>\n<br>\n<h2 id=\"iam-user-설정\" style=\"position:relative;\"><a href=\"#iam-user-%EC%84%A4%EC%A0%95\" aria-label=\"iam user 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IAM User 설정</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 아래의 권한이 필요</span>\nAmazonEC2FullAccess\nAmazonRoute53FullAccess\nAmazonS3FullAccess\nIAMFullAccess\nAmazonVPCFullAccess</code></pre></div>\n<br>\n<h2 id=\"aws-cli로-iam-계정-생성\" style=\"position:relative;\"><a href=\"#aws-cli%EB%A1%9C-iam-%EA%B3%84%EC%A0%95-%EC%83%9D%EC%84%B1\" aria-label=\"aws cli로 iam 계정 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>aws-cli로 IAM 계정 생성</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">aws iam create-group --group-name kops\n\naws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonEC2FullAccess --group-name kops\naws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonRoute53FullAccess --group-name kops\naws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonS3FullAccess --group-name kops\naws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/IAMFullAccess --group-name kops\naws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonVPCFullAccess --group-name kops\n\naws iam create-user --user-name kops\naws iam add-user-to-group --user-name kops --group-name kops\naws iam create-access-key --user-name kops\n\naws configure   <span class=\"token comment\"># AccessKeyID와 SecretAccessKey 등록</span></code></pre></div>\n<br>\n<h2 id=\"dns-cluster-state-storage-설정\" style=\"position:relative;\"><a href=\"#dns-cluster-state-storage-%EC%84%A4%EC%A0%95\" aria-label=\"dns cluster state storage 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DNS, Cluster State storage 설정</h2>\n<ul>\n<li>kops 1.6.2 버전 이상이라면 DNS 설정은 옵션 (gossip-based cluster)</li>\n<li>Cluster Configuration Storage로 S3를 사용 (Bucket 미리 생성해야 함)</li>\n<li>S3 default bucket encryption을 사용할 수 있음</li>\n<li>default encryption 설정이 안되어 있다면 kops에서 AES256 encryption</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Create Bucket</span>\naws s3api create-bucket <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--bucket</span> prefix-example-com-state-store <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--region</span> ap-northeast-2\n\n<span class=\"token comment\"># S3 versioning</span>\naws s3api put-bucket-versioning <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--bucket</span> prefix-example-com-state-store <span class=\"token punctuation\">\\</span>\n    --versioning-configuration <span class=\"token assign-left variable\">Status</span><span class=\"token operator\">=</span>Enabled</code></pre></div>\n<br>\n<h2 id=\"kubernetes-cluster-생성\" style=\"position:relative;\"><a href=\"#kubernetes-cluster-%EC%83%9D%EC%84%B1\" aria-label=\"kubernetes cluster 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes Cluster 생성</h2>\n<ul>\n<li>kops를 통해 생성된 인스턴스는 자동으로 Auto Scaling 그룹에 들어감</li>\n<li><code class=\"language-text\">kops create</code>: cluster configuration을 생성, SSH-Key가 필요</li>\n<li><code class=\"language-text\">kops edit</code>: cluster configuation을 수정</li>\n<li><code class=\"language-text\">kops update</code>: Build 단계, kubernetes component를 모두 설치하고 나면 ready 상태로 전환</li>\n<li><code class=\"language-text\">kops delete</code>: cluster 제거, --yes (구성요소까지 전부 삭제)</li>\n<li><code class=\"language-text\">kops rolling-update</code>: downtime이 없는 rolling-update 실행</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Environment</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">NAME</span><span class=\"token operator\">=</span>myfirstcluster.example.com  <span class=\"token comment\"># DNS가 설정되어 있는 경우</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">NAME</span><span class=\"token operator\">=</span>myfirstcluster.k8s.local    <span class=\"token comment\"># DNS가 설정되어 있지 않은 경우</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">KOPS_STATE_STORE</span><span class=\"token operator\">=</span>s3://prefix-example-com-state-store\n\n<span class=\"token comment\"># Seoul region</span>\naws ec2 describe-availability-zones <span class=\"token parameter variable\">--region</span> ap-northeast-2\nkops create cluster <span class=\"token parameter variable\">--zones</span> ap-northeast-2 <span class=\"token variable\">${NAME}</span>\nkops edit cluster <span class=\"token variable\">${NAME}</span>\nkops update cluster <span class=\"token variable\">${NAME}</span> <span class=\"token parameter variable\">--yes</span>\nkops validate cluster\n\n<span class=\"token comment\"># Kubectl</span>\nkubectl get nodes\nkubectl cluster-info\nkubectl <span class=\"token parameter variable\">-n</span> kube-system get po   <span class=\"token comment\"># system pod</span>\n\n<span class=\"token comment\"># Dashboard</span>\nkops get secrets admin <span class=\"token parameter variable\">-oplaintext</span>\nkubectl apply <span class=\"token parameter variable\">-f</span> https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml\n\n<span class=\"token comment\"># Access https://&lt;kubernetes-master-hostname>/ui</span>\nkops get secrets admin <span class=\"token parameter variable\">--type</span> secret <span class=\"token parameter variable\">-oplaintext</span>\n\n<span class=\"token comment\"># Stop cluster</span>\n<span class=\"token comment\"># Change minSize, MaxSize to 0</span>\nkops get ig\nkops edit ig nodes\nkops edit ig master</code></pre></div>\n<br>\n<h2 id=\"advanced\" style=\"position:relative;\"><a href=\"#advanced\" aria-label=\"advanced permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Advanced</h2>\n<ul>\n<li>Network topology를 설정할 수 있음 (public, private)</li>\n<li>Private: VPC내의 private subnet으로 생성</li>\n<li>Public: VPC내의 public subnet으로 생성 (routed to Internet Gateway)</li>\n<li>Multiple zone, HA Master를 구성할 수 있음 (--master-zones=us-east-1b,us-east-1c,us-east-1d)</li>\n<li>Instance Group을 지정 가능 (<a href=\"https://github.com/kubernetes/kops/blob/master/docs/instance_groups.md\">https://github.com/kubernetes/kops/blob/master/docs/instance_groups.md</a>)</li>\n<li>AMI를 지정가능, CoreOS AMI</li>\n<li>Container Network Interface (CNI) 지정 가능 (<a href=\"https://kubernetes.io/docs/concepts/cluster-administration/networking/\">https://kubernetes.io/docs/concepts/cluster-administration/networking/</a>)</li>\n<li>Authorization (<a href=\"https://kubernetes.io/docs/reference/access-authn-authz/authorization/\">https://kubernetes.io/docs/reference/access-authn-authz/authorization/</a>)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># SSH Key</span>\nssh-keygen <span class=\"token parameter variable\">-t</span> rsa <span class=\"token parameter variable\">-f</span> <span class=\"token variable\">$NAME</span>.key <span class=\"token parameter variable\">-N</span> <span class=\"token string\">''</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">PUBKEY</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">$NAME</span>.key.pub\"</span>\n\n<span class=\"token comment\"># CoreOS Image</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">IMAGE</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-s</span> https://coreos.com/dist/aws/aws-stable.json<span class=\"token operator\">|</span><span class=\"token function\">sed</span> <span class=\"token string\">'s/-/_/g'</span><span class=\"token operator\">|</span>jq <span class=\"token string\">'.'</span>$REGION<span class=\"token string\">'.hvm'</span><span class=\"token operator\">|</span><span class=\"token function\">sed</span> <span class=\"token string\">'s/_/-/g'</span> <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> <span class=\"token string\">'s/\\\"//g'</span><span class=\"token variable\">)</span></span>\n\n<span class=\"token comment\"># Create Cluster</span>\nkops create cluster --kubernetes-version<span class=\"token operator\">=</span><span class=\"token number\">1.12</span>.1 <span class=\"token punctuation\">\\</span>\n    --ssh-public-key <span class=\"token variable\">$PUBKEY</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--networking</span> flannel <span class=\"token punctuation\">\\</span>\n    --api-loadbalancer-type public <span class=\"token punctuation\">\\</span>\n    --admin-access <span class=\"token number\">0.0</span>.0.0/0 <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--authorization</span> RBAC <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--zones</span> ap-northeast-2 <span class=\"token punctuation\">\\</span>\n    --master-zones ap-northeast-2 <span class=\"token punctuation\">\\</span>\n    --master-size t2.medium <span class=\"token punctuation\">\\</span>\n    --node-size t2.medium <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--image</span> <span class=\"token variable\">$IMAGE</span> <span class=\"token punctuation\">\\</span>\n    --node-count <span class=\"token number\">3</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--cloud</span> aws <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--bastion</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--name</span> <span class=\"token variable\">$NAME</span> <span class=\"token punctuation\">\\</span>\n    <span class=\"token parameter variable\">--yes</span></code></pre></div>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<ul>\n<li><a href=\"https://github.com/kubernetes/kops\">https://github.com/kubernetes/kops</a></li>\n<li><a href=\"https://kubernetes.io/ko/docs/setup/custom-cloud/kops/\">https://kubernetes.io/ko/docs/setup/custom-cloud/kops/</a></li>\n</ul>\n<br>","excerpt":"Kubernetes 클러스터를 구성하는 방법은 여러 가지가 있습니다.\n그 중에서 kubeadam은 온프레미스 환경에서 많이 사용하고 kops…"}}}},{"node":{"title":"분산 컨테이너 환경에서의 디자인 패턴 (1)","id":"b5808ba3-22f9-5847-b6ba-e8960369c054","slug":"container-patterns","publishDate":"January 26, 2019","heroImage":{"title":"cover-develop","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=450&h=300&q=50&fm=webp 450w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=900&h=600&q=50&fm=webp 900w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&h=1200&q=50&fm=webp 1800w","sizes":"(min-width: 1800px) 1800px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&h=1200&fl=progressive&q=50&fm=jpg","srcSet":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=450&h=300&fl=progressive&q=50&fm=jpg 450w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=900&h=600&fl=progressive&q=50&fm=jpg 900w,\nhttps://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&h=1200&fl=progressive&q=50&fm=jpg 1800w","sizes":"(min-width: 1800px) 1800px, 100vw"}},"layout":"constrained","width":1800,"height":1200,"placeholder":{"fallback":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4gJASUNDX1BST0ZJTEUAAQEAAAIwQURCRQIQAABtbnRyUkdCIFhZWiAHzwAGAAMAAAAAAABhY3NwQVBQTAAAAABub25lAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLUFEQkUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApjcHJ0AAAA/AAAADJkZXNjAAABMAAAAGt3dHB0AAABnAAAABRia3B0AAABsAAAABRyVFJDAAABxAAAAA5nVFJDAAAB1AAAAA5iVFJDAAAB5AAAAA5yWFlaAAAB9AAAABRnWFlaAAACCAAAABRiWFlaAAACHAAAABR0ZXh0AAAAAENvcHlyaWdodCAxOTk5IEFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkAAAAZGVzYwAAAAAAAAARQWRvYmUgUkdCICgxOTk4KQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAGN1cnYAAAAAAAAAAQIzAABjdXJ2AAAAAAAAAAECMwAAY3VydgAAAAAAAAABAjMAAFhZWiAAAAAAAACcGAAAT6UAAAT8WFlaIAAAAAAAADSNAACgLAAAD5VYWVogAAAAAAAAJjEAABAvAAC+nP/bAEMAEAsMDgwKEA4NDhIREBMYKBoYFhYYMSMlHSg6Mz08OTM4N0BIXE5ARFdFNzhQbVFXX2JnaGc+TXF5cGR4XGVnY//bAEMBERISGBUYLxoaL2NCOEJjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY//AABEIAA0AFAMBIgACEQEDEQH/xAAXAAEBAQEAAAAAAAAAAAAAAAAEAAEF/8QAIhAAAgIDAAAHAQAAAAAAAAAAAQIDEQAEEhMUISIxQaGx/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP/xAAXEQEBAQEAAAAAAAAAAAAAAAAAEQEh/9oADAMBAAIRAxEAPwDgvHMddmjWmr2mhX7hNfzgkucjwwLNcn+Y2LaPKB0VlArn4vNm2YxGyrrqCfu8nkhdFkChz65YR5umvkDLCT//2Q=="}},"ogimg":{"src":"https://images.ctfassets.net/tushy4jlcik7/4W9SzEIJpHuwsUBnxSSypH/3a18765095ea5756c742b7adb83a0518/cover_develop.jpg?w=1800&q=50"}},"body":{"childMarkdownRemark":{"timeToRead":3,"html":"<p>구글 클라우드 팀이 Kubernetes와 같은 Container Orchestration 기술을 개발하면서 겪은\n분산 컨테이너 환경에서의 디자인 패턴에 대해 정리한 내용입니다.\n분산 어플리케이션을 컨테이너 환경으로 옮기려는 분들에게 많은 도움이 될 듯 합니다.</p>\n<ul>\n<li><a href=\"http://swalloow.github.io/container-patterns\">분산 컨테이너 환경에서의 디자인 패턴 1. Single-Node Patterns</a></li>\n<li><a href=\"http://swalloow.github.io/container-patterns2\">분산 컨테이너 환경에서의 디자인 패턴 2. Multi-Node Serving Patterns</a></li>\n<li><a href=\"http://swalloow.github.io/container-patterns3\">분산 컨테이너 환경에서의 디자인 패턴 3. Batch Computational Patterns</a></li>\n</ul>\n<br>\n<h2 id=\"modular-container-design\" style=\"position:relative;\"><a href=\"#modular-container-design\" aria-label=\"modular container design permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Modular Container Design</h2>\n<p>최근 많은 개발 환경이 Docker 기반의 컨테이너 환경으로 옮겨가고 있습니다.\n그 중에서는 복잡한 의존성에서 벗어나 독립적으로 운영하고 싶어서 옮기는 경우가 많습니다.</p>\n<p>하지만 분산 컨테이너 환경은 아주 복잡하게 연결되어 있어서 운영하기 힘듭니다.\n복잡한 연결을 쉽게 이해하려면 이 문제가 어디에 해당하는지 경계를 잘 정의하는 것이 중요합니다.\n이렇게 <strong>경계를 정의하고 분류하는 것을 모듈화</strong>라고 부릅니다.</p>\n<p>우리는 과거부터 효율적인 코드를 작성하기 위해 절차지향 프로그래밍에서 객체지향 프로그래밍으로 변화해왔습니다.\n객체지향 프로그래밍의 클래스는 경계를 정의한다는 측면에서 컨테이너 환경과 유사한 면이 있습니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 51.225490196078425%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAUCAMAAADImI+JAAABXFBMVEX////x9f3b4/re5fr4+Pj8/Pz6+vr7+vv7+/u0xvU5ZuZKc+alue9GcOfR2/bCz/KHou/e3tn67sn5+PPz1Xbqtxr28N7N2Ph5mO5zked5mO2FoO35+fnt5Mfz5LT6+PPq6urr6uv9+ez68M/q37768dP6+PDr5tn6+ff35KfrvS/0137qtxn789zx1dvpp4nKxGe75LXy9/PbdIjGACZhn1YNsirc79/67cXx0GndvFboxl/y1Hfw1NrbpK+5ybay37rz+PT+/v7q6erp6On9/f3y8vLo6Oju7u7t7e7p6env7+/r6+t+1Y5Rx2ZFu1pRxmah36ztsb7VR2PKPFfZYXjfeo/aeIv29vbAzO+GoevY3vBMxmIOsip804vmk6TKI0TRLk7PLk78+/yjt+9CbefP2ff+//47wFJsz30MsirGACXLI0R904zk9ujb89/r+O777/H22d/33uOsbq18AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH6AEUCgUXJ+suYwAAAR1JREFUKM9jYCAVMDIxMTGjC7KwsrFzoIlxcnFxcaMr5OHlYyBKIb+AoJAwMQrZGERExdDExCUkpaTRFcpwyMrJY3hHAZsfFTFElJRVlFUxfK2mroHuGU1RUVEtdIUc2jq67MQo1NM3MDQiRqGxiamZOZqYhaWVtQ26Qls7ewdHVCEnZxdXN3cWVEEPoICnOyuyMi8vJxDt7Y7kR093GTDtA5EDAl8//4BAMCsoOCQ4FBLUYeER7GxgZmRUNBtES0xsbGwcmBVvYmKSAAmYxCQGhmQwMyU1DcqKMTMzQ1fIxpCekckGZUIwSGFWFlxhdg5E1pU1IBciLePqygph5eXn5xeAWYVFRUXFEO+5srK6OoEBKxCAvOOECRiwAAAqADE4zxYTywAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"modular\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/doVNjwKnTcwMID1kASvar/ce6cfff223d96e1c14ac2dc674de3f19/modular.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/doVNjwKnTcwMID1kASvar/ce6cfff223d96e1c14ac2dc674de3f19/modular.png?w=408 408w,\nhttps://images.ctfassets.net/tushy4jlcik7/doVNjwKnTcwMID1kASvar/ce6cfff223d96e1c14ac2dc674de3f19/modular.png?w=816 816w,\nhttps://images.ctfassets.net/tushy4jlcik7/doVNjwKnTcwMID1kASvar/ce6cfff223d96e1c14ac2dc674de3f19/modular.png?w=1632 1632w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>과거 모놀리틱 아키텍쳐에서는 왼쪽 그림과 같은 구조로 설계되어 왔습니다.\n우리가 기여하거나 자주 수정하는 코드가 있는 반면, 코어 모듈이나 공통에 해당하는 부분은 잘 변하지 않습니다.</p>\n<p>컨테이너 환경은 이와 조금 다릅니다.\n우선 <strong>컨테이너 환경에서 컨테이너는 하나의 어플리케이션이 아니라는 점</strong>을 이해하고 있어야 합니다.\n하나의 컨테이너는 객체지향 언어의 클래스 또는 함수와 유사합니다.\n오른쪽 그림처럼 작은 모듈 조각을 모으고 조립해서 다음 어플리케이션을 설계하는 형태가 되어야 합니다.</p>\n<br>\n<h2 id=\"benefit\" style=\"position:relative;\"><a href=\"#benefit\" aria-label=\"benefit permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Benefit</h2>\n<p>위와 같은 컨테이너 환경을 구성했을 때 가지는 장점은 아래와 같습니다.</p>\n<ul>\n<li>이미 만들어 놓은 컨테이너를 재사용할 수 있고 사용하기 쉬움</li>\n<li>컨테이너 경계에 따라 팀의 역할을 분리시킬 수 있음</li>\n<li>분리되어 있기 때문에 각 모듈에 대해 더 깊게 이해할 수 있음</li>\n<li>각 모듈에 대해 작은 수정사항을 빠르게 업데이트할 수 있음</li>\n<li>흔히 얘기하는 관심사의 분리를 만족시킬 수 있음 (Seperate concerns)</li>\n</ul>\n<br>\n<h2 id=\"requirements\" style=\"position:relative;\"><a href=\"#requirements\" aria-label=\"requirements permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Requirements</h2>\n<p>위와 같은 컨테이너 환경을 구성하기 위해 필요한 요소는 아래와 같습니다.</p>\n<ul>\n<li>공통된 네임스페이스 (PID, IPC, 네트워크 등), 마치 localhost 처럼 사용할 수 있도록 하나의 컨테이너가 다른 컨테이너의 프로세스를 컨트롤 할 수 있어야 합니다.</li>\n<li>공유할 수 있는 파일 시스템, Kubernetes의 PV, PVC에 내한 내용을 떠올리면 이해하기 쉽습니다.</li>\n<li>어플리케이션을 구성할 때 노드의 분리도 고려되어야 합니다. 예시로 WordPress-MySQL 어플리케이션을 배포한다고 가정했을 때, WordPress가 배포된 노드와 MySQL 노드의 위치가 달라야 합니다. 그리고 WordPress, MySQL에 각각에 대한 Scale-out도 고려되어야 합니다.</li>\n<li>컨테이너가 런타임 시점에 파라메터로 설정 값을 받을 수 있도록 설계되어야 합니다. 그리고 각 이미지에 대한 문서화도 필요합니다.</li>\n</ul>\n<p>특히 여러 컨테이너에서 공통으로 사용하는 라이브러리의 경우 필요</p>\n<br>\n<h2 id=\"sidecar-pattern\" style=\"position:relative;\"><a href=\"#sidecar-pattern\" aria-label=\"sidecar pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sidecar Pattern</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 600px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 51.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"sidecar\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/3eOFLmEIV0jPFUVBIKZ8r1/aca7792cb3600ff21950e391b98797aa/sidecar.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/3eOFLmEIV0jPFUVBIKZ8r1/aca7792cb3600ff21950e391b98797aa/sidecar.png?w=150 150w,\nhttps://images.ctfassets.net/tushy4jlcik7/3eOFLmEIV0jPFUVBIKZ8r1/aca7792cb3600ff21950e391b98797aa/sidecar.png?w=300 300w,\nhttps://images.ctfassets.net/tushy4jlcik7/3eOFLmEIV0jPFUVBIKZ8r1/aca7792cb3600ff21950e391b98797aa/sidecar.png?w=600 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>이제부터 자주 사용되는 세 가지 디자인 패턴을 소개드리려고 합니다.\n먼저 첫 번째는 사이드 카 패턴입니다.\n<strong>사이드 카 패턴은 이전에 사용되던 컨테이너의 기능을 확장시키고 싶을 때</strong> 유용하게 사용됩니다.\n여기서 이전에 사용되던 컨테이너란 잘 변하지 않으며 같은 작업을 반복하는 어플리케이션을 말합니다.</p>\n<p>위 그림의 예시에서 이전에 사용되던 컨테이너는 왼쪽의 node.js 어플리케이션 입니다.\nnode.js 어플리케이션은 단순히 파일 시스템에 접근하여 어떤 작업을 수행하는 일만 합니다.\n만일 파일 시스템에 대해 git 동기화 기능을 추가하고 싶다면, 오른쪽 컨테이너처럼 확장시킬 수 있습니다.\nnode.js 어플리케이션은 사이드 카 컨테이너가 어떤 작업을 수행하는지 고려할 필요가 없습니다.\n사이드 카 컨테이너 역시 어떤 어플리케이션이 이 파일을 서빙하는지 고려할 필요가 없습니다.\n앞서 말한 것처럼 관심사의 분리를 만족시키며, 컨테이너를 관리하는 팀을 분리시킬 수 있습니다.\n또한 사이드 카 컨테이너를 다른 어플리케이션에서 재사용할 수 있고, 더 다양한 기능으로 확장시킬 수 있습니다.</p>\n<br>\n<h2 id=\"ambassador-pattern\" style=\"position:relative;\"><a href=\"#ambassador-pattern\" aria-label=\"ambassador pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ambassador Pattern</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 600px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 51.83333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ambassador\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/6VtqR97rgLFkq5BCISpkus/3815c60404a25e480c0d90fc6dcf8c86/ambassador.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/6VtqR97rgLFkq5BCISpkus/3815c60404a25e480c0d90fc6dcf8c86/ambassador.png?w=150 150w,\nhttps://images.ctfassets.net/tushy4jlcik7/6VtqR97rgLFkq5BCISpkus/3815c60404a25e480c0d90fc6dcf8c86/ambassador.png?w=300 300w,\nhttps://images.ctfassets.net/tushy4jlcik7/6VtqR97rgLFkq5BCISpkus/3815c60404a25e480c0d90fc6dcf8c86/ambassador.png?w=600 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>다음은 엠베서더 패턴입니다.\n<strong>엠베서더 패턴은 어플리케이션을 대신하여 외부의 네트워크 또는 요청을 처리해야할 때</strong> 유용하게 사용됩니다.</p>\n<p>위 그림의 예시에서 어플리케이션은 PHP 앱이고 Memcache를 사용한 지속적인 해싱이 필요하다고 가정해보겠습니다.\n그리고 Memcache 사용을 위해 <a href=\"https://github.com/twitter/twemproxy\">twemproxy</a>라는 라이브러리를 가져와야 합니다.\n위 그림처럼 어플리케이션과 twemproxy 컨테이너를 분리시킨다면,\ntwemproxy 컨테이너는 외부에 있는 Memcache 샤드를 관리하고 통신하는 역할을 수행할 수 있습니다.\n기존에 있던 어플리케이션 컨테이너는 twemproxy 컨테이너와 같은 네임스페이스에 존재하지만, 외부의 통신에 대해서는 관여할 필요가 없습니다.\n역시 마찬가지로 관심사의 분리를 만족시키며, 재사용될 수 있고, 다양한 기능으로 확장시킬 수 있습니다.</p>\n<br>\n<h2 id=\"adapter-pattern\" style=\"position:relative;\"><a href=\"#adapter-pattern\" aria-label=\"adapter pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adapter Pattern</h2>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 600px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 51.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"adapter\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/6Ba6vabN2mN8iHQHeLm8BI/bd698fe5bce2c14294e9ef16a3afd28f/adapter.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/6Ba6vabN2mN8iHQHeLm8BI/bd698fe5bce2c14294e9ef16a3afd28f/adapter.png?w=150 150w,\nhttps://images.ctfassets.net/tushy4jlcik7/6Ba6vabN2mN8iHQHeLm8BI/bd698fe5bce2c14294e9ef16a3afd28f/adapter.png?w=300 300w,\nhttps://images.ctfassets.net/tushy4jlcik7/6Ba6vabN2mN8iHQHeLm8BI/bd698fe5bce2c14294e9ef16a3afd28f/adapter.png?w=600 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>다음은 어댑터 패턴입니다.\n<strong>어댑터 패턴은 추상화된 레이어가 필요할 때</strong> 유용하게 사용됩니다.</p>\n<p>대표적인 예시로 위 그림과 같은 모니터링 에이전트가 있습니다.\n일반적으로 Redis, Memcache, MySQL 등 다양한 컴포넌트에 모니터링이 필요합니다.\n모놀리틱 구조로 설계되었다면, 새로운 컴포넌트에 대한 지원이 필요할때마다 변경이 필요합니다.\n하지만 분리되어 있는 공통 인터페이스가 존재한다면, 새로운 컴포넌트를 쉽게 추가할 수 있습니다.\n특히 오픈소스 진영에서는 많은 사람들이 다양한 컴포넌트를 사용하기 때문에 많이 활용됩니다.</p>\n<p><span\n        class=\"gatsby-resp-image-wrapper\"\n        style=\"position: relative; display: block; ; max-width: 600px; margin-left: auto; margin-right: auto;\"\n      >\n        <span\n          class=\"gatsby-resp-image-background-image\"\n          style=\"padding-bottom: 68.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n        >\n          <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"prom\"\n        title=\"\"\n        src=\"https://images.ctfassets.net/tushy4jlcik7/q3ONVG6iJnvvNHTxXouZn/07da3ec78cb800b07464ee9aae633571/prom.png\"\n        srcset=\"https://images.ctfassets.net/tushy4jlcik7/q3ONVG6iJnvvNHTxXouZn/07da3ec78cb800b07464ee9aae633571/prom.png?w=150 150w,\nhttps://images.ctfassets.net/tushy4jlcik7/q3ONVG6iJnvvNHTxXouZn/07da3ec78cb800b07464ee9aae633571/prom.png?w=300 300w,\nhttps://images.ctfassets.net/tushy4jlcik7/q3ONVG6iJnvvNHTxXouZn/07da3ec78cb800b07464ee9aae633571/prom.png?w=600 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        loading=\"lazy\"\n      />\n        </span>\n      </span></p>\n<p>많이 사용하는 prometheus exporter도 이와 같은 패턴으로 설계되어 있습니다.\nexporter는 모니터링 시스템과 쉽게 결합할 수 있습니다.\n그리고 exporter와 memcache, redis는 결합해서 하나의 컨테이너로 배포하는 형태입니다.\nredis-exporter에 코드 변경이 이루어지더라도 memcache-exporter는 변경될 필요가 없습니다.</p>\n<br>\n<h2 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h2>\n<p>이외에도 Replication, Micro service Load Balancer에 사용되는 다양한 패턴이 존재합니다.\n분산 컨테이너 환경에서 어플리케이션을 개발하는 일은 레고 블럭을 조립하는 것과 비슷합니다.\n더 자세한 내용이 궁금하신 분은 아래 링크를 확인하시면 됩니다.</p>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=Ph3t8jIt894\">DockerCon - Container patterns for modular distributed system design</a></li>\n<li><a href=\"https://static.googleusercontent.com/media/research.google.com/ko//pubs/archive/45406.pdf\">GooglePaper - Design patterns for container-based distributed systems</a></li>\n</ul>\n<br>","excerpt":"구글 클라우드 팀이 Kubernetes와 같은 Container Orchestration…"}}}}]}},"pageContext":{"basePath":"","paginationPath":"","pageNumber":5,"humanPageNumber":6,"skip":31,"limit":6,"numberOfPages":16,"previousPagePath":"/5","nextPagePath":"/7"}},"staticQueryHashes":["1946181227","2744905544","3732430097"]}